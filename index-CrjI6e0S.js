var bR=Object.defineProperty;var Pk=r=>{throw TypeError(r)};var wR=(r,t,e)=>t in r?bR(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var nt=(r,t,e)=>wR(r,typeof t!="symbol"?t+"":t,e),Eb=(r,t,e)=>t.has(r)||Pk("Cannot "+e);var l=(r,t,e)=>(Eb(r,t,"read from private field"),e?e.call(r):t.get(r)),A=(r,t,e)=>t.has(r)?Pk("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),b=(r,t,e,n)=>(Eb(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),C=(r,t,e)=>(Eb(r,t,"access private method"),e);var He=(r,t,e,n)=>({set _(s){b(r,t,s,e)},get _(){return l(r,t,n)}});function SR(r,t){for(var e=0;e<t.length;e++){const n=t[e];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in r)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();function Ny(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function AR(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var t=r.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}),e}var Cb={exports:{}},Mm={},Tb={exports:{}},$t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dk;function _R(){if(Dk)return $t;Dk=1;var r=Symbol.for("react.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.iterator;function x(j){return j===null||typeof j!="object"?null:(j=g&&j[g]||j["@@iterator"],typeof j=="function"?j:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,S={};function _(j,G,ut){this.props=j,this.context=G,this.refs=S,this.updater=ut||v}_.prototype.isReactComponent={},_.prototype.setState=function(j,G){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,G,"setState")},_.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function E(){}E.prototype=_.prototype;function N(j,G,ut){this.props=j,this.context=G,this.refs=S,this.updater=ut||v}var P=N.prototype=new E;P.constructor=N,k(P,_.prototype),P.isPureReactComponent=!0;var R=Array.isArray,M=Object.prototype.hasOwnProperty,O={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function H(j,G,ut){var St,Nt={},Tt=null,Pt=null;if(G!=null)for(St in G.ref!==void 0&&(Pt=G.ref),G.key!==void 0&&(Tt=""+G.key),G)M.call(G,St)&&!I.hasOwnProperty(St)&&(Nt[St]=G[St]);var Ht=arguments.length-2;if(Ht===1)Nt.children=ut;else if(1<Ht){for(var Zt=Array(Ht),Te=0;Te<Ht;Te++)Zt[Te]=arguments[Te+2];Nt.children=Zt}if(j&&j.defaultProps)for(St in Ht=j.defaultProps,Ht)Nt[St]===void 0&&(Nt[St]=Ht[St]);return{$$typeof:r,type:j,key:Tt,ref:Pt,props:Nt,_owner:O.current}}function K(j,G){return{$$typeof:r,type:j.type,key:G,ref:j.ref,props:j.props,_owner:j._owner}}function W(j){return typeof j=="object"&&j!==null&&j.$$typeof===r}function Y(j){var G={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ut){return G[ut]})}var q=/\/+/g;function tt(j,G){return typeof j=="object"&&j!==null&&j.key!=null?Y(""+j.key):G.toString(36)}function et(j,G,ut,St,Nt){var Tt=typeof j;(Tt==="undefined"||Tt==="boolean")&&(j=null);var Pt=!1;if(j===null)Pt=!0;else switch(Tt){case"string":case"number":Pt=!0;break;case"object":switch(j.$$typeof){case r:case t:Pt=!0}}if(Pt)return Pt=j,Nt=Nt(Pt),j=St===""?"."+tt(Pt,0):St,R(Nt)?(ut="",j!=null&&(ut=j.replace(q,"$&/")+"/"),et(Nt,G,ut,"",function(Te){return Te})):Nt!=null&&(W(Nt)&&(Nt=K(Nt,ut+(!Nt.key||Pt&&Pt.key===Nt.key?"":(""+Nt.key).replace(q,"$&/")+"/")+j)),G.push(Nt)),1;if(Pt=0,St=St===""?".":St+":",R(j))for(var Ht=0;Ht<j.length;Ht++){Tt=j[Ht];var Zt=St+tt(Tt,Ht);Pt+=et(Tt,G,ut,Zt,Nt)}else if(Zt=x(j),typeof Zt=="function")for(j=Zt.call(j),Ht=0;!(Tt=j.next()).done;)Tt=Tt.value,Zt=St+tt(Tt,Ht++),Pt+=et(Tt,G,ut,Zt,Nt);else if(Tt==="object")throw G=String(j),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Pt}function lt(j,G,ut){if(j==null)return j;var St=[],Nt=0;return et(j,St,"","",function(Tt){return G.call(ut,Tt,Nt++)}),St}function ot(j){if(j._status===-1){var G=j._result;G=G(),G.then(function(ut){(j._status===0||j._status===-1)&&(j._status=1,j._result=ut)},function(ut){(j._status===0||j._status===-1)&&(j._status=2,j._result=ut)}),j._status===-1&&(j._status=0,j._result=G)}if(j._status===1)return j._result.default;throw j._result}var it={current:null},U={transition:null},Q={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:U,ReactCurrentOwner:O};function at(){throw Error("act(...) is not supported in production builds of React.")}return $t.Children={map:lt,forEach:function(j,G,ut){lt(j,function(){G.apply(this,arguments)},ut)},count:function(j){var G=0;return lt(j,function(){G++}),G},toArray:function(j){return lt(j,function(G){return G})||[]},only:function(j){if(!W(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},$t.Component=_,$t.Fragment=e,$t.Profiler=s,$t.PureComponent=N,$t.StrictMode=n,$t.Suspense=u,$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,$t.act=at,$t.cloneElement=function(j,G,ut){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var St=k({},j.props),Nt=j.key,Tt=j.ref,Pt=j._owner;if(G!=null){if(G.ref!==void 0&&(Tt=G.ref,Pt=O.current),G.key!==void 0&&(Nt=""+G.key),j.type&&j.type.defaultProps)var Ht=j.type.defaultProps;for(Zt in G)M.call(G,Zt)&&!I.hasOwnProperty(Zt)&&(St[Zt]=G[Zt]===void 0&&Ht!==void 0?Ht[Zt]:G[Zt])}var Zt=arguments.length-2;if(Zt===1)St.children=ut;else if(1<Zt){Ht=Array(Zt);for(var Te=0;Te<Zt;Te++)Ht[Te]=arguments[Te+2];St.children=Ht}return{$$typeof:r,type:j.type,key:Nt,ref:Tt,props:St,_owner:Pt}},$t.createContext=function(j){return j={$$typeof:o,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:i,_context:j},j.Consumer=j},$t.createElement=H,$t.createFactory=function(j){var G=H.bind(null,j);return G.type=j,G},$t.createRef=function(){return{current:null}},$t.forwardRef=function(j){return{$$typeof:d,render:j}},$t.isValidElement=W,$t.lazy=function(j){return{$$typeof:m,_payload:{_status:-1,_result:j},_init:ot}},$t.memo=function(j,G){return{$$typeof:p,type:j,compare:G===void 0?null:G}},$t.startTransition=function(j){var G=U.transition;U.transition={};try{j()}finally{U.transition=G}},$t.unstable_act=at,$t.useCallback=function(j,G){return it.current.useCallback(j,G)},$t.useContext=function(j){return it.current.useContext(j)},$t.useDebugValue=function(){},$t.useDeferredValue=function(j){return it.current.useDeferredValue(j)},$t.useEffect=function(j,G){return it.current.useEffect(j,G)},$t.useId=function(){return it.current.useId()},$t.useImperativeHandle=function(j,G,ut){return it.current.useImperativeHandle(j,G,ut)},$t.useInsertionEffect=function(j,G){return it.current.useInsertionEffect(j,G)},$t.useLayoutEffect=function(j,G){return it.current.useLayoutEffect(j,G)},$t.useMemo=function(j,G){return it.current.useMemo(j,G)},$t.useReducer=function(j,G,ut){return it.current.useReducer(j,G,ut)},$t.useRef=function(j){return it.current.useRef(j)},$t.useState=function(j){return it.current.useState(j)},$t.useSyncExternalStore=function(j,G,ut){return it.current.useSyncExternalStore(j,G,ut)},$t.useTransition=function(){return it.current.useTransition()},$t.version="18.3.1",$t}var Nk;function pA(){return Nk||(Nk=1,Tb.exports=_R()),Tb.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rk;function kR(){if(Rk)return Mm;Rk=1;var r=pA(),t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(d,u,p){var m,g={},x=null,v=null;p!==void 0&&(x=""+p),u.key!==void 0&&(x=""+u.key),u.ref!==void 0&&(v=u.ref);for(m in u)n.call(u,m)&&!i.hasOwnProperty(m)&&(g[m]=u[m]);if(d&&d.defaultProps)for(m in u=d.defaultProps,u)g[m]===void 0&&(g[m]=u[m]);return{$$typeof:t,type:d,key:x,ref:v,props:g,_owner:s.current}}return Mm.Fragment=e,Mm.jsx=o,Mm.jsxs=o,Mm}var Mk;function ER(){return Mk||(Mk=1,Cb.exports=kR()),Cb.exports}var T=ER(),X=pA();const OC=Ny(X);var I2={},Pb={exports:{}},ws={},Db={exports:{}},Nb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ok;function CR(){return Ok||(Ok=1,function(r){function t(U,Q){var at=U.length;U.push(Q);t:for(;0<at;){var j=at-1>>>1,G=U[j];if(0<s(G,Q))U[j]=Q,U[at]=G,at=j;else break t}}function e(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var Q=U[0],at=U.pop();if(at!==Q){U[0]=at;t:for(var j=0,G=U.length,ut=G>>>1;j<ut;){var St=2*(j+1)-1,Nt=U[St],Tt=St+1,Pt=U[Tt];if(0>s(Nt,at))Tt<G&&0>s(Pt,Nt)?(U[j]=Pt,U[Tt]=at,j=Tt):(U[j]=Nt,U[St]=at,j=St);else if(Tt<G&&0>s(Pt,at))U[j]=Pt,U[Tt]=at,j=Tt;else break t}}return Q}function s(U,Q){var at=U.sortIndex-Q.sortIndex;return at!==0?at:U.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;r.unstable_now=function(){return i.now()}}else{var o=Date,d=o.now();r.unstable_now=function(){return o.now()-d}}var u=[],p=[],m=1,g=null,x=3,v=!1,k=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(U){for(var Q=e(p);Q!==null;){if(Q.callback===null)n(p);else if(Q.startTime<=U)n(p),Q.sortIndex=Q.expirationTime,t(u,Q);else break;Q=e(p)}}function R(U){if(S=!1,P(U),!k)if(e(u)!==null)k=!0,ot(M);else{var Q=e(p);Q!==null&&it(R,Q.startTime-U)}}function M(U,Q){k=!1,S&&(S=!1,E(H),H=-1),v=!0;var at=x;try{for(P(Q),g=e(u);g!==null&&(!(g.expirationTime>Q)||U&&!Y());){var j=g.callback;if(typeof j=="function"){g.callback=null,x=g.priorityLevel;var G=j(g.expirationTime<=Q);Q=r.unstable_now(),typeof G=="function"?g.callback=G:g===e(u)&&n(u),P(Q)}else n(u);g=e(u)}if(g!==null)var ut=!0;else{var St=e(p);St!==null&&it(R,St.startTime-Q),ut=!1}return ut}finally{g=null,x=at,v=!1}}var O=!1,I=null,H=-1,K=5,W=-1;function Y(){return!(r.unstable_now()-W<K)}function q(){if(I!==null){var U=r.unstable_now();W=U;var Q=!0;try{Q=I(!0,U)}finally{Q?tt():(O=!1,I=null)}}else O=!1}var tt;if(typeof N=="function")tt=function(){N(q)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,lt=et.port2;et.port1.onmessage=q,tt=function(){lt.postMessage(null)}}else tt=function(){_(q,0)};function ot(U){I=U,O||(O=!0,tt())}function it(U,Q){H=_(function(){U(r.unstable_now())},Q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(U){U.callback=null},r.unstable_continueExecution=function(){k||v||(k=!0,ot(M))},r.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<U?Math.floor(1e3/U):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_getFirstCallbackNode=function(){return e(u)},r.unstable_next=function(U){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var at=x;x=Q;try{return U()}finally{x=at}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(U,Q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var at=x;x=U;try{return Q()}finally{x=at}},r.unstable_scheduleCallback=function(U,Q,at){var j=r.unstable_now();switch(typeof at=="object"&&at!==null?(at=at.delay,at=typeof at=="number"&&0<at?j+at:j):at=j,U){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=at+G,U={id:m++,callback:Q,priorityLevel:U,startTime:at,expirationTime:G,sortIndex:-1},at>j?(U.sortIndex=at,t(p,U),e(u)===null&&U===e(p)&&(S?(E(H),H=-1):S=!0,it(R,at-j))):(U.sortIndex=G,t(u,U),k||v||(k=!0,ot(M))),U},r.unstable_shouldYield=Y,r.unstable_wrapCallback=function(U){var Q=x;return function(){var at=x;x=Q;try{return U.apply(this,arguments)}finally{x=at}}}}(Nb)),Nb}var Bk;function TR(){return Bk||(Bk=1,Db.exports=CR()),Db.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ik;function PR(){if(Ik)return ws;Ik=1;var r=pA(),t=TR();function e(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(a,c){o(a,c),o(a+"Capture",c)}function o(a,c){for(s[a]=c,a=0;a<c.length;a++)n.add(c[a])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},g={};function x(a){return u.call(g,a)?!0:u.call(m,a)?!1:p.test(a)?g[a]=!0:(m[a]=!0,!1)}function v(a,c,h,f){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return f?!1:h!==null?!h.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function k(a,c,h,f){if(c===null||typeof c>"u"||v(a,c,h,f))return!0;if(f)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function S(a,c,h,f,y,w,D){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=f,this.attributeNamespace=y,this.mustUseProperty=h,this.propertyName=a,this.type=c,this.sanitizeURL=w,this.removeEmptyString=D}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){_[a]=new S(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];_[c]=new S(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){_[a]=new S(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){_[a]=new S(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){_[a]=new S(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){_[a]=new S(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){_[a]=new S(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){_[a]=new S(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){_[a]=new S(a,5,!1,a.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function N(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(E,N);_[c]=new S(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(E,N);_[c]=new S(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(E,N);_[c]=new S(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){_[a]=new S(a,1,!1,a.toLowerCase(),null,!1,!1)}),_.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){_[a]=new S(a,1,!1,a.toLowerCase(),null,!0,!0)});function P(a,c,h,f){var y=_.hasOwnProperty(c)?_[c]:null;(y!==null?y.type!==0:f||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(k(c,h,y,f)&&(h=null),f||y===null?x(c)&&(h===null?a.removeAttribute(c):a.setAttribute(c,""+h)):y.mustUseProperty?a[y.propertyName]=h===null?y.type===3?!1:"":h:(c=y.attributeName,f=y.attributeNamespace,h===null?a.removeAttribute(c):(y=y.type,h=y===3||y===4&&h===!0?"":""+h,f?a.setAttributeNS(f,c,h):a.setAttribute(c,h))))}var R=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),O=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),Y=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),tt=Symbol.for("react.suspense"),et=Symbol.for("react.suspense_list"),lt=Symbol.for("react.memo"),ot=Symbol.for("react.lazy"),it=Symbol.for("react.offscreen"),U=Symbol.iterator;function Q(a){return a===null||typeof a!="object"?null:(a=U&&a[U]||a["@@iterator"],typeof a=="function"?a:null)}var at=Object.assign,j;function G(a){if(j===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);j=c&&c[1]||""}return`
`+j+a}var ut=!1;function St(a,c){if(!a||ut)return"";ut=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(V){var f=V}Reflect.construct(a,[],c)}else{try{c.call()}catch(V){f=V}a.call(c.prototype)}else{try{throw Error()}catch(V){f=V}a()}}catch(V){if(V&&f&&typeof V.stack=="string"){for(var y=V.stack.split(`
`),w=f.stack.split(`
`),D=y.length-1,B=w.length-1;1<=D&&0<=B&&y[D]!==w[B];)B--;for(;1<=D&&0<=B;D--,B--)if(y[D]!==w[B]){if(D!==1||B!==1)do if(D--,B--,0>B||y[D]!==w[B]){var F=`
`+y[D].replace(" at new "," at ");return a.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",a.displayName)),F}while(1<=D&&0<=B);break}}}finally{ut=!1,Error.prepareStackTrace=h}return(a=a?a.displayName||a.name:"")?G(a):""}function Nt(a){switch(a.tag){case 5:return G(a.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return a=St(a.type,!1),a;case 11:return a=St(a.type.render,!1),a;case 1:return a=St(a.type,!0),a;default:return""}}function Tt(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case I:return"Fragment";case O:return"Portal";case K:return"Profiler";case H:return"StrictMode";case tt:return"Suspense";case et:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case Y:return(a.displayName||"Context")+".Consumer";case W:return(a._context.displayName||"Context")+".Provider";case q:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case lt:return c=a.displayName||null,c!==null?c:Tt(a.type)||"Memo";case ot:c=a._payload,a=a._init;try{return Tt(a(c))}catch{}}return null}function Pt(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tt(c);case 8:return c===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Ht(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Zt(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Te(a){var c=Zt(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),f=""+a[c];if(!a.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,w=h.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return y.call(this)},set:function(D){f=""+D,w.call(this,D)}}),Object.defineProperty(a,c,{enumerable:h.enumerable}),{getValue:function(){return f},setValue:function(D){f=""+D},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Dn(a){a._valueTracker||(a._valueTracker=Te(a))}function Os(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var h=c.getValue(),f="";return a&&(f=Zt(a)?a.checked?"true":"false":a.value),a=f,a!==h?(c.setValue(a),!0):!1}function ha(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function uo(a,c){var h=c.checked;return at({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??a._wrapperState.initialChecked})}function Vp(a,c){var h=c.defaultValue==null?"":c.defaultValue,f=c.checked!=null?c.checked:c.defaultChecked;h=Ht(c.value!=null?c.value:h),a._wrapperState={initialChecked:f,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Wp(a,c){c=c.checked,c!=null&&P(a,"checked",c,!1)}function pa(a,c){Wp(a,c);var h=Ht(c.value),f=c.type;if(h!=null)f==="number"?(h===0&&a.value===""||a.value!=h)&&(a.value=""+h):a.value!==""+h&&(a.value=""+h);else if(f==="submit"||f==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?ho(a,c.type,h):c.hasOwnProperty("defaultValue")&&ho(a,c.type,Ht(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function iu(a,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var f=c.type;if(!(f!=="submit"&&f!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,h||c===a.value||(a.value=c),a.defaultValue=c}h=a.name,h!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,h!==""&&(a.name=h)}function ho(a,c,h){(c!=="number"||ha(a.ownerDocument)!==a)&&(h==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+h&&(a.defaultValue=""+h))}var ma=Array.isArray;function po(a,c,h,f){if(a=a.options,c){c={};for(var y=0;y<h.length;y++)c["$"+h[y]]=!0;for(h=0;h<a.length;h++)y=c.hasOwnProperty("$"+a[h].value),a[h].selected!==y&&(a[h].selected=y),y&&f&&(a[h].defaultSelected=!0)}else{for(h=""+Ht(h),c=null,y=0;y<a.length;y++){if(a[y].value===h){a[y].selected=!0,f&&(a[y].defaultSelected=!0);return}c!==null||a[y].disabled||(c=a[y])}c!==null&&(c.selected=!0)}}function Gp(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(e(91));return at({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function T0(a,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(e(92));if(ma(h)){if(1<h.length)throw Error(e(93));h=h[0]}c=h}c==null&&(c=""),h=c}a._wrapperState={initialValue:Ht(h)}}function dt(a,c){var h=Ht(c.value),f=Ht(c.defaultValue);h!=null&&(h=""+h,h!==a.value&&(a.value=h),c.defaultValue==null&&a.defaultValue!==h&&(a.defaultValue=h)),f!=null&&(a.defaultValue=""+f)}function Et(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function Me(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $e(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?Me(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var yn,mo=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,f,y){MSApp.execUnsafeLocalFunction(function(){return a(c,h,f,y)})}:a}(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(yn=yn||document.createElement("div"),yn.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=yn.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function di(a,c){if(c){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=c;return}}a.textContent=c}var Za={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kp=["Webkit","ms","Moz","O"];Object.keys(Za).forEach(function(a){Kp.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),Za[c]=Za[a]})});function au(a,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||Za.hasOwnProperty(a)&&Za[a]?(""+c).trim():c+"px"}function Kl(a,c){a=a.style;for(var h in c)if(c.hasOwnProperty(h)){var f=h.indexOf("--")===0,y=au(h,c[h],f);h==="float"&&(h="cssFloat"),f?a.setProperty(h,y):a[h]=y}}var Xp=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xl(a,c){if(c){if(Xp[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(e(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(e(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(e(61))}if(c.style!=null&&typeof c.style!="object")throw Error(e(62))}}function Yl(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ql=null;function Yp(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var zy=null,ru=null,ou=null;function WA(a){if(a=ym(a)){if(typeof zy!="function")throw Error(e(280));var c=a.stateNode;c&&(c=Q0(c),zy(a.stateNode,a.type,c))}}function GA(a){ru?ou?ou.push(a):ou=[a]:ru=a}function KA(){if(ru){var a=ru,c=ou;if(ou=ru=null,WA(a),c)for(a=0;a<c.length;a++)WA(c[a])}}function XA(a,c){return a(c)}function YA(){}var Hy=!1;function QA(a,c,h){if(Hy)return a(c,h);Hy=!0;try{return XA(a,c,h)}finally{Hy=!1,(ru!==null||ou!==null)&&(YA(),KA())}}function Qp(a,c){var h=a.stateNode;if(h===null)return null;var f=Q0(h);if(f===null)return null;h=f[c];t:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break t;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(e(231,c,typeof h));return h}var qy=!1;if(d)try{var Jp={};Object.defineProperty(Jp,"passive",{get:function(){qy=!0}}),window.addEventListener("test",Jp,Jp),window.removeEventListener("test",Jp,Jp)}catch{qy=!1}function ED(a,c,h,f,y,w,D,B,F){var V=Array.prototype.slice.call(arguments,3);try{c.apply(h,V)}catch(Z){this.onError(Z)}}var Zp=!1,P0=null,D0=!1,Vy=null,CD={onError:function(a){Zp=!0,P0=a}};function TD(a,c,h,f,y,w,D,B,F){Zp=!1,P0=null,ED.apply(CD,arguments)}function PD(a,c,h,f,y,w,D,B,F){if(TD.apply(this,arguments),Zp){if(Zp){var V=P0;Zp=!1,P0=null}else throw Error(e(198));D0||(D0=!0,Vy=V)}}function Jl(a){var c=a,h=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(h=c.return),a=c.return;while(a)}return c.tag===3?h:null}function JA(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function ZA(a){if(Jl(a)!==a)throw Error(e(188))}function DD(a){var c=a.alternate;if(!c){if(c=Jl(a),c===null)throw Error(e(188));return c!==a?null:a}for(var h=a,f=c;;){var y=h.return;if(y===null)break;var w=y.alternate;if(w===null){if(f=y.return,f!==null){h=f;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===h)return ZA(y),a;if(w===f)return ZA(y),c;w=w.sibling}throw Error(e(188))}if(h.return!==f.return)h=y,f=w;else{for(var D=!1,B=y.child;B;){if(B===h){D=!0,h=y,f=w;break}if(B===f){D=!0,f=y,h=w;break}B=B.sibling}if(!D){for(B=w.child;B;){if(B===h){D=!0,h=w,f=y;break}if(B===f){D=!0,f=w,h=y;break}B=B.sibling}if(!D)throw Error(e(189))}}if(h.alternate!==f)throw Error(e(190))}if(h.tag!==3)throw Error(e(188));return h.stateNode.current===h?a:c}function t1(a){return a=DD(a),a!==null?e1(a):null}function e1(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=e1(a);if(c!==null)return c;a=a.sibling}return null}var n1=t.unstable_scheduleCallback,s1=t.unstable_cancelCallback,ND=t.unstable_shouldYield,RD=t.unstable_requestPaint,Qe=t.unstable_now,MD=t.unstable_getCurrentPriorityLevel,Wy=t.unstable_ImmediatePriority,i1=t.unstable_UserBlockingPriority,N0=t.unstable_NormalPriority,OD=t.unstable_LowPriority,a1=t.unstable_IdlePriority,R0=null,fa=null;function BD(a){if(fa&&typeof fa.onCommitFiberRoot=="function")try{fa.onCommitFiberRoot(R0,a,void 0,(a.current.flags&128)===128)}catch{}}var Ii=Math.clz32?Math.clz32:jD,ID=Math.log,FD=Math.LN2;function jD(a){return a>>>=0,a===0?32:31-(ID(a)/FD|0)|0}var M0=64,O0=4194304;function tm(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function B0(a,c){var h=a.pendingLanes;if(h===0)return 0;var f=0,y=a.suspendedLanes,w=a.pingedLanes,D=h&268435455;if(D!==0){var B=D&~y;B!==0?f=tm(B):(w&=D,w!==0&&(f=tm(w)))}else D=h&~y,D!==0?f=tm(D):w!==0&&(f=tm(w));if(f===0)return 0;if(c!==0&&c!==f&&(c&y)===0&&(y=f&-f,w=c&-c,y>=w||y===16&&(w&4194240)!==0))return c;if((f&4)!==0&&(f|=h&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=f;0<c;)h=31-Ii(c),y=1<<h,f|=a[h],c&=~y;return f}function LD(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function UD(a,c){for(var h=a.suspendedLanes,f=a.pingedLanes,y=a.expirationTimes,w=a.pendingLanes;0<w;){var D=31-Ii(w),B=1<<D,F=y[D];F===-1?((B&h)===0||(B&f)!==0)&&(y[D]=LD(B,c)):F<=c&&(a.expiredLanes|=B),w&=~B}}function Gy(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function r1(){var a=M0;return M0<<=1,(M0&4194240)===0&&(M0=64),a}function Ky(a){for(var c=[],h=0;31>h;h++)c.push(a);return c}function em(a,c,h){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-Ii(c),a[c]=h}function $D(a,c){var h=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var f=a.eventTimes;for(a=a.expirationTimes;0<h;){var y=31-Ii(h),w=1<<y;c[y]=0,f[y]=-1,a[y]=-1,h&=~w}}function Xy(a,c){var h=a.entangledLanes|=c;for(a=a.entanglements;h;){var f=31-Ii(h),y=1<<f;y&c|a[f]&c&&(a[f]|=c),h&=~y}}var ie=0;function o1(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var l1,Yy,c1,d1,u1,Qy=!1,I0=[],fo=null,go=null,xo=null,nm=new Map,sm=new Map,yo=[],zD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function h1(a,c){switch(a){case"focusin":case"focusout":fo=null;break;case"dragenter":case"dragleave":go=null;break;case"mouseover":case"mouseout":xo=null;break;case"pointerover":case"pointerout":nm.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":sm.delete(c.pointerId)}}function im(a,c,h,f,y,w){return a===null||a.nativeEvent!==w?(a={blockedOn:c,domEventName:h,eventSystemFlags:f,nativeEvent:w,targetContainers:[y]},c!==null&&(c=ym(c),c!==null&&Yy(c)),a):(a.eventSystemFlags|=f,c=a.targetContainers,y!==null&&c.indexOf(y)===-1&&c.push(y),a)}function HD(a,c,h,f,y){switch(c){case"focusin":return fo=im(fo,a,c,h,f,y),!0;case"dragenter":return go=im(go,a,c,h,f,y),!0;case"mouseover":return xo=im(xo,a,c,h,f,y),!0;case"pointerover":var w=y.pointerId;return nm.set(w,im(nm.get(w)||null,a,c,h,f,y)),!0;case"gotpointercapture":return w=y.pointerId,sm.set(w,im(sm.get(w)||null,a,c,h,f,y)),!0}return!1}function p1(a){var c=Zl(a.target);if(c!==null){var h=Jl(c);if(h!==null){if(c=h.tag,c===13){if(c=JA(h),c!==null){a.blockedOn=c,u1(a.priority,function(){c1(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function F0(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var h=Zy(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(h===null){h=a.nativeEvent;var f=new h.constructor(h.type,h);Ql=f,h.target.dispatchEvent(f),Ql=null}else return c=ym(h),c!==null&&Yy(c),a.blockedOn=h,!1;c.shift()}return!0}function m1(a,c,h){F0(a)&&h.delete(c)}function qD(){Qy=!1,fo!==null&&F0(fo)&&(fo=null),go!==null&&F0(go)&&(go=null),xo!==null&&F0(xo)&&(xo=null),nm.forEach(m1),sm.forEach(m1)}function am(a,c){a.blockedOn===c&&(a.blockedOn=null,Qy||(Qy=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,qD)))}function rm(a){function c(y){return am(y,a)}if(0<I0.length){am(I0[0],a);for(var h=1;h<I0.length;h++){var f=I0[h];f.blockedOn===a&&(f.blockedOn=null)}}for(fo!==null&&am(fo,a),go!==null&&am(go,a),xo!==null&&am(xo,a),nm.forEach(c),sm.forEach(c),h=0;h<yo.length;h++)f=yo[h],f.blockedOn===a&&(f.blockedOn=null);for(;0<yo.length&&(h=yo[0],h.blockedOn===null);)p1(h),h.blockedOn===null&&yo.shift()}var lu=R.ReactCurrentBatchConfig,j0=!0;function VD(a,c,h,f){var y=ie,w=lu.transition;lu.transition=null;try{ie=1,Jy(a,c,h,f)}finally{ie=y,lu.transition=w}}function WD(a,c,h,f){var y=ie,w=lu.transition;lu.transition=null;try{ie=4,Jy(a,c,h,f)}finally{ie=y,lu.transition=w}}function Jy(a,c,h,f){if(j0){var y=Zy(a,c,h,f);if(y===null)gv(a,c,f,L0,h),h1(a,f);else if(HD(y,a,c,h,f))f.stopPropagation();else if(h1(a,f),c&4&&-1<zD.indexOf(a)){for(;y!==null;){var w=ym(y);if(w!==null&&l1(w),w=Zy(a,c,h,f),w===null&&gv(a,c,f,L0,h),w===y)break;y=w}y!==null&&f.stopPropagation()}else gv(a,c,f,null,h)}}var L0=null;function Zy(a,c,h,f){if(L0=null,a=Yp(f),a=Zl(a),a!==null)if(c=Jl(a),c===null)a=null;else if(h=c.tag,h===13){if(a=JA(c),a!==null)return a;a=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return L0=a,null}function f1(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MD()){case Wy:return 1;case i1:return 4;case N0:case OD:return 16;case a1:return 536870912;default:return 16}default:return 16}}var vo=null,tv=null,U0=null;function g1(){if(U0)return U0;var a,c=tv,h=c.length,f,y="value"in vo?vo.value:vo.textContent,w=y.length;for(a=0;a<h&&c[a]===y[a];a++);var D=h-a;for(f=1;f<=D&&c[h-f]===y[w-f];f++);return U0=y.slice(a,1<f?1-f:void 0)}function $0(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function z0(){return!0}function x1(){return!1}function Bs(a){function c(h,f,y,w,D){this._reactName=h,this._targetInst=y,this.type=f,this.nativeEvent=w,this.target=D,this.currentTarget=null;for(var B in a)a.hasOwnProperty(B)&&(h=a[B],this[B]=h?h(w):w[B]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?z0:x1,this.isPropagationStopped=x1,this}return at(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=z0)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=z0)},persist:function(){},isPersistent:z0}),c}var cu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ev=Bs(cu),om=at({},cu,{view:0,detail:0}),GD=Bs(om),nv,sv,lm,H0=at({},om,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:av,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==lm&&(lm&&a.type==="mousemove"?(nv=a.screenX-lm.screenX,sv=a.screenY-lm.screenY):sv=nv=0,lm=a),nv)},movementY:function(a){return"movementY"in a?a.movementY:sv}}),y1=Bs(H0),KD=at({},H0,{dataTransfer:0}),XD=Bs(KD),YD=at({},om,{relatedTarget:0}),iv=Bs(YD),QD=at({},cu,{animationName:0,elapsedTime:0,pseudoElement:0}),JD=Bs(QD),ZD=at({},cu,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),tN=Bs(ZD),eN=at({},cu,{data:0}),v1=Bs(eN),nN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aN(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=iN[a])?!!c[a]:!1}function av(){return aN}var rN=at({},om,{key:function(a){if(a.key){var c=nN[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=$0(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?sN[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:av,charCode:function(a){return a.type==="keypress"?$0(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?$0(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),oN=Bs(rN),lN=at({},H0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b1=Bs(lN),cN=at({},om,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:av}),dN=Bs(cN),uN=at({},cu,{propertyName:0,elapsedTime:0,pseudoElement:0}),hN=Bs(uN),pN=at({},H0,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),mN=Bs(pN),fN=[9,13,27,32],rv=d&&"CompositionEvent"in window,cm=null;d&&"documentMode"in document&&(cm=document.documentMode);var gN=d&&"TextEvent"in window&&!cm,w1=d&&(!rv||cm&&8<cm&&11>=cm),S1=" ",A1=!1;function _1(a,c){switch(a){case"keyup":return fN.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function k1(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var du=!1;function xN(a,c){switch(a){case"compositionend":return k1(c);case"keypress":return c.which!==32?null:(A1=!0,S1);case"textInput":return a=c.data,a===S1&&A1?null:a;default:return null}}function yN(a,c){if(du)return a==="compositionend"||!rv&&_1(a,c)?(a=g1(),U0=tv=vo=null,du=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return w1&&c.locale!=="ko"?null:c.data;default:return null}}var vN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function E1(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!vN[a.type]:c==="textarea"}function C1(a,c,h,f){GA(f),c=K0(c,"onChange"),0<c.length&&(h=new ev("onChange","change",null,h,f),a.push({event:h,listeners:c}))}var dm=null,um=null;function bN(a){V1(a,0)}function q0(a){var c=fu(a);if(Os(c))return a}function wN(a,c){if(a==="change")return c}var T1=!1;if(d){var ov;if(d){var lv="oninput"in document;if(!lv){var P1=document.createElement("div");P1.setAttribute("oninput","return;"),lv=typeof P1.oninput=="function"}ov=lv}else ov=!1;T1=ov&&(!document.documentMode||9<document.documentMode)}function D1(){dm&&(dm.detachEvent("onpropertychange",N1),um=dm=null)}function N1(a){if(a.propertyName==="value"&&q0(um)){var c=[];C1(c,um,a,Yp(a)),QA(bN,c)}}function SN(a,c,h){a==="focusin"?(D1(),dm=c,um=h,dm.attachEvent("onpropertychange",N1)):a==="focusout"&&D1()}function AN(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return q0(um)}function _N(a,c){if(a==="click")return q0(c)}function kN(a,c){if(a==="input"||a==="change")return q0(c)}function EN(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Fi=typeof Object.is=="function"?Object.is:EN;function hm(a,c){if(Fi(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var h=Object.keys(a),f=Object.keys(c);if(h.length!==f.length)return!1;for(f=0;f<h.length;f++){var y=h[f];if(!u.call(c,y)||!Fi(a[y],c[y]))return!1}return!0}function R1(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function M1(a,c){var h=R1(a);a=0;for(var f;h;){if(h.nodeType===3){if(f=a+h.textContent.length,a<=c&&f>=c)return{node:h,offset:c-a};a=f}t:{for(;h;){if(h.nextSibling){h=h.nextSibling;break t}h=h.parentNode}h=void 0}h=R1(h)}}function O1(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?O1(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function B1(){for(var a=window,c=ha();c instanceof a.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)a=c.contentWindow;else break;c=ha(a.document)}return c}function cv(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function CN(a){var c=B1(),h=a.focusedElem,f=a.selectionRange;if(c!==h&&h&&h.ownerDocument&&O1(h.ownerDocument.documentElement,h)){if(f!==null&&cv(h)){if(c=f.start,a=f.end,a===void 0&&(a=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(a,h.value.length);else if(a=(c=h.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var y=h.textContent.length,w=Math.min(f.start,y);f=f.end===void 0?w:Math.min(f.end,y),!a.extend&&w>f&&(y=f,f=w,w=y),y=M1(h,w);var D=M1(h,f);y&&D&&(a.rangeCount!==1||a.anchorNode!==y.node||a.anchorOffset!==y.offset||a.focusNode!==D.node||a.focusOffset!==D.offset)&&(c=c.createRange(),c.setStart(y.node,y.offset),a.removeAllRanges(),w>f?(a.addRange(c),a.extend(D.node,D.offset)):(c.setEnd(D.node,D.offset),a.addRange(c)))}}for(c=[],a=h;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)a=c[h],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var TN=d&&"documentMode"in document&&11>=document.documentMode,uu=null,dv=null,pm=null,uv=!1;function I1(a,c,h){var f=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;uv||uu==null||uu!==ha(f)||(f=uu,"selectionStart"in f&&cv(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),pm&&hm(pm,f)||(pm=f,f=K0(dv,"onSelect"),0<f.length&&(c=new ev("onSelect","select",null,c,h),a.push({event:c,listeners:f}),c.target=uu)))}function V0(a,c){var h={};return h[a.toLowerCase()]=c.toLowerCase(),h["Webkit"+a]="webkit"+c,h["Moz"+a]="moz"+c,h}var hu={animationend:V0("Animation","AnimationEnd"),animationiteration:V0("Animation","AnimationIteration"),animationstart:V0("Animation","AnimationStart"),transitionend:V0("Transition","TransitionEnd")},hv={},F1={};d&&(F1=document.createElement("div").style,"AnimationEvent"in window||(delete hu.animationend.animation,delete hu.animationiteration.animation,delete hu.animationstart.animation),"TransitionEvent"in window||delete hu.transitionend.transition);function W0(a){if(hv[a])return hv[a];if(!hu[a])return a;var c=hu[a],h;for(h in c)if(c.hasOwnProperty(h)&&h in F1)return hv[a]=c[h];return a}var j1=W0("animationend"),L1=W0("animationiteration"),U1=W0("animationstart"),$1=W0("transitionend"),z1=new Map,H1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bo(a,c){z1.set(a,c),i(c,[a])}for(var pv=0;pv<H1.length;pv++){var mv=H1[pv],PN=mv.toLowerCase(),DN=mv[0].toUpperCase()+mv.slice(1);bo(PN,"on"+DN)}bo(j1,"onAnimationEnd"),bo(L1,"onAnimationIteration"),bo(U1,"onAnimationStart"),bo("dblclick","onDoubleClick"),bo("focusin","onFocus"),bo("focusout","onBlur"),bo($1,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NN=new Set("cancel close invalid load scroll toggle".split(" ").concat(mm));function q1(a,c,h){var f=a.type||"unknown-event";a.currentTarget=h,PD(f,c,void 0,a),a.currentTarget=null}function V1(a,c){c=(c&4)!==0;for(var h=0;h<a.length;h++){var f=a[h],y=f.event;f=f.listeners;t:{var w=void 0;if(c)for(var D=f.length-1;0<=D;D--){var B=f[D],F=B.instance,V=B.currentTarget;if(B=B.listener,F!==w&&y.isPropagationStopped())break t;q1(y,B,V),w=F}else for(D=0;D<f.length;D++){if(B=f[D],F=B.instance,V=B.currentTarget,B=B.listener,F!==w&&y.isPropagationStopped())break t;q1(y,B,V),w=F}}}if(D0)throw a=Vy,D0=!1,Vy=null,a}function _e(a,c){var h=c[Sv];h===void 0&&(h=c[Sv]=new Set);var f=a+"__bubble";h.has(f)||(W1(c,a,2,!1),h.add(f))}function fv(a,c,h){var f=0;c&&(f|=4),W1(h,a,f,c)}var G0="_reactListening"+Math.random().toString(36).slice(2);function fm(a){if(!a[G0]){a[G0]=!0,n.forEach(function(h){h!=="selectionchange"&&(NN.has(h)||fv(h,!1,a),fv(h,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[G0]||(c[G0]=!0,fv("selectionchange",!1,c))}}function W1(a,c,h,f){switch(f1(c)){case 1:var y=VD;break;case 4:y=WD;break;default:y=Jy}h=y.bind(null,c,h,a),y=void 0,!qy||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(y=!0),f?y!==void 0?a.addEventListener(c,h,{capture:!0,passive:y}):a.addEventListener(c,h,!0):y!==void 0?a.addEventListener(c,h,{passive:y}):a.addEventListener(c,h,!1)}function gv(a,c,h,f,y){var w=f;if((c&1)===0&&(c&2)===0&&f!==null)t:for(;;){if(f===null)return;var D=f.tag;if(D===3||D===4){var B=f.stateNode.containerInfo;if(B===y||B.nodeType===8&&B.parentNode===y)break;if(D===4)for(D=f.return;D!==null;){var F=D.tag;if((F===3||F===4)&&(F=D.stateNode.containerInfo,F===y||F.nodeType===8&&F.parentNode===y))return;D=D.return}for(;B!==null;){if(D=Zl(B),D===null)return;if(F=D.tag,F===5||F===6){f=w=D;continue t}B=B.parentNode}}f=f.return}QA(function(){var V=w,Z=Yp(h),st=[];t:{var J=z1.get(a);if(J!==void 0){var ht=ev,yt=a;switch(a){case"keypress":if($0(h)===0)break t;case"keydown":case"keyup":ht=oN;break;case"focusin":yt="focus",ht=iv;break;case"focusout":yt="blur",ht=iv;break;case"beforeblur":case"afterblur":ht=iv;break;case"click":if(h.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=y1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=XD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=dN;break;case j1:case L1:case U1:ht=JD;break;case $1:ht=hN;break;case"scroll":ht=GD;break;case"wheel":ht=mN;break;case"copy":case"cut":case"paste":ht=tN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=b1}var vt=(c&4)!==0,Je=!vt&&a==="scroll",$=vt?J!==null?J+"Capture":null:J;vt=[];for(var L=V,z;L!==null;){z=L;var rt=z.stateNode;if(z.tag===5&&rt!==null&&(z=rt,$!==null&&(rt=Qp(L,$),rt!=null&&vt.push(gm(L,rt,z)))),Je)break;L=L.return}0<vt.length&&(J=new ht(J,yt,null,h,Z),st.push({event:J,listeners:vt}))}}if((c&7)===0){t:{if(J=a==="mouseover"||a==="pointerover",ht=a==="mouseout"||a==="pointerout",J&&h!==Ql&&(yt=h.relatedTarget||h.fromElement)&&(Zl(yt)||yt[tr]))break t;if((ht||J)&&(J=Z.window===Z?Z:(J=Z.ownerDocument)?J.defaultView||J.parentWindow:window,ht?(yt=h.relatedTarget||h.toElement,ht=V,yt=yt?Zl(yt):null,yt!==null&&(Je=Jl(yt),yt!==Je||yt.tag!==5&&yt.tag!==6)&&(yt=null)):(ht=null,yt=V),ht!==yt)){if(vt=y1,rt="onMouseLeave",$="onMouseEnter",L="mouse",(a==="pointerout"||a==="pointerover")&&(vt=b1,rt="onPointerLeave",$="onPointerEnter",L="pointer"),Je=ht==null?J:fu(ht),z=yt==null?J:fu(yt),J=new vt(rt,L+"leave",ht,h,Z),J.target=Je,J.relatedTarget=z,rt=null,Zl(Z)===V&&(vt=new vt($,L+"enter",yt,h,Z),vt.target=z,vt.relatedTarget=Je,rt=vt),Je=rt,ht&&yt)e:{for(vt=ht,$=yt,L=0,z=vt;z;z=pu(z))L++;for(z=0,rt=$;rt;rt=pu(rt))z++;for(;0<L-z;)vt=pu(vt),L--;for(;0<z-L;)$=pu($),z--;for(;L--;){if(vt===$||$!==null&&vt===$.alternate)break e;vt=pu(vt),$=pu($)}vt=null}else vt=null;ht!==null&&G1(st,J,ht,vt,!1),yt!==null&&Je!==null&&G1(st,Je,yt,vt,!0)}}t:{if(J=V?fu(V):window,ht=J.nodeName&&J.nodeName.toLowerCase(),ht==="select"||ht==="input"&&J.type==="file")var wt=wN;else if(E1(J))if(T1)wt=kN;else{wt=AN;var _t=SN}else(ht=J.nodeName)&&ht.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(wt=_N);if(wt&&(wt=wt(a,V))){C1(st,wt,h,Z);break t}_t&&_t(a,J,V),a==="focusout"&&(_t=J._wrapperState)&&_t.controlled&&J.type==="number"&&ho(J,"number",J.value)}switch(_t=V?fu(V):window,a){case"focusin":(E1(_t)||_t.contentEditable==="true")&&(uu=_t,dv=V,pm=null);break;case"focusout":pm=dv=uu=null;break;case"mousedown":uv=!0;break;case"contextmenu":case"mouseup":case"dragend":uv=!1,I1(st,h,Z);break;case"selectionchange":if(TN)break;case"keydown":case"keyup":I1(st,h,Z)}var kt;if(rv)t:{switch(a){case"compositionstart":var Rt="onCompositionStart";break t;case"compositionend":Rt="onCompositionEnd";break t;case"compositionupdate":Rt="onCompositionUpdate";break t}Rt=void 0}else du?_1(a,h)&&(Rt="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(Rt="onCompositionStart");Rt&&(w1&&h.locale!=="ko"&&(du||Rt!=="onCompositionStart"?Rt==="onCompositionEnd"&&du&&(kt=g1()):(vo=Z,tv="value"in vo?vo.value:vo.textContent,du=!0)),_t=K0(V,Rt),0<_t.length&&(Rt=new v1(Rt,a,null,h,Z),st.push({event:Rt,listeners:_t}),kt?Rt.data=kt:(kt=k1(h),kt!==null&&(Rt.data=kt)))),(kt=gN?xN(a,h):yN(a,h))&&(V=K0(V,"onBeforeInput"),0<V.length&&(Z=new v1("onBeforeInput","beforeinput",null,h,Z),st.push({event:Z,listeners:V}),Z.data=kt))}V1(st,c)})}function gm(a,c,h){return{instance:a,listener:c,currentTarget:h}}function K0(a,c){for(var h=c+"Capture",f=[];a!==null;){var y=a,w=y.stateNode;y.tag===5&&w!==null&&(y=w,w=Qp(a,h),w!=null&&f.unshift(gm(a,w,y)),w=Qp(a,c),w!=null&&f.push(gm(a,w,y))),a=a.return}return f}function pu(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function G1(a,c,h,f,y){for(var w=c._reactName,D=[];h!==null&&h!==f;){var B=h,F=B.alternate,V=B.stateNode;if(F!==null&&F===f)break;B.tag===5&&V!==null&&(B=V,y?(F=Qp(h,w),F!=null&&D.unshift(gm(h,F,B))):y||(F=Qp(h,w),F!=null&&D.push(gm(h,F,B)))),h=h.return}D.length!==0&&a.push({event:c,listeners:D})}var RN=/\r\n?/g,MN=/\u0000|\uFFFD/g;function K1(a){return(typeof a=="string"?a:""+a).replace(RN,`
`).replace(MN,"")}function X0(a,c,h){if(c=K1(c),K1(a)!==c&&h)throw Error(e(425))}function Y0(){}var xv=null,yv=null;function vv(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var bv=typeof setTimeout=="function"?setTimeout:void 0,ON=typeof clearTimeout=="function"?clearTimeout:void 0,X1=typeof Promise=="function"?Promise:void 0,BN=typeof queueMicrotask=="function"?queueMicrotask:typeof X1<"u"?function(a){return X1.resolve(null).then(a).catch(IN)}:bv;function IN(a){setTimeout(function(){throw a})}function wv(a,c){var h=c,f=0;do{var y=h.nextSibling;if(a.removeChild(h),y&&y.nodeType===8)if(h=y.data,h==="/$"){if(f===0){a.removeChild(y),rm(c);return}f--}else h!=="$"&&h!=="$?"&&h!=="$!"||f++;h=y}while(h);rm(c)}function wo(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function Y1(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return a;c--}else h==="/$"&&c++}a=a.previousSibling}return null}var mu=Math.random().toString(36).slice(2),ga="__reactFiber$"+mu,xm="__reactProps$"+mu,tr="__reactContainer$"+mu,Sv="__reactEvents$"+mu,FN="__reactListeners$"+mu,jN="__reactHandles$"+mu;function Zl(a){var c=a[ga];if(c)return c;for(var h=a.parentNode;h;){if(c=h[tr]||h[ga]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(a=Y1(a);a!==null;){if(h=a[ga])return h;a=Y1(a)}return c}a=h,h=a.parentNode}return null}function ym(a){return a=a[ga]||a[tr],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function fu(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(e(33))}function Q0(a){return a[xm]||null}var Av=[],gu=-1;function So(a){return{current:a}}function ke(a){0>gu||(a.current=Av[gu],Av[gu]=null,gu--)}function ve(a,c){gu++,Av[gu]=a.current,a.current=c}var Ao={},Hn=So(Ao),gs=So(!1),tc=Ao;function xu(a,c){var h=a.type.contextTypes;if(!h)return Ao;var f=a.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===c)return f.__reactInternalMemoizedMaskedChildContext;var y={},w;for(w in h)y[w]=c[w];return f&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=y),y}function xs(a){return a=a.childContextTypes,a!=null}function J0(){ke(gs),ke(Hn)}function Q1(a,c,h){if(Hn.current!==Ao)throw Error(e(168));ve(Hn,c),ve(gs,h)}function J1(a,c,h){var f=a.stateNode;if(c=c.childContextTypes,typeof f.getChildContext!="function")return h;f=f.getChildContext();for(var y in f)if(!(y in c))throw Error(e(108,Pt(a)||"Unknown",y));return at({},h,f)}function Z0(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ao,tc=Hn.current,ve(Hn,a),ve(gs,gs.current),!0}function Z1(a,c,h){var f=a.stateNode;if(!f)throw Error(e(169));h?(a=J1(a,c,tc),f.__reactInternalMemoizedMergedChildContext=a,ke(gs),ke(Hn),ve(Hn,a)):ke(gs),ve(gs,h)}var er=null,t2=!1,_v=!1;function t_(a){er===null?er=[a]:er.push(a)}function LN(a){t2=!0,t_(a)}function _o(){if(!_v&&er!==null){_v=!0;var a=0,c=ie;try{var h=er;for(ie=1;a<h.length;a++){var f=h[a];do f=f(!0);while(f!==null)}er=null,t2=!1}catch(y){throw er!==null&&(er=er.slice(a+1)),n1(Wy,_o),y}finally{ie=c,_v=!1}}return null}var yu=[],vu=0,e2=null,n2=0,ui=[],hi=0,ec=null,nr=1,sr="";function nc(a,c){yu[vu++]=n2,yu[vu++]=e2,e2=a,n2=c}function e_(a,c,h){ui[hi++]=nr,ui[hi++]=sr,ui[hi++]=ec,ec=a;var f=nr;a=sr;var y=32-Ii(f)-1;f&=~(1<<y),h+=1;var w=32-Ii(c)+y;if(30<w){var D=y-y%5;w=(f&(1<<D)-1).toString(32),f>>=D,y-=D,nr=1<<32-Ii(c)+y|h<<y|f,sr=w+a}else nr=1<<w|h<<y|f,sr=a}function kv(a){a.return!==null&&(nc(a,1),e_(a,1,0))}function Ev(a){for(;a===e2;)e2=yu[--vu],yu[vu]=null,n2=yu[--vu],yu[vu]=null;for(;a===ec;)ec=ui[--hi],ui[hi]=null,sr=ui[--hi],ui[hi]=null,nr=ui[--hi],ui[hi]=null}var Is=null,Fs=null,Pe=!1,ji=null;function n_(a,c){var h=gi(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=a,c=a.deletions,c===null?(a.deletions=[h],a.flags|=16):c.push(h)}function s_(a,c){switch(a.tag){case 5:var h=a.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,Is=a,Fs=wo(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,Is=a,Fs=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=ec!==null?{id:nr,overflow:sr}:null,a.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=gi(18,null,null,0),h.stateNode=c,h.return=a,a.child=h,Is=a,Fs=null,!0):!1;default:return!1}}function Cv(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Tv(a){if(Pe){var c=Fs;if(c){var h=c;if(!s_(a,c)){if(Cv(a))throw Error(e(418));c=wo(h.nextSibling);var f=Is;c&&s_(a,c)?n_(f,h):(a.flags=a.flags&-4097|2,Pe=!1,Is=a)}}else{if(Cv(a))throw Error(e(418));a.flags=a.flags&-4097|2,Pe=!1,Is=a}}}function i_(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;Is=a}function s2(a){if(a!==Is)return!1;if(!Pe)return i_(a),Pe=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!vv(a.type,a.memoizedProps)),c&&(c=Fs)){if(Cv(a))throw a_(),Error(e(418));for(;c;)n_(a,c),c=wo(c.nextSibling)}if(i_(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(e(317));t:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"){if(c===0){Fs=wo(a.nextSibling);break t}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}a=a.nextSibling}Fs=null}}else Fs=Is?wo(a.stateNode.nextSibling):null;return!0}function a_(){for(var a=Fs;a;)a=wo(a.nextSibling)}function bu(){Fs=Is=null,Pe=!1}function Pv(a){ji===null?ji=[a]:ji.push(a)}var UN=R.ReactCurrentBatchConfig;function vm(a,c,h){if(a=h.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(e(309));var f=h.stateNode}if(!f)throw Error(e(147,a));var y=f,w=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===w?c.ref:(c=function(D){var B=y.refs;D===null?delete B[w]:B[w]=D},c._stringRef=w,c)}if(typeof a!="string")throw Error(e(284));if(!h._owner)throw Error(e(290,a))}return a}function i2(a,c){throw a=Object.prototype.toString.call(c),Error(e(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function r_(a){var c=a._init;return c(a._payload)}function o_(a){function c($,L){if(a){var z=$.deletions;z===null?($.deletions=[L],$.flags|=16):z.push(L)}}function h($,L){if(!a)return null;for(;L!==null;)c($,L),L=L.sibling;return null}function f($,L){for($=new Map;L!==null;)L.key!==null?$.set(L.key,L):$.set(L.index,L),L=L.sibling;return $}function y($,L){return $=Ro($,L),$.index=0,$.sibling=null,$}function w($,L,z){return $.index=z,a?(z=$.alternate,z!==null?(z=z.index,z<L?($.flags|=2,L):z):($.flags|=2,L)):($.flags|=1048576,L)}function D($){return a&&$.alternate===null&&($.flags|=2),$}function B($,L,z,rt){return L===null||L.tag!==6?(L=bb(z,$.mode,rt),L.return=$,L):(L=y(L,z),L.return=$,L)}function F($,L,z,rt){var wt=z.type;return wt===I?Z($,L,z.props.children,rt,z.key):L!==null&&(L.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===ot&&r_(wt)===L.type)?(rt=y(L,z.props),rt.ref=vm($,L,z),rt.return=$,rt):(rt=T2(z.type,z.key,z.props,null,$.mode,rt),rt.ref=vm($,L,z),rt.return=$,rt)}function V($,L,z,rt){return L===null||L.tag!==4||L.stateNode.containerInfo!==z.containerInfo||L.stateNode.implementation!==z.implementation?(L=wb(z,$.mode,rt),L.return=$,L):(L=y(L,z.children||[]),L.return=$,L)}function Z($,L,z,rt,wt){return L===null||L.tag!==7?(L=dc(z,$.mode,rt,wt),L.return=$,L):(L=y(L,z),L.return=$,L)}function st($,L,z){if(typeof L=="string"&&L!==""||typeof L=="number")return L=bb(""+L,$.mode,z),L.return=$,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case M:return z=T2(L.type,L.key,L.props,null,$.mode,z),z.ref=vm($,null,L),z.return=$,z;case O:return L=wb(L,$.mode,z),L.return=$,L;case ot:var rt=L._init;return st($,rt(L._payload),z)}if(ma(L)||Q(L))return L=dc(L,$.mode,z,null),L.return=$,L;i2($,L)}return null}function J($,L,z,rt){var wt=L!==null?L.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return wt!==null?null:B($,L,""+z,rt);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case M:return z.key===wt?F($,L,z,rt):null;case O:return z.key===wt?V($,L,z,rt):null;case ot:return wt=z._init,J($,L,wt(z._payload),rt)}if(ma(z)||Q(z))return wt!==null?null:Z($,L,z,rt,null);i2($,z)}return null}function ht($,L,z,rt,wt){if(typeof rt=="string"&&rt!==""||typeof rt=="number")return $=$.get(z)||null,B(L,$,""+rt,wt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case M:return $=$.get(rt.key===null?z:rt.key)||null,F(L,$,rt,wt);case O:return $=$.get(rt.key===null?z:rt.key)||null,V(L,$,rt,wt);case ot:var _t=rt._init;return ht($,L,z,_t(rt._payload),wt)}if(ma(rt)||Q(rt))return $=$.get(z)||null,Z(L,$,rt,wt,null);i2(L,rt)}return null}function yt($,L,z,rt){for(var wt=null,_t=null,kt=L,Rt=L=0,wn=null;kt!==null&&Rt<z.length;Rt++){kt.index>Rt?(wn=kt,kt=null):wn=kt.sibling;var Jt=J($,kt,z[Rt],rt);if(Jt===null){kt===null&&(kt=wn);break}a&&kt&&Jt.alternate===null&&c($,kt),L=w(Jt,L,Rt),_t===null?wt=Jt:_t.sibling=Jt,_t=Jt,kt=wn}if(Rt===z.length)return h($,kt),Pe&&nc($,Rt),wt;if(kt===null){for(;Rt<z.length;Rt++)kt=st($,z[Rt],rt),kt!==null&&(L=w(kt,L,Rt),_t===null?wt=kt:_t.sibling=kt,_t=kt);return Pe&&nc($,Rt),wt}for(kt=f($,kt);Rt<z.length;Rt++)wn=ht(kt,$,Rt,z[Rt],rt),wn!==null&&(a&&wn.alternate!==null&&kt.delete(wn.key===null?Rt:wn.key),L=w(wn,L,Rt),_t===null?wt=wn:_t.sibling=wn,_t=wn);return a&&kt.forEach(function(Mo){return c($,Mo)}),Pe&&nc($,Rt),wt}function vt($,L,z,rt){var wt=Q(z);if(typeof wt!="function")throw Error(e(150));if(z=wt.call(z),z==null)throw Error(e(151));for(var _t=wt=null,kt=L,Rt=L=0,wn=null,Jt=z.next();kt!==null&&!Jt.done;Rt++,Jt=z.next()){kt.index>Rt?(wn=kt,kt=null):wn=kt.sibling;var Mo=J($,kt,Jt.value,rt);if(Mo===null){kt===null&&(kt=wn);break}a&&kt&&Mo.alternate===null&&c($,kt),L=w(Mo,L,Rt),_t===null?wt=Mo:_t.sibling=Mo,_t=Mo,kt=wn}if(Jt.done)return h($,kt),Pe&&nc($,Rt),wt;if(kt===null){for(;!Jt.done;Rt++,Jt=z.next())Jt=st($,Jt.value,rt),Jt!==null&&(L=w(Jt,L,Rt),_t===null?wt=Jt:_t.sibling=Jt,_t=Jt);return Pe&&nc($,Rt),wt}for(kt=f($,kt);!Jt.done;Rt++,Jt=z.next())Jt=ht(kt,$,Rt,Jt.value,rt),Jt!==null&&(a&&Jt.alternate!==null&&kt.delete(Jt.key===null?Rt:Jt.key),L=w(Jt,L,Rt),_t===null?wt=Jt:_t.sibling=Jt,_t=Jt);return a&&kt.forEach(function(vR){return c($,vR)}),Pe&&nc($,Rt),wt}function Je($,L,z,rt){if(typeof z=="object"&&z!==null&&z.type===I&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case M:t:{for(var wt=z.key,_t=L;_t!==null;){if(_t.key===wt){if(wt=z.type,wt===I){if(_t.tag===7){h($,_t.sibling),L=y(_t,z.props.children),L.return=$,$=L;break t}}else if(_t.elementType===wt||typeof wt=="object"&&wt!==null&&wt.$$typeof===ot&&r_(wt)===_t.type){h($,_t.sibling),L=y(_t,z.props),L.ref=vm($,_t,z),L.return=$,$=L;break t}h($,_t);break}else c($,_t);_t=_t.sibling}z.type===I?(L=dc(z.props.children,$.mode,rt,z.key),L.return=$,$=L):(rt=T2(z.type,z.key,z.props,null,$.mode,rt),rt.ref=vm($,L,z),rt.return=$,$=rt)}return D($);case O:t:{for(_t=z.key;L!==null;){if(L.key===_t)if(L.tag===4&&L.stateNode.containerInfo===z.containerInfo&&L.stateNode.implementation===z.implementation){h($,L.sibling),L=y(L,z.children||[]),L.return=$,$=L;break t}else{h($,L);break}else c($,L);L=L.sibling}L=wb(z,$.mode,rt),L.return=$,$=L}return D($);case ot:return _t=z._init,Je($,L,_t(z._payload),rt)}if(ma(z))return yt($,L,z,rt);if(Q(z))return vt($,L,z,rt);i2($,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,L!==null&&L.tag===6?(h($,L.sibling),L=y(L,z),L.return=$,$=L):(h($,L),L=bb(z,$.mode,rt),L.return=$,$=L),D($)):h($,L)}return Je}var wu=o_(!0),l_=o_(!1),a2=So(null),r2=null,Su=null,Dv=null;function Nv(){Dv=Su=r2=null}function Rv(a){var c=a2.current;ke(a2),a._currentValue=c}function Mv(a,c,h){for(;a!==null;){var f=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,f!==null&&(f.childLanes|=c)):f!==null&&(f.childLanes&c)!==c&&(f.childLanes|=c),a===h)break;a=a.return}}function Au(a,c){r2=a,Dv=Su=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(ys=!0),a.firstContext=null)}function pi(a){var c=a._currentValue;if(Dv!==a)if(a={context:a,memoizedValue:c,next:null},Su===null){if(r2===null)throw Error(e(308));Su=a,r2.dependencies={lanes:0,firstContext:a}}else Su=Su.next=a;return c}var sc=null;function Ov(a){sc===null?sc=[a]:sc.push(a)}function c_(a,c,h,f){var y=c.interleaved;return y===null?(h.next=h,Ov(c)):(h.next=y.next,y.next=h),c.interleaved=h,ir(a,f)}function ir(a,c){a.lanes|=c;var h=a.alternate;for(h!==null&&(h.lanes|=c),h=a,a=a.return;a!==null;)a.childLanes|=c,h=a.alternate,h!==null&&(h.childLanes|=c),h=a,a=a.return;return h.tag===3?h.stateNode:null}var ko=!1;function Bv(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function d_(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ar(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function Eo(a,c,h){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(Xt&2)!==0){var y=f.pending;return y===null?c.next=c:(c.next=y.next,y.next=c),f.pending=c,ir(a,h)}return y=f.interleaved,y===null?(c.next=c,Ov(f)):(c.next=y.next,y.next=c),f.interleaved=c,ir(a,h)}function o2(a,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var f=c.lanes;f&=a.pendingLanes,h|=f,c.lanes=h,Xy(a,h)}}function u_(a,c){var h=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,h===f)){var y=null,w=null;if(h=h.firstBaseUpdate,h!==null){do{var D={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};w===null?y=w=D:w=w.next=D,h=h.next}while(h!==null);w===null?y=w=c:w=w.next=c}else y=w=c;h={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:f.shared,effects:f.effects},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=c}function l2(a,c,h,f){var y=a.updateQueue;ko=!1;var w=y.firstBaseUpdate,D=y.lastBaseUpdate,B=y.shared.pending;if(B!==null){y.shared.pending=null;var F=B,V=F.next;F.next=null,D===null?w=V:D.next=V,D=F;var Z=a.alternate;Z!==null&&(Z=Z.updateQueue,B=Z.lastBaseUpdate,B!==D&&(B===null?Z.firstBaseUpdate=V:B.next=V,Z.lastBaseUpdate=F))}if(w!==null){var st=y.baseState;D=0,Z=V=F=null,B=w;do{var J=B.lane,ht=B.eventTime;if((f&J)===J){Z!==null&&(Z=Z.next={eventTime:ht,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});t:{var yt=a,vt=B;switch(J=c,ht=h,vt.tag){case 1:if(yt=vt.payload,typeof yt=="function"){st=yt.call(ht,st,J);break t}st=yt;break t;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=vt.payload,J=typeof yt=="function"?yt.call(ht,st,J):yt,J==null)break t;st=at({},st,J);break t;case 2:ko=!0}}B.callback!==null&&B.lane!==0&&(a.flags|=64,J=y.effects,J===null?y.effects=[B]:J.push(B))}else ht={eventTime:ht,lane:J,tag:B.tag,payload:B.payload,callback:B.callback,next:null},Z===null?(V=Z=ht,F=st):Z=Z.next=ht,D|=J;if(B=B.next,B===null){if(B=y.shared.pending,B===null)break;J=B,B=J.next,J.next=null,y.lastBaseUpdate=J,y.shared.pending=null}}while(!0);if(Z===null&&(F=st),y.baseState=F,y.firstBaseUpdate=V,y.lastBaseUpdate=Z,c=y.shared.interleaved,c!==null){y=c;do D|=y.lane,y=y.next;while(y!==c)}else w===null&&(y.shared.lanes=0);rc|=D,a.lanes=D,a.memoizedState=st}}function h_(a,c,h){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var f=a[c],y=f.callback;if(y!==null){if(f.callback=null,f=h,typeof y!="function")throw Error(e(191,y));y.call(f)}}}var bm={},xa=So(bm),wm=So(bm),Sm=So(bm);function ic(a){if(a===bm)throw Error(e(174));return a}function Iv(a,c){switch(ve(Sm,c),ve(wm,a),ve(xa,bm),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:$e(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=$e(c,a)}ke(xa),ve(xa,c)}function _u(){ke(xa),ke(wm),ke(Sm)}function p_(a){ic(Sm.current);var c=ic(xa.current),h=$e(c,a.type);c!==h&&(ve(wm,a),ve(xa,h))}function Fv(a){wm.current===a&&(ke(xa),ke(wm))}var Oe=So(0);function c2(a){for(var c=a;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var jv=[];function Lv(){for(var a=0;a<jv.length;a++)jv[a]._workInProgressVersionPrimary=null;jv.length=0}var d2=R.ReactCurrentDispatcher,Uv=R.ReactCurrentBatchConfig,ac=0,Be=null,ln=null,vn=null,u2=!1,Am=!1,_m=0,$N=0;function qn(){throw Error(e(321))}function $v(a,c){if(c===null)return!1;for(var h=0;h<c.length&&h<a.length;h++)if(!Fi(a[h],c[h]))return!1;return!0}function zv(a,c,h,f,y,w){if(ac=w,Be=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,d2.current=a===null||a.memoizedState===null?VN:WN,a=h(f,y),Am){w=0;do{if(Am=!1,_m=0,25<=w)throw Error(e(301));w+=1,vn=ln=null,c.updateQueue=null,d2.current=GN,a=h(f,y)}while(Am)}if(d2.current=m2,c=ln!==null&&ln.next!==null,ac=0,vn=ln=Be=null,u2=!1,c)throw Error(e(300));return a}function Hv(){var a=_m!==0;return _m=0,a}function ya(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?Be.memoizedState=vn=a:vn=vn.next=a,vn}function mi(){if(ln===null){var a=Be.alternate;a=a!==null?a.memoizedState:null}else a=ln.next;var c=vn===null?Be.memoizedState:vn.next;if(c!==null)vn=c,ln=a;else{if(a===null)throw Error(e(310));ln=a,a={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},vn===null?Be.memoizedState=vn=a:vn=vn.next=a}return vn}function km(a,c){return typeof c=="function"?c(a):c}function qv(a){var c=mi(),h=c.queue;if(h===null)throw Error(e(311));h.lastRenderedReducer=a;var f=ln,y=f.baseQueue,w=h.pending;if(w!==null){if(y!==null){var D=y.next;y.next=w.next,w.next=D}f.baseQueue=y=w,h.pending=null}if(y!==null){w=y.next,f=f.baseState;var B=D=null,F=null,V=w;do{var Z=V.lane;if((ac&Z)===Z)F!==null&&(F=F.next={lane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),f=V.hasEagerState?V.eagerState:a(f,V.action);else{var st={lane:Z,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null};F===null?(B=F=st,D=f):F=F.next=st,Be.lanes|=Z,rc|=Z}V=V.next}while(V!==null&&V!==w);F===null?D=f:F.next=B,Fi(f,c.memoizedState)||(ys=!0),c.memoizedState=f,c.baseState=D,c.baseQueue=F,h.lastRenderedState=f}if(a=h.interleaved,a!==null){y=a;do w=y.lane,Be.lanes|=w,rc|=w,y=y.next;while(y!==a)}else y===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function Vv(a){var c=mi(),h=c.queue;if(h===null)throw Error(e(311));h.lastRenderedReducer=a;var f=h.dispatch,y=h.pending,w=c.memoizedState;if(y!==null){h.pending=null;var D=y=y.next;do w=a(w,D.action),D=D.next;while(D!==y);Fi(w,c.memoizedState)||(ys=!0),c.memoizedState=w,c.baseQueue===null&&(c.baseState=w),h.lastRenderedState=w}return[w,f]}function m_(){}function f_(a,c){var h=Be,f=mi(),y=c(),w=!Fi(f.memoizedState,y);if(w&&(f.memoizedState=y,ys=!0),f=f.queue,Wv(y_.bind(null,h,f,a),[a]),f.getSnapshot!==c||w||vn!==null&&vn.memoizedState.tag&1){if(h.flags|=2048,Em(9,x_.bind(null,h,f,y,c),void 0,null),bn===null)throw Error(e(349));(ac&30)!==0||g_(h,c,y)}return y}function g_(a,c,h){a.flags|=16384,a={getSnapshot:c,value:h},c=Be.updateQueue,c===null?(c={lastEffect:null,stores:null},Be.updateQueue=c,c.stores=[a]):(h=c.stores,h===null?c.stores=[a]:h.push(a))}function x_(a,c,h,f){c.value=h,c.getSnapshot=f,v_(c)&&b_(a)}function y_(a,c,h){return h(function(){v_(c)&&b_(a)})}function v_(a){var c=a.getSnapshot;a=a.value;try{var h=c();return!Fi(a,h)}catch{return!0}}function b_(a){var c=ir(a,1);c!==null&&zi(c,a,1,-1)}function w_(a){var c=ya();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:km,lastRenderedState:a},c.queue=a,a=a.dispatch=qN.bind(null,Be,a),[c.memoizedState,a]}function Em(a,c,h,f){return a={tag:a,create:c,destroy:h,deps:f,next:null},c=Be.updateQueue,c===null?(c={lastEffect:null,stores:null},Be.updateQueue=c,c.lastEffect=a.next=a):(h=c.lastEffect,h===null?c.lastEffect=a.next=a:(f=h.next,h.next=a,a.next=f,c.lastEffect=a)),a}function S_(){return mi().memoizedState}function h2(a,c,h,f){var y=ya();Be.flags|=a,y.memoizedState=Em(1|c,h,void 0,f===void 0?null:f)}function p2(a,c,h,f){var y=mi();f=f===void 0?null:f;var w=void 0;if(ln!==null){var D=ln.memoizedState;if(w=D.destroy,f!==null&&$v(f,D.deps)){y.memoizedState=Em(c,h,w,f);return}}Be.flags|=a,y.memoizedState=Em(1|c,h,w,f)}function A_(a,c){return h2(8390656,8,a,c)}function Wv(a,c){return p2(2048,8,a,c)}function __(a,c){return p2(4,2,a,c)}function k_(a,c){return p2(4,4,a,c)}function E_(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function C_(a,c,h){return h=h!=null?h.concat([a]):null,p2(4,4,E_.bind(null,c,a),h)}function Gv(){}function T_(a,c){var h=mi();c=c===void 0?null:c;var f=h.memoizedState;return f!==null&&c!==null&&$v(c,f[1])?f[0]:(h.memoizedState=[a,c],a)}function P_(a,c){var h=mi();c=c===void 0?null:c;var f=h.memoizedState;return f!==null&&c!==null&&$v(c,f[1])?f[0]:(a=a(),h.memoizedState=[a,c],a)}function D_(a,c,h){return(ac&21)===0?(a.baseState&&(a.baseState=!1,ys=!0),a.memoizedState=h):(Fi(h,c)||(h=r1(),Be.lanes|=h,rc|=h,a.baseState=!0),c)}function zN(a,c){var h=ie;ie=h!==0&&4>h?h:4,a(!0);var f=Uv.transition;Uv.transition={};try{a(!1),c()}finally{ie=h,Uv.transition=f}}function N_(){return mi().memoizedState}function HN(a,c,h){var f=Do(a);if(h={lane:f,action:h,hasEagerState:!1,eagerState:null,next:null},R_(a))M_(c,h);else if(h=c_(a,c,h,f),h!==null){var y=ss();zi(h,a,f,y),O_(h,c,f)}}function qN(a,c,h){var f=Do(a),y={lane:f,action:h,hasEagerState:!1,eagerState:null,next:null};if(R_(a))M_(c,y);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=c.lastRenderedReducer,w!==null))try{var D=c.lastRenderedState,B=w(D,h);if(y.hasEagerState=!0,y.eagerState=B,Fi(B,D)){var F=c.interleaved;F===null?(y.next=y,Ov(c)):(y.next=F.next,F.next=y),c.interleaved=y;return}}catch{}finally{}h=c_(a,c,y,f),h!==null&&(y=ss(),zi(h,a,f,y),O_(h,c,f))}}function R_(a){var c=a.alternate;return a===Be||c!==null&&c===Be}function M_(a,c){Am=u2=!0;var h=a.pending;h===null?c.next=c:(c.next=h.next,h.next=c),a.pending=c}function O_(a,c,h){if((h&4194240)!==0){var f=c.lanes;f&=a.pendingLanes,h|=f,c.lanes=h,Xy(a,h)}}var m2={readContext:pi,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useInsertionEffect:qn,useLayoutEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useMutableSource:qn,useSyncExternalStore:qn,useId:qn,unstable_isNewReconciler:!1},VN={readContext:pi,useCallback:function(a,c){return ya().memoizedState=[a,c===void 0?null:c],a},useContext:pi,useEffect:A_,useImperativeHandle:function(a,c,h){return h=h!=null?h.concat([a]):null,h2(4194308,4,E_.bind(null,c,a),h)},useLayoutEffect:function(a,c){return h2(4194308,4,a,c)},useInsertionEffect:function(a,c){return h2(4,2,a,c)},useMemo:function(a,c){var h=ya();return c=c===void 0?null:c,a=a(),h.memoizedState=[a,c],a},useReducer:function(a,c,h){var f=ya();return c=h!==void 0?h(c):c,f.memoizedState=f.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},f.queue=a,a=a.dispatch=HN.bind(null,Be,a),[f.memoizedState,a]},useRef:function(a){var c=ya();return a={current:a},c.memoizedState=a},useState:w_,useDebugValue:Gv,useDeferredValue:function(a){return ya().memoizedState=a},useTransition:function(){var a=w_(!1),c=a[0];return a=zN.bind(null,a[1]),ya().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,h){var f=Be,y=ya();if(Pe){if(h===void 0)throw Error(e(407));h=h()}else{if(h=c(),bn===null)throw Error(e(349));(ac&30)!==0||g_(f,c,h)}y.memoizedState=h;var w={value:h,getSnapshot:c};return y.queue=w,A_(y_.bind(null,f,w,a),[a]),f.flags|=2048,Em(9,x_.bind(null,f,w,h,c),void 0,null),h},useId:function(){var a=ya(),c=bn.identifierPrefix;if(Pe){var h=sr,f=nr;h=(f&~(1<<32-Ii(f)-1)).toString(32)+h,c=":"+c+"R"+h,h=_m++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=$N++,c=":"+c+"r"+h.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},WN={readContext:pi,useCallback:T_,useContext:pi,useEffect:Wv,useImperativeHandle:C_,useInsertionEffect:__,useLayoutEffect:k_,useMemo:P_,useReducer:qv,useRef:S_,useState:function(){return qv(km)},useDebugValue:Gv,useDeferredValue:function(a){var c=mi();return D_(c,ln.memoizedState,a)},useTransition:function(){var a=qv(km)[0],c=mi().memoizedState;return[a,c]},useMutableSource:m_,useSyncExternalStore:f_,useId:N_,unstable_isNewReconciler:!1},GN={readContext:pi,useCallback:T_,useContext:pi,useEffect:Wv,useImperativeHandle:C_,useInsertionEffect:__,useLayoutEffect:k_,useMemo:P_,useReducer:Vv,useRef:S_,useState:function(){return Vv(km)},useDebugValue:Gv,useDeferredValue:function(a){var c=mi();return ln===null?c.memoizedState=a:D_(c,ln.memoizedState,a)},useTransition:function(){var a=Vv(km)[0],c=mi().memoizedState;return[a,c]},useMutableSource:m_,useSyncExternalStore:f_,useId:N_,unstable_isNewReconciler:!1};function Li(a,c){if(a&&a.defaultProps){c=at({},c),a=a.defaultProps;for(var h in a)c[h]===void 0&&(c[h]=a[h]);return c}return c}function Kv(a,c,h,f){c=a.memoizedState,h=h(f,c),h=h==null?c:at({},c,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var f2={isMounted:function(a){return(a=a._reactInternals)?Jl(a)===a:!1},enqueueSetState:function(a,c,h){a=a._reactInternals;var f=ss(),y=Do(a),w=ar(f,y);w.payload=c,h!=null&&(w.callback=h),c=Eo(a,w,y),c!==null&&(zi(c,a,y,f),o2(c,a,y))},enqueueReplaceState:function(a,c,h){a=a._reactInternals;var f=ss(),y=Do(a),w=ar(f,y);w.tag=1,w.payload=c,h!=null&&(w.callback=h),c=Eo(a,w,y),c!==null&&(zi(c,a,y,f),o2(c,a,y))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var h=ss(),f=Do(a),y=ar(h,f);y.tag=2,c!=null&&(y.callback=c),c=Eo(a,y,f),c!==null&&(zi(c,a,f,h),o2(c,a,f))}};function B_(a,c,h,f,y,w,D){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,w,D):c.prototype&&c.prototype.isPureReactComponent?!hm(h,f)||!hm(y,w):!0}function I_(a,c,h){var f=!1,y=Ao,w=c.contextType;return typeof w=="object"&&w!==null?w=pi(w):(y=xs(c)?tc:Hn.current,f=c.contextTypes,w=(f=f!=null)?xu(a,y):Ao),c=new c(h,w),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=f2,a.stateNode=c,c._reactInternals=a,f&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=y,a.__reactInternalMemoizedMaskedChildContext=w),c}function F_(a,c,h,f){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,f),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,f),c.state!==a&&f2.enqueueReplaceState(c,c.state,null)}function Xv(a,c,h,f){var y=a.stateNode;y.props=h,y.state=a.memoizedState,y.refs={},Bv(a);var w=c.contextType;typeof w=="object"&&w!==null?y.context=pi(w):(w=xs(c)?tc:Hn.current,y.context=xu(a,w)),y.state=a.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(Kv(a,c,w,h),y.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(c=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),c!==y.state&&f2.enqueueReplaceState(y,y.state,null),l2(a,h,y,f),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308)}function ku(a,c){try{var h="",f=c;do h+=Nt(f),f=f.return;while(f);var y=h}catch(w){y=`
Error generating stack: `+w.message+`
`+w.stack}return{value:a,source:c,stack:y,digest:null}}function Yv(a,c,h){return{value:a,source:null,stack:h??null,digest:c??null}}function Qv(a,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var KN=typeof WeakMap=="function"?WeakMap:Map;function j_(a,c,h){h=ar(-1,h),h.tag=3,h.payload={element:null};var f=c.value;return h.callback=function(){S2||(S2=!0,hb=f),Qv(a,c)},h}function L_(a,c,h){h=ar(-1,h),h.tag=3;var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var y=c.value;h.payload=function(){return f(y)},h.callback=function(){Qv(a,c)}}var w=a.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(h.callback=function(){Qv(a,c),typeof f!="function"&&(To===null?To=new Set([this]):To.add(this));var D=c.stack;this.componentDidCatch(c.value,{componentStack:D!==null?D:""})}),h}function U_(a,c,h){var f=a.pingCache;if(f===null){f=a.pingCache=new KN;var y=new Set;f.set(c,y)}else y=f.get(c),y===void 0&&(y=new Set,f.set(c,y));y.has(h)||(y.add(h),a=lR.bind(null,a,c,h),c.then(a,a))}function $_(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function z_(a,c,h,f,y){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=ar(-1,1),c.tag=2,Eo(h,c,1))),h.lanes|=1),a):(a.flags|=65536,a.lanes=y,a)}var XN=R.ReactCurrentOwner,ys=!1;function ns(a,c,h,f){c.child=a===null?l_(c,null,h,f):wu(c,a.child,h,f)}function H_(a,c,h,f,y){h=h.render;var w=c.ref;return Au(c,y),f=zv(a,c,h,f,w,y),h=Hv(),a!==null&&!ys?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~y,rr(a,c,y)):(Pe&&h&&kv(c),c.flags|=1,ns(a,c,f,y),c.child)}function q_(a,c,h,f,y){if(a===null){var w=h.type;return typeof w=="function"&&!vb(w)&&w.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=w,V_(a,c,w,f,y)):(a=T2(h.type,null,f,c,c.mode,y),a.ref=c.ref,a.return=c,c.child=a)}if(w=a.child,(a.lanes&y)===0){var D=w.memoizedProps;if(h=h.compare,h=h!==null?h:hm,h(D,f)&&a.ref===c.ref)return rr(a,c,y)}return c.flags|=1,a=Ro(w,f),a.ref=c.ref,a.return=c,c.child=a}function V_(a,c,h,f,y){if(a!==null){var w=a.memoizedProps;if(hm(w,f)&&a.ref===c.ref)if(ys=!1,c.pendingProps=f=w,(a.lanes&y)!==0)(a.flags&131072)!==0&&(ys=!0);else return c.lanes=a.lanes,rr(a,c,y)}return Jv(a,c,h,f,y)}function W_(a,c,h){var f=c.pendingProps,y=f.children,w=a!==null?a.memoizedState:null;if(f.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(Cu,js),js|=h;else{if((h&1073741824)===0)return a=w!==null?w.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,ve(Cu,js),js|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=w!==null?w.baseLanes:h,ve(Cu,js),js|=f}else w!==null?(f=w.baseLanes|h,c.memoizedState=null):f=h,ve(Cu,js),js|=f;return ns(a,c,y,h),c.child}function G_(a,c){var h=c.ref;(a===null&&h!==null||a!==null&&a.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function Jv(a,c,h,f,y){var w=xs(h)?tc:Hn.current;return w=xu(c,w),Au(c,y),h=zv(a,c,h,f,w,y),f=Hv(),a!==null&&!ys?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~y,rr(a,c,y)):(Pe&&f&&kv(c),c.flags|=1,ns(a,c,h,y),c.child)}function K_(a,c,h,f,y){if(xs(h)){var w=!0;Z0(c)}else w=!1;if(Au(c,y),c.stateNode===null)x2(a,c),I_(c,h,f),Xv(c,h,f,y),f=!0;else if(a===null){var D=c.stateNode,B=c.memoizedProps;D.props=B;var F=D.context,V=h.contextType;typeof V=="object"&&V!==null?V=pi(V):(V=xs(h)?tc:Hn.current,V=xu(c,V));var Z=h.getDerivedStateFromProps,st=typeof Z=="function"||typeof D.getSnapshotBeforeUpdate=="function";st||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(B!==f||F!==V)&&F_(c,D,f,V),ko=!1;var J=c.memoizedState;D.state=J,l2(c,f,D,y),F=c.memoizedState,B!==f||J!==F||gs.current||ko?(typeof Z=="function"&&(Kv(c,h,Z,f),F=c.memoizedState),(B=ko||B_(c,h,B,f,J,F,V))?(st||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(c.flags|=4194308)):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=f,c.memoizedState=F),D.props=f,D.state=F,D.context=V,f=B):(typeof D.componentDidMount=="function"&&(c.flags|=4194308),f=!1)}else{D=c.stateNode,d_(a,c),B=c.memoizedProps,V=c.type===c.elementType?B:Li(c.type,B),D.props=V,st=c.pendingProps,J=D.context,F=h.contextType,typeof F=="object"&&F!==null?F=pi(F):(F=xs(h)?tc:Hn.current,F=xu(c,F));var ht=h.getDerivedStateFromProps;(Z=typeof ht=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(B!==st||J!==F)&&F_(c,D,f,F),ko=!1,J=c.memoizedState,D.state=J,l2(c,f,D,y);var yt=c.memoizedState;B!==st||J!==yt||gs.current||ko?(typeof ht=="function"&&(Kv(c,h,ht,f),yt=c.memoizedState),(V=ko||B_(c,h,V,f,J,yt,F)||!1)?(Z||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(f,yt,F),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(f,yt,F)),typeof D.componentDidUpdate=="function"&&(c.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof D.componentDidUpdate!="function"||B===a.memoizedProps&&J===a.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||B===a.memoizedProps&&J===a.memoizedState||(c.flags|=1024),c.memoizedProps=f,c.memoizedState=yt),D.props=f,D.state=yt,D.context=F,f=V):(typeof D.componentDidUpdate!="function"||B===a.memoizedProps&&J===a.memoizedState||(c.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||B===a.memoizedProps&&J===a.memoizedState||(c.flags|=1024),f=!1)}return Zv(a,c,h,f,w,y)}function Zv(a,c,h,f,y,w){G_(a,c);var D=(c.flags&128)!==0;if(!f&&!D)return y&&Z1(c,h,!1),rr(a,c,w);f=c.stateNode,XN.current=c;var B=D&&typeof h.getDerivedStateFromError!="function"?null:f.render();return c.flags|=1,a!==null&&D?(c.child=wu(c,a.child,null,w),c.child=wu(c,null,B,w)):ns(a,c,B,w),c.memoizedState=f.state,y&&Z1(c,h,!0),c.child}function X_(a){var c=a.stateNode;c.pendingContext?Q1(a,c.pendingContext,c.pendingContext!==c.context):c.context&&Q1(a,c.context,!1),Iv(a,c.containerInfo)}function Y_(a,c,h,f,y){return bu(),Pv(y),c.flags|=256,ns(a,c,h,f),c.child}var tb={dehydrated:null,treeContext:null,retryLane:0};function eb(a){return{baseLanes:a,cachePool:null,transitions:null}}function Q_(a,c,h){var f=c.pendingProps,y=Oe.current,w=!1,D=(c.flags&128)!==0,B;if((B=D)||(B=a!==null&&a.memoizedState===null?!1:(y&2)!==0),B?(w=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(y|=1),ve(Oe,y&1),a===null)return Tv(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(D=f.children,a=f.fallback,w?(f=c.mode,w=c.child,D={mode:"hidden",children:D},(f&1)===0&&w!==null?(w.childLanes=0,w.pendingProps=D):w=P2(D,f,0,null),a=dc(a,f,h,null),w.return=c,a.return=c,w.sibling=a,c.child=w,c.child.memoizedState=eb(h),c.memoizedState=tb,a):nb(c,D));if(y=a.memoizedState,y!==null&&(B=y.dehydrated,B!==null))return YN(a,c,D,f,B,y,h);if(w){w=f.fallback,D=c.mode,y=a.child,B=y.sibling;var F={mode:"hidden",children:f.children};return(D&1)===0&&c.child!==y?(f=c.child,f.childLanes=0,f.pendingProps=F,c.deletions=null):(f=Ro(y,F),f.subtreeFlags=y.subtreeFlags&14680064),B!==null?w=Ro(B,w):(w=dc(w,D,h,null),w.flags|=2),w.return=c,f.return=c,f.sibling=w,c.child=f,f=w,w=c.child,D=a.child.memoizedState,D=D===null?eb(h):{baseLanes:D.baseLanes|h,cachePool:null,transitions:D.transitions},w.memoizedState=D,w.childLanes=a.childLanes&~h,c.memoizedState=tb,f}return w=a.child,a=w.sibling,f=Ro(w,{mode:"visible",children:f.children}),(c.mode&1)===0&&(f.lanes=h),f.return=c,f.sibling=null,a!==null&&(h=c.deletions,h===null?(c.deletions=[a],c.flags|=16):h.push(a)),c.child=f,c.memoizedState=null,f}function nb(a,c){return c=P2({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function g2(a,c,h,f){return f!==null&&Pv(f),wu(c,a.child,null,h),a=nb(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function YN(a,c,h,f,y,w,D){if(h)return c.flags&256?(c.flags&=-257,f=Yv(Error(e(422))),g2(a,c,D,f)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(w=f.fallback,y=c.mode,f=P2({mode:"visible",children:f.children},y,0,null),w=dc(w,y,D,null),w.flags|=2,f.return=c,w.return=c,f.sibling=w,c.child=f,(c.mode&1)!==0&&wu(c,a.child,null,D),c.child.memoizedState=eb(D),c.memoizedState=tb,w);if((c.mode&1)===0)return g2(a,c,D,null);if(y.data==="$!"){if(f=y.nextSibling&&y.nextSibling.dataset,f)var B=f.dgst;return f=B,w=Error(e(419)),f=Yv(w,f,void 0),g2(a,c,D,f)}if(B=(D&a.childLanes)!==0,ys||B){if(f=bn,f!==null){switch(D&-D){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(f.suspendedLanes|D))!==0?0:y,y!==0&&y!==w.retryLane&&(w.retryLane=y,ir(a,y),zi(f,a,y,-1))}return yb(),f=Yv(Error(e(421))),g2(a,c,D,f)}return y.data==="$?"?(c.flags|=128,c.child=a.child,c=cR.bind(null,a),y._reactRetry=c,null):(a=w.treeContext,Fs=wo(y.nextSibling),Is=c,Pe=!0,ji=null,a!==null&&(ui[hi++]=nr,ui[hi++]=sr,ui[hi++]=ec,nr=a.id,sr=a.overflow,ec=c),c=nb(c,f.children),c.flags|=4096,c)}function J_(a,c,h){a.lanes|=c;var f=a.alternate;f!==null&&(f.lanes|=c),Mv(a.return,c,h)}function sb(a,c,h,f,y){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:f,tail:h,tailMode:y}:(w.isBackwards=c,w.rendering=null,w.renderingStartTime=0,w.last=f,w.tail=h,w.tailMode=y)}function Z_(a,c,h){var f=c.pendingProps,y=f.revealOrder,w=f.tail;if(ns(a,c,f.children,h),f=Oe.current,(f&2)!==0)f=f&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)t:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&J_(a,h,c);else if(a.tag===19)J_(a,h,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break t;for(;a.sibling===null;){if(a.return===null||a.return===c)break t;a=a.return}a.sibling.return=a.return,a=a.sibling}f&=1}if(ve(Oe,f),(c.mode&1)===0)c.memoizedState=null;else switch(y){case"forwards":for(h=c.child,y=null;h!==null;)a=h.alternate,a!==null&&c2(a)===null&&(y=h),h=h.sibling;h=y,h===null?(y=c.child,c.child=null):(y=h.sibling,h.sibling=null),sb(c,!1,y,h,w);break;case"backwards":for(h=null,y=c.child,c.child=null;y!==null;){if(a=y.alternate,a!==null&&c2(a)===null){c.child=y;break}a=y.sibling,y.sibling=h,h=y,y=a}sb(c,!0,h,null,w);break;case"together":sb(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function x2(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function rr(a,c,h){if(a!==null&&(c.dependencies=a.dependencies),rc|=c.lanes,(h&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(e(153));if(c.child!==null){for(a=c.child,h=Ro(a,a.pendingProps),c.child=h,h.return=c;a.sibling!==null;)a=a.sibling,h=h.sibling=Ro(a,a.pendingProps),h.return=c;h.sibling=null}return c.child}function QN(a,c,h){switch(c.tag){case 3:X_(c),bu();break;case 5:p_(c);break;case 1:xs(c.type)&&Z0(c);break;case 4:Iv(c,c.stateNode.containerInfo);break;case 10:var f=c.type._context,y=c.memoizedProps.value;ve(a2,f._currentValue),f._currentValue=y;break;case 13:if(f=c.memoizedState,f!==null)return f.dehydrated!==null?(ve(Oe,Oe.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?Q_(a,c,h):(ve(Oe,Oe.current&1),a=rr(a,c,h),a!==null?a.sibling:null);ve(Oe,Oe.current&1);break;case 19:if(f=(h&c.childLanes)!==0,(a.flags&128)!==0){if(f)return Z_(a,c,h);c.flags|=128}if(y=c.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ve(Oe,Oe.current),f)break;return null;case 22:case 23:return c.lanes=0,W_(a,c,h)}return rr(a,c,h)}var tk,ib,ek,nk;tk=function(a,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)a.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},ib=function(){},ek=function(a,c,h,f){var y=a.memoizedProps;if(y!==f){a=c.stateNode,ic(xa.current);var w=null;switch(h){case"input":y=uo(a,y),f=uo(a,f),w=[];break;case"select":y=at({},y,{value:void 0}),f=at({},f,{value:void 0}),w=[];break;case"textarea":y=Gp(a,y),f=Gp(a,f),w=[];break;default:typeof y.onClick!="function"&&typeof f.onClick=="function"&&(a.onclick=Y0)}Xl(h,f);var D;h=null;for(V in y)if(!f.hasOwnProperty(V)&&y.hasOwnProperty(V)&&y[V]!=null)if(V==="style"){var B=y[V];for(D in B)B.hasOwnProperty(D)&&(h||(h={}),h[D]="")}else V!=="dangerouslySetInnerHTML"&&V!=="children"&&V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&V!=="autoFocus"&&(s.hasOwnProperty(V)?w||(w=[]):(w=w||[]).push(V,null));for(V in f){var F=f[V];if(B=y!=null?y[V]:void 0,f.hasOwnProperty(V)&&F!==B&&(F!=null||B!=null))if(V==="style")if(B){for(D in B)!B.hasOwnProperty(D)||F&&F.hasOwnProperty(D)||(h||(h={}),h[D]="");for(D in F)F.hasOwnProperty(D)&&B[D]!==F[D]&&(h||(h={}),h[D]=F[D])}else h||(w||(w=[]),w.push(V,h)),h=F;else V==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,B=B?B.__html:void 0,F!=null&&B!==F&&(w=w||[]).push(V,F)):V==="children"?typeof F!="string"&&typeof F!="number"||(w=w||[]).push(V,""+F):V!=="suppressContentEditableWarning"&&V!=="suppressHydrationWarning"&&(s.hasOwnProperty(V)?(F!=null&&V==="onScroll"&&_e("scroll",a),w||B===F||(w=[])):(w=w||[]).push(V,F))}h&&(w=w||[]).push("style",h);var V=w;(c.updateQueue=V)&&(c.flags|=4)}},nk=function(a,c,h,f){h!==f&&(c.flags|=4)};function Cm(a,c){if(!Pe)switch(a.tailMode){case"hidden":c=a.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var f=null;h!==null;)h.alternate!==null&&(f=h),h=h.sibling;f===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function Vn(a){var c=a.alternate!==null&&a.alternate.child===a.child,h=0,f=0;if(c)for(var y=a.child;y!==null;)h|=y.lanes|y.childLanes,f|=y.subtreeFlags&14680064,f|=y.flags&14680064,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)h|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=f,a.childLanes=h,c}function JN(a,c,h){var f=c.pendingProps;switch(Ev(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(c),null;case 1:return xs(c.type)&&J0(),Vn(c),null;case 3:return f=c.stateNode,_u(),ke(gs),ke(Hn),Lv(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(s2(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ji!==null&&(fb(ji),ji=null))),ib(a,c),Vn(c),null;case 5:Fv(c);var y=ic(Sm.current);if(h=c.type,a!==null&&c.stateNode!=null)ek(a,c,h,f,y),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!f){if(c.stateNode===null)throw Error(e(166));return Vn(c),null}if(a=ic(xa.current),s2(c)){f=c.stateNode,h=c.type;var w=c.memoizedProps;switch(f[ga]=c,f[xm]=w,a=(c.mode&1)!==0,h){case"dialog":_e("cancel",f),_e("close",f);break;case"iframe":case"object":case"embed":_e("load",f);break;case"video":case"audio":for(y=0;y<mm.length;y++)_e(mm[y],f);break;case"source":_e("error",f);break;case"img":case"image":case"link":_e("error",f),_e("load",f);break;case"details":_e("toggle",f);break;case"input":Vp(f,w),_e("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!w.multiple},_e("invalid",f);break;case"textarea":T0(f,w),_e("invalid",f)}Xl(h,w),y=null;for(var D in w)if(w.hasOwnProperty(D)){var B=w[D];D==="children"?typeof B=="string"?f.textContent!==B&&(w.suppressHydrationWarning!==!0&&X0(f.textContent,B,a),y=["children",B]):typeof B=="number"&&f.textContent!==""+B&&(w.suppressHydrationWarning!==!0&&X0(f.textContent,B,a),y=["children",""+B]):s.hasOwnProperty(D)&&B!=null&&D==="onScroll"&&_e("scroll",f)}switch(h){case"input":Dn(f),iu(f,w,!0);break;case"textarea":Dn(f),Et(f);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(f.onclick=Y0)}f=y,c.updateQueue=f,f!==null&&(c.flags|=4)}else{D=y.nodeType===9?y:y.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Me(h)),a==="http://www.w3.org/1999/xhtml"?h==="script"?(a=D.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof f.is=="string"?a=D.createElement(h,{is:f.is}):(a=D.createElement(h),h==="select"&&(D=a,f.multiple?D.multiple=!0:f.size&&(D.size=f.size))):a=D.createElementNS(a,h),a[ga]=c,a[xm]=f,tk(a,c,!1,!1),c.stateNode=a;t:{switch(D=Yl(h,f),h){case"dialog":_e("cancel",a),_e("close",a),y=f;break;case"iframe":case"object":case"embed":_e("load",a),y=f;break;case"video":case"audio":for(y=0;y<mm.length;y++)_e(mm[y],a);y=f;break;case"source":_e("error",a),y=f;break;case"img":case"image":case"link":_e("error",a),_e("load",a),y=f;break;case"details":_e("toggle",a),y=f;break;case"input":Vp(a,f),y=uo(a,f),_e("invalid",a);break;case"option":y=f;break;case"select":a._wrapperState={wasMultiple:!!f.multiple},y=at({},f,{value:void 0}),_e("invalid",a);break;case"textarea":T0(a,f),y=Gp(a,f),_e("invalid",a);break;default:y=f}Xl(h,y),B=y;for(w in B)if(B.hasOwnProperty(w)){var F=B[w];w==="style"?Kl(a,F):w==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&mo(a,F)):w==="children"?typeof F=="string"?(h!=="textarea"||F!=="")&&di(a,F):typeof F=="number"&&di(a,""+F):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(s.hasOwnProperty(w)?F!=null&&w==="onScroll"&&_e("scroll",a):F!=null&&P(a,w,F,D))}switch(h){case"input":Dn(a),iu(a,f,!1);break;case"textarea":Dn(a),Et(a);break;case"option":f.value!=null&&a.setAttribute("value",""+Ht(f.value));break;case"select":a.multiple=!!f.multiple,w=f.value,w!=null?po(a,!!f.multiple,w,!1):f.defaultValue!=null&&po(a,!!f.multiple,f.defaultValue,!0);break;default:typeof y.onClick=="function"&&(a.onclick=Y0)}switch(h){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break t;case"img":f=!0;break t;default:f=!1}}f&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Vn(c),null;case 6:if(a&&c.stateNode!=null)nk(a,c,a.memoizedProps,f);else{if(typeof f!="string"&&c.stateNode===null)throw Error(e(166));if(h=ic(Sm.current),ic(xa.current),s2(c)){if(f=c.stateNode,h=c.memoizedProps,f[ga]=c,(w=f.nodeValue!==h)&&(a=Is,a!==null))switch(a.tag){case 3:X0(f.nodeValue,h,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&X0(f.nodeValue,h,(a.mode&1)!==0)}w&&(c.flags|=4)}else f=(h.nodeType===9?h:h.ownerDocument).createTextNode(f),f[ga]=c,c.stateNode=f}return Vn(c),null;case 13:if(ke(Oe),f=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(Pe&&Fs!==null&&(c.mode&1)!==0&&(c.flags&128)===0)a_(),bu(),c.flags|=98560,w=!1;else if(w=s2(c),f!==null&&f.dehydrated!==null){if(a===null){if(!w)throw Error(e(318));if(w=c.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(e(317));w[ga]=c}else bu(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Vn(c),w=!1}else ji!==null&&(fb(ji),ji=null),w=!0;if(!w)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(f=f!==null,f!==(a!==null&&a.memoizedState!==null)&&f&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(Oe.current&1)!==0?cn===0&&(cn=3):yb())),c.updateQueue!==null&&(c.flags|=4),Vn(c),null);case 4:return _u(),ib(a,c),a===null&&fm(c.stateNode.containerInfo),Vn(c),null;case 10:return Rv(c.type._context),Vn(c),null;case 17:return xs(c.type)&&J0(),Vn(c),null;case 19:if(ke(Oe),w=c.memoizedState,w===null)return Vn(c),null;if(f=(c.flags&128)!==0,D=w.rendering,D===null)if(f)Cm(w,!1);else{if(cn!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(D=c2(a),D!==null){for(c.flags|=128,Cm(w,!1),f=D.updateQueue,f!==null&&(c.updateQueue=f,c.flags|=4),c.subtreeFlags=0,f=h,h=c.child;h!==null;)w=h,a=f,w.flags&=14680066,D=w.alternate,D===null?(w.childLanes=0,w.lanes=a,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=D.childLanes,w.lanes=D.lanes,w.child=D.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=D.memoizedProps,w.memoizedState=D.memoizedState,w.updateQueue=D.updateQueue,w.type=D.type,a=D.dependencies,w.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),h=h.sibling;return ve(Oe,Oe.current&1|2),c.child}a=a.sibling}w.tail!==null&&Qe()>Tu&&(c.flags|=128,f=!0,Cm(w,!1),c.lanes=4194304)}else{if(!f)if(a=c2(D),a!==null){if(c.flags|=128,f=!0,h=a.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),Cm(w,!0),w.tail===null&&w.tailMode==="hidden"&&!D.alternate&&!Pe)return Vn(c),null}else 2*Qe()-w.renderingStartTime>Tu&&h!==1073741824&&(c.flags|=128,f=!0,Cm(w,!1),c.lanes=4194304);w.isBackwards?(D.sibling=c.child,c.child=D):(h=w.last,h!==null?h.sibling=D:c.child=D,w.last=D)}return w.tail!==null?(c=w.tail,w.rendering=c,w.tail=c.sibling,w.renderingStartTime=Qe(),c.sibling=null,h=Oe.current,ve(Oe,f?h&1|2:h&1),c):(Vn(c),null);case 22:case 23:return xb(),f=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==f&&(c.flags|=8192),f&&(c.mode&1)!==0?(js&1073741824)!==0&&(Vn(c),c.subtreeFlags&6&&(c.flags|=8192)):Vn(c),null;case 24:return null;case 25:return null}throw Error(e(156,c.tag))}function ZN(a,c){switch(Ev(c),c.tag){case 1:return xs(c.type)&&J0(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return _u(),ke(gs),ke(Hn),Lv(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return Fv(c),null;case 13:if(ke(Oe),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(e(340));bu()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return ke(Oe),null;case 4:return _u(),null;case 10:return Rv(c.type._context),null;case 22:case 23:return xb(),null;case 24:return null;default:return null}}var y2=!1,Wn=!1,tR=typeof WeakSet=="function"?WeakSet:Set,gt=null;function Eu(a,c){var h=a.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(f){ze(a,c,f)}else h.current=null}function ab(a,c,h){try{h()}catch(f){ze(a,c,f)}}var sk=!1;function eR(a,c){if(xv=j0,a=B1(),cv(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else t:{h=(h=a.ownerDocument)&&h.defaultView||window;var f=h.getSelection&&h.getSelection();if(f&&f.rangeCount!==0){h=f.anchorNode;var y=f.anchorOffset,w=f.focusNode;f=f.focusOffset;try{h.nodeType,w.nodeType}catch{h=null;break t}var D=0,B=-1,F=-1,V=0,Z=0,st=a,J=null;e:for(;;){for(var ht;st!==h||y!==0&&st.nodeType!==3||(B=D+y),st!==w||f!==0&&st.nodeType!==3||(F=D+f),st.nodeType===3&&(D+=st.nodeValue.length),(ht=st.firstChild)!==null;)J=st,st=ht;for(;;){if(st===a)break e;if(J===h&&++V===y&&(B=D),J===w&&++Z===f&&(F=D),(ht=st.nextSibling)!==null)break;st=J,J=st.parentNode}st=ht}h=B===-1||F===-1?null:{start:B,end:F}}else h=null}h=h||{start:0,end:0}}else h=null;for(yv={focusedElem:a,selectionRange:h},j0=!1,gt=c;gt!==null;)if(c=gt,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,gt=a;else for(;gt!==null;){c=gt;try{var yt=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(yt!==null){var vt=yt.memoizedProps,Je=yt.memoizedState,$=c.stateNode,L=$.getSnapshotBeforeUpdate(c.elementType===c.type?vt:Li(c.type,vt),Je);$.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var z=c.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(e(163))}}catch(rt){ze(c,c.return,rt)}if(a=c.sibling,a!==null){a.return=c.return,gt=a;break}gt=c.return}return yt=sk,sk=!1,yt}function Tm(a,c,h){var f=c.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&a)===a){var w=y.destroy;y.destroy=void 0,w!==void 0&&ab(c,h,w)}y=y.next}while(y!==f)}}function v2(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&a)===a){var f=h.create;h.destroy=f()}h=h.next}while(h!==c)}}function rb(a){var c=a.ref;if(c!==null){var h=a.stateNode;switch(a.tag){case 5:a=h;break;default:a=h}typeof c=="function"?c(a):c.current=a}}function ik(a){var c=a.alternate;c!==null&&(a.alternate=null,ik(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[ga],delete c[xm],delete c[Sv],delete c[FN],delete c[jN])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function ak(a){return a.tag===5||a.tag===3||a.tag===4}function rk(a){t:for(;;){for(;a.sibling===null;){if(a.return===null||ak(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue t;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function ob(a,c,h){var f=a.tag;if(f===5||f===6)a=a.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(a,c):h.insertBefore(a,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(a,h)):(c=h,c.appendChild(a)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=Y0));else if(f!==4&&(a=a.child,a!==null))for(ob(a,c,h),a=a.sibling;a!==null;)ob(a,c,h),a=a.sibling}function lb(a,c,h){var f=a.tag;if(f===5||f===6)a=a.stateNode,c?h.insertBefore(a,c):h.appendChild(a);else if(f!==4&&(a=a.child,a!==null))for(lb(a,c,h),a=a.sibling;a!==null;)lb(a,c,h),a=a.sibling}var Nn=null,Ui=!1;function Co(a,c,h){for(h=h.child;h!==null;)ok(a,c,h),h=h.sibling}function ok(a,c,h){if(fa&&typeof fa.onCommitFiberUnmount=="function")try{fa.onCommitFiberUnmount(R0,h)}catch{}switch(h.tag){case 5:Wn||Eu(h,c);case 6:var f=Nn,y=Ui;Nn=null,Co(a,c,h),Nn=f,Ui=y,Nn!==null&&(Ui?(a=Nn,h=h.stateNode,a.nodeType===8?a.parentNode.removeChild(h):a.removeChild(h)):Nn.removeChild(h.stateNode));break;case 18:Nn!==null&&(Ui?(a=Nn,h=h.stateNode,a.nodeType===8?wv(a.parentNode,h):a.nodeType===1&&wv(a,h),rm(a)):wv(Nn,h.stateNode));break;case 4:f=Nn,y=Ui,Nn=h.stateNode.containerInfo,Ui=!0,Co(a,c,h),Nn=f,Ui=y;break;case 0:case 11:case 14:case 15:if(!Wn&&(f=h.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){y=f=f.next;do{var w=y,D=w.destroy;w=w.tag,D!==void 0&&((w&2)!==0||(w&4)!==0)&&ab(h,c,D),y=y.next}while(y!==f)}Co(a,c,h);break;case 1:if(!Wn&&(Eu(h,c),f=h.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=h.memoizedProps,f.state=h.memoizedState,f.componentWillUnmount()}catch(B){ze(h,c,B)}Co(a,c,h);break;case 21:Co(a,c,h);break;case 22:h.mode&1?(Wn=(f=Wn)||h.memoizedState!==null,Co(a,c,h),Wn=f):Co(a,c,h);break;default:Co(a,c,h)}}function lk(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var h=a.stateNode;h===null&&(h=a.stateNode=new tR),c.forEach(function(f){var y=dR.bind(null,a,f);h.has(f)||(h.add(f),f.then(y,y))})}}function $i(a,c){var h=c.deletions;if(h!==null)for(var f=0;f<h.length;f++){var y=h[f];try{var w=a,D=c,B=D;t:for(;B!==null;){switch(B.tag){case 5:Nn=B.stateNode,Ui=!1;break t;case 3:Nn=B.stateNode.containerInfo,Ui=!0;break t;case 4:Nn=B.stateNode.containerInfo,Ui=!0;break t}B=B.return}if(Nn===null)throw Error(e(160));ok(w,D,y),Nn=null,Ui=!1;var F=y.alternate;F!==null&&(F.return=null),y.return=null}catch(V){ze(y,c,V)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)ck(c,a),c=c.sibling}function ck(a,c){var h=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if($i(c,a),va(a),f&4){try{Tm(3,a,a.return),v2(3,a)}catch(vt){ze(a,a.return,vt)}try{Tm(5,a,a.return)}catch(vt){ze(a,a.return,vt)}}break;case 1:$i(c,a),va(a),f&512&&h!==null&&Eu(h,h.return);break;case 5:if($i(c,a),va(a),f&512&&h!==null&&Eu(h,h.return),a.flags&32){var y=a.stateNode;try{di(y,"")}catch(vt){ze(a,a.return,vt)}}if(f&4&&(y=a.stateNode,y!=null)){var w=a.memoizedProps,D=h!==null?h.memoizedProps:w,B=a.type,F=a.updateQueue;if(a.updateQueue=null,F!==null)try{B==="input"&&w.type==="radio"&&w.name!=null&&Wp(y,w),Yl(B,D);var V=Yl(B,w);for(D=0;D<F.length;D+=2){var Z=F[D],st=F[D+1];Z==="style"?Kl(y,st):Z==="dangerouslySetInnerHTML"?mo(y,st):Z==="children"?di(y,st):P(y,Z,st,V)}switch(B){case"input":pa(y,w);break;case"textarea":dt(y,w);break;case"select":var J=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!w.multiple;var ht=w.value;ht!=null?po(y,!!w.multiple,ht,!1):J!==!!w.multiple&&(w.defaultValue!=null?po(y,!!w.multiple,w.defaultValue,!0):po(y,!!w.multiple,w.multiple?[]:"",!1))}y[xm]=w}catch(vt){ze(a,a.return,vt)}}break;case 6:if($i(c,a),va(a),f&4){if(a.stateNode===null)throw Error(e(162));y=a.stateNode,w=a.memoizedProps;try{y.nodeValue=w}catch(vt){ze(a,a.return,vt)}}break;case 3:if($i(c,a),va(a),f&4&&h!==null&&h.memoizedState.isDehydrated)try{rm(c.containerInfo)}catch(vt){ze(a,a.return,vt)}break;case 4:$i(c,a),va(a);break;case 13:$i(c,a),va(a),y=a.child,y.flags&8192&&(w=y.memoizedState!==null,y.stateNode.isHidden=w,!w||y.alternate!==null&&y.alternate.memoizedState!==null||(ub=Qe())),f&4&&lk(a);break;case 22:if(Z=h!==null&&h.memoizedState!==null,a.mode&1?(Wn=(V=Wn)||Z,$i(c,a),Wn=V):$i(c,a),va(a),f&8192){if(V=a.memoizedState!==null,(a.stateNode.isHidden=V)&&!Z&&(a.mode&1)!==0)for(gt=a,Z=a.child;Z!==null;){for(st=gt=Z;gt!==null;){switch(J=gt,ht=J.child,J.tag){case 0:case 11:case 14:case 15:Tm(4,J,J.return);break;case 1:Eu(J,J.return);var yt=J.stateNode;if(typeof yt.componentWillUnmount=="function"){f=J,h=J.return;try{c=f,yt.props=c.memoizedProps,yt.state=c.memoizedState,yt.componentWillUnmount()}catch(vt){ze(f,h,vt)}}break;case 5:Eu(J,J.return);break;case 22:if(J.memoizedState!==null){hk(st);continue}}ht!==null?(ht.return=J,gt=ht):hk(st)}Z=Z.sibling}t:for(Z=null,st=a;;){if(st.tag===5){if(Z===null){Z=st;try{y=st.stateNode,V?(w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(B=st.stateNode,F=st.memoizedProps.style,D=F!=null&&F.hasOwnProperty("display")?F.display:null,B.style.display=au("display",D))}catch(vt){ze(a,a.return,vt)}}}else if(st.tag===6){if(Z===null)try{st.stateNode.nodeValue=V?"":st.memoizedProps}catch(vt){ze(a,a.return,vt)}}else if((st.tag!==22&&st.tag!==23||st.memoizedState===null||st===a)&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===a)break t;for(;st.sibling===null;){if(st.return===null||st.return===a)break t;Z===st&&(Z=null),st=st.return}Z===st&&(Z=null),st.sibling.return=st.return,st=st.sibling}}break;case 19:$i(c,a),va(a),f&4&&lk(a);break;case 21:break;default:$i(c,a),va(a)}}function va(a){var c=a.flags;if(c&2){try{t:{for(var h=a.return;h!==null;){if(ak(h)){var f=h;break t}h=h.return}throw Error(e(160))}switch(f.tag){case 5:var y=f.stateNode;f.flags&32&&(di(y,""),f.flags&=-33);var w=rk(a);lb(a,w,y);break;case 3:case 4:var D=f.stateNode.containerInfo,B=rk(a);ob(a,B,D);break;default:throw Error(e(161))}}catch(F){ze(a,a.return,F)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function nR(a,c,h){gt=a,dk(a)}function dk(a,c,h){for(var f=(a.mode&1)!==0;gt!==null;){var y=gt,w=y.child;if(y.tag===22&&f){var D=y.memoizedState!==null||y2;if(!D){var B=y.alternate,F=B!==null&&B.memoizedState!==null||Wn;B=y2;var V=Wn;if(y2=D,(Wn=F)&&!V)for(gt=y;gt!==null;)D=gt,F=D.child,D.tag===22&&D.memoizedState!==null?pk(y):F!==null?(F.return=D,gt=F):pk(y);for(;w!==null;)gt=w,dk(w),w=w.sibling;gt=y,y2=B,Wn=V}uk(a)}else(y.subtreeFlags&8772)!==0&&w!==null?(w.return=y,gt=w):uk(a)}}function uk(a){for(;gt!==null;){var c=gt;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Wn||v2(5,c);break;case 1:var f=c.stateNode;if(c.flags&4&&!Wn)if(h===null)f.componentDidMount();else{var y=c.elementType===c.type?h.memoizedProps:Li(c.type,h.memoizedProps);f.componentDidUpdate(y,h.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var w=c.updateQueue;w!==null&&h_(c,w,f);break;case 3:var D=c.updateQueue;if(D!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}h_(c,D,h)}break;case 5:var B=c.stateNode;if(h===null&&c.flags&4){h=B;var F=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&h.focus();break;case"img":F.src&&(h.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var V=c.alternate;if(V!==null){var Z=V.memoizedState;if(Z!==null){var st=Z.dehydrated;st!==null&&rm(st)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(e(163))}Wn||c.flags&512&&rb(c)}catch(J){ze(c,c.return,J)}}if(c===a){gt=null;break}if(h=c.sibling,h!==null){h.return=c.return,gt=h;break}gt=c.return}}function hk(a){for(;gt!==null;){var c=gt;if(c===a){gt=null;break}var h=c.sibling;if(h!==null){h.return=c.return,gt=h;break}gt=c.return}}function pk(a){for(;gt!==null;){var c=gt;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{v2(4,c)}catch(F){ze(c,h,F)}break;case 1:var f=c.stateNode;if(typeof f.componentDidMount=="function"){var y=c.return;try{f.componentDidMount()}catch(F){ze(c,y,F)}}var w=c.return;try{rb(c)}catch(F){ze(c,w,F)}break;case 5:var D=c.return;try{rb(c)}catch(F){ze(c,D,F)}}}catch(F){ze(c,c.return,F)}if(c===a){gt=null;break}var B=c.sibling;if(B!==null){B.return=c.return,gt=B;break}gt=c.return}}var sR=Math.ceil,b2=R.ReactCurrentDispatcher,cb=R.ReactCurrentOwner,fi=R.ReactCurrentBatchConfig,Xt=0,bn=null,en=null,Rn=0,js=0,Cu=So(0),cn=0,Pm=null,rc=0,w2=0,db=0,Dm=null,vs=null,ub=0,Tu=1/0,or=null,S2=!1,hb=null,To=null,A2=!1,Po=null,_2=0,Nm=0,pb=null,k2=-1,E2=0;function ss(){return(Xt&6)!==0?Qe():k2!==-1?k2:k2=Qe()}function Do(a){return(a.mode&1)===0?1:(Xt&2)!==0&&Rn!==0?Rn&-Rn:UN.transition!==null?(E2===0&&(E2=r1()),E2):(a=ie,a!==0||(a=window.event,a=a===void 0?16:f1(a.type)),a)}function zi(a,c,h,f){if(50<Nm)throw Nm=0,pb=null,Error(e(185));em(a,h,f),((Xt&2)===0||a!==bn)&&(a===bn&&((Xt&2)===0&&(w2|=h),cn===4&&No(a,Rn)),bs(a,f),h===1&&Xt===0&&(c.mode&1)===0&&(Tu=Qe()+500,t2&&_o()))}function bs(a,c){var h=a.callbackNode;UD(a,c);var f=B0(a,a===bn?Rn:0);if(f===0)h!==null&&s1(h),a.callbackNode=null,a.callbackPriority=0;else if(c=f&-f,a.callbackPriority!==c){if(h!=null&&s1(h),c===1)a.tag===0?LN(fk.bind(null,a)):t_(fk.bind(null,a)),BN(function(){(Xt&6)===0&&_o()}),h=null;else{switch(o1(f)){case 1:h=Wy;break;case 4:h=i1;break;case 16:h=N0;break;case 536870912:h=a1;break;default:h=N0}h=Ak(h,mk.bind(null,a))}a.callbackPriority=c,a.callbackNode=h}}function mk(a,c){if(k2=-1,E2=0,(Xt&6)!==0)throw Error(e(327));var h=a.callbackNode;if(Pu()&&a.callbackNode!==h)return null;var f=B0(a,a===bn?Rn:0);if(f===0)return null;if((f&30)!==0||(f&a.expiredLanes)!==0||c)c=C2(a,f);else{c=f;var y=Xt;Xt|=2;var w=xk();(bn!==a||Rn!==c)&&(or=null,Tu=Qe()+500,lc(a,c));do try{rR();break}catch(B){gk(a,B)}while(!0);Nv(),b2.current=w,Xt=y,en!==null?c=0:(bn=null,Rn=0,c=cn)}if(c!==0){if(c===2&&(y=Gy(a),y!==0&&(f=y,c=mb(a,y))),c===1)throw h=Pm,lc(a,0),No(a,f),bs(a,Qe()),h;if(c===6)No(a,f);else{if(y=a.current.alternate,(f&30)===0&&!iR(y)&&(c=C2(a,f),c===2&&(w=Gy(a),w!==0&&(f=w,c=mb(a,w))),c===1))throw h=Pm,lc(a,0),No(a,f),bs(a,Qe()),h;switch(a.finishedWork=y,a.finishedLanes=f,c){case 0:case 1:throw Error(e(345));case 2:cc(a,vs,or);break;case 3:if(No(a,f),(f&130023424)===f&&(c=ub+500-Qe(),10<c)){if(B0(a,0)!==0)break;if(y=a.suspendedLanes,(y&f)!==f){ss(),a.pingedLanes|=a.suspendedLanes&y;break}a.timeoutHandle=bv(cc.bind(null,a,vs,or),c);break}cc(a,vs,or);break;case 4:if(No(a,f),(f&4194240)===f)break;for(c=a.eventTimes,y=-1;0<f;){var D=31-Ii(f);w=1<<D,D=c[D],D>y&&(y=D),f&=~w}if(f=y,f=Qe()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*sR(f/1960))-f,10<f){a.timeoutHandle=bv(cc.bind(null,a,vs,or),f);break}cc(a,vs,or);break;case 5:cc(a,vs,or);break;default:throw Error(e(329))}}}return bs(a,Qe()),a.callbackNode===h?mk.bind(null,a):null}function mb(a,c){var h=Dm;return a.current.memoizedState.isDehydrated&&(lc(a,c).flags|=256),a=C2(a,c),a!==2&&(c=vs,vs=h,c!==null&&fb(c)),a}function fb(a){vs===null?vs=a:vs.push.apply(vs,a)}function iR(a){for(var c=a;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var f=0;f<h.length;f++){var y=h[f],w=y.getSnapshot;y=y.value;try{if(!Fi(w(),y))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function No(a,c){for(c&=~db,c&=~w2,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var h=31-Ii(c),f=1<<h;a[h]=-1,c&=~f}}function fk(a){if((Xt&6)!==0)throw Error(e(327));Pu();var c=B0(a,0);if((c&1)===0)return bs(a,Qe()),null;var h=C2(a,c);if(a.tag!==0&&h===2){var f=Gy(a);f!==0&&(c=f,h=mb(a,f))}if(h===1)throw h=Pm,lc(a,0),No(a,c),bs(a,Qe()),h;if(h===6)throw Error(e(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,cc(a,vs,or),bs(a,Qe()),null}function gb(a,c){var h=Xt;Xt|=1;try{return a(c)}finally{Xt=h,Xt===0&&(Tu=Qe()+500,t2&&_o())}}function oc(a){Po!==null&&Po.tag===0&&(Xt&6)===0&&Pu();var c=Xt;Xt|=1;var h=fi.transition,f=ie;try{if(fi.transition=null,ie=1,a)return a()}finally{ie=f,fi.transition=h,Xt=c,(Xt&6)===0&&_o()}}function xb(){js=Cu.current,ke(Cu)}function lc(a,c){a.finishedWork=null,a.finishedLanes=0;var h=a.timeoutHandle;if(h!==-1&&(a.timeoutHandle=-1,ON(h)),en!==null)for(h=en.return;h!==null;){var f=h;switch(Ev(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&J0();break;case 3:_u(),ke(gs),ke(Hn),Lv();break;case 5:Fv(f);break;case 4:_u();break;case 13:ke(Oe);break;case 19:ke(Oe);break;case 10:Rv(f.type._context);break;case 22:case 23:xb()}h=h.return}if(bn=a,en=a=Ro(a.current,null),Rn=js=c,cn=0,Pm=null,db=w2=rc=0,vs=Dm=null,sc!==null){for(c=0;c<sc.length;c++)if(h=sc[c],f=h.interleaved,f!==null){h.interleaved=null;var y=f.next,w=h.pending;if(w!==null){var D=w.next;w.next=y,f.next=D}h.pending=f}sc=null}return a}function gk(a,c){do{var h=en;try{if(Nv(),d2.current=m2,u2){for(var f=Be.memoizedState;f!==null;){var y=f.queue;y!==null&&(y.pending=null),f=f.next}u2=!1}if(ac=0,vn=ln=Be=null,Am=!1,_m=0,cb.current=null,h===null||h.return===null){cn=1,Pm=c,en=null;break}t:{var w=a,D=h.return,B=h,F=c;if(c=Rn,B.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var V=F,Z=B,st=Z.tag;if((Z.mode&1)===0&&(st===0||st===11||st===15)){var J=Z.alternate;J?(Z.updateQueue=J.updateQueue,Z.memoizedState=J.memoizedState,Z.lanes=J.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var ht=$_(D);if(ht!==null){ht.flags&=-257,z_(ht,D,B,w,c),ht.mode&1&&U_(w,V,c),c=ht,F=V;var yt=c.updateQueue;if(yt===null){var vt=new Set;vt.add(F),c.updateQueue=vt}else yt.add(F);break t}else{if((c&1)===0){U_(w,V,c),yb();break t}F=Error(e(426))}}else if(Pe&&B.mode&1){var Je=$_(D);if(Je!==null){(Je.flags&65536)===0&&(Je.flags|=256),z_(Je,D,B,w,c),Pv(ku(F,B));break t}}w=F=ku(F,B),cn!==4&&(cn=2),Dm===null?Dm=[w]:Dm.push(w),w=D;do{switch(w.tag){case 3:w.flags|=65536,c&=-c,w.lanes|=c;var $=j_(w,F,c);u_(w,$);break t;case 1:B=F;var L=w.type,z=w.stateNode;if((w.flags&128)===0&&(typeof L.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(To===null||!To.has(z)))){w.flags|=65536,c&=-c,w.lanes|=c;var rt=L_(w,B,c);u_(w,rt);break t}}w=w.return}while(w!==null)}vk(h)}catch(wt){c=wt,en===h&&h!==null&&(en=h=h.return);continue}break}while(!0)}function xk(){var a=b2.current;return b2.current=m2,a===null?m2:a}function yb(){(cn===0||cn===3||cn===2)&&(cn=4),bn===null||(rc&268435455)===0&&(w2&268435455)===0||No(bn,Rn)}function C2(a,c){var h=Xt;Xt|=2;var f=xk();(bn!==a||Rn!==c)&&(or=null,lc(a,c));do try{aR();break}catch(y){gk(a,y)}while(!0);if(Nv(),Xt=h,b2.current=f,en!==null)throw Error(e(261));return bn=null,Rn=0,cn}function aR(){for(;en!==null;)yk(en)}function rR(){for(;en!==null&&!ND();)yk(en)}function yk(a){var c=Sk(a.alternate,a,js);a.memoizedProps=a.pendingProps,c===null?vk(a):en=c,cb.current=null}function vk(a){var c=a;do{var h=c.alternate;if(a=c.return,(c.flags&32768)===0){if(h=JN(h,c,js),h!==null){en=h;return}}else{if(h=ZN(h,c),h!==null){h.flags&=32767,en=h;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{cn=6,en=null;return}}if(c=c.sibling,c!==null){en=c;return}en=c=a}while(c!==null);cn===0&&(cn=5)}function cc(a,c,h){var f=ie,y=fi.transition;try{fi.transition=null,ie=1,oR(a,c,h,f)}finally{fi.transition=y,ie=f}return null}function oR(a,c,h,f){do Pu();while(Po!==null);if((Xt&6)!==0)throw Error(e(327));h=a.finishedWork;var y=a.finishedLanes;if(h===null)return null;if(a.finishedWork=null,a.finishedLanes=0,h===a.current)throw Error(e(177));a.callbackNode=null,a.callbackPriority=0;var w=h.lanes|h.childLanes;if($D(a,w),a===bn&&(en=bn=null,Rn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||A2||(A2=!0,Ak(N0,function(){return Pu(),null})),w=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||w){w=fi.transition,fi.transition=null;var D=ie;ie=1;var B=Xt;Xt|=4,cb.current=null,eR(a,h),ck(h,a),CN(yv),j0=!!xv,yv=xv=null,a.current=h,nR(h),RD(),Xt=B,ie=D,fi.transition=w}else a.current=h;if(A2&&(A2=!1,Po=a,_2=y),w=a.pendingLanes,w===0&&(To=null),BD(h.stateNode),bs(a,Qe()),c!==null)for(f=a.onRecoverableError,h=0;h<c.length;h++)y=c[h],f(y.value,{componentStack:y.stack,digest:y.digest});if(S2)throw S2=!1,a=hb,hb=null,a;return(_2&1)!==0&&a.tag!==0&&Pu(),w=a.pendingLanes,(w&1)!==0?a===pb?Nm++:(Nm=0,pb=a):Nm=0,_o(),null}function Pu(){if(Po!==null){var a=o1(_2),c=fi.transition,h=ie;try{if(fi.transition=null,ie=16>a?16:a,Po===null)var f=!1;else{if(a=Po,Po=null,_2=0,(Xt&6)!==0)throw Error(e(331));var y=Xt;for(Xt|=4,gt=a.current;gt!==null;){var w=gt,D=w.child;if((gt.flags&16)!==0){var B=w.deletions;if(B!==null){for(var F=0;F<B.length;F++){var V=B[F];for(gt=V;gt!==null;){var Z=gt;switch(Z.tag){case 0:case 11:case 15:Tm(8,Z,w)}var st=Z.child;if(st!==null)st.return=Z,gt=st;else for(;gt!==null;){Z=gt;var J=Z.sibling,ht=Z.return;if(ik(Z),Z===V){gt=null;break}if(J!==null){J.return=ht,gt=J;break}gt=ht}}}var yt=w.alternate;if(yt!==null){var vt=yt.child;if(vt!==null){yt.child=null;do{var Je=vt.sibling;vt.sibling=null,vt=Je}while(vt!==null)}}gt=w}}if((w.subtreeFlags&2064)!==0&&D!==null)D.return=w,gt=D;else t:for(;gt!==null;){if(w=gt,(w.flags&2048)!==0)switch(w.tag){case 0:case 11:case 15:Tm(9,w,w.return)}var $=w.sibling;if($!==null){$.return=w.return,gt=$;break t}gt=w.return}}var L=a.current;for(gt=L;gt!==null;){D=gt;var z=D.child;if((D.subtreeFlags&2064)!==0&&z!==null)z.return=D,gt=z;else t:for(D=L;gt!==null;){if(B=gt,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:v2(9,B)}}catch(wt){ze(B,B.return,wt)}if(B===D){gt=null;break t}var rt=B.sibling;if(rt!==null){rt.return=B.return,gt=rt;break t}gt=B.return}}if(Xt=y,_o(),fa&&typeof fa.onPostCommitFiberRoot=="function")try{fa.onPostCommitFiberRoot(R0,a)}catch{}f=!0}return f}finally{ie=h,fi.transition=c}}return!1}function bk(a,c,h){c=ku(h,c),c=j_(a,c,1),a=Eo(a,c,1),c=ss(),a!==null&&(em(a,1,c),bs(a,c))}function ze(a,c,h){if(a.tag===3)bk(a,a,h);else for(;c!==null;){if(c.tag===3){bk(c,a,h);break}else if(c.tag===1){var f=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(To===null||!To.has(f))){a=ku(h,a),a=L_(c,a,1),c=Eo(c,a,1),a=ss(),c!==null&&(em(c,1,a),bs(c,a));break}}c=c.return}}function lR(a,c,h){var f=a.pingCache;f!==null&&f.delete(c),c=ss(),a.pingedLanes|=a.suspendedLanes&h,bn===a&&(Rn&h)===h&&(cn===4||cn===3&&(Rn&130023424)===Rn&&500>Qe()-ub?lc(a,0):db|=h),bs(a,c)}function wk(a,c){c===0&&((a.mode&1)===0?c=1:(c=O0,O0<<=1,(O0&130023424)===0&&(O0=4194304)));var h=ss();a=ir(a,c),a!==null&&(em(a,c,h),bs(a,h))}function cR(a){var c=a.memoizedState,h=0;c!==null&&(h=c.retryLane),wk(a,h)}function dR(a,c){var h=0;switch(a.tag){case 13:var f=a.stateNode,y=a.memoizedState;y!==null&&(h=y.retryLane);break;case 19:f=a.stateNode;break;default:throw Error(e(314))}f!==null&&f.delete(c),wk(a,h)}var Sk;Sk=function(a,c,h){if(a!==null)if(a.memoizedProps!==c.pendingProps||gs.current)ys=!0;else{if((a.lanes&h)===0&&(c.flags&128)===0)return ys=!1,QN(a,c,h);ys=(a.flags&131072)!==0}else ys=!1,Pe&&(c.flags&1048576)!==0&&e_(c,n2,c.index);switch(c.lanes=0,c.tag){case 2:var f=c.type;x2(a,c),a=c.pendingProps;var y=xu(c,Hn.current);Au(c,h),y=zv(null,c,f,a,y,h);var w=Hv();return c.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,xs(f)?(w=!0,Z0(c)):w=!1,c.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Bv(c),y.updater=f2,c.stateNode=y,y._reactInternals=c,Xv(c,f,a,h),c=Zv(null,c,f,!0,w,h)):(c.tag=0,Pe&&w&&kv(c),ns(null,c,y,h),c=c.child),c;case 16:f=c.elementType;t:{switch(x2(a,c),a=c.pendingProps,y=f._init,f=y(f._payload),c.type=f,y=c.tag=hR(f),a=Li(f,a),y){case 0:c=Jv(null,c,f,a,h);break t;case 1:c=K_(null,c,f,a,h);break t;case 11:c=H_(null,c,f,a,h);break t;case 14:c=q_(null,c,f,Li(f.type,a),h);break t}throw Error(e(306,f,""))}return c;case 0:return f=c.type,y=c.pendingProps,y=c.elementType===f?y:Li(f,y),Jv(a,c,f,y,h);case 1:return f=c.type,y=c.pendingProps,y=c.elementType===f?y:Li(f,y),K_(a,c,f,y,h);case 3:t:{if(X_(c),a===null)throw Error(e(387));f=c.pendingProps,w=c.memoizedState,y=w.element,d_(a,c),l2(c,f,null,h);var D=c.memoizedState;if(f=D.element,w.isDehydrated)if(w={element:f,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},c.updateQueue.baseState=w,c.memoizedState=w,c.flags&256){y=ku(Error(e(423)),c),c=Y_(a,c,f,h,y);break t}else if(f!==y){y=ku(Error(e(424)),c),c=Y_(a,c,f,h,y);break t}else for(Fs=wo(c.stateNode.containerInfo.firstChild),Is=c,Pe=!0,ji=null,h=l_(c,null,f,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(bu(),f===y){c=rr(a,c,h);break t}ns(a,c,f,h)}c=c.child}return c;case 5:return p_(c),a===null&&Tv(c),f=c.type,y=c.pendingProps,w=a!==null?a.memoizedProps:null,D=y.children,vv(f,y)?D=null:w!==null&&vv(f,w)&&(c.flags|=32),G_(a,c),ns(a,c,D,h),c.child;case 6:return a===null&&Tv(c),null;case 13:return Q_(a,c,h);case 4:return Iv(c,c.stateNode.containerInfo),f=c.pendingProps,a===null?c.child=wu(c,null,f,h):ns(a,c,f,h),c.child;case 11:return f=c.type,y=c.pendingProps,y=c.elementType===f?y:Li(f,y),H_(a,c,f,y,h);case 7:return ns(a,c,c.pendingProps,h),c.child;case 8:return ns(a,c,c.pendingProps.children,h),c.child;case 12:return ns(a,c,c.pendingProps.children,h),c.child;case 10:t:{if(f=c.type._context,y=c.pendingProps,w=c.memoizedProps,D=y.value,ve(a2,f._currentValue),f._currentValue=D,w!==null)if(Fi(w.value,D)){if(w.children===y.children&&!gs.current){c=rr(a,c,h);break t}}else for(w=c.child,w!==null&&(w.return=c);w!==null;){var B=w.dependencies;if(B!==null){D=w.child;for(var F=B.firstContext;F!==null;){if(F.context===f){if(w.tag===1){F=ar(-1,h&-h),F.tag=2;var V=w.updateQueue;if(V!==null){V=V.shared;var Z=V.pending;Z===null?F.next=F:(F.next=Z.next,Z.next=F),V.pending=F}}w.lanes|=h,F=w.alternate,F!==null&&(F.lanes|=h),Mv(w.return,h,c),B.lanes|=h;break}F=F.next}}else if(w.tag===10)D=w.type===c.type?null:w.child;else if(w.tag===18){if(D=w.return,D===null)throw Error(e(341));D.lanes|=h,B=D.alternate,B!==null&&(B.lanes|=h),Mv(D,h,c),D=w.sibling}else D=w.child;if(D!==null)D.return=w;else for(D=w;D!==null;){if(D===c){D=null;break}if(w=D.sibling,w!==null){w.return=D.return,D=w;break}D=D.return}w=D}ns(a,c,y.children,h),c=c.child}return c;case 9:return y=c.type,f=c.pendingProps.children,Au(c,h),y=pi(y),f=f(y),c.flags|=1,ns(a,c,f,h),c.child;case 14:return f=c.type,y=Li(f,c.pendingProps),y=Li(f.type,y),q_(a,c,f,y,h);case 15:return V_(a,c,c.type,c.pendingProps,h);case 17:return f=c.type,y=c.pendingProps,y=c.elementType===f?y:Li(f,y),x2(a,c),c.tag=1,xs(f)?(a=!0,Z0(c)):a=!1,Au(c,h),I_(c,f,y),Xv(c,f,y,h),Zv(null,c,f,!0,a,h);case 19:return Z_(a,c,h);case 22:return W_(a,c,h)}throw Error(e(156,c.tag))};function Ak(a,c){return n1(a,c)}function uR(a,c,h,f){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(a,c,h,f){return new uR(a,c,h,f)}function vb(a){return a=a.prototype,!(!a||!a.isReactComponent)}function hR(a){if(typeof a=="function")return vb(a)?1:0;if(a!=null){if(a=a.$$typeof,a===q)return 11;if(a===lt)return 14}return 2}function Ro(a,c){var h=a.alternate;return h===null?(h=gi(a.tag,c,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=c,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&14680064,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,c=a.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h}function T2(a,c,h,f,y,w){var D=2;if(f=a,typeof a=="function")vb(a)&&(D=1);else if(typeof a=="string")D=5;else t:switch(a){case I:return dc(h.children,y,w,c);case H:D=8,y|=8;break;case K:return a=gi(12,h,c,y|2),a.elementType=K,a.lanes=w,a;case tt:return a=gi(13,h,c,y),a.elementType=tt,a.lanes=w,a;case et:return a=gi(19,h,c,y),a.elementType=et,a.lanes=w,a;case it:return P2(h,y,w,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case W:D=10;break t;case Y:D=9;break t;case q:D=11;break t;case lt:D=14;break t;case ot:D=16,f=null;break t}throw Error(e(130,a==null?a:typeof a,""))}return c=gi(D,h,c,y),c.elementType=a,c.type=f,c.lanes=w,c}function dc(a,c,h,f){return a=gi(7,a,f,c),a.lanes=h,a}function P2(a,c,h,f){return a=gi(22,a,f,c),a.elementType=it,a.lanes=h,a.stateNode={isHidden:!1},a}function bb(a,c,h){return a=gi(6,a,null,c),a.lanes=h,a}function wb(a,c,h){return c=gi(4,a.children!==null?a.children:[],a.key,c),c.lanes=h,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function pR(a,c,h,f,y){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ky(0),this.expirationTimes=Ky(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ky(0),this.identifierPrefix=f,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Sb(a,c,h,f,y,w,D,B,F){return a=new pR(a,c,h,B,F),c===1?(c=1,w===!0&&(c|=8)):c=0,w=gi(3,null,null,c),a.current=w,w.stateNode=a,w.memoizedState={element:f,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bv(w),a}function mR(a,c,h){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:f==null?null:""+f,children:a,containerInfo:c,implementation:h}}function _k(a){if(!a)return Ao;a=a._reactInternals;t:{if(Jl(a)!==a||a.tag!==1)throw Error(e(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(xs(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(c!==null);throw Error(e(171))}if(a.tag===1){var h=a.type;if(xs(h))return J1(a,h,c)}return c}function kk(a,c,h,f,y,w,D,B,F){return a=Sb(h,f,!0,a,y,w,D,B,F),a.context=_k(null),h=a.current,f=ss(),y=Do(h),w=ar(f,y),w.callback=c??null,Eo(h,w,y),a.current.lanes=y,em(a,y,f),bs(a,f),a}function D2(a,c,h,f){var y=c.current,w=ss(),D=Do(y);return h=_k(h),c.context===null?c.context=h:c.pendingContext=h,c=ar(w,D),c.payload={element:a},f=f===void 0?null:f,f!==null&&(c.callback=f),a=Eo(y,c,D),a!==null&&(zi(a,y,D,w),o2(a,y,D)),D}function N2(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Ek(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<c?h:c}}function Ab(a,c){Ek(a,c),(a=a.alternate)&&Ek(a,c)}function fR(){return null}var Ck=typeof reportError=="function"?reportError:function(a){console.error(a)};function _b(a){this._internalRoot=a}R2.prototype.render=_b.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(e(409));D2(a,c,null,null)},R2.prototype.unmount=_b.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;oc(function(){D2(null,a,null,null)}),c[tr]=null}};function R2(a){this._internalRoot=a}R2.prototype.unstable_scheduleHydration=function(a){if(a){var c=d1();a={blockedOn:null,target:a,priority:c};for(var h=0;h<yo.length&&c!==0&&c<yo[h].priority;h++);yo.splice(h,0,a),h===0&&p1(a)}};function kb(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function M2(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Tk(){}function gR(a,c,h,f,y){if(y){if(typeof f=="function"){var w=f;f=function(){var V=N2(D);w.call(V)}}var D=kk(c,f,a,0,null,!1,!1,"",Tk);return a._reactRootContainer=D,a[tr]=D.current,fm(a.nodeType===8?a.parentNode:a),oc(),D}for(;y=a.lastChild;)a.removeChild(y);if(typeof f=="function"){var B=f;f=function(){var V=N2(F);B.call(V)}}var F=Sb(a,0,!1,null,null,!1,!1,"",Tk);return a._reactRootContainer=F,a[tr]=F.current,fm(a.nodeType===8?a.parentNode:a),oc(function(){D2(c,F,h,f)}),F}function O2(a,c,h,f,y){var w=h._reactRootContainer;if(w){var D=w;if(typeof y=="function"){var B=y;y=function(){var F=N2(D);B.call(F)}}D2(c,D,a,y)}else D=gR(h,c,a,y,f);return N2(D)}l1=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var h=tm(c.pendingLanes);h!==0&&(Xy(c,h|1),bs(c,Qe()),(Xt&6)===0&&(Tu=Qe()+500,_o()))}break;case 13:oc(function(){var f=ir(a,1);if(f!==null){var y=ss();zi(f,a,1,y)}}),Ab(a,1)}},Yy=function(a){if(a.tag===13){var c=ir(a,134217728);if(c!==null){var h=ss();zi(c,a,134217728,h)}Ab(a,134217728)}},c1=function(a){if(a.tag===13){var c=Do(a),h=ir(a,c);if(h!==null){var f=ss();zi(h,a,c,f)}Ab(a,c)}},d1=function(){return ie},u1=function(a,c){var h=ie;try{return ie=a,c()}finally{ie=h}},zy=function(a,c,h){switch(c){case"input":if(pa(a,h),c=h.name,h.type==="radio"&&c!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var f=h[c];if(f!==a&&f.form===a.form){var y=Q0(f);if(!y)throw Error(e(90));Os(f),pa(f,y)}}}break;case"textarea":dt(a,h);break;case"select":c=h.value,c!=null&&po(a,!!h.multiple,c,!1)}},XA=gb,YA=oc;var xR={usingClientEntryPoint:!1,Events:[ym,fu,Q0,GA,KA,gb]},Rm={findFiberByHostInstance:Zl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yR={bundleType:Rm.bundleType,version:Rm.version,rendererPackageName:Rm.rendererPackageName,rendererConfig:Rm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=t1(a),a===null?null:a.stateNode},findFiberByHostInstance:Rm.findFiberByHostInstance||fR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var B2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!B2.isDisabled&&B2.supportsFiber)try{R0=B2.inject(yR),fa=B2}catch{}}return ws.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xR,ws.createPortal=function(a,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kb(c))throw Error(e(200));return mR(a,c,null,h)},ws.createRoot=function(a,c){if(!kb(a))throw Error(e(299));var h=!1,f="",y=Ck;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(f=c.identifierPrefix),c.onRecoverableError!==void 0&&(y=c.onRecoverableError)),c=Sb(a,1,!1,null,null,h,!1,f,y),a[tr]=c.current,fm(a.nodeType===8?a.parentNode:a),new _b(c)},ws.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(e(188)):(a=Object.keys(a).join(","),Error(e(268,a)));return a=t1(c),a=a===null?null:a.stateNode,a},ws.flushSync=function(a){return oc(a)},ws.hydrate=function(a,c,h){if(!M2(c))throw Error(e(200));return O2(null,a,c,!0,h)},ws.hydrateRoot=function(a,c,h){if(!kb(a))throw Error(e(405));var f=h!=null&&h.hydratedSources||null,y=!1,w="",D=Ck;if(h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(w=h.identifierPrefix),h.onRecoverableError!==void 0&&(D=h.onRecoverableError)),c=kk(c,null,a,1,h??null,y,!1,w,D),a[tr]=c.current,fm(a),f)for(a=0;a<f.length;a++)h=f[a],y=h._getVersion,y=y(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,y]:c.mutableSourceEagerHydrationData.push(h,y);return new R2(c)},ws.render=function(a,c,h){if(!M2(c))throw Error(e(200));return O2(null,a,c,!1,h)},ws.unmountComponentAtNode=function(a){if(!M2(a))throw Error(e(40));return a._reactRootContainer?(oc(function(){O2(null,null,a,!1,function(){a._reactRootContainer=null,a[tr]=null})}),!0):!1},ws.unstable_batchedUpdates=gb,ws.unstable_renderSubtreeIntoContainer=function(a,c,h,f){if(!M2(h))throw Error(e(200));if(a==null||a._reactInternals===void 0)throw Error(e(38));return O2(a,c,h,!1,f)},ws.version="18.3.1-next-f1338f8080-20240426",ws}var Fk;function DR(){if(Fk)return Pb.exports;Fk=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Pb.exports=PR(),Pb.exports}var jk;function NR(){if(jk)return I2;jk=1;var r=DR();return I2.createRoot=r.createRoot,I2.hydrateRoot=r.hydrateRoot,I2}var RR=NR();const MR=r=>r instanceof Error?r.message+`
`+r.stack:JSON.stringify(r,null,2);class OR extends OC.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?T.jsxs("div",{className:"p-4 border border-red-500 rounded","data-matrix-id":"src/components/ErrorBoundary.tsx:26:8","data-matrix-name":"div","data-component-path":"src/components/ErrorBoundary.tsx","data-component-line":"26","data-component-file":"ErrorBoundary.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-4%20border%20border-red-500%20rounded%22%7D",children:[T.jsx("h2",{className:"text-red-500","data-matrix-id":"src/components/ErrorBoundary.tsx:27:10","data-matrix-name":"h2","data-component-path":"src/components/ErrorBoundary.tsx","data-component-line":"27","data-component-file":"ErrorBoundary.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-red-500%22%7D",children:"Something went wrong."}),T.jsx("pre",{className:"mt-2 text-sm","data-matrix-id":"src/components/ErrorBoundary.tsx:28:10","data-matrix-name":"pre","data-component-path":"src/components/ErrorBoundary.tsx","data-component-line":"28","data-component-file":"ErrorBoundary.tsx","data-component-name":"pre","data-component-content":"%7B%22className%22%3A%22mt-2%20text-sm%22%7D",children:MR(this.state.error)})]}):this.props.children}}var Up=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},BR={setTimeout:(r,t)=>setTimeout(r,t),clearTimeout:r=>clearTimeout(r),setInterval:(r,t)=>setInterval(r,t),clearInterval:r=>clearInterval(r)},zo,hA,SC,IR=(SC=class{constructor(){A(this,zo,BR);A(this,hA,!1)}setTimeoutProvider(r){b(this,zo,r)}setTimeout(r,t){return l(this,zo).setTimeout(r,t)}clearTimeout(r){l(this,zo).clearTimeout(r)}setInterval(r,t){return l(this,zo).setInterval(r,t)}clearInterval(r){l(this,zo).clearInterval(r)}},zo=new WeakMap,hA=new WeakMap,SC),Ac=new IR;function FR(r){setTimeout(r,0)}var Yd=typeof window>"u"||"Deno"in globalThis;function ps(){}function jR(r,t){return typeof r=="function"?r(t):r}function nw(r){return typeof r=="number"&&r>=0&&r!==1/0}function BC(r,t){return Math.max(r+(t||0)-Date.now(),0)}function zl(r,t){return typeof r=="function"?r(t):r}function Ri(r,t){return typeof r=="function"?r(t):r}function Lk(r,t){const{type:e="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:d}=r;if(o){if(n){if(t.queryHash!==mA(o,t.options))return!1}else if(!mf(t.queryKey,o))return!1}if(e!=="all"){const u=t.isActive();if(e==="active"&&!u||e==="inactive"&&u)return!1}return!(typeof d=="boolean"&&t.isStale()!==d||s&&s!==t.state.fetchStatus||i&&!i(t))}function Uk(r,t){const{exact:e,status:n,predicate:s,mutationKey:i}=r;if(i){if(!t.options.mutationKey)return!1;if(e){if(Qd(t.options.mutationKey)!==Qd(i))return!1}else if(!mf(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function mA(r,t){return((t==null?void 0:t.queryKeyHashFn)||Qd)(r)}function Qd(r){return JSON.stringify(r,(t,e)=>sw(e)?Object.keys(e).sort().reduce((n,s)=>(n[s]=e[s],n),{}):e)}function mf(r,t){return r===t?!0:typeof r!=typeof t?!1:r&&t&&typeof r=="object"&&typeof t=="object"?Object.keys(t).every(e=>mf(r[e],t[e])):!1}var LR=Object.prototype.hasOwnProperty;function IC(r,t){if(r===t)return r;const e=$k(r)&&$k(t);if(!e&&!(sw(r)&&sw(t)))return t;const s=(e?r:Object.keys(r)).length,i=e?t:Object.keys(t),o=i.length,d=e?new Array(o):{};let u=0;for(let p=0;p<o;p++){const m=e?p:i[p],g=r[m],x=t[m];if(g===x){d[m]=g,(e?p<s:LR.call(r,m))&&u++;continue}if(g===null||x===null||typeof g!="object"||typeof x!="object"){d[m]=x;continue}const v=IC(g,x);d[m]=v,v===g&&u++}return s===o&&u===s?r:d}function $x(r,t){if(!t||Object.keys(r).length!==Object.keys(t).length)return!1;for(const e in r)if(r[e]!==t[e])return!1;return!0}function $k(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function sw(r){if(!zk(r))return!1;const t=r.constructor;if(t===void 0)return!0;const e=t.prototype;return!(!zk(e)||!e.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function zk(r){return Object.prototype.toString.call(r)==="[object Object]"}function UR(r){return new Promise(t=>{Ac.setTimeout(t,r)})}function iw(r,t,e){return typeof e.structuralSharing=="function"?e.structuralSharing(r,t):e.structuralSharing!==!1?IC(r,t):t}function $R(r,t,e=0){const n=[...r,t];return e&&n.length>e?n.slice(1):n}function zR(r,t,e=0){const n=[t,...r];return e&&n.length>e?n.slice(0,-1):n}var fA=Symbol();function FC(r,t){return!r.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!r.queryFn||r.queryFn===fA?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function jC(r,t){return typeof r=="function"?r(...t):!!r}var Ec,Ho,eh,AC,HR=(AC=class extends Up{constructor(){super();A(this,Ec);A(this,Ho);A(this,eh);b(this,eh,t=>{if(!Yd&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}})}onSubscribe(){l(this,Ho)||this.setEventListener(l(this,eh))}onUnsubscribe(){var t;this.hasListeners()||((t=l(this,Ho))==null||t.call(this),b(this,Ho,void 0))}setEventListener(t){var e;b(this,eh,t),(e=l(this,Ho))==null||e.call(this),b(this,Ho,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){l(this,Ec)!==t&&(b(this,Ec,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){var t;return typeof l(this,Ec)=="boolean"?l(this,Ec):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Ec=new WeakMap,Ho=new WeakMap,eh=new WeakMap,AC),gA=new HR;function aw(){let r,t;const e=new Promise((s,i)=>{r=s,t=i});e.status="pending",e.catch(()=>{});function n(s){Object.assign(e,s),delete e.resolve,delete e.reject}return e.resolve=s=>{n({status:"fulfilled",value:s}),r(s)},e.reject=s=>{n({status:"rejected",reason:s}),t(s)},e}var qR=FR;function VR(){let r=[],t=0,e=d=>{d()},n=d=>{d()},s=qR;const i=d=>{t?r.push(d):s(()=>{e(d)})},o=()=>{const d=r;r=[],d.length&&s(()=>{n(()=>{d.forEach(u=>{e(u)})})})};return{batch:d=>{let u;t++;try{u=d()}finally{t--,t||o()}return u},batchCalls:d=>(...u)=>{i(()=>{d(...u)})},schedule:i,setNotifyFunction:d=>{e=d},setBatchNotifyFunction:d=>{n=d},setScheduler:d=>{s=d}}}var fn=VR(),nh,qo,sh,_C,WR=(_C=class extends Up{constructor(){super();A(this,nh,!0);A(this,qo);A(this,sh);b(this,sh,t=>{if(!Yd&&window.addEventListener){const e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}}})}onSubscribe(){l(this,qo)||this.setEventListener(l(this,sh))}onUnsubscribe(){var t;this.hasListeners()||((t=l(this,qo))==null||t.call(this),b(this,qo,void 0))}setEventListener(t){var e;b(this,sh,t),(e=l(this,qo))==null||e.call(this),b(this,qo,t(this.setOnline.bind(this)))}setOnline(t){l(this,nh)!==t&&(b(this,nh,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return l(this,nh)}},nh=new WeakMap,qo=new WeakMap,sh=new WeakMap,_C),zx=new WR;function GR(r){return Math.min(1e3*2**r,3e4)}function LC(r){return(r??"online")==="online"?zx.isOnline():!0}var rw=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function UC(r){let t=!1,e=0,n;const s=aw(),i=()=>s.status!=="pending",o=S=>{var _;if(!i()){const E=new rw(S);x(E),(_=r.onCancel)==null||_.call(r,E)}},d=()=>{t=!0},u=()=>{t=!1},p=()=>gA.isFocused()&&(r.networkMode==="always"||zx.isOnline())&&r.canRun(),m=()=>LC(r.networkMode)&&r.canRun(),g=S=>{i()||(n==null||n(),s.resolve(S))},x=S=>{i()||(n==null||n(),s.reject(S))},v=()=>new Promise(S=>{var _;n=E=>{(i()||p())&&S(E)},(_=r.onPause)==null||_.call(r)}).then(()=>{var S;n=void 0,i()||(S=r.onContinue)==null||S.call(r)}),k=()=>{if(i())return;let S;const _=e===0?r.initialPromise:void 0;try{S=_??r.fn()}catch(E){S=Promise.reject(E)}Promise.resolve(S).then(g).catch(E=>{var O;if(i())return;const N=r.retry??(Yd?0:3),P=r.retryDelay??GR,R=typeof P=="function"?P(e,E):P,M=N===!0||typeof N=="number"&&e<N||typeof N=="function"&&N(e,E);if(t||!M){x(E);return}e++,(O=r.onFail)==null||O.call(r,e,E),UR(R).then(()=>p()?void 0:v()).then(()=>{t?x(E):k()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(n==null||n(),s),cancelRetry:d,continueRetry:u,canStart:m,start:()=>(m()?k():v().then(k),s)}}var Cc,kC,$C=(kC=class{constructor(){A(this,Cc)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),nw(this.gcTime)&&b(this,Cc,Ac.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(Yd?1/0:5*60*1e3))}clearGcTimeout(){l(this,Cc)&&(Ac.clearTimeout(l(this,Cc)),b(this,Cc,void 0))}},Cc=new WeakMap,kC),Tc,ih,vi,Pc,Sn,kf,Dc,Ki,dr,EC,KR=(EC=class extends $C{constructor(t){super();A(this,Ki);A(this,Tc);A(this,ih);A(this,vi);A(this,Pc);A(this,Sn);A(this,kf);A(this,Dc);b(this,Dc,!1),b(this,kf,t.defaultOptions),this.setOptions(t.options),this.observers=[],b(this,Pc,t.client),b(this,vi,l(this,Pc).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,b(this,Tc,qk(this.options)),this.state=t.state??l(this,Tc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=l(this,Sn))==null?void 0:t.promise}setOptions(t){if(this.options={...l(this,kf),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=qk(this.options);e.data!==void 0&&(this.setState(Hk(e.data,e.dataUpdatedAt)),b(this,Tc,e))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&l(this,vi).remove(this)}setData(t,e){const n=iw(this.state.data,t,this.options);return C(this,Ki,dr).call(this,{data:n,type:"success",dataUpdatedAt:e==null?void 0:e.updatedAt,manual:e==null?void 0:e.manual}),n}setState(t,e){C(this,Ki,dr).call(this,{type:"setState",state:t,setStateOptions:e})}cancel(t){var n,s;const e=(n=l(this,Sn))==null?void 0:n.promise;return(s=l(this,Sn))==null||s.cancel(t),e?e.then(ps).catch(ps):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(l(this,Tc))}isActive(){return this.observers.some(t=>Ri(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===fA||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>zl(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!BC(this.state.dataUpdatedAt,t)}onFocus(){var e;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(e=l(this,Sn))==null||e.continue()}onOnline(){var e;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(e=l(this,Sn))==null||e.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),l(this,vi).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(l(this,Sn)&&(l(this,Dc)?l(this,Sn).cancel({revert:!0}):l(this,Sn).cancelRetry()),this.scheduleGc()),l(this,vi).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||C(this,Ki,dr).call(this,{type:"invalidate"})}async fetch(t,e){var u,p,m,g,x,v,k,S,_,E,N,P;if(this.state.fetchStatus!=="idle"&&((u=l(this,Sn))==null?void 0:u.status())!=="rejected"){if(this.state.data!==void 0&&(e!=null&&e.cancelRefetch))this.cancel({silent:!0});else if(l(this,Sn))return l(this,Sn).continueRetry(),l(this,Sn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const R=this.observers.find(M=>M.options.queryFn);R&&this.setOptions(R.options)}const n=new AbortController,s=R=>{Object.defineProperty(R,"signal",{enumerable:!0,get:()=>(b(this,Dc,!0),n.signal)})},i=()=>{const R=FC(this.options,e),O=(()=>{const I={client:l(this,Pc),queryKey:this.queryKey,meta:this.meta};return s(I),I})();return b(this,Dc,!1),this.options.persister?this.options.persister(R,O,this):R(O)},d=(()=>{const R={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:l(this,Pc),state:this.state,fetchFn:i};return s(R),R})();(p=this.options.behavior)==null||p.onFetch(d,this),b(this,ih,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=d.fetchOptions)==null?void 0:m.meta))&&C(this,Ki,dr).call(this,{type:"fetch",meta:(g=d.fetchOptions)==null?void 0:g.meta}),b(this,Sn,UC({initialPromise:e==null?void 0:e.initialPromise,fn:d.fetchFn,onCancel:R=>{R instanceof rw&&R.revert&&this.setState({...l(this,ih),fetchStatus:"idle"}),n.abort()},onFail:(R,M)=>{C(this,Ki,dr).call(this,{type:"failed",failureCount:R,error:M})},onPause:()=>{C(this,Ki,dr).call(this,{type:"pause"})},onContinue:()=>{C(this,Ki,dr).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}));try{const R=await l(this,Sn).start();if(R===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(R),(v=(x=l(this,vi).config).onSuccess)==null||v.call(x,R,this),(S=(k=l(this,vi).config).onSettled)==null||S.call(k,R,this.state.error,this),R}catch(R){if(R instanceof rw){if(R.silent)return l(this,Sn).promise;if(R.revert){if(this.state.data===void 0)throw R;return this.state.data}}throw C(this,Ki,dr).call(this,{type:"error",error:R}),(E=(_=l(this,vi).config).onError)==null||E.call(_,R,this),(P=(N=l(this,vi).config).onSettled)==null||P.call(N,this.state.data,R,this),R}finally{this.scheduleGc()}}},Tc=new WeakMap,ih=new WeakMap,vi=new WeakMap,Pc=new WeakMap,Sn=new WeakMap,kf=new WeakMap,Dc=new WeakMap,Ki=new WeakSet,dr=function(t){const e=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...zC(n.data,this.options),fetchMeta:t.meta??null};case"success":const s={...n,...Hk(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return b(this,ih,t.manual?s:void 0),s;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=e(this.state),fn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),l(this,vi).notify({query:this,type:"updated",action:t})})},EC);function zC(r,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:LC(t.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function Hk(r,t){return{data:r,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function qk(r){const t=typeof r.initialData=="function"?r.initialData():r.initialData,e=t!==void 0,n=e?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:e?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:e?"success":"pending",fetchStatus:"idle"}}var _s,Vt,Ef,rs,Nc,ah,xr,Vo,Cf,rh,oh,Rc,Mc,Wo,lh,ne,$m,ow,lw,cw,dw,uw,hw,pw,HC,CC,XR=(CC=class extends Up{constructor(t,e){super();A(this,ne);A(this,_s);A(this,Vt);A(this,Ef);A(this,rs);A(this,Nc);A(this,ah);A(this,xr);A(this,Vo);A(this,Cf);A(this,rh);A(this,oh);A(this,Rc);A(this,Mc);A(this,Wo);A(this,lh,new Set);this.options=e,b(this,_s,t),b(this,Vo,null),b(this,xr,aw()),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(l(this,Vt).addObserver(this),Vk(l(this,Vt),this.options)?C(this,ne,$m).call(this):this.updateResult(),C(this,ne,dw).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return mw(l(this,Vt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return mw(l(this,Vt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,C(this,ne,uw).call(this),C(this,ne,hw).call(this),l(this,Vt).removeObserver(this)}setOptions(t){const e=this.options,n=l(this,Vt);if(this.options=l(this,_s).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ri(this.options.enabled,l(this,Vt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");C(this,ne,pw).call(this),l(this,Vt).setOptions(this.options),e._defaulted&&!$x(this.options,e)&&l(this,_s).getQueryCache().notify({type:"observerOptionsUpdated",query:l(this,Vt),observer:this});const s=this.hasListeners();s&&Wk(l(this,Vt),n,this.options,e)&&C(this,ne,$m).call(this),this.updateResult(),s&&(l(this,Vt)!==n||Ri(this.options.enabled,l(this,Vt))!==Ri(e.enabled,l(this,Vt))||zl(this.options.staleTime,l(this,Vt))!==zl(e.staleTime,l(this,Vt)))&&C(this,ne,ow).call(this);const i=C(this,ne,lw).call(this);s&&(l(this,Vt)!==n||Ri(this.options.enabled,l(this,Vt))!==Ri(e.enabled,l(this,Vt))||i!==l(this,Wo))&&C(this,ne,cw).call(this,i)}getOptimisticResult(t){const e=l(this,_s).getQueryCache().build(l(this,_s),t),n=this.createResult(e,t);return QR(this,n)&&(b(this,rs,n),b(this,ah,this.options),b(this,Nc,l(this,Vt).state)),n}getCurrentResult(){return l(this,rs)}trackResult(t,e){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),e==null||e(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&l(this,xr).status==="pending"&&l(this,xr).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,s))})}trackProp(t){l(this,lh).add(t)}getCurrentQuery(){return l(this,Vt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=l(this,_s).defaultQueryOptions(t),n=l(this,_s).getQueryCache().build(l(this,_s),e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return C(this,ne,$m).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),l(this,rs)))}createResult(t,e){var K;const n=l(this,Vt),s=this.options,i=l(this,rs),o=l(this,Nc),d=l(this,ah),p=t!==n?t.state:l(this,Ef),{state:m}=t;let g={...m},x=!1,v;if(e._optimisticResults){const W=this.hasListeners(),Y=!W&&Vk(t,e),q=W&&Wk(t,n,e,s);(Y||q)&&(g={...g,...zC(m.data,t.options)}),e._optimisticResults==="isRestoring"&&(g.fetchStatus="idle")}let{error:k,errorUpdatedAt:S,status:_}=g;v=g.data;let E=!1;if(e.placeholderData!==void 0&&v===void 0&&_==="pending"){let W;i!=null&&i.isPlaceholderData&&e.placeholderData===(d==null?void 0:d.placeholderData)?(W=i.data,E=!0):W=typeof e.placeholderData=="function"?e.placeholderData((K=l(this,oh))==null?void 0:K.state.data,l(this,oh)):e.placeholderData,W!==void 0&&(_="success",v=iw(i==null?void 0:i.data,W,e),x=!0)}if(e.select&&v!==void 0&&!E)if(i&&v===(o==null?void 0:o.data)&&e.select===l(this,Cf))v=l(this,rh);else try{b(this,Cf,e.select),v=e.select(v),v=iw(i==null?void 0:i.data,v,e),b(this,rh,v),b(this,Vo,null)}catch(W){b(this,Vo,W)}l(this,Vo)&&(k=l(this,Vo),v=l(this,rh),S=Date.now(),_="error");const N=g.fetchStatus==="fetching",P=_==="pending",R=_==="error",M=P&&N,O=v!==void 0,H={status:_,fetchStatus:g.fetchStatus,isPending:P,isSuccess:_==="success",isError:R,isInitialLoading:M,isLoading:M,data:v,dataUpdatedAt:g.dataUpdatedAt,error:k,errorUpdatedAt:S,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>p.dataUpdateCount||g.errorUpdateCount>p.errorUpdateCount,isFetching:N,isRefetching:N&&!P,isLoadingError:R&&!O,isPaused:g.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:R&&O,isStale:xA(t,e),refetch:this.refetch,promise:l(this,xr),isEnabled:Ri(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const W=tt=>{H.status==="error"?tt.reject(H.error):H.data!==void 0&&tt.resolve(H.data)},Y=()=>{const tt=b(this,xr,H.promise=aw());W(tt)},q=l(this,xr);switch(q.status){case"pending":t.queryHash===n.queryHash&&W(q);break;case"fulfilled":(H.status==="error"||H.data!==q.value)&&Y();break;case"rejected":(H.status!=="error"||H.error!==q.reason)&&Y();break}}return H}updateResult(){const t=l(this,rs),e=this.createResult(l(this,Vt),this.options);if(b(this,Nc,l(this,Vt).state),b(this,ah,this.options),l(this,Nc).data!==void 0&&b(this,oh,l(this,Vt)),$x(e,t))return;b(this,rs,e);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!l(this,lh).size)return!0;const o=new Set(i??l(this,lh));return this.options.throwOnError&&o.add("error"),Object.keys(l(this,rs)).some(d=>{const u=d;return l(this,rs)[u]!==t[u]&&o.has(u)})};C(this,ne,HC).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&C(this,ne,dw).call(this)}},_s=new WeakMap,Vt=new WeakMap,Ef=new WeakMap,rs=new WeakMap,Nc=new WeakMap,ah=new WeakMap,xr=new WeakMap,Vo=new WeakMap,Cf=new WeakMap,rh=new WeakMap,oh=new WeakMap,Rc=new WeakMap,Mc=new WeakMap,Wo=new WeakMap,lh=new WeakMap,ne=new WeakSet,$m=function(t){C(this,ne,pw).call(this);let e=l(this,Vt).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(ps)),e},ow=function(){C(this,ne,uw).call(this);const t=zl(this.options.staleTime,l(this,Vt));if(Yd||l(this,rs).isStale||!nw(t))return;const n=BC(l(this,rs).dataUpdatedAt,t)+1;b(this,Rc,Ac.setTimeout(()=>{l(this,rs).isStale||this.updateResult()},n))},lw=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(l(this,Vt)):this.options.refetchInterval)??!1},cw=function(t){C(this,ne,hw).call(this),b(this,Wo,t),!(Yd||Ri(this.options.enabled,l(this,Vt))===!1||!nw(l(this,Wo))||l(this,Wo)===0)&&b(this,Mc,Ac.setInterval(()=>{(this.options.refetchIntervalInBackground||gA.isFocused())&&C(this,ne,$m).call(this)},l(this,Wo)))},dw=function(){C(this,ne,ow).call(this),C(this,ne,cw).call(this,C(this,ne,lw).call(this))},uw=function(){l(this,Rc)&&(Ac.clearTimeout(l(this,Rc)),b(this,Rc,void 0))},hw=function(){l(this,Mc)&&(Ac.clearInterval(l(this,Mc)),b(this,Mc,void 0))},pw=function(){const t=l(this,_s).getQueryCache().build(l(this,_s),this.options);if(t===l(this,Vt))return;const e=l(this,Vt);b(this,Vt,t),b(this,Ef,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},HC=function(t){fn.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(l(this,rs))}),l(this,_s).getQueryCache().notify({query:l(this,Vt),type:"observerResultsUpdated"})})},CC);function YR(r,t){return Ri(t.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&t.retryOnMount===!1)}function Vk(r,t){return YR(r,t)||r.state.data!==void 0&&mw(r,t,t.refetchOnMount)}function mw(r,t,e){if(Ri(t.enabled,r)!==!1&&zl(t.staleTime,r)!=="static"){const n=typeof e=="function"?e(r):e;return n==="always"||n!==!1&&xA(r,t)}return!1}function Wk(r,t,e,n){return(r!==t||Ri(n.enabled,r)===!1)&&(!e.suspense||r.state.status!=="error")&&xA(r,e)}function xA(r,t){return Ri(t.enabled,r)!==!1&&r.isStaleByTime(zl(t.staleTime,r))}function QR(r,t){return!$x(r.getCurrentResult(),t)}function Gk(r){return{onFetch:(t,e)=>{var m,g,x,v,k;const n=t.options,s=(x=(g=(m=t.fetchOptions)==null?void 0:m.meta)==null?void 0:g.fetchMore)==null?void 0:x.direction,i=((v=t.state.data)==null?void 0:v.pages)||[],o=((k=t.state.data)==null?void 0:k.pageParams)||[];let d={pages:[],pageParams:[]},u=0;const p=async()=>{let S=!1;const _=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(t.signal.aborted?S=!0:t.signal.addEventListener("abort",()=>{S=!0}),t.signal)})},E=FC(t.options,t.fetchOptions),N=async(P,R,M)=>{if(S)return Promise.reject();if(R==null&&P.pages.length)return Promise.resolve(P);const I=(()=>{const Y={client:t.client,queryKey:t.queryKey,pageParam:R,direction:M?"backward":"forward",meta:t.options.meta};return _(Y),Y})(),H=await E(I),{maxPages:K}=t.options,W=M?zR:$R;return{pages:W(P.pages,H,K),pageParams:W(P.pageParams,R,K)}};if(s&&i.length){const P=s==="backward",R=P?JR:Kk,M={pages:i,pageParams:o},O=R(n,M);d=await N(M,O,P)}else{const P=r??i.length;do{const R=u===0?o[0]??n.initialPageParam:Kk(n,d);if(u>0&&R==null)break;d=await N(d,R),u++}while(u<P)}return d};t.options.persister?t.fetchFn=()=>{var S,_;return(_=(S=t.options).persister)==null?void 0:_.call(S,p,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},e)}:t.fetchFn=p}}}function Kk(r,{pages:t,pageParams:e}){const n=t.length-1;return t.length>0?r.getNextPageParam(t[n],t,e[n],e):void 0}function JR(r,{pages:t,pageParams:e}){var n;return t.length>0?(n=r.getPreviousPageParam)==null?void 0:n.call(r,t[0],t,e[0],e):void 0}var Tf,_a,os,Oc,ka,Fo,TC,ZR=(TC=class extends $C{constructor(t){super();A(this,ka);A(this,Tf);A(this,_a);A(this,os);A(this,Oc);b(this,Tf,t.client),this.mutationId=t.mutationId,b(this,os,t.mutationCache),b(this,_a,[]),this.state=t.state||qC(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){l(this,_a).includes(t)||(l(this,_a).push(t),this.clearGcTimeout(),l(this,os).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){b(this,_a,l(this,_a).filter(e=>e!==t)),this.scheduleGc(),l(this,os).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){l(this,_a).length||(this.state.status==="pending"?this.scheduleGc():l(this,os).remove(this))}continue(){var t;return((t=l(this,Oc))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,d,u,p,m,g,x,v,k,S,_,E,N,P,R,M,O,I,H,K;const e=()=>{C(this,ka,Fo).call(this,{type:"continue"})},n={client:l(this,Tf),meta:this.options.meta,mutationKey:this.options.mutationKey};b(this,Oc,UC({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(W,Y)=>{C(this,ka,Fo).call(this,{type:"failed",failureCount:W,error:Y})},onPause:()=>{C(this,ka,Fo).call(this,{type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>l(this,os).canRun(this)}));const s=this.state.status==="pending",i=!l(this,Oc).canStart();try{if(s)e();else{C(this,ka,Fo).call(this,{type:"pending",variables:t,isPaused:i}),await((d=(o=l(this,os).config).onMutate)==null?void 0:d.call(o,t,this,n));const Y=await((p=(u=this.options).onMutate)==null?void 0:p.call(u,t,n));Y!==this.state.context&&C(this,ka,Fo).call(this,{type:"pending",context:Y,variables:t,isPaused:i})}const W=await l(this,Oc).start();return await((g=(m=l(this,os).config).onSuccess)==null?void 0:g.call(m,W,t,this.state.context,this,n)),await((v=(x=this.options).onSuccess)==null?void 0:v.call(x,W,t,this.state.context,n)),await((S=(k=l(this,os).config).onSettled)==null?void 0:S.call(k,W,null,this.state.variables,this.state.context,this,n)),await((E=(_=this.options).onSettled)==null?void 0:E.call(_,W,null,t,this.state.context,n)),C(this,ka,Fo).call(this,{type:"success",data:W}),W}catch(W){try{throw await((P=(N=l(this,os).config).onError)==null?void 0:P.call(N,W,t,this.state.context,this,n)),await((M=(R=this.options).onError)==null?void 0:M.call(R,W,t,this.state.context,n)),await((I=(O=l(this,os).config).onSettled)==null?void 0:I.call(O,void 0,W,this.state.variables,this.state.context,this,n)),await((K=(H=this.options).onSettled)==null?void 0:K.call(H,void 0,W,t,this.state.context,n)),W}finally{C(this,ka,Fo).call(this,{type:"error",error:W})}}finally{l(this,os).runNext(this)}}},Tf=new WeakMap,_a=new WeakMap,os=new WeakMap,Oc=new WeakMap,ka=new WeakSet,Fo=function(t){const e=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),fn.batch(()=>{l(this,_a).forEach(n=>{n.onMutationUpdate(t)}),l(this,os).notify({mutation:this,type:"updated",action:t})})},TC);function qC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var yr,Xi,Pf,PC,tM=(PC=class extends Up{constructor(t={}){super();A(this,yr);A(this,Xi);A(this,Pf);this.config=t,b(this,yr,new Set),b(this,Xi,new Map),b(this,Pf,0)}build(t,e,n){const s=new ZR({client:t,mutationCache:this,mutationId:++He(this,Pf)._,options:t.defaultMutationOptions(e),state:n});return this.add(s),s}add(t){l(this,yr).add(t);const e=F2(t);if(typeof e=="string"){const n=l(this,Xi).get(e);n?n.push(t):l(this,Xi).set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(l(this,yr).delete(t)){const e=F2(t);if(typeof e=="string"){const n=l(this,Xi).get(e);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&l(this,Xi).delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=F2(t);if(typeof e=="string"){const n=l(this,Xi).get(e),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const e=F2(t);if(typeof e=="string"){const s=(n=l(this,Xi).get(e))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){fn.batch(()=>{l(this,yr).forEach(t=>{this.notify({type:"removed",mutation:t})}),l(this,yr).clear(),l(this,Xi).clear()})}getAll(){return Array.from(l(this,yr))}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Uk(e,n))}findAll(t={}){return this.getAll().filter(e=>Uk(t,e))}notify(t){fn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return fn.batch(()=>Promise.all(t.map(e=>e.continue().catch(ps))))}},yr=new WeakMap,Xi=new WeakMap,Pf=new WeakMap,PC);function F2(r){var t;return(t=r.options.scope)==null?void 0:t.id}var vr,Go,ks,br,no,ax,fw,DC,eM=(DC=class extends Up{constructor(e,n){super();A(this,no);A(this,vr);A(this,Go);A(this,ks);A(this,br);b(this,vr,e),this.setOptions(n),this.bindMethods(),C(this,no,ax).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var s;const n=this.options;this.options=l(this,vr).defaultMutationOptions(e),$x(this.options,n)||l(this,vr).getMutationCache().notify({type:"observerOptionsUpdated",mutation:l(this,ks),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Qd(n.mutationKey)!==Qd(this.options.mutationKey)?this.reset():((s=l(this,ks))==null?void 0:s.state.status)==="pending"&&l(this,ks).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=l(this,ks))==null||e.removeObserver(this)}onMutationUpdate(e){C(this,no,ax).call(this),C(this,no,fw).call(this,e)}getCurrentResult(){return l(this,Go)}reset(){var e;(e=l(this,ks))==null||e.removeObserver(this),b(this,ks,void 0),C(this,no,ax).call(this),C(this,no,fw).call(this)}mutate(e,n){var s;return b(this,br,n),(s=l(this,ks))==null||s.removeObserver(this),b(this,ks,l(this,vr).getMutationCache().build(l(this,vr),this.options)),l(this,ks).addObserver(this),l(this,ks).execute(e)}},vr=new WeakMap,Go=new WeakMap,ks=new WeakMap,br=new WeakMap,no=new WeakSet,ax=function(){var n;const e=((n=l(this,ks))==null?void 0:n.state)??qC();b(this,Go,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},fw=function(e){fn.batch(()=>{var n,s,i,o,d,u,p,m;if(l(this,br)&&this.hasListeners()){const g=l(this,Go).variables,x=l(this,Go).context,v={client:l(this,vr),meta:this.options.meta,mutationKey:this.options.mutationKey};(e==null?void 0:e.type)==="success"?((s=(n=l(this,br)).onSuccess)==null||s.call(n,e.data,g,x,v),(o=(i=l(this,br)).onSettled)==null||o.call(i,e.data,null,g,x,v)):(e==null?void 0:e.type)==="error"&&((u=(d=l(this,br)).onError)==null||u.call(d,e.error,g,x,v),(m=(p=l(this,br)).onSettled)==null||m.call(p,void 0,e.error,g,x,v))}this.listeners.forEach(g=>{g(l(this,Go))})})},DC),Ea,NC,nM=(NC=class extends Up{constructor(t={}){super();A(this,Ea);this.config=t,b(this,Ea,new Map)}build(t,e,n){const s=e.queryKey,i=e.queryHash??mA(s,e);let o=this.get(i);return o||(o=new KR({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(e),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){l(this,Ea).has(t.queryHash)||(l(this,Ea).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=l(this,Ea).get(t.queryHash);e&&(t.destroy(),e===t&&l(this,Ea).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){fn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return l(this,Ea).get(t)}getAll(){return[...l(this,Ea).values()]}find(t){const e={exact:!0,...t};return this.getAll().find(n=>Lk(e,n))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(n=>Lk(t,n)):e}notify(t){fn.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){fn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){fn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ea=new WeakMap,NC),qe,Ko,Xo,ch,dh,Yo,uh,hh,RC,sM=(RC=class{constructor(r={}){A(this,qe);A(this,Ko);A(this,Xo);A(this,ch);A(this,dh);A(this,Yo);A(this,uh);A(this,hh);b(this,qe,r.queryCache||new nM),b(this,Ko,r.mutationCache||new tM),b(this,Xo,r.defaultOptions||{}),b(this,ch,new Map),b(this,dh,new Map),b(this,Yo,0)}mount(){He(this,Yo)._++,l(this,Yo)===1&&(b(this,uh,gA.subscribe(async r=>{r&&(await this.resumePausedMutations(),l(this,qe).onFocus())})),b(this,hh,zx.subscribe(async r=>{r&&(await this.resumePausedMutations(),l(this,qe).onOnline())})))}unmount(){var r,t;He(this,Yo)._--,l(this,Yo)===0&&((r=l(this,uh))==null||r.call(this),b(this,uh,void 0),(t=l(this,hh))==null||t.call(this),b(this,hh,void 0))}isFetching(r){return l(this,qe).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return l(this,Ko).findAll({...r,status:"pending"}).length}getQueryData(r){var e;const t=this.defaultQueryOptions({queryKey:r});return(e=l(this,qe).get(t.queryHash))==null?void 0:e.state.data}ensureQueryData(r){const t=this.defaultQueryOptions(r),e=l(this,qe).build(this,t),n=e.state.data;return n===void 0?this.fetchQuery(r):(r.revalidateIfStale&&e.isStaleByTime(zl(t.staleTime,e))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(r){return l(this,qe).findAll(r).map(({queryKey:t,state:e})=>{const n=e.data;return[t,n]})}setQueryData(r,t,e){const n=this.defaultQueryOptions({queryKey:r}),s=l(this,qe).get(n.queryHash),i=s==null?void 0:s.state.data,o=jR(t,i);if(o!==void 0)return l(this,qe).build(this,n).setData(o,{...e,manual:!0})}setQueriesData(r,t,e){return fn.batch(()=>l(this,qe).findAll(r).map(({queryKey:n})=>[n,this.setQueryData(n,t,e)]))}getQueryState(r){var e;const t=this.defaultQueryOptions({queryKey:r});return(e=l(this,qe).get(t.queryHash))==null?void 0:e.state}removeQueries(r){const t=l(this,qe);fn.batch(()=>{t.findAll(r).forEach(e=>{t.remove(e)})})}resetQueries(r,t){const e=l(this,qe);return fn.batch(()=>(e.findAll(r).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...r},t)))}cancelQueries(r,t={}){const e={revert:!0,...t},n=fn.batch(()=>l(this,qe).findAll(r).map(s=>s.cancel(e)));return Promise.all(n).then(ps).catch(ps)}invalidateQueries(r,t={}){return fn.batch(()=>(l(this,qe).findAll(r).forEach(e=>{e.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},t)))}refetchQueries(r,t={}){const e={...t,cancelRefetch:t.cancelRefetch??!0},n=fn.batch(()=>l(this,qe).findAll(r).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,e);return e.throwOnError||(i=i.catch(ps)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(ps)}fetchQuery(r){const t=this.defaultQueryOptions(r);t.retry===void 0&&(t.retry=!1);const e=l(this,qe).build(this,t);return e.isStaleByTime(zl(t.staleTime,e))?e.fetch(t):Promise.resolve(e.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(ps).catch(ps)}fetchInfiniteQuery(r){return r.behavior=Gk(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(ps).catch(ps)}ensureInfiniteQueryData(r){return r.behavior=Gk(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return zx.isOnline()?l(this,Ko).resumePausedMutations():Promise.resolve()}getQueryCache(){return l(this,qe)}getMutationCache(){return l(this,Ko)}getDefaultOptions(){return l(this,Xo)}setDefaultOptions(r){b(this,Xo,r)}setQueryDefaults(r,t){l(this,ch).set(Qd(r),{queryKey:r,defaultOptions:t})}getQueryDefaults(r){const t=[...l(this,ch).values()],e={};return t.forEach(n=>{mf(r,n.queryKey)&&Object.assign(e,n.defaultOptions)}),e}setMutationDefaults(r,t){l(this,dh).set(Qd(r),{mutationKey:r,defaultOptions:t})}getMutationDefaults(r){const t=[...l(this,dh).values()],e={};return t.forEach(n=>{mf(r,n.mutationKey)&&Object.assign(e,n.defaultOptions)}),e}defaultQueryOptions(r){if(r._defaulted)return r;const t={...l(this,Xo).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return t.queryHash||(t.queryHash=mA(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===fA&&(t.enabled=!1),t}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...l(this,Xo).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){l(this,qe).clear(),l(this,Ko).clear()}},qe=new WeakMap,Ko=new WeakMap,Xo=new WeakMap,ch=new WeakMap,dh=new WeakMap,Yo=new WeakMap,uh=new WeakMap,hh=new WeakMap,RC),VC=X.createContext(void 0),$p=r=>{const t=X.useContext(VC);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},iM=({client:r,children:t})=>(X.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),T.jsx(VC.Provider,{value:r,children:t})),WC=X.createContext(!1),aM=()=>X.useContext(WC);WC.Provider;function rM(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}var oM=X.createContext(rM()),lM=()=>X.useContext(oM),cM=(r,t)=>{(r.suspense||r.throwOnError||r.experimental_prefetchInRender)&&(t.isReset()||(r.retryOnMount=!1))},dM=r=>{X.useEffect(()=>{r.clearReset()},[r])},uM=({result:r,errorResetBoundary:t,throwOnError:e,query:n,suspense:s})=>r.isError&&!t.isReset()&&!r.isFetching&&n&&(s&&r.data===void 0||jC(e,[r.error,n])),hM=r=>{if(r.suspense){const e=s=>s==="static"?s:Math.max(s??1e3,1e3),n=r.staleTime;r.staleTime=typeof n=="function"?(...s)=>e(n(...s)):e(n),typeof r.gcTime=="number"&&(r.gcTime=Math.max(r.gcTime,1e3))}},pM=(r,t)=>r.isLoading&&r.isFetching&&!t,mM=(r,t)=>(r==null?void 0:r.suspense)&&t.isPending,Xk=(r,t,e)=>t.fetchOptimistic(r).catch(()=>{e.clearReset()});function fM(r,t,e){var g,x,v,k,S;const n=aM(),s=lM(),i=$p(),o=i.defaultQueryOptions(r);(x=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_beforeQuery)==null||x.call(g,o),o._optimisticResults=n?"isRestoring":"optimistic",hM(o),cM(o,s),dM(s);const d=!i.getQueryCache().get(o.queryHash),[u]=X.useState(()=>new t(i,o)),p=u.getOptimisticResult(o),m=!n&&r.subscribed!==!1;if(X.useSyncExternalStore(X.useCallback(_=>{const E=m?u.subscribe(fn.batchCalls(_)):ps;return u.updateResult(),E},[u,m]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),X.useEffect(()=>{u.setOptions(o)},[o,u]),mM(o,p))throw Xk(o,u,s);if(uM({result:p,errorResetBoundary:s,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw p.error;if((k=(v=i.getDefaultOptions().queries)==null?void 0:v._experimental_afterQuery)==null||k.call(v,o,p),o.experimental_prefetchInRender&&!Yd&&pM(p,n)){const _=d?Xk(o,u,s):(S=i.getQueryCache().get(o.queryHash))==null?void 0:S.promise;_==null||_.catch(ps).finally(()=>{u.updateResult()})}return o.notifyOnChangeProps?p:u.trackResult(p)}function da(r,t){return fM(r,XR)}function _c(r,t){const e=$p(),[n]=X.useState(()=>new eM(e,r));X.useEffect(()=>{n.setOptions(r)},[n,r]);const s=X.useSyncExternalStore(X.useCallback(o=>n.subscribe(fn.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=X.useCallback((o,d)=>{n.mutate(o,d).catch(ps)},[n]);if(s.error&&jC(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}var gw=function(r,t){return gw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])},gw(r,t)};function GC(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");gw(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var Hx=function(){return Hx=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Hx.apply(this,arguments)};function zp(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(e[n[s]]=r[n[s]]);return e}function KC(r,t,e,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,n);else for(var d=r.length-1;d>=0;d--)(o=r[d])&&(i=(s<3?o(i):s>3?o(t,e,i):o(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i}function XC(r,t){return function(e,n){t(e,n,r)}}function YC(r,t,e,n,s,i){function o(E){if(E!==void 0&&typeof E!="function")throw new TypeError("Function expected");return E}for(var d=n.kind,u=d==="getter"?"get":d==="setter"?"set":"value",p=!t&&r?n.static?r:r.prototype:null,m=t||(p?Object.getOwnPropertyDescriptor(p,n.name):{}),g,x=!1,v=e.length-1;v>=0;v--){var k={};for(var S in n)k[S]=S==="access"?{}:n[S];for(var S in n.access)k.access[S]=n.access[S];k.addInitializer=function(E){if(x)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(E||null))};var _=(0,e[v])(d==="accessor"?{get:m.get,set:m.set}:m[u],k);if(d==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(g=o(_.get))&&(m.get=g),(g=o(_.set))&&(m.set=g),(g=o(_.init))&&s.unshift(g)}else(g=o(_))&&(d==="field"?s.unshift(g):m[u]=g)}p&&Object.defineProperty(p,n.name,m),x=!0}function QC(r,t,e){for(var n=arguments.length>2,s=0;s<t.length;s++)e=n?t[s].call(r,e):t[s].call(r);return n?e:void 0}function JC(r){return typeof r=="symbol"?r:"".concat(r)}function ZC(r,t,e){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:e?"".concat(e," ",t):t})}function tT(r,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,t)}function ft(r,t,e,n){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function d(m){try{p(n.next(m))}catch(g){o(g)}}function u(m){try{p(n.throw(m))}catch(g){o(g)}}function p(m){m.done?i(m.value):s(m.value).then(d,u)}p((n=n.apply(r,t||[])).next())})}function eT(r,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=d(0),o.throw=d(1),o.return=d(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function d(p){return function(m){return u([p,m])}}function u(p){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,p[0]&&(e=0)),e;)try{if(n=1,s&&(i=p[0]&2?s.return:p[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,p[1])).done)return i;switch(s=0,i&&(p=[p[0]&2,i.value]),p[0]){case 0:case 1:i=p;break;case 4:return e.label++,{value:p[1],done:!1};case 5:e.label++,s=p[1],p=[0];continue;case 7:p=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(p[0]===6||p[0]===2)){e=0;continue}if(p[0]===3&&(!i||p[1]>i[0]&&p[1]<i[3])){e.label=p[1];break}if(p[0]===6&&e.label<i[1]){e.label=i[1],i=p;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(p);break}i[2]&&e.ops.pop(),e.trys.pop();continue}p=t.call(r,e)}catch(m){p=[6,m],s=0}finally{n=i=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var Ry=Object.create?function(r,t,e,n){n===void 0&&(n=e);var s=Object.getOwnPropertyDescriptor(t,e);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(r,n,s)}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]};function nT(r,t){for(var e in r)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&Ry(t,r,e)}function qx(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function yA(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(d){o={error:d}}finally{try{s&&!s.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return i}function sT(){for(var r=[],t=0;t<arguments.length;t++)r=r.concat(yA(arguments[t]));return r}function iT(){for(var r=0,t=0,e=arguments.length;t<e;t++)r+=arguments[t].length;for(var n=Array(r),s=0,t=0;t<e;t++)for(var i=arguments[t],o=0,d=i.length;o<d;o++,s++)n[s]=i[o];return n}function aT(r,t,e){if(e||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return r.concat(i||Array.prototype.slice.call(t))}function jp(r){return this instanceof jp?(this.v=r,this):new jp(r)}function rT(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(r,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(v){return function(k){return Promise.resolve(k).then(v,g)}}function d(v,k){n[v]&&(s[v]=function(S){return new Promise(function(_,E){i.push([v,S,_,E])>1||u(v,S)})},k&&(s[v]=k(s[v])))}function u(v,k){try{p(n[v](k))}catch(S){x(i[0][3],S)}}function p(v){v.value instanceof jp?Promise.resolve(v.value.v).then(m,g):x(i[0][2],v)}function m(v){u("next",v)}function g(v){u("throw",v)}function x(v,k){v(k),i.shift(),i.length&&u(i[0][0],i[0][1])}}function oT(r){var t,e;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=r[s]?function(o){return(e=!e)?{value:jp(r[s](o)),done:!1}:i?i(o):o}:i}}function lT(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r[Symbol.asyncIterator],e;return t?t.call(r):(r=typeof qx=="function"?qx(r):r[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(i){e[i]=r[i]&&function(o){return new Promise(function(d,u){o=r[i](o),s(d,u,o.done,o.value)})}}function s(i,o,d,u){Promise.resolve(u).then(function(p){i({value:p,done:d})},o)}}function cT(r,t){return Object.defineProperty?Object.defineProperty(r,"raw",{value:t}):r.raw=t,r}var gM=Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t},xw=function(r){return xw=Object.getOwnPropertyNames||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[e.length]=n);return e},xw(r)};function dT(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e=xw(r),n=0;n<e.length;n++)e[n]!=="default"&&Ry(t,r,e[n]);return gM(t,r),t}function uT(r){return r&&r.__esModule?r:{default:r}}function hT(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)}function pT(r,t,e,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?r!==t||!s:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,e):s?s.value=e:t.set(r,e),e}function mT(r,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?t===r:r.has(t)}function fT(r,t,e){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,s;if(e){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],e&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),r.stack.push({value:t,dispose:n,async:e})}else e&&r.stack.push({async:!0});return t}var xM=typeof SuppressedError=="function"?SuppressedError:function(r,t,e){var n=new Error(e);return n.name="SuppressedError",n.error=r,n.suppressed=t,n};function gT(r){function t(i){r.error=r.hasError?new xM(i,r.error,"An error was suppressed during disposal."):i,r.hasError=!0}var e,n=0;function s(){for(;e=r.stack.pop();)try{if(!e.async&&n===1)return n=0,r.stack.push(e),Promise.resolve().then(s);if(e.dispose){var i=e.dispose.call(e.value);if(e.async)return n|=2,Promise.resolve(i).then(s,function(o){return t(o),s()})}else n|=1}catch(o){t(o)}if(n===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return s()}function xT(r,t){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,n,s,i,o){return n?t?".jsx":".js":s&&(!i||!o)?e:s+i+"."+o.toLowerCase()+"js"}):r}const yM={__extends:GC,__assign:Hx,__rest:zp,__decorate:KC,__param:XC,__esDecorate:YC,__runInitializers:QC,__propKey:JC,__setFunctionName:ZC,__metadata:tT,__awaiter:ft,__generator:eT,__createBinding:Ry,__exportStar:nT,__values:qx,__read:yA,__spread:sT,__spreadArrays:iT,__spreadArray:aT,__await:jp,__asyncGenerator:rT,__asyncDelegator:oT,__asyncValues:lT,__makeTemplateObject:cT,__importStar:dT,__importDefault:uT,__classPrivateFieldGet:hT,__classPrivateFieldSet:pT,__classPrivateFieldIn:mT,__addDisposableResource:fT,__disposeResources:gT,__rewriteRelativeImportExtension:xT},vM=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:fT,get __assign(){return Hx},__asyncDelegator:oT,__asyncGenerator:rT,__asyncValues:lT,__await:jp,__awaiter:ft,__classPrivateFieldGet:hT,__classPrivateFieldIn:mT,__classPrivateFieldSet:pT,__createBinding:Ry,__decorate:KC,__disposeResources:gT,__esDecorate:YC,__exportStar:nT,__extends:GC,__generator:eT,__importDefault:uT,__importStar:dT,__makeTemplateObject:cT,__metadata:tT,__param:XC,__propKey:JC,__read:yA,__rest:zp,__rewriteRelativeImportExtension:xT,__runInitializers:QC,__setFunctionName:ZC,__spread:sT,__spreadArray:aT,__spreadArrays:iT,__values:qx,default:yM},Symbol.toStringTag,{value:"Module"})),bM=r=>r?(...t)=>r(...t):(...t)=>fetch(...t);class vA extends Error{constructor(t,e="FunctionsError",n){super(t),this.name=e,this.context=n}}class Yk extends vA{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Qk extends vA{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Jk extends vA{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var yw;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(yw||(yw={}));class wM{constructor(t,{headers:e={},customFetch:n,region:s=yw.Any}={}){this.url=t,this.headers=e,this.region=s,this.fetch=bM(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ft(this,arguments,void 0,function*(e,n={}){var s;try{const{headers:i,method:o,body:d,signal:u}=n;let p={},{region:m}=n;m||(m=this.region);const g=new URL(`${this.url}/${e}`);m&&m!=="any"&&(p["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let x;d&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",x=d):typeof d=="string"?(p["Content-Type"]="text/plain",x=d):typeof FormData<"u"&&d instanceof FormData?x=d:(p["Content-Type"]="application/json",x=JSON.stringify(d)):x=d;const v=yield this.fetch(g.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),i),body:x,signal:u}).catch(E=>{throw E.name==="AbortError"?E:new Yk(E)}),k=v.headers.get("x-relay-error");if(k&&k==="true")throw new Qk(v);if(!v.ok)throw new Jk(v);let S=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return S==="application/json"?_=yield v.json():S==="application/octet-stream"||S==="application/pdf"?_=yield v.blob():S==="text/event-stream"?_=v:S==="multipart/form-data"?_=yield v.formData():_=yield v.text(),{data:_,error:null,response:v}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new Yk(i)}:{data:null,error:i,response:i instanceof Jk||i instanceof Qk?i.context:void 0}}})}}var Gn={};const Hp=AR(vM);var j2={},L2={},U2={},$2={},z2={},H2={},Zk;function yT(){if(Zk)return H2;Zk=1,Object.defineProperty(H2,"__esModule",{value:!0});class r extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return H2.default=r,H2}var tE;function vT(){if(tE)return z2;tE=1,Object.defineProperty(z2,"__esModule",{value:!0});const t=Hp.__importDefault(yT());class e{constructor(s){var i,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(o=s.isMaybeSingle)!==null&&o!==void 0?o:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let d=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var p,m,g,x;let v=null,k=null,S=null,_=u.status,E=u.statusText;if(u.ok){if(this.method!=="HEAD"){const M=await u.text();M===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?k=M:k=JSON.parse(M))}const P=(m=this.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),R=(g=u.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");P&&R&&R.length>1&&(S=parseInt(R[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(v={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,S=null,_=406,E="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const P=await u.text();try{v=JSON.parse(P),Array.isArray(v)&&u.status===404&&(k=[],v=null,_=200,E="OK")}catch{u.status===404&&P===""?(_=204,E="No Content"):v={message:P}}if(v&&this.isMaybeSingle&&(!((x=v==null?void 0:v.details)===null||x===void 0)&&x.includes("0 rows"))&&(v=null,_=200,E="OK"),v&&this.shouldThrowOnError)throw new t.default(v)}return{error:v,data:k,count:S,status:_,statusText:E}});return this.shouldThrowOnError||(d=d.catch(u=>{var p,m,g;return{error:{message:`${(p=u==null?void 0:u.name)!==null&&p!==void 0?p:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(m=u==null?void 0:u.stack)!==null&&m!==void 0?m:""}`,hint:"",code:`${(g=u==null?void 0:u.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),d.then(s,i)}returns(){return this}overrideTypes(){return this}}return z2.default=e,z2}var eE;function bT(){if(eE)return $2;eE=1,Object.defineProperty($2,"__esModule",{value:!0});const t=Hp.__importDefault(vT());class e extends t.default{select(s){let i=!1;const o=(s??"*").split("").map(d=>/\s/.test(d)&&!i?"":(d==='"'&&(i=!i),d)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:d,referencedTable:u=d}={}){const p=u?`${u}.order`:"order",m=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${m?`${m},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const d=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(d,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:d=o}={}){const u=typeof d>"u"?"offset":`${d}.offset`,p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(u,`${s}`),this.url.searchParams.set(p,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:d=!1,wal:u=!1,format:p="text"}={}){var m;const g=[s?"analyze":null,i?"verbose":null,o?"settings":null,d?"buffers":null,u?"wal":null].filter(Boolean).join("|"),x=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${x}"; options=${g};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return $2.default=e,$2}var nE;function bA(){if(nE)return U2;nE=1,Object.defineProperty(U2,"__esModule",{value:!0});const t=Hp.__importDefault(bT()),e=new RegExp("[,()]");class n extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const d=Array.from(new Set(o)).map(u=>typeof u=="string"&&e.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(i,`in.(${d})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:d,type:u}={}){let p="";u==="plain"?p="pl":u==="phrase"?p="ph":u==="websearch"&&(p="w");const m=d===void 0?"":`(${d})`;return this.url.searchParams.append(i,`${p}fts${m}.${o}`),this}match(i){return Object.entries(i).forEach(([o,d])=>{this.url.searchParams.append(o,`eq.${d}`)}),this}not(i,o,d){return this.url.searchParams.append(i,`not.${o}.${d}`),this}or(i,{foreignTable:o,referencedTable:d=o}={}){const u=d?`${d}.or`:"or";return this.url.searchParams.append(u,`(${i})`),this}filter(i,o,d){return this.url.searchParams.append(i,`${o}.${d}`),this}}return U2.default=n,U2}var sE;function wT(){if(sE)return L2;sE=1,Object.defineProperty(L2,"__esModule",{value:!0});const t=Hp.__importDefault(bA());class e{constructor(s,{headers:i={},schema:o,fetch:d}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=d}select(s,i){const{head:o=!1,count:d}=i??{},u=o?"HEAD":"GET";let p=!1;const m=(s??"*").split("").map(g=>/\s/.test(g)&&!p?"":(g==='"'&&(p=!p),g)).join("");return this.url.searchParams.set("select",m),d&&this.headers.append("Prefer",`count=${d}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var d;const u="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(p.length>0){const m=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:d,defaultToNull:u=!0}={}){var p;const m="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),d&&this.headers.append("Prefer",`count=${d}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const g=s.reduce((x,v)=>x.concat(Object.keys(v)),[]);if(g.length>0){const x=[...new Set(g)].map(v=>`"${v}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(s,{count:i}={}){var o;const d="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return L2.default=e,L2}var iE;function SM(){if(iE)return j2;iE=1,Object.defineProperty(j2,"__esModule",{value:!0});const r=Hp,t=r.__importDefault(wT()),e=r.__importDefault(bA());class n{constructor(i,{headers:o={},schema:d,fetch:u}={}){this.url=i,this.headers=new Headers(o),this.schemaName=d,this.fetch=u}from(i){const o=new URL(`${this.url}/${i}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:d=!1,get:u=!1,count:p}={}){var m;let g;const x=new URL(`${this.url}/rpc/${i}`);let v;d||u?(g=d?"HEAD":"GET",Object.entries(o).filter(([S,_])=>_!==void 0).map(([S,_])=>[S,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([S,_])=>{x.searchParams.append(S,_)})):(g="POST",v=o);const k=new Headers(this.headers);return p&&k.set("Prefer",`count=${p}`),new e.default({method:g,url:x,headers:k,schema:this.schemaName,body:v,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}}return j2.default=n,j2}var aE;function AM(){if(aE)return Gn;aE=1,Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.PostgrestError=Gn.PostgrestBuilder=Gn.PostgrestTransformBuilder=Gn.PostgrestFilterBuilder=Gn.PostgrestQueryBuilder=Gn.PostgrestClient=void 0;const r=Hp,t=r.__importDefault(SM());Gn.PostgrestClient=t.default;const e=r.__importDefault(wT());Gn.PostgrestQueryBuilder=e.default;const n=r.__importDefault(bA());Gn.PostgrestFilterBuilder=n.default;const s=r.__importDefault(bT());Gn.PostgrestTransformBuilder=s.default;const i=r.__importDefault(vT());Gn.PostgrestBuilder=i.default;const o=r.__importDefault(yT());return Gn.PostgrestError=o.default,Gn.default={PostgrestClient:t.default,PostgrestQueryBuilder:e.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:o.default},Gn}var ST=AM();const AT=Ny(ST),_M=SR({__proto__:null,default:AT},[ST]),{PostgrestClient:kM,PostgrestQueryBuilder:j4,PostgrestFilterBuilder:L4,PostgrestTransformBuilder:U4,PostgrestBuilder:$4,PostgrestError:z4}=AT||_M;class EM{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const e=process.versions;if(e&&e.node){const n=e.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`

Suggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){const n=this.getWebSocketConstructor();return new n(t,e)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const CM="2.80.0",TM=`realtime-js/${CM}`,PM="1.0.0",vw=1e4,DM=1e3,NM=100;var uf;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(uf||(uf={}));var dn;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(dn||(dn={}));var la;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(la||(la={}));var bw;(function(r){r.websocket="websocket"})(bw||(bw={}));var xc;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(xc||(xc={}));class RM{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const e=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,e,n)}_decodeBroadcast(t,e,n){const s=e.getUint8(1),i=e.getUint8(2);let o=this.HEADER_LENGTH+2;const d=n.decode(t.slice(o,o+s));o=o+s;const u=n.decode(t.slice(o,o+i));o=o+i;const p=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:d,event:u,payload:p}}}class _T{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var be;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(be||(be={}));const rE=(r,t,e={})=>{var n;const s=(n=e.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=MM(o,r,t,s),i),{}):{}},MM=(r,t,e,n)=>{const s=t.find(d=>d.name===r),i=s==null?void 0:s.type,o=e[r];return i&&!n.includes(i)?kT(i,o):ww(o)},kT=(r,t)=>{if(r.charAt(0)==="_"){const e=r.slice(1,r.length);return FM(t,e)}switch(r){case be.bool:return OM(t);case be.float4:case be.float8:case be.int2:case be.int4:case be.int8:case be.numeric:case be.oid:return BM(t);case be.json:case be.jsonb:return IM(t);case be.timestamp:return jM(t);case be.abstime:case be.date:case be.daterange:case be.int4range:case be.int8range:case be.money:case be.reltime:case be.text:case be.time:case be.timestamptz:case be.timetz:case be.tsrange:case be.tstzrange:return ww(t);default:return ww(t)}},ww=r=>r,OM=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},BM=r=>{if(typeof r=="string"){const t=parseFloat(r);if(!Number.isNaN(t))return t}return r},IM=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(t){return console.log(`JSON parse error: ${t}`),r}return r},FM=(r,t)=>{if(typeof r!="string")return r;const e=r.length-1,n=r[e];if(r[0]==="{"&&n==="}"){let i;const o=r.slice(1,e);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(d=>kT(t,d))}return r},jM=r=>typeof r=="string"?r.replace(" ","T"):r,ET=r=>{const t=new URL(r);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Rb{constructor(t,e,n={},s=vw){this.channel=t,this.event=e,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var n;return this._hasReceived(t)&&e((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var oE;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(oE||(oE={}));class hf{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(e==null?void 0:e.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=hf.syncState(this.state,s,i,o),this.pendingDiffs.forEach(u=>{this.state=hf.syncDiff(this.state,u,i,o)}),this.pendingDiffs=[],d()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=hf.syncDiff(this.state,s,i,o),d())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,n,s){const i=this.cloneDeep(t),o=this.transformState(e),d={},u={};return this.map(i,(p,m)=>{o[p]||(u[p]=m)}),this.map(o,(p,m)=>{const g=i[p];if(g){const x=m.map(_=>_.presence_ref),v=g.map(_=>_.presence_ref),k=m.filter(_=>v.indexOf(_.presence_ref)<0),S=g.filter(_=>x.indexOf(_.presence_ref)<0);k.length>0&&(d[p]=k),S.length>0&&(u[p]=S)}else d[p]=m}),this.syncDiff(i,{joins:d,leaves:u},n,s)}static syncDiff(t,e,n,s){const{joins:i,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(d,u)=>{var p;const m=(p=t[d])!==null&&p!==void 0?p:[];if(t[d]=this.cloneDeep(u),m.length>0){const g=t[d].map(v=>v.presence_ref),x=m.filter(v=>g.indexOf(v.presence_ref)<0);t[d].unshift(...x)}n(d,m,u)}),this.map(o,(d,u)=>{let p=t[d];if(!p)return;const m=u.map(g=>g.presence_ref);p=p.filter(g=>m.indexOf(g.presence_ref)<0),t[d]=p,s(d,p,u),p.length===0&&delete t[d]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(n=>e(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,n)=>{const s=t[n];return"metas"in s?e[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):e[n]=s,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var lE;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(lE||(lE={}));var pf;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(pf||(pf={}));var mr;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(mr||(mr={}));class wA{constructor(t,e={config:{}},n){var s,i;if(this.topic=t,this.params=e,this.socket=n,this.bindings={},this.state=dn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new Rb(this,la.join,this.params,this.timeout),this.rejoinTimer=new _T(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=dn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=dn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(la.reply,{},(o,d)=>{this._trigger(this._replyEventName(d),o)}),this.presence=new hf(this),this.broadcastEndpointURL=ET(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,e=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==dn.closed){const{config:{broadcast:o,presence:d,private:u}}=this.params,p=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&s!==void 0?s:[],m=!!this.bindings[pf.PRESENCE]&&this.bindings[pf.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,g={},x={broadcast:o,presence:Object.assign(Object.assign({},d),{enabled:m}),postgres_changes:p,private:u};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(v=>t==null?void 0:t(mr.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(mr.CLOSED)),this.updateJoinPayload(Object.assign({config:x},g)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",async({postgres_changes:v})=>{var k;if(this.socket.setAuth(),v===void 0){t==null||t(mr.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,_=(k=S==null?void 0:S.length)!==null&&k!==void 0?k:0,E=[];for(let N=0;N<_;N++){const P=S[N],{filter:{event:R,schema:M,table:O,filter:I}}=P,H=v&&v[N];if(H&&H.event===R&&H.schema===M&&H.table===O&&H.filter===I)E.push(Object.assign(Object.assign({},P),{id:H.id}));else{this.unsubscribe(),this.state=dn.errored,t==null||t(mr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,t&&t(mr.SUBSCRIBED);return}}).receive("error",v=>{this.state=dn.errored,t==null||t(mr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(mr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,n){return this.state===dn.joined&&t===pf.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,e,n)}async httpSend(t,e,n={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(e==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:e,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(d.status===202)return{success:!0};let u=d.statusText;try{const p=await d.json();u=p.error||p.message||u}catch{}return Promise.reject(new Error(u))}async send(t,e={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=e.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=p.body)===null||s===void 0?void 0:s.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,d,u;const p=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(d=(o=this.params)===null||o===void 0?void 0:o.config)===null||d===void 0?void 0:d.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),p.receive("ok",()=>i("ok")),p.receive("error",()=>i("error")),p.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=dn.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(la.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Rb(this,la.leave,{},t),n.receive("ok",()=>{e(),s("ok")}).receive("timeout",()=>{e(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=dn.closed,this.bindings={}}async _fetchWithTimeout(t,e,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:s.signal}));return clearTimeout(i),o}_push(t,e,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Rb(this,t,e,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>NM){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(t,e,n){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,n){var s,i;const o=t.toLocaleLowerCase(),{close:d,error:u,leave:p,join:m}=la;if(n&&[d,u,p,m].indexOf(o)>=0&&n!==this._joinRef())return;let x=this._onMessage(o,e,n);if(e&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var k,S,_;return((k=v.filter)===null||k===void 0?void 0:k.event)==="*"||((_=(S=v.filter)===null||S===void 0?void 0:S.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(v=>v.callback(x,n)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var k,S,_,E,N,P;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const R=v.id,M=(k=v.filter)===null||k===void 0?void 0:k.event;return R&&((S=e.ids)===null||S===void 0?void 0:S.includes(R))&&(M==="*"||(M==null?void 0:M.toLocaleLowerCase())===((_=e.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const R=(N=(E=v==null?void 0:v.filter)===null||E===void 0?void 0:E.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return R==="*"||R===((P=e==null?void 0:e.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof x=="object"&&"ids"in x){const k=x.data,{schema:S,table:_,commit_timestamp:E,type:N,errors:P}=k;x=Object.assign(Object.assign({},{schema:S,table:_,commit_timestamp:E,eventType:N,new:{},old:{},errors:P}),this._getPayloadRecords(k))}v.callback(x,n)})}_isClosed(){return this.state===dn.closed}_isJoined(){return this.state===dn.joined}_isJoining(){return this.state===dn.joining}_isLeaving(){return this.state===dn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,n){const s=t.toLocaleLowerCase(),i={type:s,filter:e,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,e){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&wA.isEqual(s.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(la.close,{},t)}_onError(t){this._on(la.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=dn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=rE(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=rE(t.columns,t.old_record)),e}}const Mb=()=>{},q2={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},LM=[1e3,2e3,5e3,1e4],UM=1e4,$M=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class zM{constructor(t,e){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=vw,this.transport=null,this.heartbeatIntervalMs=q2.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Mb,this.ref=0,this.reconnectTimer=null,this.logger=Mb,this.conn=null,this.sendBuffer=[],this.serializer=new RM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=e==null?void 0:e.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${bw.websocket}`,this.httpEndpoint=ET(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e==null?void 0:e.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=EM.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const e=t.message;throw e.includes("Node.js")?new Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:PM}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,e??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const e=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),e}async removeAllChannels(){const t=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,e,n){this.logger(t,e,n)}connectionState(){switch(this.conn&&this.conn.readyState){case uf.connecting:return xc.Connecting;case uf.open:return xc.Open;case uf.closing:return xc.Closing;default:return xc.Closed}}isConnected(){return this.connectionState()===xc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,e={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new wA(`realtime:${t}`,e,this);return this.channels.push(i),i}}push(t){const{topic:e,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,d=>{var u;(u=this.conn)===null||u===void 0||u.send(d)})};this.log("push",`${e} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(DM,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout()},q2.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,e=>{if(e.topic==="phoenix"&&e.event==="phx_reply")try{this.heartbeatCallback(e.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=e,d=o?`(${o})`:"",u=i.status||"";this.log("receive",`${u} ${n} ${s} ${d}`.trim(),i),this.channels.filter(p=>p._isMember(n)).forEach(p=>p._trigger(s,i,o)),this._triggerStateCallbacks("message",e)})}_clearTimer(t){var e;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((e=this.reconnectTimer)===null||e===void 0||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(la.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(e);return`${t}${n}${s}`}_workerObjectUrl(t){let e;if(t)e=t;else{const n=new Blob([$M],{type:"application/javascript"});e=URL.createObjectURL(n)}return e}_setConnectionState(t,e=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=e)}async _performAuth(t=null){let e;t?e=t:this.accessToken?e=await this.accessToken():e=this.accessTokenValue,this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(n=>{const s={access_token:e,version:TM};e&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(la.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${t}`,e)})}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(e)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new _T(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},q2.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var e,n,s,i,o,d,u,p,m;if(this.transport=(e=t==null?void 0:t.transport)!==null&&e!==void 0?e:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:vw,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:q2.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(d=t==null?void 0:t.heartbeatCallback)!==null&&d!==void 0?d:Mb,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:g=>LM[g-1]||UM,this.encode=(p=t==null?void 0:t.encode)!==null&&p!==void 0?p:(g,x)=>x(JSON.stringify(g)),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class SA extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Le(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class HM extends SA{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Sw extends SA{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}}const AA=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),qM=()=>Response,Aw=r=>{if(Array.isArray(r))return r.map(e=>Aw(e));if(typeof r=="function"||r!==Object(r))return r;const t={};return Object.entries(r).forEach(([e,n])=>{const s=e.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Aw(n)}),t},VM=r=>{if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Ob=r=>{var t;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(t=r.error)===null||t===void 0?void 0:t.message)||JSON.stringify(r)},WM=(r,t,e)=>ft(void 0,void 0,void 0,function*(){const n=yield qM();r instanceof n&&!(e!=null&&e.noResolveJson)?r.json().then(s=>{const i=r.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new HM(Ob(s),i,o))}).catch(s=>{t(new Sw(Ob(s),s))}):t(new Sw(Ob(r),r))}),GM=(r,t,e,n)=>{const s={method:r,headers:(t==null?void 0:t.headers)||{}};return r==="GET"||!n?s:(VM(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),e))};function v0(r,t,e,n,s,i){return ft(this,void 0,void 0,function*(){return new Promise((o,d)=>{r(e,GM(t,n,s,i)).then(u=>{if(!u.ok)throw u;return n!=null&&n.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>WM(u,d,n))})})}function ff(r,t,e,n){return ft(this,void 0,void 0,function*(){return v0(r,"GET",t,e,n)})}function Gi(r,t,e,n,s){return ft(this,void 0,void 0,function*(){return v0(r,"POST",t,n,s,e)})}function _w(r,t,e,n,s){return ft(this,void 0,void 0,function*(){return v0(r,"PUT",t,n,s,e)})}function KM(r,t,e,n){return ft(this,void 0,void 0,function*(){return v0(r,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),n)})}function _A(r,t,e,n,s){return ft(this,void 0,void 0,function*(){return v0(r,"DELETE",t,n,s,e)})}class XM{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}execute(){return ft(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Le(t))return{data:null,error:t};throw t}})}}var CT;class YM{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[CT]="BlobDownloadBuilder",this.promise=null}asStream(){return new XM(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ft(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Le(t))return{data:null,error:t};throw t}})}}CT=Symbol.toStringTag;const QM={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},cE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class JM{constructor(t,e={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=AA(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,e,n,s){return ft(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},cE),s);let d=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),u&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(u))):(i=n,d["cache-control"]=`max-age=${o.cacheControl}`,d["content-type"]=o.contentType,u&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(u))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(d=Object.assign(Object.assign({},d),s.headers));const p=this._removeEmptyFolders(e),m=this._getFinalPath(p),g=yield(t=="PUT"?_w:Gi)(this.fetch,`${this.url}/object/${m}`,i,Object.assign({headers:d},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:p,id:g.Id,fullPath:g.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Le(i))return{data:null,error:i};throw i}})}upload(t,e,n){return ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,n)})}uploadToSignedUrl(t,e,n,s){return ft(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),d=new URL(this.url+`/object/upload/sign/${o}`);d.searchParams.set("token",e);try{let u;const p=Object.assign({upsert:cE.upsert},s),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",p.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",p.cacheControl)):(u=n,m["cache-control"]=`max-age=${p.cacheControl}`,m["content-type"]=p.contentType);const g=yield _w(this.fetch,d.toString(),u,{headers:m});return{data:{path:i,fullPath:g.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Le(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(t,e){return ft(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const i=yield Gi(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),d=o.searchParams.get("token");if(!d)throw new SA("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:d},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}update(t,e,n){return ft(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,n)})}move(t,e,n){return ft(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}})}copy(t,e,n){return ft(this,void 0,void 0,function*(){try{return{data:{path:(yield Gi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}})}createSignedUrl(t,e,n){return ft(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Gi(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}})}createSignedUrls(t,e,n){return ft(this,void 0,void 0,function*(){try{const s=yield Gi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}})}download(t,e){const s=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),o=i?`?${i}`:"",d=this._getFinalPath(t),u=()=>ff(this.fetch,`${this.url}/${s}/${d}${o}`,{headers:this.headers,noResolveJson:!0});return new YM(u,this.shouldThrowOnError)}info(t){return ft(this,void 0,void 0,function*(){const e=this._getFinalPath(t);try{const n=yield ff(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:Aw(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}exists(t){return ft(this,void 0,void 0,function*(){const e=this._getFinalPath(t);try{return yield KM(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n)&&n instanceof Sw){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,e){const n=this._getFinalPath(t),s=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&s.push(i);const d=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});u!==""&&s.push(u);let p=s.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${n}${p}`)}}}remove(t){return ft(this,void 0,void 0,function*(){try{return{data:yield _A(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Le(e))return{data:null,error:e};throw e}})}list(t,e,n){return ft(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},QM),e),{prefix:t||""});return{data:yield Gi(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}})}listV2(t,e){return ft(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Gi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},e),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}}const TT="2.80.0",PT={"X-Client-Info":`storage-js/${TT}`};class ZM{constructor(t,e={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},PT),e),this.fetch=AA(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return ft(this,void 0,void 0,function*(){try{const e=this.listBucketOptionsToQueryString(t);return{data:yield ff(this.fetch,`${this.url}/bucket${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Le(e))return{data:null,error:e};throw e}})}getBucket(t){return ft(this,void 0,void 0,function*(){try{return{data:yield ff(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Le(e))return{data:null,error:e};throw e}})}createBucket(t){return ft(this,arguments,void 0,function*(e,n={public:!1}){try{return{data:yield Gi(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Le(s))return{data:null,error:s};throw s}})}updateBucket(t,e){return ft(this,void 0,void 0,function*(){try{return{data:yield _w(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Le(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ft(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Le(e))return{data:null,error:e};throw e}})}deleteBucket(t){return ft(this,void 0,void 0,function*(){try{return{data:yield _A(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Le(e))return{data:null,error:e};throw e}})}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}}class tO{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},PT),e),this.fetch=AA(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ft(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Le(e))return{data:null,error:e};throw e}})}listBuckets(t){return ft(this,void 0,void 0,function*(){try{const e=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&e.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&e.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&e.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&e.set("sortOrder",t.sortOrder),t!=null&&t.search&&e.set("search",t.search);const n=e.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield ff(this.fetch,s,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Le(e))return{data:null,error:e};throw e}})}deleteBucket(t){return ft(this,void 0,void 0,function*(){try{return{data:yield _A(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Le(e))return{data:null,error:e};throw e}})}}const kA={"X-Client-Info":`storage-js/${TT}`,"Content-Type":"application/json"};class DT extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function oi(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class Bb extends DT{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class eO extends DT{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}}var dE;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(dE||(dE={}));const EA=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),nO=r=>{if(typeof r!="object"||r===null)return!1;const t=Object.getPrototypeOf(r);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},uE=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),sO=(r,t,e)=>ft(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(e!=null&&e.noResolveJson)){const s=r.status||500,i=r;if(typeof i.json=="function")i.json().then(o=>{const d=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";t(new Bb(uE(o),s,d))}).catch(()=>{const o=s+"",d=i.statusText||`HTTP ${s} error`;t(new Bb(d,s,o))});else{const o=s+"",d=i.statusText||`HTTP ${s} error`;t(new Bb(d,s,o))}}else t(new eO(uE(r),r))}),iO=(r,t,e,n)=>{const s={method:r,headers:(t==null?void 0:t.headers)||{}};return n?(nO(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),e)):s};function aO(r,t,e,n,s,i){return ft(this,void 0,void 0,function*(){return new Promise((o,d)=>{r(e,iO(t,n,s,i)).then(u=>{if(!u.ok)throw u;if(n!=null&&n.noResolveJson)return u;const p=u.headers.get("content-type");return!p||!p.includes("application/json")?{}:u.json()}).then(u=>o(u)).catch(u=>sO(u,d,n))})})}function li(r,t,e,n,s){return ft(this,void 0,void 0,function*(){return aO(r,"POST",t,n,s,e)})}class rO{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kA),e),this.fetch=EA(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return ft(this,void 0,void 0,function*(){try{return{data:(yield li(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oi(e))return{data:null,error:e};throw e}})}getIndex(t,e){return ft(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(oi(n))return{data:null,error:n};throw n}})}listIndexes(t){return ft(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oi(e))return{data:null,error:e};throw e}})}deleteIndex(t,e){return ft(this,void 0,void 0,function*(){try{return{data:(yield li(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(oi(n))return{data:null,error:n};throw n}})}}class oO{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kA),e),this.fetch=EA(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return ft(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield li(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oi(e))return{data:null,error:e};throw e}})}getVectors(t){return ft(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oi(e))return{data:null,error:e};throw e}})}listVectors(t){return ft(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield li(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oi(e))return{data:null,error:e};throw e}})}queryVectors(t){return ft(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oi(e))return{data:null,error:e};throw e}})}deleteVectors(t){return ft(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield li(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oi(e))return{data:null,error:e};throw e}})}}class lO{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kA),e),this.fetch=EA(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ft(this,void 0,void 0,function*(){try{return{data:(yield li(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oi(e))return{data:null,error:e};throw e}})}getBucket(t){return ft(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oi(e))return{data:null,error:e};throw e}})}listBuckets(){return ft(this,arguments,void 0,function*(t={}){try{return{data:yield li(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oi(e))return{data:null,error:e};throw e}})}deleteBucket(t){return ft(this,void 0,void 0,function*(){try{return{data:(yield li(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oi(e))return{data:null,error:e};throw e}})}}class cO extends lO{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new dO(this.url,this.headers,t,this.fetch)}}class dO extends rO{constructor(t,e,n,s){super(t,e,s),this.vectorBucketName=n}createIndex(t){const e=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ft(this,void 0,void 0,function*(){return e.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ft(this,arguments,void 0,function*(e={}){return t.listIndexes.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const e=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ft(this,void 0,void 0,function*(){return e.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const e=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ft(this,void 0,void 0,function*(){return e.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new uO(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class uO extends oO{constructor(t,e,n,s,i){super(t,e,i),this.vectorBucketName=n,this.indexName=s}putVectors(t){const e=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ft(this,void 0,void 0,function*(){return e.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const e=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ft(this,void 0,void 0,function*(){return e.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ft(this,arguments,void 0,function*(e={}){return t.listVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const e=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ft(this,void 0,void 0,function*(){return e.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const e=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ft(this,void 0,void 0,function*(){return e.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class hO extends ZM{constructor(t,e={},n,s){super(t,e,n,s)}from(t){return new JM(this.url,this.headers,t,this.fetch)}get vectors(){return new cO(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new tO(this.url+"/iceberg",this.headers,this.fetch)}}const pO="2.80.0";let zm="";typeof Deno<"u"?zm="deno":typeof document<"u"?zm="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zm="react-native":zm="node";const mO={"X-Client-Info":`supabase-js-${zm}/${pO}`},fO={headers:mO},gO={schema:"public"},xO={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yO={},vO=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),bO=()=>Headers,wO=(r,t,e)=>{const n=vO(e),s=bO();return async(i,o)=>{var d;const u=(d=await t())!==null&&d!==void 0?d:r;let p=new s(o==null?void 0:o.headers);return p.has("apikey")||p.set("apikey",r),p.has("Authorization")||p.set("Authorization",`Bearer ${u}`),n(i,Object.assign(Object.assign({},o),{headers:p}))}};function SO(r){return r.endsWith("/")?r:r+"/"}function AO(r,t){var e,n;const{db:s,auth:i,realtime:o,global:d}=r,{db:u,auth:p,realtime:m,global:g}=t,x={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},p),i),realtime:Object.assign(Object.assign({},m),o),storage:{},global:Object.assign(Object.assign(Object.assign({},g),d),{headers:Object.assign(Object.assign({},(e=g==null?void 0:g.headers)!==null&&e!==void 0?e:{}),(n=d==null?void 0:d.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return r.accessToken?x.accessToken=r.accessToken:delete x.accessToken,x}function _O(r){const t=r==null?void 0:r.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(SO(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const NT="2.80.0",Iu=30*1e3,kw=3,Ib=kw*Iu,kO="http://localhost:9999",EO="supabase.auth.token",CO={"X-Client-Info":`gotrue-js/${NT}`},Ew="X-Supabase-Api-Version",RT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},TO=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,PO=10*60*1e3;class gf extends Error{constructor(t,e,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=n}}function At(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class DO extends gf{constructor(t,e,n){super(t,e,n),this.name="AuthApiError",this.status=e,this.code=n}}function NO(r){return At(r)&&r.name==="AuthApiError"}class yc extends gf{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}}class Wl extends gf{constructor(t,e,n,s){super(t,n,s),this.name=e,this.status=n}}class Hi extends Wl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function RO(r){return At(r)&&r.name==="AuthSessionMissingError"}class Du extends Wl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class V2 extends Wl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class W2 extends Wl{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function MO(r){return At(r)&&r.name==="AuthImplicitGrantRedirectError"}class hE extends Wl{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Cw extends Wl{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}}function Fb(r){return At(r)&&r.name==="AuthRetryableFetchError"}class pE extends Wl{constructor(t,e,n){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=n}}class Tw extends Wl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),mE=` 	
\r=`.split(""),OO=(()=>{const r=new Array(128);for(let t=0;t<r.length;t+=1)r[t]=-1;for(let t=0;t<mE.length;t+=1)r[mE[t].charCodeAt(0)]=-2;for(let t=0;t<Vx.length;t+=1)r[Vx[t].charCodeAt(0)]=t;return r})();function fE(r,t,e){if(r!==null)for(t.queue=t.queue<<8|r,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;e(Vx[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;e(Vx[n]),t.queuedBits-=6}}function MT(r,t,e){const n=OO[r];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function gE(r){const t=[],e=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{FO(o,n,e)};for(let o=0;o<r.length;o+=1)MT(r.charCodeAt(o),s,i);return t.join("")}function BO(r,t){if(r<=127){t(r);return}else if(r<=2047){t(192|r>>6),t(128|r&63);return}else if(r<=65535){t(224|r>>12),t(128|r>>6&63),t(128|r&63);return}else if(r<=1114111){t(240|r>>18),t(128|r>>12&63),t(128|r>>6&63),t(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function IO(r,t){for(let e=0;e<r.length;e+=1){let n=r.charCodeAt(e);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(r.charCodeAt(e+1)-56320&65535|s)+65536,e+=1}BO(n,t)}}function FO(r,t,e){if(t.utf8seq===0){if(r<=127){e(r);return}for(let n=1;n<6;n+=1)if((r>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=r&31;else if(t.utf8seq===3)t.codepoint=r&15;else if(t.utf8seq===4)t.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|r&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function Ju(r){const t=[],e={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<r.length;s+=1)MT(r.charCodeAt(s),e,n);return new Uint8Array(t)}function jO(r){const t=[];return IO(r,e=>t.push(e)),new Uint8Array(t)}function kc(r){const t=[],e={queue:0,queuedBits:0},n=s=>{t.push(s)};return r.forEach(s=>fE(s,e,n)),fE(null,e,n),t.join("")}function LO(r){return Math.round(Date.now()/1e3)+r}function UO(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const t=Math.random()*16|0;return(r=="x"?t:t&3|8).toString(16)})}const Xn=()=>typeof window<"u"&&typeof document<"u",uc={tested:!1,writable:!1},OT=()=>{if(!Xn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(uc.tested)return uc.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),uc.tested=!0,uc.writable=!0}catch{uc.tested=!0,uc.writable=!1}return uc.writable};function $O(r){const t={},e=new URL(r);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return e.searchParams.forEach((n,s)=>{t[s]=n}),t}const BT=r=>r?(...t)=>r(...t):(...t)=>fetch(...t),zO=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Fu=async(r,t,e)=>{await r.setItem(t,JSON.stringify(e))},hc=async(r,t)=>{const e=await r.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},Oo=async(r,t)=>{await r.removeItem(t)};class My{constructor(){this.promise=new My.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}}My.promiseConstructor=Promise;function jb(r){const t=r.split(".");if(t.length!==3)throw new Tw("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!TO.test(t[n]))throw new Tw("JWT not in base64url format");return{header:JSON.parse(gE(t[0])),payload:JSON.parse(gE(t[1])),signature:Ju(t[2]),raw:{header:t[0],payload:t[1]}}}async function HO(r){return await new Promise(t=>{setTimeout(()=>t(null),r)})}function qO(r,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await r(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function VO(r){return("0"+r.toString(16)).substr(-2)}function WO(){const t=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=e.length;let s="";for(let i=0;i<56;i++)s+=e.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,VO).join("")}async function GO(r){const e=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",e),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function KO(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const e=await GO(r);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Nu(r,t,e=!1){const n=WO();let s=n;e&&(s+="/PASSWORD_RECOVERY"),await Fu(r,`${t}-code-verifier`,s);const i=await KO(n);return[i,n===i?"plain":"s256"]}const XO=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function YO(r){const t=r.headers.get(Ew);if(!t||!t.match(XO))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function QO(r){if(!r)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(r<=t)throw new Error("JWT has expired")}function JO(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ZO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ru(r){if(!ZO.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Lb(){const r={};return new Proxy(r,{get:(t,e)=>{if(e==="__isUserNotAvailableProxy")return!0;if(typeof e=="symbol"){const n=e.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function tB(r,t){return new Proxy(r,{get:(e,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(e,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(e,n,s)}})}function xE(r){return JSON.parse(JSON.stringify(r))}const pc=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),eB=[502,503,504];async function yE(r){var t;if(!zO(r))throw new Cw(pc(r),0);if(eB.includes(r.status))throw new Cw(pc(r),r.status);let e;try{e=await r.json()}catch(i){throw new yc(pc(i),i)}let n;const s=YO(r);if(s&&s.getTime()>=RT["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?n=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(n=e.error_code),n){if(n==="weak_password")throw new pE(pc(e),r.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Hi}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new pE(pc(e),r.status,e.weak_password.reasons);throw new DO(pc(e),r.status||500,n)}const nB=(r,t,e,n)=>{const s={method:r,headers:(t==null?void 0:t.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),e))};async function Dt(r,t,e,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Ew]||(i[Ew]=RT["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const d=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await sB(r,t,e+d,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(u):{data:Object.assign({},u),error:null}}async function sB(r,t,e,n,s,i){const o=nB(t,n,s,i);let d;try{d=await r(e,Object.assign({},o))}catch(u){throw console.error(u),new Cw(pc(u),0)}if(d.ok||await yE(d),n!=null&&n.noResolveJson)return d;try{return await d.json()}catch(u){await yE(u)}}function qi(r){var t;let e=null;rB(r)&&(e=Object.assign({},r),r.expires_at||(e.expires_at=LO(r.expires_in)));const n=(t=r.user)!==null&&t!==void 0?t:r;return{data:{session:e,user:n},error:null}}function vE(r){const t=qi(r);return!t.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((e,n)=>e&&typeof n=="string",!0)&&(t.data.weak_password=r.weak_password),t}function Lo(r){var t;return{data:{user:(t=r.user)!==null&&t!==void 0?t:r},error:null}}function iB(r){return{data:r,error:null}}function aB(r){const{action_link:t,email_otp:e,hashed_token:n,redirect_to:s,verification_type:i}=r,o=zp(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:e,hashed_token:n,redirect_to:s,verification_type:i},u=Object.assign({},o);return{data:{properties:d,user:u},error:null}}function bE(r){return r}function rB(r){return r.access_token&&r.refresh_token&&r.expires_in}const Ub=["global","local","others"];class oB{constructor({url:t="",headers:e={},fetch:n}){this.url=t,this.headers=e,this.fetch=BT(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,e=Ub[0]){if(Ub.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ub.join(", ")}`);try{return await Dt(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(At(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,e={}){try{return await Dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:Lo})}catch(n){if(At(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:e}=t,n=zp(t,["options"]),s=Object.assign(Object.assign({},n),e);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:aB,redirectTo:e==null?void 0:e.redirectTo})}catch(e){if(At(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await Dt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Lo})}catch(e){if(At(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,n,s,i,o,d,u;try{const p={nextPage:null,lastPage:0,total:0},m=await Dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(e=t==null?void 0:t.page)===null||e===void 0?void 0:e.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:bE});if(m.error)throw m.error;const g=await m.json(),x=(o=m.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(u=(d=m.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&u!==void 0?u:[];return v.length>0&&(v.forEach(k=>{const S=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(k.split(";")[1].split("=")[1]);p[`${_}Page`]=S}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},g),p),error:null}}catch(p){if(At(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){Ru(t);try{return await Dt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Lo})}catch(e){if(At(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){Ru(t);try{return await Dt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:Lo})}catch(n){if(At(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,e=!1){Ru(t);try{return await Dt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:Lo})}catch(n){if(At(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ru(t.userId);try{const{data:e,error:n}=await Dt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:e,error:n}}catch(e){if(At(e))return{data:null,error:e};throw e}}async _deleteFactor(t){Ru(t.userId),Ru(t.id);try{return{data:await Dt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(At(e))return{data:null,error:e};throw e}}async _listOAuthClients(t){var e,n,s,i,o,d,u;try{const p={nextPage:null,lastPage:0,total:0},m=await Dt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(e=t==null?void 0:t.page)===null||e===void 0?void 0:e.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:bE});if(m.error)throw m.error;const g=await m.json(),x=(o=m.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(u=(d=m.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&u!==void 0?u:[];return v.length>0&&(v.forEach(k=>{const S=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(k.split(";")[1].split("=")[1]);p[`${_}Page`]=S}),p.total=parseInt(x)),{data:Object.assign(Object.assign({},g),p),error:null}}catch(p){if(At(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(t){try{return await Dt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(At(e))return{data:null,error:e};throw e}}async _getOAuthClient(t){try{return await Dt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(At(e))return{data:null,error:e};throw e}}async _updateOAuthClient(t,e){try{return await Dt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(At(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Dt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(At(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(t){try{return await Dt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(At(e))return{data:null,error:e};throw e}}}function wE(r={}){return{getItem:t=>r[t]||null,setItem:(t,e)=>{r[t]=e},removeItem:t=>{delete r[t]}}}const Mu={debug:!!(globalThis&&OT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class IT extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class lB extends IT{}async function cB(r,t,e){Mu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Mu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Mu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,s.name);try{return await e()}finally{Mu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,s.name)}}else{if(t===0)throw Mu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new lB(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Mu.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await e()}}))}function dB(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function FT(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function uB(r){return parseInt(r,16)}function hB(r){const t=new TextEncoder().encode(r);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function pB(r){var t;const{chainId:e,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:d,requestId:u,resources:p,scheme:m,uri:g,version:x}=r;{if(!Number.isInteger(e))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${e}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=r.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const v=FT(r.address),k=m?`${m}://${n}`:n,S=r.statement?`${r.statement}
`:"",_=`${k} wants you to sign in with your Ethereum account:
${v}

${S}`;let E=`URI: ${g}
Version: ${x}
Chain ID: ${e}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(E+=`
Expiration Time: ${s.toISOString()}`),d&&(E+=`
Not Before: ${d.toISOString()}`),u&&(E+=`
Request ID: ${u}`),p){let N=`
Resources:`;for(const P of p){if(!P||typeof P!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${P}`);N+=`
- ${P}`}E+=N}return`${_}
${E}`}class rn extends Error{constructor({message:t,code:e,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=e}}class Wx extends rn{constructor(t,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:t}),this.name="WebAuthnUnknownError",this.originalError=e}}function mB({error:r,options:t}){var e,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new rn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((e=i.authenticatorSelection)===null||e===void 0?void 0:e.requireResidentKey)===!0)return new rn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new rn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new rn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new rn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new rn({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return i.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new rn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new rn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const o=window.location.hostname;if(jT(o)){if(i.rp.id!==o)return new rn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new rn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new rn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new rn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new rn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function fB({error:r,options:t}){const{publicKey:e}=t;if(!e)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(t.signal instanceof AbortSignal)return new rn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new rn({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const n=window.location.hostname;if(jT(n)){if(e.rpId!==n)return new rn({message:`The RP ID "${e.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new rn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new rn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new rn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class gB{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const xB=new gB;function yB(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:t,user:e,excludeCredentials:n}=r,s=zp(r,["challenge","user","excludeCredentials"]),i=Ju(t).buffer,o=Object.assign(Object.assign({},e),{id:Ju(e.id).buffer}),d=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){d.excludeCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const p=n[u];d.excludeCredentials[u]=Object.assign(Object.assign({},p),{id:Ju(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return d}function vB(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:t,allowCredentials:e}=r,n=zp(r,["challenge","allowCredentials"]),s=Ju(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(e&&e.length>0){i.allowCredentials=new Array(e.length);for(let o=0;o<e.length;o++){const d=e[o];i.allowCredentials[o]=Object.assign(Object.assign({},d),{id:Ju(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return i}function bB(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const e=r;return{id:r.id,rawId:r.id,response:{attestationObject:kc(new Uint8Array(r.response.attestationObject)),clientDataJSON:kc(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function wB(r){var t;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const e=r,n=r.getClientExtensionResults(),s=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:kc(new Uint8Array(s.authenticatorData)),clientDataJSON:kc(new Uint8Array(s.clientDataJSON)),signature:kc(new Uint8Array(s.signature)),userHandle:s.userHandle?kc(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=e.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function jT(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function SE(){var r,t;return!!(Xn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function SB(r){try{const t=await navigator.credentials.create(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wx("Browser returned unexpected credential type",t)}:{data:null,error:new Wx("Empty credential response",t)}}catch(t){return{data:null,error:mB({error:t,options:r})}}}async function AB(r){try{const t=await navigator.credentials.get(r);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Wx("Browser returned unexpected credential type",t)}:{data:null,error:new Wx("Empty credential response",t)}}catch(t){return{data:null,error:fB({error:t,options:r})}}}const _B={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},kB={userVerification:"preferred",hints:["security-key"]};function Gx(...r){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),e=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of r)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(e(o))n[i]=o;else if(t(o)){const d=n[i];t(d)?n[i]=Gx(d,o):n[i]=Gx(o)}else n[i]=o}return n}function EB(r,t){return Gx(_B,r,t||{})}function CB(r,t){return Gx(kB,r,t||{})}class TB{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:e,friendlyName:n,signal:s},i){try{const{data:o,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:e});if(!o)return{data:null,error:d};const u=s??xB.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:p}=o.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${n}`),p.displayName||(p.displayName=p.name)}switch(o.webauthn.type){case"create":{const p=EB(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:m,error:g}=await SB({publicKey:p,signal:u});return m?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}case"request":{const p=CB(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:m,error:g}=await AB(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:p,signal:u}));return m?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:m}},error:null}:{data:null,error:g}}}}catch(o){return At(o)?{data:null,error:o}:{data:null,error:new yc("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:e,webauthn:n}){return this.client.mfa.verify({factorId:e,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!e)return{data:null,error:new gf("rpId is required for WebAuthn authentication")};try{if(!SE())return{data:null,error:new yc("Browser does not support WebAuthn",null)};const{data:o,error:d}=await this.challenge({factorId:t,webauthn:{rpId:e,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:d};const{webauthn:u}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:u.type,rpId:e,rpOrigins:n,credential_response:u.credential_response}})}catch(o){return At(o)?{data:null,error:o}:{data:null,error:new yc("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!e)return{data:null,error:new gf("rpId is required for WebAuthn registration")};try{if(!SE())return{data:null,error:new yc("Browser does not support WebAuthn",null)};const{data:o,error:d}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(m=>{var g;return(g=m.data)===null||g===void 0?void 0:g.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:d};const{data:u,error:p}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:e,rpOrigins:n},signal:s},{create:i});return u?this._verify({factorId:o.id,challengeId:u.challengeId,webauthn:{rpId:e,rpOrigins:n,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:p}}catch(o){return At(o)?{data:null,error:o}:{data:null,error:new yc("Unexpected error in register",o)}}}}dB();const PB={url:kO,storageKey:EO,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:CO,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function AE(r,t,e){return await e()}const Ou={};class xf{get jwks(){var t,e;return(e=(t=Ou[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&e!==void 0?e:{keys:[]}}set jwks(t){Ou[this.storageKey]=Object.assign(Object.assign({},Ou[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,e;return(e=(t=Ou[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ou[this.storageKey]=Object.assign(Object.assign({},Ou[this.storageKey]),{cachedAt:t})}constructor(t){var e,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},PB),t);if(this.storageKey=i.storageKey,this.instanceID=(e=xf.nextInstanceID[this.storageKey])!==null&&e!==void 0?e:0,xf.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&Xn()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new oB({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=BT(i.fetch),this.lock=i.lock||AE,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:Xn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=cB:this.lock=AE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new TB(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:OT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=wE(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=wE(this.memoryStorage)),Xn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${NT}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let e={},n="none";if(Xn()&&(e=$O(window.location.href),this._isImplicitGrantCallback(e)?n="implicit":await this._isPKCECallback(e)&&(n="pkce")),Xn()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(e,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),MO(i)){const u=(t=i.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:d}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",d),await this._saveSession(o),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return At(e)?this._returnResult({error:e}):this._returnResult({error:new yc("Unexpected error during initialization",e)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var e,n,s;try{const i=await Dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(e=t==null?void 0:t.options)===null||e===void 0?void 0:e.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:qi}),{data:o,error:d}=i;if(d||!o)return this._returnResult({data:{user:null,session:null},error:d});const u=o.session,p=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:p,session:u},error:null})}catch(i){if(At(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var e,n,s;try{let i;if("email"in t){const{email:m,password:g,options:x}=t;let v=null,k=null;this.flowType==="pkce"&&([v,k]=await Nu(this.storage,this.storageKey)),i=await Dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:m,password:g,data:(e=x==null?void 0:x.data)!==null&&e!==void 0?e:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:v,code_challenge_method:k},xform:qi})}else if("phone"in t){const{phone:m,password:g,options:x}=t;i=await Dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:g,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},channel:(s=x==null?void 0:x.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:qi})}else throw new V2("You must provide either an email or phone number and a password");const{data:o,error:d}=i;if(d||!o)return this._returnResult({data:{user:null,session:null},error:d});const u=o.session,p=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:p,session:u},error:null})}catch(i){if(At(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let e;if("email"in t){const{email:i,password:o,options:d}=t;e=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:vE})}else if("phone"in t){const{phone:i,password:o,options:d}=t;e=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:vE})}else throw new V2("You must provide either an email or phone number and a password");const{data:n,error:s}=e;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new Du;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(e){if(At(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOAuth(t){var e,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(e=t.options)===null||e===void 0?void 0:e.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:e}=t;switch(e){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${e}"`)}}async signInWithEthereum(t){var e,n,s,i,o,d,u,p,m,g,x;let v,k;if("message"in t)v=t.message,k=t.signature;else{const{chain:S,wallet:_,statement:E,options:N}=t;let P;if(Xn())if(typeof _=="object")P=_;else{const K=window;if("ethereum"in K&&typeof K.ethereum=="object"&&"request"in K.ethereum&&typeof K.ethereum.request=="function")P=K.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=_}const R=new URL((e=N==null?void 0:N.url)!==null&&e!==void 0?e:window.location.href),M=await P.request({method:"eth_requestAccounts"}).then(K=>K).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!M||M.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=FT(M[0]);let I=(n=N==null?void 0:N.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!I){const K=await P.request({method:"eth_chainId"});I=uB(K)}const H={domain:R.host,address:O,statement:E,uri:R.href,version:"1",chainId:I,nonce:(s=N==null?void 0:N.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=N==null?void 0:N.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(d=N==null?void 0:N.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(u=N==null?void 0:N.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(p=N==null?void 0:N.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(m=N==null?void 0:N.signInWithEthereum)===null||m===void 0?void 0:m.resources};v=pB(H),k=await P.request({method:"personal_sign",params:[hB(v),O]})}try{const{data:S,error:_}=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:k},!((g=t.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:qi});if(_)throw _;if(!S||!S.session||!S.user){const E=new Du;return this._returnResult({data:{user:null,session:null},error:E})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:_})}catch(S){if(At(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async signInWithSolana(t){var e,n,s,i,o,d,u,p,m,g,x,v;let k,S;if("message"in t)k=t.message,S=t.signature;else{const{chain:_,wallet:E,statement:N,options:P}=t;let R;if(Xn())if(typeof E=="object")R=E;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))R=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(P!=null&&P.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=E}const M=new URL((e=P==null?void 0:P.url)!==null&&e!==void 0?e:window.location.href);if("signIn"in R&&R.signIn){const O=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},P==null?void 0:P.signInWithSolana),{version:"1",domain:M.host,uri:M.href}),N?{statement:N}:null));let I;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")I=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)I=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)k=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),S=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${M.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${M.href}`,`Issued At: ${(s=(n=P==null?void 0:P.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=P==null?void 0:P.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${P.signInWithSolana.notBefore}`]:[],...!((o=P==null?void 0:P.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${P.signInWithSolana.expirationTime}`]:[],...!((d=P==null?void 0:P.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${P.signInWithSolana.chainId}`]:[],...!((u=P==null?void 0:P.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${P.signInWithSolana.nonce}`]:[],...!((p=P==null?void 0:P.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${P.signInWithSolana.requestId}`]:[],...!((g=(m=P==null?void 0:P.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||g===void 0)&&g.length?["Resources",...P.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const O=await R.signMessage(new TextEncoder().encode(k),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=O}}try{const{data:_,error:E}=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:kc(S)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:qi});if(E)throw E;if(!_||!_.session||!_.user){const N=new Du;return this._returnResult({data:{user:null,session:null},error:N})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:Object.assign({},_),error:E})}catch(_){if(At(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async _exchangeCodeForSession(t){const e=await hc(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(e??"").split("/");try{const{data:i,error:o}=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:qi});if(await Oo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const d=new Du;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(At(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:e,provider:n,token:s,access_token:i,nonce:o}=t,d=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:e==null?void 0:e.captchaToken}},xform:qi}),{data:u,error:p}=d;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!u||!u.session||!u.user){const m=new Du;return this._returnResult({data:{user:null,session:null},error:m})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:p})}catch(e){if(At(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async signInWithOtp(t){var e,n,s,i,o;try{if("email"in t){const{email:d,options:u}=t;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Nu(this.storage,this.storageKey));const{error:g}=await Dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(e=u==null?void 0:u.data)!==null&&e!==void 0?e:{},create_user:(n=u==null?void 0:u.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:p,code_challenge_method:m},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in t){const{phone:d,options:u}=t,{data:p,error:m}=await Dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(o=u==null?void 0:u.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:m})}throw new V2("You must provide either an email or phone number.")}catch(d){if(At(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(t){var e,n;try{let s,i;"options"in t&&(s=(e=t.options)===null||e===void 0?void 0:e.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:d}=await Dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:qi});if(d)throw d;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,p=o.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:p,session:u},error:null})}catch(s){if(At(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var e,n,s;try{let i=null,o=null;this.flowType==="pkce"&&([i,o]=await Nu(this.storage,this.storageKey));const d=await Dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(e=t.options)===null||e===void 0?void 0:e.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:iB});return this._returnResult(d)}catch(i){if(At(i))return this._returnResult({data:null,error:i});throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:e},error:n}=t;if(n)throw n;if(!e)throw new Hi;const{error:s}=await Dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:e.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(At(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const e=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await Dt(this.fetch,"POST",e,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:d}=await Dt(this.fetch,"POST",e,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:d})}throw new V2("You must provide either an email or phone number and a type")}catch(e){if(At(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(t,e){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await e()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=e();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const e=await this.__loadSession();return await t(e)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const e=await hc(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",e),e!==null&&(this._isValidSession(e)?t=e:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ib:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await hc(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Lb()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=tB(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Lo}):await this._useSession(async e=>{var n,s,i;const{data:o,error:d}=e;if(d)throw d;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Hi}:await Dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Lo})})}catch(e){if(At(e))return RO(e)&&(await this._removeSession(),await Oo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:e});throw e}}async updateUser(t,e={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,e))}async _updateUser(t,e={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Hi;const o=s.session;let d=null,u=null;this.flowType==="pkce"&&t.email!=null&&([d,u]=await Nu(this.storage,this.storageKey));const{data:p,error:m}=await Dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:e==null?void 0:e.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:u}),jwt:o.access_token,xform:Lo});if(m)throw m;return o.user=p.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(At(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Hi;const e=Date.now()/1e3;let n=e,s=!0,i=null;const{payload:o}=jb(t.access_token);if(o.exp&&(n=o.exp,s=n<=e),s){const{data:d,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!d)return{data:{user:null,session:null},error:null};i=d}else{const{data:d,error:u}=await this._getUser(t.access_token);if(u)throw u;i={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:n-e,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(e){if(At(e))return this._returnResult({data:{session:null,user:null},error:e});throw e}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async e=>{var n;if(!t){const{data:o,error:d}=e;if(d)throw d;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Hi;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(e){if(At(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async _getSessionFromURL(t,e){try{if(!Xn())throw new W2("No browser detected.");if(t.error||t.error_description||t.error_code)throw new W2(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(e){case"implicit":if(this.flowType==="pkce")throw new hE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new W2("Not a valid implicit grant flow url.");break;default:}if(e==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new hE("No code detected.");const{data:N,error:P}=await this._exchangeCodeForSession(t.code);if(P)throw P;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:d,expires_at:u,token_type:p}=t;if(!i||!d||!o||!p)throw new W2("No session defined in URL");const m=Math.round(Date.now()/1e3),g=parseInt(d);let x=m+g;u&&(x=parseInt(u));const v=x-m;v*1e3<=Iu&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${g}s`);const k=x-g;m-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,x,m):m-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,x,m);const{data:S,error:_}=await this._getUser(i);if(_)throw _;const E={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:g,expires_at:x,refresh_token:o,token_type:p,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:E,redirectType:t.type},error:null})}catch(n){if(At(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const e=await hc(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&e)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async e=>{var n;const{data:s,error:i}=e;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:d}=await this.admin.signOut(o,t);if(d&&!(NO(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return t!=="others"&&(await this._removeSession(),await Oo(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const e=UO(),n={id:e,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",e),this.stateChangeEmitters.delete(e)}};return this._debug("#onAuthStateChange()","registered callback with id",e),this.stateChangeEmitters.set(e,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(e)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async e=>{var n,s;try{const{data:{session:i},error:o}=e;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,e={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Nu(this.storage,this.storageKey,!0));try{return await Dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:e.captchaToken}},headers:this.headers,redirectTo:e.redirectTo})}catch(i){if(At(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:e,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=e.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(e){if(At(e))return this._returnResult({data:null,error:e});throw e}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var e;try{const{data:n,error:s}=await this._useSession(async i=>{var o,d,u,p,m;const{data:g,error:x}=i;if(x)throw x;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await Dt(this.fetch,"GET",v,{headers:this.headers,jwt:(m=(p=g.session)===null||p===void 0?void 0:p.access_token)!==null&&m!==void 0?m:void 0})});if(s)throw s;return Xn()&&!(!((e=t.options)===null||e===void 0)&&e.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(At(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async e=>{var n;try{const{error:s,data:{session:i}}=e;if(s)throw s;const{options:o,provider:d,token:u,access_token:p,nonce:m}=t,g=await Dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:d,id_token:u,access_token:p,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:qi}),{data:x,error:v}=g;return v?this._returnResult({data:{user:null,session:null},error:v}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new Du}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:v}))}catch(s){if(At(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async e=>{var n,s;const{data:i,error:o}=e;if(o)throw o;return await Dt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(e){if(At(e))return this._returnResult({data:null,error:e});throw e}}async _refreshAccessToken(t){const e=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(e,"begin");try{const n=Date.now();return await qO(async s=>(s>0&&await HO(200*Math.pow(2,s-1)),this._debug(e,"refreshing attempt",s),await Dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:qi})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Fb(i)&&Date.now()+o-n<Iu})}catch(n){if(this._debug(e,"error",n),At(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(e,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,e){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:e.redirectTo,scopes:e.scopes,queryParams:e.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",e,"url",n),Xn()&&!e.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await hc(this.storage,this.storageKey);if(s&&this.userStorage){let o=await hc(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Fu(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Lb()}else if(s&&!s.user&&!s.user){const o=await hc(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Oo(this.storage,this.storageKey+"-user"),await Fu(this.storage,this.storageKey,s)):s.user=Lb()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Ib;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Ib}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Fb(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:d}=await this._getUser(s.access_token);!d&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var e,n;if(!t)throw new Hi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new My;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Hi;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const d={data:i.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(i){if(this._debug(s,"error",i),At(i)){const o={data:null,error:i};return Fb(i)||await this._removeSession(),(e=this.refreshingDeferred)===null||e===void 0||e.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,e,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",e,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:e});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,e)}catch(u){i.push(u)}});if(await Promise.all(o),i.length>0){for(let d=0;d<i.length;d+=1)console.error(i[d]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const e=Object.assign({},t),n=e.user&&e.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&e.user&&await Fu(this.userStorage,this.storageKey+"-user",{user:e.user});const s=Object.assign({},e);delete s.user;const i=xE(s);await Fu(this.storage,this.storageKey,i)}else{const s=xE(e);await Fu(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Oo(this.storage,this.storageKey),await Oo(this.storage,this.storageKey+"-code-verifier"),await Oo(this.storage,this.storageKey+"-user"),this.userStorage&&await Oo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Xn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Iu);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Iu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Iu}ms, refresh threshold is ${kw} ticks`),s<=kw&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof IT)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Xn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const e=`#_onVisibilityChanged(${t})`;this._debug(e,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(e,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,e,n){const s=[`provider=${encodeURIComponent(e)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Nu(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(d.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async e=>{var n;const{data:s,error:i}=e;return i?this._returnResult({data:null,error:i}):await Dt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(e){if(At(e))return this._returnResult({data:null,error:e});throw e}}async _enroll(t){try{return await this._useSession(async e=>{var n,s;const{data:i,error:o}=e;if(o)return this._returnResult({data:null,error:o});const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:u,error:p}=await Dt(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return p?this._returnResult({data:null,error:p}):(t.factorType==="totp"&&u.type==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(e){if(At(e))return this._returnResult({data:null,error:e});throw e}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async e=>{var n;const{data:s,error:i}=e;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?bB(t.webauthn.credential_response):wB(t.webauthn.credential_response)})}:{code:t.code}),{data:d,error:u}=await Dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:u}))})}catch(e){if(At(e))return this._returnResult({data:null,error:e});throw e}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async e=>{var n;const{data:s,error:i}=e;if(i)return this._returnResult({data:null,error:i});const o=await Dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:d}=o;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:yB(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:vB(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(e){if(At(e))return this._returnResult({data:null,error:e});throw e}})}async _challengeAndVerify(t){const{data:e,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:e.id,code:t.code})}async _listFactors(){var t;const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=e==null?void 0:e.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,e;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=jb(n.access_token);let o=null;i.aal&&(o=i.aal);let d=o;((e=(t=n.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&e!==void 0?e:[]).length>0&&(d="aal2");const p=i.amr||[];return{data:{currentLevel:o,nextLevel:d,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async e=>{const{data:{session:n},error:s}=e;return s?this._returnResult({data:null,error:s}):n?await Dt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Hi})})}catch(e){if(At(e))return this._returnResult({data:null,error:e});throw e}}async _approveAuthorization(t,e){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Hi});const o=await Dt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return o.data&&o.data.redirect_url&&Xn()&&!(e!=null&&e.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(At(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,e){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Hi});const o=await Dt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return o.data&&o.data.redirect_url&&Xn()&&!(e!=null&&e.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(At(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,e={keys:[]}){let n=e.keys.find(d=>d.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(d=>d.kid===t),n&&this.jwks_cached_at+PO>s)return n;const{data:i,error:o}=await Dt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(d=>d.kid===t),!n)?null:n}async getClaims(t,e={}){try{let n=t;if(!n){const{data:v,error:k}=await this.getSession();if(k||!v.session)return this._returnResult({data:null,error:k});n=v.session.access_token}const{header:s,payload:i,signature:o,raw:{header:d,payload:u}}=jb(n);e!=null&&e.allowExpired||QO(i.exp);const p=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,e!=null&&e.keys?{keys:e.keys}:e==null?void 0:e.jwks);if(!p){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:i,header:s,signature:o},error:null}}const m=JO(s.alg),g=await crypto.subtle.importKey("jwk",p,m,!0,["verify"]);if(!await crypto.subtle.verify(m,g,o,jO(`${d}.${u}`)))throw new Tw("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(At(n))return this._returnResult({data:null,error:n});throw n}}}xf.nextInstanceID={};const DB=xf;class NB extends DB{constructor(t){super(t)}}class RB{constructor(t,e,n){var s,i,o;this.supabaseUrl=t,this.supabaseKey=e;const d=_O(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const u=`sb-${d.hostname.split(".")[0]}-auth-token`,p={db:gO,realtime:yO,auth:Object.assign(Object.assign({},xO),{storageKey:u}),global:fO},m=AO(n??{},p);this.storageKey=(s=m.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=m.global.headers)!==null&&i!==void 0?i:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(g,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=m.auth)!==null&&o!==void 0?o:{},this.headers,m.global.fetch),this.fetch=wO(e,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new kM(new URL("rest/v1",d).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new hO(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new wM(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,e;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(e=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:d,lock:u,debug:p,throwOnError:m},g,x){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new NB({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),g),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:s,userStorage:i,flowType:d,lock:u,debug:p,throwOnError:m,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(k=>k.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new zM(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,n)=>{this._handleTokenChanged(e,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const MB=(r,t,e)=>new RB(r,t,e);function OB(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const t=r.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}OB()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const BB="https://yfqdxvenmdownptxzegj.supabase.co",IB="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlmcWR4dmVubWRvd25wdHh6ZWdqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI2MjIwMDksImV4cCI6MjA3ODE5ODAwOX0.IbC0i0HdHxVKj6LvRgSTvRxxgLCzIwwoIKZtsvR7hOY",ee=MB(BB,IB),LT=X.createContext(void 0);function FB({children:r}){const[t,e]=X.useState(null),[n,s]=X.useState(!0);X.useEffect(()=>{async function u(){s(!0);try{const{data:{user:m}}=await ee.auth.getUser();e(m)}finally{s(!1)}}u();const{data:{subscription:p}}=ee.auth.onAuthStateChange((m,g)=>{e((g==null?void 0:g.user)||null)});return()=>p.unsubscribe()},[]);async function i(u,p){const{error:m}=await ee.auth.signUp({email:u,password:p});if(m)throw m}async function o(u,p){const{error:m}=await ee.auth.signInWithPassword({email:u,password:p});if(m)throw m}async function d(){const{error:u}=await ee.auth.signOut();if(u)throw u}return T.jsx(LT.Provider,{value:{user:t,loading:n,signUp:i,signIn:o,signOut:d},"data-matrix-id":"src/contexts/AuthContext.tsx:64:4","data-matrix-name":"AuthContext.Provider","data-component-path":"src/contexts/AuthContext.tsx","data-component-line":"64","data-component-file":"AuthContext.tsx","data-component-name":"AuthContext.Provider","data-component-content":"%7B%22value%22%3A%7B%22user%22%3A%22%5Bvar%3Auser%5D%22%2C%22loading%22%3A%22%5Bvar%3Aloading%5D%22%2C%22signUp%22%3A%22%5Bvar%3AsignUp%5D%22%2C%22signIn%22%3A%22%5Bvar%3AsignIn%5D%22%2C%22signOut%22%3A%22%5Bvar%3AsignOut%5D%22%7D%7D",children:r})}function co(){const r=X.useContext(LT);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r}let jB={data:""},LB=r=>{if(typeof window=="object"){let t=(r?r.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(r||document.head).appendChild(t),t.firstChild}return r||jB},UB=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,$B=/\/\*[^]*?\*\/|  +/g,_E=/\n+/g,Uo=(r,t)=>{let e="",n="",s="";for(let i in r){let o=r[i];i[0]=="@"?i[1]=="i"?e=i+" "+o+";":n+=i[1]=="f"?Uo(o,i):i+"{"+Uo(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=Uo(o,t?t.replace(/([^,])+/g,d=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,u=>/&/.test(u)?u.replace(/&/g,d):d?d+" "+u:u)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Uo.p?Uo.p(i,o):i+":"+o+";")}return e+(t&&s?t+"{"+s+"}":s)+n},lr={},UT=r=>{if(typeof r=="object"){let t="";for(let e in r)t+=e+UT(r[e]);return t}return r},zB=(r,t,e,n,s)=>{let i=UT(r),o=lr[i]||(lr[i]=(u=>{let p=0,m=11;for(;p<u.length;)m=101*m+u.charCodeAt(p++)>>>0;return"go"+m})(i));if(!lr[o]){let u=i!==r?r:(p=>{let m,g,x=[{}];for(;m=UB.exec(p.replace($B,""));)m[4]?x.shift():m[3]?(g=m[3].replace(_E," ").trim(),x.unshift(x[0][g]=x[0][g]||{})):x[0][m[1]]=m[2].replace(_E," ").trim();return x[0]})(r);lr[o]=Uo(s?{["@keyframes "+o]:u}:u,e?"":"."+o)}let d=e&&lr.g?lr.g:null;return e&&(lr.g=lr[o]),((u,p,m,g)=>{g?p.data=p.data.replace(g,u):p.data.indexOf(u)===-1&&(p.data=m?u+p.data:p.data+u)})(lr[o],t,n,d),o},HB=(r,t,e)=>r.reduce((n,s,i)=>{let o=t[i];if(o&&o.call){let d=o(e),u=d&&d.props&&d.props.className||/^go/.test(d)&&d;o=u?"."+u:d&&typeof d=="object"?d.props?"":Uo(d,""):d===!1?"":d}return n+s+(o??"")},"");function Oy(r){let t=this||{},e=r.call?r(t.p):r;return zB(e.unshift?e.raw?HB(e,[].slice.call(arguments,1),t.p):e.reduce((n,s)=>Object.assign(n,s&&s.call?s(t.p):s),{}):e,LB(t.target),t.g,t.o,t.k)}let $T,Pw,Dw;Oy.bind({g:1});let ro=Oy.bind({k:1});function qB(r,t,e,n){Uo.p=t,$T=r,Pw=e,Dw=n}function Gl(r,t){let e=this||{};return function(){let n=arguments;function s(i,o){let d=Object.assign({},i),u=d.className||s.className;e.p=Object.assign({theme:Pw&&Pw()},d),e.o=/ *go\d+/.test(u),d.className=Oy.apply(e,n)+(u?" "+u:"");let p=r;return r[0]&&(p=d.as||r,delete d.as),Dw&&p[0]&&Dw(d),$T(p,d)}return s}}var VB=r=>typeof r=="function",Kx=(r,t)=>VB(r)?r(t):r,WB=(()=>{let r=0;return()=>(++r).toString()})(),zT=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");r=!t||t.matches}return r}})(),GB=20,CA="default",HT=(r,t)=>{let{toastLimit:e}=r.settings;switch(t.type){case 0:return{...r,toasts:[t.toast,...r.toasts].slice(0,e)};case 1:return{...r,toasts:r.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:n}=t;return HT(r,{type:r.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=t;return{...r,toasts:r.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...r,pausedAt:t.time};case 6:let i=t.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},rx=[],qT={toasts:[],pausedAt:void 0,settings:{toastLimit:GB}},Ya={},VT=(r,t=CA)=>{Ya[t]=HT(Ya[t]||qT,r),rx.forEach(([e,n])=>{e===t&&n(Ya[t])})},WT=r=>Object.keys(Ya).forEach(t=>VT(r,t)),KB=r=>Object.keys(Ya).find(t=>Ya[t].toasts.some(e=>e.id===r)),By=(r=CA)=>t=>{VT(t,r)},XB={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},YB=(r={},t=CA)=>{let[e,n]=X.useState(Ya[t]||qT),s=X.useRef(Ya[t]);X.useEffect(()=>(s.current!==Ya[t]&&n(Ya[t]),rx.push([t,n]),()=>{let o=rx.findIndex(([d])=>d===t);o>-1&&rx.splice(o,1)}),[t]);let i=e.toasts.map(o=>{var d,u,p;return{...r,...r[o.type],...o,removeDelay:o.removeDelay||((d=r[o.type])==null?void 0:d.removeDelay)||(r==null?void 0:r.removeDelay),duration:o.duration||((u=r[o.type])==null?void 0:u.duration)||(r==null?void 0:r.duration)||XB[o.type],style:{...r.style,...(p=r[o.type])==null?void 0:p.style,...o.style}}});return{...e,toasts:i}},QB=(r,t="blank",e)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...e,id:(e==null?void 0:e.id)||WB()}),b0=r=>(t,e)=>{let n=QB(t,r,e);return By(n.toasterId||KB(n.id))({type:2,toast:n}),n.id},gn=(r,t)=>b0("blank")(r,t);gn.error=b0("error");gn.success=b0("success");gn.loading=b0("loading");gn.custom=b0("custom");gn.dismiss=(r,t)=>{let e={type:3,toastId:r};t?By(t)(e):WT(e)};gn.dismissAll=r=>gn.dismiss(void 0,r);gn.remove=(r,t)=>{let e={type:4,toastId:r};t?By(t)(e):WT(e)};gn.removeAll=r=>gn.remove(void 0,r);gn.promise=(r,t,e)=>{let n=gn.loading(t.loading,{...e,...e==null?void 0:e.loading});return typeof r=="function"&&(r=r()),r.then(s=>{let i=t.success?Kx(t.success,s):void 0;return i?gn.success(i,{id:n,...e,...e==null?void 0:e.success}):gn.dismiss(n),s}).catch(s=>{let i=t.error?Kx(t.error,s):void 0;i?gn.error(i,{id:n,...e,...e==null?void 0:e.error}):gn.dismiss(n)}),r};var JB=1e3,ZB=(r,t="default")=>{let{toasts:e,pausedAt:n}=YB(r,t),s=X.useRef(new Map).current,i=X.useCallback((g,x=JB)=>{if(s.has(g))return;let v=setTimeout(()=>{s.delete(g),o({type:4,toastId:g})},x);s.set(g,v)},[]);X.useEffect(()=>{if(n)return;let g=Date.now(),x=e.map(v=>{if(v.duration===1/0)return;let k=(v.duration||0)+v.pauseDuration-(g-v.createdAt);if(k<0){v.visible&&gn.dismiss(v.id);return}return setTimeout(()=>gn.dismiss(v.id,t),k)});return()=>{x.forEach(v=>v&&clearTimeout(v))}},[e,n,t]);let o=X.useCallback(By(t),[t]),d=X.useCallback(()=>{o({type:5,time:Date.now()})},[o]),u=X.useCallback((g,x)=>{o({type:1,toast:{id:g,height:x}})},[o]),p=X.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),m=X.useCallback((g,x)=>{let{reverseOrder:v=!1,gutter:k=8,defaultPosition:S}=x||{},_=e.filter(P=>(P.position||S)===(g.position||S)&&P.height),E=_.findIndex(P=>P.id===g.id),N=_.filter((P,R)=>R<E&&P.visible).length;return _.filter(P=>P.visible).slice(...v?[N+1]:[0,N]).reduce((P,R)=>P+(R.height||0)+k,0)},[e]);return X.useEffect(()=>{e.forEach(g=>{if(g.dismissed)i(g.id,g.removeDelay);else{let x=s.get(g.id);x&&(clearTimeout(x),s.delete(g.id))}})},[e,i]),{toasts:e,handlers:{updateHeight:u,startPause:d,endPause:p,calculateOffset:m}}},tI=ro`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,eI=ro`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,nI=ro`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,sI=Gl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${tI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${eI} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${nI} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,iI=ro`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,aI=Gl("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${iI} 1s linear infinite;
`,rI=ro`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,oI=ro`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,lI=Gl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${rI} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${oI} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,cI=Gl("div")`
  position: absolute;
`,dI=Gl("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,uI=ro`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,hI=Gl("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${uI} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,pI=({toast:r})=>{let{icon:t,type:e,iconTheme:n}=r;return t!==void 0?typeof t=="string"?X.createElement(hI,null,t):t:e==="blank"?null:X.createElement(dI,null,X.createElement(aI,{...n}),e!=="loading"&&X.createElement(cI,null,e==="error"?X.createElement(sI,{...n}):X.createElement(lI,{...n})))},mI=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,fI=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,gI="0%{opacity:0;} 100%{opacity:1;}",xI="0%{opacity:1;} 100%{opacity:0;}",yI=Gl("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,vI=Gl("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,bI=(r,t)=>{let e=r.includes("top")?1:-1,[n,s]=zT()?[gI,xI]:[mI(e),fI(e)];return{animation:t?`${ro(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ro(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},wI=X.memo(({toast:r,position:t,style:e,children:n})=>{let s=r.height?bI(r.position||t||"top-center",r.visible):{opacity:0},i=X.createElement(pI,{toast:r}),o=X.createElement(vI,{...r.ariaProps},Kx(r.message,r));return X.createElement(yI,{className:r.className,style:{...s,...e,...r.style}},typeof n=="function"?n({icon:i,message:o}):X.createElement(X.Fragment,null,i,o))});qB(X.createElement);var SI=({id:r,className:t,style:e,onHeightUpdate:n,children:s})=>{let i=X.useCallback(o=>{if(o){let d=()=>{let u=o.getBoundingClientRect().height;n(r,u)};d(),new MutationObserver(d).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[r,n]);return X.createElement("div",{ref:i,className:t,style:e},s)},AI=(r,t)=>{let e=r.includes("top"),n=e?{top:0}:{bottom:0},s=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:zT()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(e?1:-1)}px)`,...n,...s}},_I=Oy`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,G2=16,kI=({reverseOrder:r,position:t="top-center",toastOptions:e,gutter:n,children:s,toasterId:i,containerStyle:o,containerClassName:d})=>{let{toasts:u,handlers:p}=ZB(e,i);return X.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:G2,left:G2,right:G2,bottom:G2,pointerEvents:"none",...o},className:d,onMouseEnter:p.startPause,onMouseLeave:p.endPause},u.map(m=>{let g=m.position||t,x=p.calculateOffset(m,{reverseOrder:r,gutter:n,defaultPosition:t}),v=AI(g,x);return X.createElement(SI,{id:m.id,key:m.id,onHeightUpdate:p.updateHeight,className:m.visible?_I:"",style:v},m.type==="custom"?Kx(m.message,m):s?s(m):X.createElement(wI,{toast:m,position:g}))}))},Kt=gn;/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=(r,t)=>{const e=X.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:d="",children:u,...p},m)=>X.createElement("svg",{ref:m,...EI,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${CI(r)}`,d].join(" "),...p},[...t.map(([g,x])=>X.createElement(g,x)),...Array.isArray(u)?u:[u]]));return e.displayName=`${r}`,e};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=oe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=oe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=oe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=oe("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=oe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=oe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=oe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=oe("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=oe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=oe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=oe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=oe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=oe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=oe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xx=oe("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=oe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=oe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=oe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=oe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=oe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=oe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=oe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=oe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nw=oe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=oe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=oe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=oe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function qI(){const[r,t]=X.useState(!1),[e,n]=X.useState(""),[s,i]=X.useState(""),[o,d]=X.useState(!1),{signIn:u,signUp:p}=co(),m=async g=>{if(g.preventDefault(),!e||!s){Kt.error("Preencha todos os campos");return}if(s.length<6){Kt.error("A senha deve ter no mnimo 6 caracteres");return}d(!0);try{r?(await p(e,s),Kt.success("Conta criada com sucesso! Faa login para continuar."),t(!1),i("")):(await u(e,s),Kt.success("Login realizado com sucesso!"))}catch(x){console.error("Auth error:",x),Kt.error(x.message||"Erro ao autenticar")}finally{d(!1)}};return T.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 flex items-center justify-center p-4","data-matrix-id":"src/pages/AuthPage.tsx:47:4","data-matrix-name":"div","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"47","data-component-file":"AuthPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-gradient-to-br%20from-indigo-50%20via-white%20to-purple-50%20flex%20items-center%20justify-center%20p-4%22%7D",children:T.jsxs("div",{className:"max-w-md w-full","data-matrix-id":"src/pages/AuthPage.tsx:48:6","data-matrix-name":"div","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"48","data-component-file":"AuthPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22max-w-md%20w-full%22%7D",children:[T.jsxs("div",{className:"text-center mb-8","data-matrix-id":"src/pages/AuthPage.tsx:49:8","data-matrix-name":"div","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"49","data-component-file":"AuthPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20mb-8%22%7D",children:[T.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-indigo-600 rounded-2xl mb-4","data-matrix-id":"src/pages/AuthPage.tsx:50:10","data-matrix-name":"div","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"50","data-component-file":"AuthPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22inline-flex%20items-center%20justify-center%20w-16%20h-16%20bg-indigo-600%20rounded-2xl%20mb-4%22%7D",children:T.jsx(Jd,{className:"w-8 h-8 text-white","data-matrix-id":"src/pages/AuthPage.tsx:51:12","data-matrix-name":"BookOpen","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"51","data-component-file":"AuthPage.tsx","data-component-name":"BookOpen","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20text-white%22%7D"})}),T.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2","data-matrix-id":"src/pages/AuthPage.tsx:53:10","data-matrix-name":"h1","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"53","data-component-file":"AuthPage.tsx","data-component-name":"h1","data-component-content":"%7B%22className%22%3A%22text-4xl%20font-bold%20text-gray-900%20mb-2%22%7D",children:"FlashCards Pro"}),T.jsx("p",{className:"text-gray-600","data-matrix-id":"src/pages/AuthPage.tsx:56:10","data-matrix-name":"p","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"56","data-component-file":"AuthPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-600%22%7D",children:"Sistema inteligente de estudos para concursos"})]}),T.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8","data-matrix-id":"src/pages/AuthPage.tsx:61:8","data-matrix-name":"div","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"61","data-component-file":"AuthPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20rounded-2xl%20shadow-xl%20p-8%22%7D",children:[T.jsxs("div",{className:"flex gap-2 mb-6","data-matrix-id":"src/pages/AuthPage.tsx:62:10","data-matrix-name":"div","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"62","data-component-file":"AuthPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-2%20mb-6%22%7D",children:[T.jsx("button",{onClick:()=>t(!1),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${r?"bg-gray-100 text-gray-600 hover:bg-gray-200":"bg-indigo-600 text-white"}`,"data-matrix-id":"src/pages/AuthPage.tsx:63:12","data-matrix-name":"button","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"63","data-component-file":"AuthPage.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:"Login"}),T.jsx("button",{onClick:()=>t(!0),className:`flex-1 py-2 px-4 rounded-lg font-medium transition-colors ${r?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,"data-matrix-id":"src/pages/AuthPage.tsx:73:12","data-matrix-name":"button","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"73","data-component-file":"AuthPage.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:"Cadastro"})]}),T.jsxs("form",{onSubmit:m,className:"space-y-4","data-matrix-id":"src/pages/AuthPage.tsx:85:10","data-matrix-name":"form","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"85","data-component-file":"AuthPage.tsx","data-component-name":"form","data-component-content":"%7B%22onSubmit%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22space-y-4%22%7D",children:[T.jsxs("div",{"data-matrix-id":"src/pages/AuthPage.tsx:86:12","data-matrix-name":"div","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"86","data-component-file":"AuthPage.tsx","data-component-name":"div",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1","data-matrix-id":"src/pages/AuthPage.tsx:87:14","data-matrix-name":"label","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"87","data-component-file":"AuthPage.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-700%20mb-1%22%7D",children:"Email"}),T.jsx("input",{type:"email",value:e,onChange:g=>n(g.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none",placeholder:"seu@email.com",required:!0,"data-matrix-id":"src/pages/AuthPage.tsx:90:14","data-matrix-name":"input","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"90","data-component-file":"AuthPage.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22email%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20px-4%20py-2%20border%20border-gray-300%20rounded-lg%20focus%3Aring-2%20focus%3Aring-indigo-500%20focus%3Aborder-transparent%20outline-none%22%2C%22placeholder%22%3A%22seu%40email.com%22%2C%22required%22%3Atrue%7D"})]}),T.jsxs("div",{"data-matrix-id":"src/pages/AuthPage.tsx:100:12","data-matrix-name":"div","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"100","data-component-file":"AuthPage.tsx","data-component-name":"div",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1","data-matrix-id":"src/pages/AuthPage.tsx:101:14","data-matrix-name":"label","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"101","data-component-file":"AuthPage.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-700%20mb-1%22%7D",children:"Senha"}),T.jsx("input",{type:"password",value:s,onChange:g=>i(g.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none",placeholder:"",required:!0,minLength:6,"data-matrix-id":"src/pages/AuthPage.tsx:104:14","data-matrix-name":"input","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"104","data-component-file":"AuthPage.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22password%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20px-4%20py-2%20border%20border-gray-300%20rounded-lg%20focus%3Aring-2%20focus%3Aring-indigo-500%20focus%3Aborder-transparent%20outline-none%22%2C%22placeholder%22%3A%22%E2%80%A2%E2%80%A2%E2%80%A2%E2%80%A2%E2%80%A2%E2%80%A2%E2%80%A2%E2%80%A2%22%2C%22required%22%3Atrue%2C%22minLength%22%3A6%7D"})]}),T.jsx("button",{type:"submit",disabled:o,className:"w-full bg-indigo-600 text-white py-3 rounded-lg font-medium hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed","data-matrix-id":"src/pages/AuthPage.tsx:115:12","data-matrix-name":"button","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"115","data-component-file":"AuthPage.tsx","data-component-name":"button","data-component-content":"%7B%22type%22%3A%22submit%22%2C%22disabled%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22w-full%20bg-indigo-600%20text-white%20py-3%20rounded-lg%20font-medium%20hover%3Abg-indigo-700%20transition-colors%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%22%7D",children:o?"Processando...":r?"Criar Conta":"Entrar"})]}),r&&T.jsx("p",{className:"mt-4 text-sm text-gray-600 text-center","data-matrix-id":"src/pages/AuthPage.tsx:125:12","data-matrix-name":"p","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"125","data-component-file":"AuthPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22mt-4%20text-sm%20text-gray-600%20text-center%22%7D",children:"Ao criar uma conta, voc concorda com nossos termos de uso."})]}),T.jsx("div",{className:"mt-8 text-center","data-matrix-id":"src/pages/AuthPage.tsx:131:8","data-matrix-name":"div","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"131","data-component-file":"AuthPage.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-8%20text-center%22%7D",children:T.jsx("p",{className:"text-sm text-gray-600","data-matrix-id":"src/pages/AuthPage.tsx:132:10","data-matrix-name":"p","data-component-path":"src/pages/AuthPage.tsx","data-component-line":"132","data-component-file":"AuthPage.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-600%22%7D",children:"Especializado em concursos da Caixa Econmica Federal e Banco do Brasil"})})]})})}var $b={exports:{}},zb,NE;function VI(){if(NE)return zb;NE=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return zb=r,zb}var Hb,RE;function WI(){if(RE)return Hb;RE=1;var r=VI();function t(){}function e(){}return e.resetWarningCache=t,Hb=function(){function n(o,d,u,p,m,g){if(g!==r){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:e,resetWarningCache:t};return i.PropTypes=i,i},Hb}var ME;function GI(){return ME||(ME=1,$b.exports=WI()()),$b.exports}var KI=GI();const me=Ny(KI),XI=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Lp(r,t,e){const n=YI(r),{webkitRelativePath:s}=r,i=typeof t=="string"?t:typeof s=="string"&&s.length>0?s:`./${r.name}`;return typeof n.path!="string"&&OE(n,"path",i),OE(n,"relativePath",i),n}function YI(r){const{name:t}=r;if(t&&t.lastIndexOf(".")!==-1&&!r.type){const n=t.split(".").pop().toLowerCase(),s=XI.get(n);s&&Object.defineProperty(r,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return r}function OE(r,t,e){Object.defineProperty(r,t,{value:e,writable:!1,configurable:!1,enumerable:!0})}const QI=[".DS_Store","Thumbs.db"];function JI(r){return ft(this,void 0,void 0,function*(){return Yx(r)&&ZI(r.dataTransfer)?sF(r.dataTransfer,r.type):tF(r)?eF(r):Array.isArray(r)&&r.every(t=>"getFile"in t&&typeof t.getFile=="function")?nF(r):[]})}function ZI(r){return Yx(r)}function tF(r){return Yx(r)&&Yx(r.target)}function Yx(r){return typeof r=="object"&&r!==null}function eF(r){return Rw(r.target.files).map(t=>Lp(t))}function nF(r){return ft(this,void 0,void 0,function*(){return(yield Promise.all(r.map(e=>e.getFile()))).map(e=>Lp(e))})}function sF(r,t){return ft(this,void 0,void 0,function*(){if(r.items){const e=Rw(r.items).filter(s=>s.kind==="file");if(t!=="drop")return e;const n=yield Promise.all(e.map(iF));return BE(XT(n))}return BE(Rw(r.files).map(e=>Lp(e)))})}function BE(r){return r.filter(t=>QI.indexOf(t.name)===-1)}function Rw(r){if(r===null)return[];const t=[];for(let e=0;e<r.length;e++){const n=r[e];t.push(n)}return t}function iF(r){if(typeof r.webkitGetAsEntry!="function")return IE(r);const t=r.webkitGetAsEntry();return t&&t.isDirectory?YT(t):IE(r,t)}function XT(r){return r.reduce((t,e)=>[...t,...Array.isArray(e)?XT(e):[e]],[])}function IE(r,t){return ft(this,void 0,void 0,function*(){var e;if(globalThis.isSecureContext&&typeof r.getAsFileSystemHandle=="function"){const i=yield r.getAsFileSystemHandle();if(i===null)throw new Error(`${r} is not a File`);if(i!==void 0){const o=yield i.getFile();return o.handle=i,Lp(o)}}const n=r.getAsFile();if(!n)throw new Error(`${r} is not a File`);return Lp(n,(e=t==null?void 0:t.fullPath)!==null&&e!==void 0?e:void 0)})}function aF(r){return ft(this,void 0,void 0,function*(){return r.isDirectory?YT(r):rF(r)})}function YT(r){const t=r.createReader();return new Promise((e,n)=>{const s=[];function i(){t.readEntries(o=>ft(this,void 0,void 0,function*(){if(o.length){const d=Promise.all(o.map(aF));s.push(d),i()}else try{const d=yield Promise.all(s);e(d)}catch(d){n(d)}}),o=>{n(o)})}i()})}function rF(r){return ft(this,void 0,void 0,function*(){return new Promise((t,e)=>{r.file(n=>{const s=Lp(n,r.fullPath);t(s)},n=>{e(n)})})})}var K2={},FE;function oF(){return FE||(FE=1,K2.__esModule=!0,K2.default=function(r,t){if(r&&t){var e=Array.isArray(t)?t:t.split(",");if(e.length===0)return!0;var n=r.name||"",s=(r.type||"").toLowerCase(),i=s.replace(/\/.*$/,"");return e.some(function(o){var d=o.trim().toLowerCase();return d.charAt(0)==="."?n.toLowerCase().endsWith(d):d.endsWith("/*")?i===d.replace(/\/.*$/,""):s===d})}return!0}),K2}var lF=oF();const qb=Ny(lF);function jE(r){return uF(r)||dF(r)||JT(r)||cF()}function cF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dF(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function uF(r){if(Array.isArray(r))return Mw(r)}function LE(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,n)}return e}function UE(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?LE(Object(e),!0).forEach(function(n){QT(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):LE(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function QT(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function vf(r,t){return mF(r)||pF(r,t)||JT(r,t)||hF()}function hF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JT(r,t){if(r){if(typeof r=="string")return Mw(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Mw(r,t)}}function Mw(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function pF(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n=[],s=!0,i=!1,o,d;try{for(e=e.call(r);!(s=(o=e.next()).done)&&(n.push(o.value),!(t&&n.length===t));s=!0);}catch(u){i=!0,d=u}finally{try{!s&&e.return!=null&&e.return()}finally{if(i)throw d}}return n}}function mF(r){if(Array.isArray(r))return r}var fF=typeof qb=="function"?qb:qb.default,gF="file-invalid-type",xF="file-too-large",yF="file-too-small",vF="too-many-files",bF=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=t.split(","),n=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:gF,message:"File type must be ".concat(n)}},$E=function(t){return{code:xF,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},zE=function(t){return{code:yF,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},wF={code:vF,message:"Too many files"};function ZT(r,t){var e=r.type==="application/x-moz-file"||fF(r,t);return[e,e?null:bF(t)]}function t3(r,t,e){if(vc(r.size))if(vc(t)&&vc(e)){if(r.size>e)return[!1,$E(e)];if(r.size<t)return[!1,zE(t)]}else{if(vc(t)&&r.size<t)return[!1,zE(t)];if(vc(e)&&r.size>e)return[!1,$E(e)]}return[!0,null]}function vc(r){return r!=null}function SF(r){var t=r.files,e=r.accept,n=r.minSize,s=r.maxSize,i=r.multiple,o=r.maxFiles,d=r.validator;return!i&&t.length>1||i&&o>=1&&t.length>o?!1:t.every(function(u){var p=ZT(u,e),m=vf(p,1),g=m[0],x=t3(u,n,s),v=vf(x,1),k=v[0],S=d?d(u):null;return g&&k&&!S})}function Qx(r){return typeof r.isPropagationStopped=="function"?r.isPropagationStopped():typeof r.cancelBubble<"u"?r.cancelBubble:!1}function X2(r){return r.dataTransfer?Array.prototype.some.call(r.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!r.target&&!!r.target.files}function HE(r){r.preventDefault()}function AF(r){return r.indexOf("MSIE")!==-1||r.indexOf("Trident/")!==-1}function _F(r){return r.indexOf("Edge/")!==-1}function kF(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return AF(r)||_F(r)}function ba(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),o=1;o<s;o++)i[o-1]=arguments[o];return t.some(function(d){return!Qx(n)&&d&&d.apply(void 0,[n].concat(i)),Qx(n)})}}function EF(){return"showOpenFilePicker"in window}function CF(r){if(vc(r)){var t=Object.entries(r).filter(function(e){var n=vf(e,2),s=n[0],i=n[1],o=!0;return e3(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(i)||!i.every(n3))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(e,n){var s=vf(n,2),i=s[0],o=s[1];return UE(UE({},e),{},QT({},i,o))},{});return[{description:"Files",accept:t}]}return r}function TF(r){if(vc(r))return Object.entries(r).reduce(function(t,e){var n=vf(e,2),s=n[0],i=n[1];return[].concat(jE(t),[s],jE(i))},[]).filter(function(t){return e3(t)||n3(t)}).join(",")}function PF(r){return r instanceof DOMException&&(r.name==="AbortError"||r.code===r.ABORT_ERR)}function DF(r){return r instanceof DOMException&&(r.name==="SecurityError"||r.code===r.SECURITY_ERR)}function e3(r){return r==="audio/*"||r==="video/*"||r==="image/*"||r==="text/*"||r==="application/*"||/\w+\/[-+.\w]+/g.test(r)}function n3(r){return/^.*\.[\w]+$/.test(r)}var NF=["children"],RF=["open"],MF=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],OF=["refKey","onChange","onClick"];function BF(r){return jF(r)||FF(r)||s3(r)||IF()}function IF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FF(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function jF(r){if(Array.isArray(r))return Ow(r)}function Vb(r,t){return $F(r)||UF(r,t)||s3(r,t)||LF()}function LF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s3(r,t){if(r){if(typeof r=="string")return Ow(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ow(r,t)}}function Ow(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function UF(r,t){var e=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(e!=null){var n=[],s=!0,i=!1,o,d;try{for(e=e.call(r);!(s=(o=e.next()).done)&&(n.push(o.value),!(t&&n.length===t));s=!0);}catch(u){i=!0,d=u}finally{try{!s&&e.return!=null&&e.return()}finally{if(i)throw d}}return n}}function $F(r){if(Array.isArray(r))return r}function qE(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),e.push.apply(e,n)}return e}function je(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?qE(Object(e),!0).forEach(function(n){Bw(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):qE(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Bw(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Jx(r,t){if(r==null)return{};var e=zF(r,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function zF(r,t){if(r==null)return{};var e={},n=Object.keys(r),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(e[s]=r[s]);return e}var PA=X.forwardRef(function(r,t){var e=r.children,n=Jx(r,NF),s=a3(n),i=s.open,o=Jx(s,RF);return X.useImperativeHandle(t,function(){return{open:i}},[i]),OC.createElement(X.Fragment,null,e(je(je({},o),{},{open:i})))});PA.displayName="Dropzone";var i3={disabled:!1,getFilesFromEvent:JI,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};PA.defaultProps=i3;PA.propTypes={children:me.func,accept:me.objectOf(me.arrayOf(me.string)),multiple:me.bool,preventDropOnDocument:me.bool,noClick:me.bool,noKeyboard:me.bool,noDrag:me.bool,noDragEventsBubbling:me.bool,minSize:me.number,maxSize:me.number,maxFiles:me.number,disabled:me.bool,getFilesFromEvent:me.func,onFileDialogCancel:me.func,onFileDialogOpen:me.func,useFsAccessApi:me.bool,autoFocus:me.bool,onDragEnter:me.func,onDragLeave:me.func,onDragOver:me.func,onDrop:me.func,onDropAccepted:me.func,onDropRejected:me.func,onError:me.func,validator:me.func};var Iw={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function a3(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=je(je({},i3),r),e=t.accept,n=t.disabled,s=t.getFilesFromEvent,i=t.maxSize,o=t.minSize,d=t.multiple,u=t.maxFiles,p=t.onDragEnter,m=t.onDragLeave,g=t.onDragOver,x=t.onDrop,v=t.onDropAccepted,k=t.onDropRejected,S=t.onFileDialogCancel,_=t.onFileDialogOpen,E=t.useFsAccessApi,N=t.autoFocus,P=t.preventDropOnDocument,R=t.noClick,M=t.noKeyboard,O=t.noDrag,I=t.noDragEventsBubbling,H=t.onError,K=t.validator,W=X.useMemo(function(){return TF(e)},[e]),Y=X.useMemo(function(){return CF(e)},[e]),q=X.useMemo(function(){return typeof _=="function"?_:VE},[_]),tt=X.useMemo(function(){return typeof S=="function"?S:VE},[S]),et=X.useRef(null),lt=X.useRef(null),ot=X.useReducer(HF,Iw),it=Vb(ot,2),U=it[0],Q=it[1],at=U.isFocused,j=U.isFileDialogActive,G=X.useRef(typeof window<"u"&&window.isSecureContext&&E&&EF()),ut=function(){!G.current&&j&&setTimeout(function(){if(lt.current){var Et=lt.current.files;Et.length||(Q({type:"closeDialog"}),tt())}},300)};X.useEffect(function(){return window.addEventListener("focus",ut,!1),function(){window.removeEventListener("focus",ut,!1)}},[lt,j,tt,G]);var St=X.useRef([]),Nt=function(Et){et.current&&et.current.contains(Et.target)||(Et.preventDefault(),St.current=[])};X.useEffect(function(){return P&&(document.addEventListener("dragover",HE,!1),document.addEventListener("drop",Nt,!1)),function(){P&&(document.removeEventListener("dragover",HE),document.removeEventListener("drop",Nt))}},[et,P]),X.useEffect(function(){return!n&&N&&et.current&&et.current.focus(),function(){}},[et,N,n]);var Tt=X.useCallback(function(dt){H?H(dt):console.error(dt)},[H]),Pt=X.useCallback(function(dt){dt.preventDefault(),dt.persist(),ma(dt),St.current=[].concat(BF(St.current),[dt.target]),X2(dt)&&Promise.resolve(s(dt)).then(function(Et){if(!(Qx(dt)&&!I)){var Me=Et.length,$e=Me>0&&SF({files:Et,accept:W,minSize:o,maxSize:i,multiple:d,maxFiles:u,validator:K}),yn=Me>0&&!$e;Q({isDragAccept:$e,isDragReject:yn,isDragActive:!0,type:"setDraggedFiles"}),p&&p(dt)}}).catch(function(Et){return Tt(Et)})},[s,p,Tt,I,W,o,i,d,u,K]),Ht=X.useCallback(function(dt){dt.preventDefault(),dt.persist(),ma(dt);var Et=X2(dt);if(Et&&dt.dataTransfer)try{dt.dataTransfer.dropEffect="copy"}catch{}return Et&&g&&g(dt),!1},[g,I]),Zt=X.useCallback(function(dt){dt.preventDefault(),dt.persist(),ma(dt);var Et=St.current.filter(function($e){return et.current&&et.current.contains($e)}),Me=Et.indexOf(dt.target);Me!==-1&&Et.splice(Me,1),St.current=Et,!(Et.length>0)&&(Q({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),X2(dt)&&m&&m(dt))},[et,m,I]),Te=X.useCallback(function(dt,Et){var Me=[],$e=[];dt.forEach(function(yn){var mo=ZT(yn,W),di=Vb(mo,2),Za=di[0],Kp=di[1],au=t3(yn,o,i),Kl=Vb(au,2),Xp=Kl[0],Xl=Kl[1],Yl=K?K(yn):null;if(Za&&Xp&&!Yl)Me.push(yn);else{var Ql=[Kp,Xl];Yl&&(Ql=Ql.concat(Yl)),$e.push({file:yn,errors:Ql.filter(function(Yp){return Yp})})}}),(!d&&Me.length>1||d&&u>=1&&Me.length>u)&&(Me.forEach(function(yn){$e.push({file:yn,errors:[wF]})}),Me.splice(0)),Q({acceptedFiles:Me,fileRejections:$e,isDragReject:$e.length>0,type:"setFiles"}),x&&x(Me,$e,Et),$e.length>0&&k&&k($e,Et),Me.length>0&&v&&v(Me,Et)},[Q,d,W,o,i,u,x,v,k,K]),Dn=X.useCallback(function(dt){dt.preventDefault(),dt.persist(),ma(dt),St.current=[],X2(dt)&&Promise.resolve(s(dt)).then(function(Et){Qx(dt)&&!I||Te(Et,dt)}).catch(function(Et){return Tt(Et)}),Q({type:"reset"})},[s,Te,Tt,I]),Os=X.useCallback(function(){if(G.current){Q({type:"openDialog"}),q();var dt={multiple:d,types:Y};window.showOpenFilePicker(dt).then(function(Et){return s(Et)}).then(function(Et){Te(Et,null),Q({type:"closeDialog"})}).catch(function(Et){PF(Et)?(tt(Et),Q({type:"closeDialog"})):DF(Et)?(G.current=!1,lt.current?(lt.current.value=null,lt.current.click()):Tt(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Tt(Et)});return}lt.current&&(Q({type:"openDialog"}),q(),lt.current.value=null,lt.current.click())},[Q,q,tt,E,Te,Tt,Y,d]),ha=X.useCallback(function(dt){!et.current||!et.current.isEqualNode(dt.target)||(dt.key===" "||dt.key==="Enter"||dt.keyCode===32||dt.keyCode===13)&&(dt.preventDefault(),Os())},[et,Os]),uo=X.useCallback(function(){Q({type:"focus"})},[]),Vp=X.useCallback(function(){Q({type:"blur"})},[]),Wp=X.useCallback(function(){R||(kF()?setTimeout(Os,0):Os())},[R,Os]),pa=function(Et){return n?null:Et},iu=function(Et){return M?null:pa(Et)},ho=function(Et){return O?null:pa(Et)},ma=function(Et){I&&Et.stopPropagation()},po=X.useMemo(function(){return function(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Et=dt.refKey,Me=Et===void 0?"ref":Et,$e=dt.role,yn=dt.onKeyDown,mo=dt.onFocus,di=dt.onBlur,Za=dt.onClick,Kp=dt.onDragEnter,au=dt.onDragOver,Kl=dt.onDragLeave,Xp=dt.onDrop,Xl=Jx(dt,MF);return je(je(Bw({onKeyDown:iu(ba(yn,ha)),onFocus:iu(ba(mo,uo)),onBlur:iu(ba(di,Vp)),onClick:pa(ba(Za,Wp)),onDragEnter:ho(ba(Kp,Pt)),onDragOver:ho(ba(au,Ht)),onDragLeave:ho(ba(Kl,Zt)),onDrop:ho(ba(Xp,Dn)),role:typeof $e=="string"&&$e!==""?$e:"presentation"},Me,et),!n&&!M?{tabIndex:0}:{}),Xl)}},[et,ha,uo,Vp,Wp,Pt,Ht,Zt,Dn,M,O,n]),Gp=X.useCallback(function(dt){dt.stopPropagation()},[]),T0=X.useMemo(function(){return function(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Et=dt.refKey,Me=Et===void 0?"ref":Et,$e=dt.onChange,yn=dt.onClick,mo=Jx(dt,OF),di=Bw({accept:W,multiple:d,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:pa(ba($e,Dn)),onClick:pa(ba(yn,Gp)),tabIndex:-1},Me,lt);return je(je({},di),mo)}},[lt,e,d,Dn,n]);return je(je({},U),{},{isFocused:at&&!n,getRootProps:po,getInputProps:T0,rootRef:et,inputRef:lt,open:pa(Os)})}function HF(r,t){switch(t.type){case"focus":return je(je({},r),{},{isFocused:!0});case"blur":return je(je({},r),{},{isFocused:!1});case"openDialog":return je(je({},Iw),{},{isFileDialogActive:!0});case"closeDialog":return je(je({},r),{},{isFileDialogActive:!1});case"setDraggedFiles":return je(je({},r),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return je(je({},r),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return je({},Iw);default:return r}}function VE(){}const us=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Fw=[.001,0,0,.001,0,0],Wb=1.35,ii={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},$o={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},bf="pdfjs_internal_editor_",Bt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Wt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},qF={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},jw={TRIANGLES:1,LATTICE:2},Mn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},ox={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},sn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ju={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Iy={ERRORS:0,WARNINGS:1,INFOS:5},wf={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Om={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},VF={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Fy=Iy.WARNINGS;function WF(r){Number.isInteger(r)&&(Fy=r)}function GF(){return Fy}function jy(r){Fy>=Iy.INFOS&&console.info(`Info: ${r}`)}function Mt(r){Fy>=Iy.WARNINGS&&console.warn(`Warning: ${r}`)}function ye(r){throw new Error(r)}function Gt(r,t){r||ye(t)}function KF(r){switch(r==null?void 0:r.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function r3(r,t=null,e=null){if(!r)return null;if(e&&typeof r=="string"){if(e.addDefaultProtocol&&r.startsWith("www.")){const s=r.match(/\./g);(s==null?void 0:s.length)>=2&&(r=`http://${r}`)}if(e.tryConvertEncoding)try{r=ZF(r)}catch{}}const n=t?URL.parse(r,t):URL.parse(r);return KF(n)?n:null}function o3(r,t,e=!1){const n=URL.parse(r);return n?(n.hash=t,n.href):e&&r3(r,"http://example.com")?r.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Ft(r,t,e,n=!1){return Object.defineProperty(r,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const nu=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class WE extends nu{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Gb extends nu{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Lw extends nu{constructor(t){super(t,"InvalidPDFException")}}class Zx extends nu{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class XF extends nu{constructor(t){super(t,"FormatError")}}class Hl extends nu{constructor(t){super(t,"AbortException")}}function l3(r){(typeof r!="object"||(r==null?void 0:r.length)===void 0)&&ye("Invalid argument for bytesToString");const t=r.length,e=8192;if(t<e)return String.fromCharCode.apply(null,r);const n=[];for(let s=0;s<t;s+=e){const i=Math.min(s+e,t),o=r.subarray(s,i);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function w0(r){typeof r!="string"&&ye("Invalid argument for stringToBytes");const t=r.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=r.charCodeAt(n)&255;return e}function YF(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function QF(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function JF(){try{return new Function(""),!0}catch{return!1}}class zn{static get isLittleEndian(){return Ft(this,"isLittleEndian",QF())}static get isEvalSupported(){return Ft(this,"isEvalSupported",JF())}static get isOffscreenCanvasSupported(){return Ft(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ft(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return Ft(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return Ft(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Ft(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return Ft(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const Kb=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));var so,lx,Uw;class xt{static makeHexColor(t,e,n){return`#${Kb[t]}${Kb[e]}${Kb[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const s=t[n],i=t[n+1];t[n]=s*e[0]+i*e[2]+e[4],t[n+1]=s*e[1]+i*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const s=e[0],i=e[1],o=e[2],d=e[3],u=e[4],p=e[5];for(let m=0;m<6;m+=2){const g=t[n+m],x=t[n+m+1];t[n+m]=g*s+x*o+u,t[n+m+1]=g*i+x*d+p}}static applyInverseTransform(t,e){const n=t[0],s=t[1],i=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-s*e[2]+e[2]*e[5]-e[4]*e[3])/i,t[1]=(-n*e[1]+s*e[0]+e[4]*e[1]-e[5]*e[0])/i}static axialAlignedBoundingBox(t,e,n){const s=e[0],i=e[1],o=e[2],d=e[3],u=e[4],p=e[5],m=t[0],g=t[1],x=t[2],v=t[3];let k=s*m+u,S=k,_=s*x+u,E=_,N=d*g+p,P=N,R=d*v+p,M=R;if(i!==0||o!==0){const O=i*m,I=i*x,H=o*g,K=o*v;k+=H,E+=H,_+=K,S+=K,N+=O,M+=O,R+=I,P+=I}n[0]=Math.min(n[0],k,_,S,E),n[1]=Math.min(n[1],N,R,P,M),n[2]=Math.max(n[2],k,_,S,E),n[3]=Math.max(n[3],N,R,P,M)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],s=t[1],i=t[2],o=t[3],d=n**2+s**2,u=n*i+s*o,p=i**2+o**2,m=(d+p)/2,g=Math.sqrt(m**2-(d*p-u**2));e[0]=Math.sqrt(m+g||1),e[1]=Math.sqrt(m-g||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;const i=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return i>o?null:[n,i,s,o]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,s,i){i[0]=Math.min(i[0],t,n),i[1]=Math.min(i[1],e,s),i[2]=Math.max(i[2],t,n),i[3]=Math.max(i[3],e,s)}static bezierBoundingBox(t,e,n,s,i,o,d,u,p){p[0]=Math.min(p[0],t,d),p[1]=Math.min(p[1],e,u),p[2]=Math.max(p[2],t,d),p[3]=Math.max(p[3],e,u),C(this,so,Uw).call(this,t,n,i,d,e,s,o,u,3*(-t+3*(n-i)+d),6*(t-2*n+i),3*(n-t),p),C(this,so,Uw).call(this,t,n,i,d,e,s,o,u,3*(-e+3*(s-o)+u),6*(e-2*s+o),3*(s-e),p)}}so=new WeakSet,lx=function(t,e,n,s,i,o,d,u,p,m){if(p<=0||p>=1)return;const g=1-p,x=p*p,v=x*p,k=g*(g*(g*t+3*p*e)+3*x*n)+v*s,S=g*(g*(g*i+3*p*o)+3*x*d)+v*u;m[0]=Math.min(m[0],k),m[1]=Math.min(m[1],S),m[2]=Math.max(m[2],k),m[3]=Math.max(m[3],S)},Uw=function(t,e,n,s,i,o,d,u,p,m,g,x){if(Math.abs(p)<1e-12){Math.abs(m)>=1e-12&&C(this,so,lx).call(this,t,e,n,s,i,o,d,u,-g/m,x);return}const v=m**2-4*g*p;if(v<0)return;const k=Math.sqrt(v),S=2*p;C(this,so,lx).call(this,t,e,n,s,i,o,d,u,(-m+k)/S,x),C(this,so,lx).call(this,t,e,n,s,i,o,d,u,(-m-k)/S,x)},A(xt,so);function ZF(r){return decodeURIComponent(escape(r))}let Xb=null,GE=null;function tj(r){return Xb||(Xb=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,GE=new Map([["","t"]])),r.replaceAll(Xb,(t,e,n)=>e?e.normalize("NFKC"):GE.get(n))}function c3(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),l3(r)}const Wu="pdfjs_internal_id_";function ej(r,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,s,...i]=e;if(!r(n)&&!Number.isInteger(n)||!t(s))return!1;const o=i.length;let d=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;d=!1;break;default:return!1}for(const u of i)if(!(typeof u=="number"||d&&u===null))return!1;return!0}function hs(r,t,e){return Math.min(Math.max(r,t),e)}function d3(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(l3(r))}function nj(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):w0(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...t){return new Promise(e=>{e(r(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((t,e)=>t+e,0)});class Sf{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function s(i){var u;if(!i)return;let o=null;const d=i.name;if(d==="#text")o=i.value;else if(Sf.shouldBuildText(d))(u=i==null?void 0:i.attributes)!=null&&u.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&e.push({str:o}),!!i.children)for(const p of i.children)s(p)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class u3{static setupStorage(t,e,n,s,i){const o=s.getValue(e,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),i==="print")break;t.addEventListener("input",d=>{s.setValue(e,{value:d.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?t.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&t.removeAttribute("checked"),i==="print")break;t.addEventListener("change",d=>{s.setValue(e,{value:d.target.checked?d.target.getAttribute("xfaOn"):d.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),i==="print")break;t.addEventListener("input",d=>{s.setValue(e,{value:d.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const d of n.children)d.attributes.value===o.value?d.attributes.selected=!0:d.attributes.hasOwnProperty("selected")&&delete d.attributes.selected}t.addEventListener("input",d=>{const u=d.target.options,p=u.selectedIndex===-1?"":u[u.selectedIndex].value;s.setValue(e,{value:p})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:i}){const{attributes:o}=e,d=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[u,p]of Object.entries(o))if(p!=null)switch(u){case"class":p.length&&t.setAttribute(u,p.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",p);break;case"style":Object.assign(t.style,p);break;case"textContent":t.textContent=p;break;default:(!d||u!=="href"&&u!=="newWindow")&&t.setAttribute(u,p)}d&&i.addLinkAttributes(t,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(t,o.dataId,e,n)}static render(t){var g,x;const e=t.annotationStorage,n=t.linkService,s=t.xfaHtml,i=t.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:i,linkService:n});const d=i!=="richText",u=t.div;if(u.append(o),t.viewport){const v=`matrix(${t.viewport.transform.join(",")})`;u.style.transform=v}d&&u.setAttribute("class","xfaLayer xfaFont");const p=[];if(s.children.length===0){if(s.value){const v=document.createTextNode(s.value);o.append(v),d&&Sf.shouldBuildText(s.name)&&p.push(v)}return{textDivs:p}}const m=[[s,-1,o]];for(;m.length>0;){const[v,k,S]=m.at(-1);if(k+1===v.children.length){m.pop();continue}const _=v.children[++m.at(-1)[1]];if(_===null)continue;const{name:E}=_;if(E==="#text"){const P=document.createTextNode(_.value);p.push(P),S.append(P);continue}const N=(g=_==null?void 0:_.attributes)!=null&&g.xmlns?document.createElementNS(_.attributes.xmlns,E):document.createElement(E);if(S.append(N),_.attributes&&this.setAttributes({html:N,element:_,storage:e,intent:i,linkService:n}),((x=_.children)==null?void 0:x.length)>0)m.push([_,-1,N]);else if(_.value){const P=document.createTextNode(_.value);d&&Sf.shouldBuildText(E)&&p.push(P),N.append(P)}}for(const v of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))v.setAttribute("readOnly",!0);return{textDivs:p}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const ur="http://www.w3.org/2000/svg",bc=class bc{};nt(bc,"CSS",96),nt(bc,"PDF",72),nt(bc,"PDF_TO_CSS_UNITS",bc.CSS/bc.PDF);let ql=bc;async function S0(r,t="text"){if(Hm(r,document.baseURI)){const e=await fetch(r);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",r,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class A0{constructor({viewBox:t,userUnit:e,scale:n,rotation:s,offsetX:i=0,offsetY:o=0,dontFlip:d=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=s,this.offsetX=i,this.offsetY=o,n*=e;const u=(t[2]+t[0])/2,p=(t[3]+t[1])/2;let m,g,x,v;switch(s%=360,s<0&&(s+=360),s){case 180:m=-1,g=0,x=0,v=1;break;case 90:m=0,g=1,x=1,v=0;break;case 270:m=0,g=-1,x=-1,v=0;break;case 0:m=1,g=0,x=0,v=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}d&&(x=-x,v=-v);let k,S,_,E;m===0?(k=Math.abs(p-t[1])*n+i,S=Math.abs(u-t[0])*n+o,_=(t[3]-t[1])*n,E=(t[2]-t[0])*n):(k=Math.abs(u-t[0])*n+i,S=Math.abs(p-t[1])*n+o,_=(t[2]-t[0])*n,E=(t[3]-t[1])*n),this.transform=[m*n,g*n,x*n,v*n,k-m*n*u-x*n*p,S-g*n*u-v*n*p],this.width=_,this.height=E}get rawDims(){const t=this.viewBox;return Ft(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new A0({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:i})}convertToViewportPoint(t,e){const n=[t,e];return xt.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];xt.applyTransform(e,this.transform);const n=[t[2],t[3]];return xt.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return xt.applyInverseTransform(n,this.transform),n}}class DA extends nu{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Ly(r){const t=r.length;let e=0;for(;e<t&&r[e].trim()==="";)e++;return r.substring(e,e+5).toLowerCase()==="data:"}function NA(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function sj(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function ij(r,t="document.pdf"){if(typeof r!="string")return t;if(Ly(r))return Mt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(d=>{try{return new URL(d)}catch{try{return new URL(decodeURIComponent(d))}catch{try{return new URL(d,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(d),"https://foo.bar")}catch{return null}}}}})(r);if(!n)return t;const s=d=>{try{let u=decodeURIComponent(d);return u.includes("/")?(u=u.split("/").at(-1),u.test(/^\.pdf$/i)?u:d):u}catch{return d}},i=/\.pdf$/i,o=n.pathname.split("/").at(-1);if(i.test(o))return s(o);if(n.searchParams.size>0){const d=Array.from(n.searchParams.values()).reverse();for(const p of d)if(i.test(p))return s(p);const u=Array.from(n.searchParams.keys()).reverse();for(const p of u)if(i.test(p))return s(p)}if(n.hash){const u=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(u)return s(u[0])}return t}class KE{constructor(){nt(this,"started",Object.create(null));nt(this,"times",[])}time(t){t in this.started&&Mt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Mt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:s,end:i}of this.times)t.push(`${n.padEnd(e)} ${i-s}ms
`);return t.join("")}}function Hm(r,t){const e=t?URL.parse(r,t):URL.parse(r);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function Bi(r){r.preventDefault()}function Ye(r){r.preventDefault(),r.stopPropagation()}function aj(r){console.log("Deprecated API usage: "+r)}var Df;class ty{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;l(this,Df)||b(this,Df,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=l(this,Df).exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(e[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let d=parseInt(e[5],10);d=d>=0&&d<=59?d:0;let u=parseInt(e[6],10);u=u>=0&&u<=59?u:0;const p=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let g=parseInt(e[9],10)||0;return g=g>=0&&g<=59?g:0,p==="-"?(o+=m,d+=g):p==="+"&&(o-=m,d-=g),new Date(Date.UTC(n,s,i,o,d,u))}}Df=new WeakMap,A(ty,Df);function rj(r,{scale:t=1,rotation:e=0}){const{width:n,height:s}=r.attributes.style,i=[0,0,parseInt(n),parseInt(s)];return new A0({viewBox:i,userUnit:1,scale:t,rotation:e})}function _0(r){if(r.startsWith("#")){const t=parseInt(r.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(t=>parseInt(t)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Mt(`Not a valid color format: "${r}"`),[0,0,0])}function oj(r){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of r.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;r.set(e,_0(n))}t.remove()}function Fe(r){const{a:t,b:e,c:n,d:s,e:i,f:o}=r.getTransform();return[t,e,n,s,i,o]}function wa(r){const{a:t,b:e,c:n,d:s,e:i,f:o}=r.getTransform().invertSelf();return[t,e,n,s,i,o]}function Zd(r,t,e=!1,n=!0){if(t instanceof A0){const{pageWidth:s,pageHeight:i}=t.rawDims,{style:o}=r,d=zn.isCSSRoundSupported,u=`var(--total-scale-factor) * ${s}px`,p=`var(--total-scale-factor) * ${i}px`,m=d?`round(down, ${u}, var(--scale-round-x))`:`calc(${u})`,g=d?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!e||t.rotation%180===0?(o.width=m,o.height=g):(o.width=g,o.height=m)}n&&r.setAttribute("data-main-rotation",t.rotation)}class Qa{constructor(){const{pixelRatio:t}=Qa;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,s,i=-1){let o=1/0,d=1/0,u=1/0;n=Qa.capPixels(n,i),n>0&&(o=Math.sqrt(n/(t*e))),s!==-1&&(d=s/t,u=s/e);const p=Math.min(o,d,u);return this.sx>p||this.sy>p?(this.sx=p,this.sy=p,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const $w=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class lj{static get isDarkMode(){var t;return Ft(this,"isDarkMode",!!((t=window==null?void 0:window.matchMedia)!=null&&t.call(window,"(prefers-color-scheme: dark)").matches))}}class cj{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),Ft(this,"commentForegroundColor",_0(n))}}function dj(r,t,e,n){n=Math.min(Math.max(n??1,0),1);const s=255*(1-n);return r=Math.round(r*n+s),t=Math.round(t*n+s),e=Math.round(e*n+s),[r,t,e]}function XE(r,t){const e=r[0]/255,n=r[1]/255,s=r[2]/255,i=Math.max(e,n,s),o=Math.min(e,n,s),d=(i+o)/2;if(i===o)t[0]=t[1]=0;else{const u=i-o;switch(t[1]=d<.5?u/(i+o):u/(2-i-o),i){case e:t[0]=((n-s)/u+(n<s?6:0))*60;break;case n:t[0]=((s-e)/u+2)*60;break;case s:t[0]=((e-n)/u+4)*60;break}}t[2]=d}function zw(r,t){const e=r[0],n=r[1],s=r[2],i=(1-Math.abs(2*s-1))*n,o=i*(1-Math.abs(e/60%2-1)),d=s-i/2;switch(Math.floor(e/60)){case 0:t[0]=i+d,t[1]=o+d,t[2]=d;break;case 1:t[0]=o+d,t[1]=i+d,t[2]=d;break;case 2:t[0]=d,t[1]=i+d,t[2]=o+d;break;case 3:t[0]=d,t[1]=o+d,t[2]=i+d;break;case 4:t[0]=o+d,t[1]=d,t[2]=i+d;break;case 5:case 6:t[0]=i+d,t[1]=d,t[2]=o+d;break}}function YE(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function QE(r,t,e){zw(r,e),e.map(YE);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];zw(t,e),e.map(YE);const s=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>s?(n+.05)/(s+.05):(s+.05)/(n+.05)}const JE=new Map;function uj(r,t){const e=r[0]+r[1]*256+r[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=JE.get(e);if(n)return n;const s=new Float32Array(9),i=s.subarray(0,3),o=s.subarray(3,6);XE(r,o);const d=s.subarray(6,9);XE(t,d);const u=d[2]<.5,p=u?12:4.5;if(o[2]=u?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),QE(o,d,i)<p){let m,g;u?(m=o[2],g=1):(m=0,g=o[2]);const x=.005;for(;g-m>x;){const v=o[2]=(m+g)/2;u===QE(o,d,i)<p?m=v:g=v}o[2]=u?g:m}return zw(o,i),n=xt.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),JE.set(e,n),n}function h3({html:r,dir:t,className:e},n){const s=document.createDocumentFragment();if(typeof r=="string"){const i=document.createElement("p");i.dir=t||"auto";const o=r.split(/(?:\r\n?|\n)/);for(let d=0,u=o.length;d<u;++d){const p=o[d];i.append(document.createTextNode(p)),d<u-1&&i.append(document.createElement("br"))}s.append(i)}else u3.render({xfaHtml:r,div:s,intent:"richText"});s.firstChild.classList.add("richText",e),n.append(s)}function p3(r){const t=new Path2D;if(!r)return t;for(let e=0,n=r.length;e<n;)switch(r[e++]){case Om.moveTo:t.moveTo(r[e++],r[e++]);break;case Om.lineTo:t.lineTo(r[e++],r[e++]);break;case Om.curveTo:t.bezierCurveTo(r[e++],r[e++],r[e++],r[e++],r[e++],r[e++]);break;case Om.quadraticCurveTo:t.quadraticCurveTo(r[e++],r[e++],r[e++],r[e++]);break;case Om.closePath:t.closePath();break;default:Mt(`Unrecognized drawing path operator: ${r[e-1]}`);break}return t}var Qo,Jo,bi,wi,Nf,Zo,ph,mh,Rf,hy,m3,$n,f3,g3,Lu,qm;const fr=class fr{constructor(t){A(this,$n);A(this,Qo,null);A(this,Jo,null);A(this,bi);A(this,wi,null);A(this,Nf,null);A(this,Zo,null);A(this,ph,null);A(this,mh,null);b(this,bi,t),l(fr,Rf)||b(fr,Rf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=b(this,Qo,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=l(this,bi)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Bi,{signal:e}),t.addEventListener("pointerdown",C(fr,hy,m3),{signal:e}));const n=b(this,wi,document.createElement("div"));n.className="buttons",t.append(n);const s=l(this,bi).toolbarPosition;if(s){const{style:i}=t,o=l(this,bi)._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return l(this,Qo)}hide(){var t;l(this,Qo).classList.add("hidden"),(t=l(this,Jo))==null||t.hideDropdown()}show(){var t,e;l(this,Qo).classList.remove("hidden"),(t=l(this,Nf))==null||t.shown(),(e=l(this,Zo))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=l(this,bi),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",l(fr,Rf)[t]),C(this,$n,Lu).call(this,n)&&n.addEventListener("click",s=>{e.delete()},{signal:e._signal}),l(this,wi).append(n)}async addAltText(t){const e=await t.render();C(this,$n,Lu).call(this,e),l(this,wi).append(e,l(this,$n,qm)),b(this,Nf,t)}addComment(t,e=null){if(l(this,Zo))return;const n=t.renderForToolbar();if(!n)return;C(this,$n,Lu).call(this,n);const s=b(this,ph,l(this,$n,qm));e?(l(this,wi).insertBefore(n,e),l(this,wi).insertBefore(s,e)):l(this,wi).append(n,s),b(this,Zo,t),t.toolbar=this}addColorPicker(t){if(l(this,Jo))return;b(this,Jo,t);const e=t.renderButton();C(this,$n,Lu).call(this,e),l(this,wi).append(e,l(this,$n,qm))}async addEditSignatureButton(t){const e=b(this,mh,await t.renderEditButton(l(this,bi)));C(this,$n,Lu).call(this,e),l(this,wi).append(e,l(this,$n,qm))}removeButton(t){var e,n;switch(t){case"comment":(e=l(this,Zo))==null||e.removeToolbarCommentButton(),b(this,Zo,null),(n=l(this,ph))==null||n.remove(),b(this,ph,null);break}}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const s=l(this,wi).querySelector(n);s&&t==="comment"&&this.addComment(e,s)}updateEditSignatureButton(t){l(this,mh)&&(l(this,mh).title=t)}remove(){var t;l(this,Qo).remove(),(t=l(this,Jo))==null||t.destroy(),b(this,Jo,null)}};Qo=new WeakMap,Jo=new WeakMap,bi=new WeakMap,wi=new WeakMap,Nf=new WeakMap,Zo=new WeakMap,ph=new WeakMap,mh=new WeakMap,Rf=new WeakMap,hy=new WeakSet,m3=function(t){t.stopPropagation()},$n=new WeakSet,f3=function(t){l(this,bi)._focusEventsAllowed=!1,Ye(t)},g3=function(t){l(this,bi)._focusEventsAllowed=!0,Ye(t)},Lu=function(t){const e=l(this,bi)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",C(this,$n,f3).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",C(this,$n,g3).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Bi,{signal:e}),!0)},qm=function(){const t=document.createElement("div");return t.className="divider",t},A(fr,hy),A(fr,Rf,null);let Hw=fr;var Mf,Bc,wr,oo,x3,y3,qw;class hj{constructor(t){A(this,oo);A(this,Mf,null);A(this,Bc,null);A(this,wr);b(this,wr,t)}show(t,e,n){const[s,i]=C(this,oo,y3).call(this,e,n),{style:o}=l(this,Bc)||b(this,Bc,C(this,oo,x3).call(this));t.append(l(this,Bc)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Bc).remove()}}Mf=new WeakMap,Bc=new WeakMap,wr=new WeakMap,oo=new WeakSet,x3=function(){const t=b(this,Bc,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=l(this,wr)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Bi,{signal:e});const n=b(this,Mf,document.createElement("div"));return n.className="buttons",t.append(n),l(this,wr).hasCommentManager()&&C(this,oo,qw).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{l(this,wr).commentSelection("floating_button")}),C(this,oo,qw).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{l(this,wr).highlightSelection("floating_button")}),t},y3=function(t,e){let n=0,s=0;for(const i of t){const o=i.y+i.height;if(o<n)continue;const d=i.x+(e?i.width:0);if(o>n){s=d,n=o;continue}e?d>s&&(s=d):d<s&&(s=d)}return[e?1-s:s,n]},qw=function(t,e,n,s){const i=document.createElement("button");i.classList.add("basic",t),i.tabIndex=0,i.setAttribute("data-l10n-id",e);const o=document.createElement("span");i.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",n);const d=l(this,wr)._signal;d instanceof AbortSignal&&!d.aborted&&(i.addEventListener("contextmenu",Bi,{signal:d}),i.addEventListener("click",s,{signal:d})),l(this,Mf).append(i)};function v3(r,t,e){for(const n of e)t.addEventListener(n,r[n].bind(r))}var Ic,Fc,fh,jc;const le=class le{static initializeAndAddPointerId(t){(l(le,Fc)||b(le,Fc,new Set)).add(t)}static setPointer(t,e){l(le,Ic)||b(le,Ic,e),l(le,jc)??b(le,jc,t)}static setTimeStamp(t){b(le,fh,t)}static isSamePointerId(t){return l(le,Ic)===t}static isSamePointerIdOrRemove(t){var e;return l(le,Ic)===t?!0:((e=l(le,Fc))==null||e.delete(t),!1)}static isSamePointerType(t){return l(le,jc)===t}static isInitializedAndDifferentPointerType(t){return l(le,jc)!==null&&!le.isSamePointerType(t)}static isSameTimeStamp(t){return l(le,fh)===t}static isUsingMultiplePointers(){var t;return((t=l(le,Fc))==null?void 0:t.size)>=1}static clearPointerType(){b(le,jc,null)}static clearPointerIds(){b(le,Ic,NaN),b(le,Fc,null)}static clearTimeStamp(){b(le,fh,NaN)}};Ic=new WeakMap,Fc=new WeakMap,fh=new WeakMap,jc=new WeakMap,A(le,Ic,NaN),A(le,Fc,null),A(le,fh,NaN),A(le,jc,null);let Yn=le;var py;class pj{constructor(){A(this,py,0)}get id(){return`${bf}${He(this,py)._++}`}}py=new WeakMap;var gh,Of,Qn,xh,cx;const UA=class UA{constructor(){A(this,xh);A(this,gh,c3());A(this,Of,0);A(this,Qn,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const i=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return Ft(this,"_isSVGFittingCanvas",i)}async getFromFile(t){const{lastModified:e,name:n,size:s,type:i}=t;return C(this,xh,cx).call(this,`${e}_${n}_${s}_${i}`,t)}async getFromUrl(t){return C(this,xh,cx).call(this,t,t)}async getFromBlob(t,e){const n=await e;return C(this,xh,cx).call(this,t,n)}async getFromId(t){l(this,Qn)||b(this,Qn,new Map);const e=l(this,Qn).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){l(this,Qn)||b(this,Qn,new Map);let n=l(this,Qn).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${l(this,gh)}_${He(this,Of)._++}`,refCounter:1,isSvg:!1},l(this,Qn).set(t,n),l(this,Qn).set(n.id,n),n}getSvgUrl(t){const e=l(this,Qn).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;l(this,Qn)||b(this,Qn,new Map);const e=l(this,Qn).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const i=new OffscreenCanvas(n.width,n.height);i.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=i.convertToBlob()}(s=n.close)==null||s.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${l(this,gh)}_`)}};gh=new WeakMap,Of=new WeakMap,Qn=new WeakMap,xh=new WeakSet,cx=async function(t,e){l(this,Qn)||b(this,Qn,new Map);let n=l(this,Qn).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${l(this,gh)}_${He(this,Of)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(n.url=e,s=await S0(e,"blob")):e instanceof File?s=n.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const i=UA._isSVGFittingCanvas,o=new FileReader,d=new Image,u=new Promise((p,m)=>{d.onload=()=>{n.bitmap=d,n.isSvg=!0,p()},o.onload=async()=>{const g=n.svgUrl=o.result;d.src=await i?`${g}#svgView(preserveAspectRatio(none))`:g},d.onerror=o.onerror=m});o.readAsDataURL(s),await u}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){Mt(s),n=null}return l(this,Qn).set(t,n),n&&l(this,Qn).set(n.id,n),n};let Vw=UA;var Ze,tl,Bf,Ie;class mj{constructor(t=128){A(this,Ze,[]);A(this,tl,!1);A(this,Bf);A(this,Ie,-1);b(this,Bf,t)}add({cmd:t,undo:e,post:n,mustExec:s,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:d=!1}){if(s&&t(),l(this,tl))return;const u={cmd:t,undo:e,post:n,type:i};if(l(this,Ie)===-1){l(this,Ze).length>0&&(l(this,Ze).length=0),b(this,Ie,0),l(this,Ze).push(u);return}if(o&&l(this,Ze)[l(this,Ie)].type===i){d&&(u.undo=l(this,Ze)[l(this,Ie)].undo),l(this,Ze)[l(this,Ie)]=u;return}const p=l(this,Ie)+1;p===l(this,Bf)?l(this,Ze).splice(0,1):(b(this,Ie,p),p<l(this,Ze).length&&l(this,Ze).splice(p)),l(this,Ze).push(u)}undo(){if(l(this,Ie)===-1)return;b(this,tl,!0);const{undo:t,post:e}=l(this,Ze)[l(this,Ie)];t(),e==null||e(),b(this,tl,!1),b(this,Ie,l(this,Ie)-1)}redo(){if(l(this,Ie)<l(this,Ze).length-1){b(this,Ie,l(this,Ie)+1),b(this,tl,!0);const{cmd:t,post:e}=l(this,Ze)[l(this,Ie)];t(),e==null||e(),b(this,tl,!1)}}hasSomethingToUndo(){return l(this,Ie)!==-1}hasSomethingToRedo(){return l(this,Ie)<l(this,Ze).length-1}cleanType(t){if(l(this,Ie)!==-1){for(let e=l(this,Ie);e>=0;e--)if(l(this,Ze)[e].type!==t){l(this,Ze).splice(e+1,l(this,Ie)-e),b(this,Ie,e);return}l(this,Ze).length=0,b(this,Ie,-1)}}destroy(){b(this,Ze,null)}}Ze=new WeakMap,tl=new WeakMap,Bf=new WeakMap,Ie=new WeakMap;var my,b3;class k0{constructor(t){A(this,my);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=zn.platform;for(const[n,s,i={}]of t)for(const o of n){const d=o.startsWith("mac+");e&&d?(this.callbacks.set(o.slice(4),{callback:s,options:i}),this.allKeys.add(o.split("+").at(-1))):!e&&!d&&(this.callbacks.set(o,{callback:s,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(C(this,my,b3).call(this,e));if(!n)return;const{callback:s,options:{bubbles:i=!1,args:o=[],checker:d=null}}=n;d&&!d(t,e)||(s.bind(t,...o,e)(),i||Ye(e))}}my=new WeakSet,b3=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const fy=class fy{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return oj(t),Ft(this,"_colors",t)}convert(t){const e=_0(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,s]of this._colors)if(s.every((i,o)=>i===e[o]))return fy._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?xt.makeHexColor(...e):t}};nt(fy,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Ww=fy;var yh,Us,vh,Ve,pn,bh,Si,wh,Ai,Jn,el,nl,Sh,sl,Ca,_i,Lc,If,Ff,Ah,jf,Ta,il,_h,al,Pa,gy,rl,kh,Lf,ol,Uc,Eh,ll,Uf,an,ae,Sr,cl,dl,$f,Ch,zf,ul,Da,Ar,Hf,qf,ki,ct,dx,Gw,w3,S3,Vm,A3,_3,k3,Kw,E3,C3,T3,P3,is,hr,D3,N3,Xw,R3,Wm,Yw;const Ku=class Ku{constructor(t,e,n,s,i,o,d,u,p,m,g,x,v,k,S,_){A(this,ct);A(this,yh,new AbortController);A(this,Us,null);A(this,vh,null);A(this,Ve,new Map);A(this,pn,new Map);A(this,bh,null);A(this,Si,null);A(this,wh,null);A(this,Ai,new mj);A(this,Jn,null);A(this,el,null);A(this,nl,null);A(this,Sh,0);A(this,sl,new Set);A(this,Ca,null);A(this,_i,null);A(this,Lc,new Set);nt(this,"_editorUndoBar",null);A(this,If,!1);A(this,Ff,!1);A(this,Ah,!1);A(this,jf,null);A(this,Ta,null);A(this,il,null);A(this,_h,null);A(this,al,!1);A(this,Pa,null);A(this,gy,new pj);A(this,rl,!1);A(this,kh,!1);A(this,Lf,!1);A(this,ol,null);A(this,Uc,null);A(this,Eh,null);A(this,ll,null);A(this,Uf,null);A(this,an,Bt.NONE);A(this,ae,new Set);A(this,Sr,null);A(this,cl,null);A(this,dl,null);A(this,$f,null);A(this,Ch,null);A(this,zf,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,ul,[0,0]);A(this,Da,null);A(this,Ar,null);A(this,Hf,null);A(this,qf,null);A(this,ki,null);const E=this._signal=l(this,yh).signal;b(this,Ar,t),b(this,Hf,e),b(this,qf,n),b(this,bh,s),b(this,Jn,i),b(this,cl,o),b(this,Ch,u),this._eventBus=d,d._on("editingaction",this.onEditingAction.bind(this),{signal:E}),d._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),d._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),d._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),d._on("setpreference",this.onSetPreference.bind(this),{signal:E}),d._on("switchannotationeditorparams",N=>this.updateParams(N.type,N.value),{signal:E}),window.addEventListener("pointerdown",()=>{b(this,kh,!0)},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{b(this,kh,!1)},{capture:!0,signal:E}),C(this,ct,A3).call(this),C(this,ct,P3).call(this),C(this,ct,Kw).call(this),b(this,Si,u.annotationStorage),b(this,jf,u.filterFactory),b(this,dl,p),b(this,_h,m||null),b(this,If,g),b(this,Ff,x),b(this,Ah,v),b(this,Uf,k||null),this.viewParameters={realScale:ql.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=_!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const t=Ku.prototype,e=o=>l(o,Ar).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:d})=>{if(d instanceof HTMLInputElement){const{type:u}=d;return u!=="text"&&u!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return Ft(this,"_keyboardManager",new k0([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:d})=>!(d instanceof HTMLButtonElement)&&l(o,Ar).contains(d)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:d})=>!(d instanceof HTMLButtonElement)&&l(o,Ar).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}]]))}destroy(){var t,e,n,s,i,o,d,u,p;(t=l(this,ki))==null||t.resolve(),b(this,ki,null),(e=l(this,yh))==null||e.abort(),b(this,yh,null),this._signal=null;for(const m of l(this,pn).values())m.destroy();l(this,pn).clear(),l(this,Ve).clear(),l(this,Lc).clear(),(n=l(this,ll))==null||n.clear(),b(this,Us,null),l(this,ae).clear(),l(this,Ai).destroy(),(s=l(this,bh))==null||s.destroy(),(i=l(this,Jn))==null||i.destroy(),(o=l(this,cl))==null||o.destroy(),(d=l(this,Pa))==null||d.hide(),b(this,Pa,null),(u=l(this,Eh))==null||u.destroy(),b(this,Eh,null),b(this,vh,null),l(this,Ta)&&(clearTimeout(l(this,Ta)),b(this,Ta,null)),l(this,Da)&&(clearTimeout(l(this,Da)),b(this,Da,null)),(p=this._editorUndoBar)==null||p.destroy(),b(this,Ch,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return l(this,Uf)}get useNewAltTextFlow(){return l(this,Ff)}get useNewAltTextWhenAddingImage(){return l(this,Ah)}get hcmFilter(){return Ft(this,"hcmFilter",l(this,dl)?l(this,jf).addHCMFilter(l(this,dl).foreground,l(this,dl).background):"none")}get direction(){return Ft(this,"direction",getComputedStyle(l(this,Ar)).direction)}get _highlightColors(){return Ft(this,"_highlightColors",l(this,_h)?new Map(l(this,_h).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Ft(this,"highlightColors",null);const e=new Map,n=!!l(this,dl);for(const[s,i]of t){const o=s.endsWith("_HCM");if(n&&o){e.set(s.replace("_HCM",""),i);continue}!n&&!o&&e.set(s,i)}return Ft(this,"highlightColors",e)}get highlightColorNames(){return Ft(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),b(this,nl,t)}setMainHighlightColorPicker(t){b(this,Eh,t)}editAltText(t,e=!1){var n;(n=l(this,bh))==null||n.editAltText(this,t,e)}hasCommentManager(){return!!l(this,Jn)}editComment(t,e,n,s){var i;(i=l(this,Jn))==null||i.showDialog(this,t,e,n,s)}selectComment(t,e){const n=l(this,pn).get(t),s=n==null?void 0:n.getEditorByUID(e);s==null||s.toggleComment(!0,!0)}updateComment(t){var e;(e=l(this,Jn))==null||e.updateComment(t.getData())}updatePopupColor(t){var e;(e=l(this,Jn))==null||e.updatePopupColor(t)}removeComment(t){var e;(e=l(this,Jn))==null||e.removeComments([t.uid])}toggleComment(t,e,n=void 0){var s;(s=l(this,Jn))==null||s.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){var n;return t&&((n=l(this,Jn))==null?void 0:n.makeCommentColor(t,e))||null}getCommentDialogElement(){var t;return((t=l(this,Jn))==null?void 0:t.dialogElement)||null}async waitForEditorsRendered(t){if(l(this,pn).has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),s=i=>{i.pageNumber===t&&(this._eventBus._off("editorsrendered",s),e())};this._eventBus.on("editorsrendered",s),await n}getSignature(t){var e;(e=l(this,cl))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return l(this,cl)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":b(this,Ah,e);break}}onPageChanging({pageNumber:t}){b(this,Sh,t-1)}focusMainContainer(){l(this,Ar).focus()}findParent(t,e){for(const n of l(this,pn).values()){const{x:s,y:i,width:o,height:d}=n.div.getBoundingClientRect();if(t>=s&&t<=s+o&&e>=i&&e<=i+d)return n}return null}disableUserSelect(t=!1){l(this,Hf).classList.toggle("noUserSelect",t)}addShouldRescale(t){l(this,Lc).add(t)}removeShouldRescale(t){l(this,Lc).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*ql.PDF_TO_CSS_UNITS;for(const n of l(this,Lc))n.onScaleChanging();(e=l(this,nl))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:o,focusOffset:d}=n,u=n.toString(),m=C(this,ct,dx).call(this,n).closest(".textLayer"),g=this.getSelectionBoxes(m);if(!g)return;n.empty();const x=C(this,ct,Gw).call(this,m),v=l(this,an)===Bt.NONE,k=()=>{const S=x==null?void 0:x.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:g,anchorNode:s,anchorOffset:i,focusNode:o,focusOffset:d,text:u});v&&this.showAllEditors("highlight",!0,!0),e&&(S==null||S.editComment())};if(v){this.switchToMode(Bt.HIGHLIGHT,k);return}k()}commentSelection(t=""){this.highlightSelection(t,!0)}getAndRemoveDataFromAnnotationStorage(t){if(!l(this,Si))return null;const e=`${bf}${t}`,n=l(this,Si).getRawValue(e);return n&&l(this,Si).remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&l(this,Si)&&!l(this,Si).has(t.id)&&l(this,Si).setValue(t.id,t)}a11yAlert(t,e=null){const n=l(this,qf);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,l(this,al)&&(b(this,al,!1),C(this,ct,Vm).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of l(this,ae))if(e.div.contains(t)){b(this,Uc,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!l(this,Uc))return;const[t,e]=l(this,Uc);b(this,Uc,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){C(this,ct,Kw).call(this),this.setEditingState(!0)}removeEditListeners(){C(this,ct,E3).call(this),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of l(this,_i))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of l(this,_i))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=l(this,Us))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of l(this,ae)){const i=s.serialize(!0);i&&e.push(i)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const i of e.items)for(const o of l(this,_i))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(i){Mt(`paste: "${i.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const u of n){const p=await s.deserialize(u);if(!p)return;i.push(p)}const o=()=>{for(const u of i)C(this,ct,Xw).call(this,u);C(this,ct,Yw).call(this,i)},d=()=>{for(const u of i)u.remove()};this.addCommands({cmd:o,undo:d,mustExec:!0})}catch(i){Mt(`paste: "${i.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,an)!==Bt.NONE&&!this.isEditorHandlingKeyboard&&Ku._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,al)&&(b(this,al,!1),C(this,ct,Vm).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(C(this,ct,_3).call(this),C(this,ct,C3).call(this),C(this,ct,is).call(this,{isEditing:l(this,an)!==Bt.NONE,isEmpty:C(this,ct,Wm).call(this),hasSomethingToUndo:l(this,Ai).hasSomethingToUndo(),hasSomethingToRedo:l(this,Ai).hasSomethingToRedo(),hasSelectedEditor:!1})):(C(this,ct,k3).call(this),C(this,ct,T3).call(this),C(this,ct,is).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!l(this,_i)){b(this,_i,t);for(const e of l(this,_i))C(this,ct,hr).call(this,e.defaultPropertiesToUpdate)}}getId(){return l(this,gy).id}get currentLayer(){return l(this,pn).get(l(this,Sh))}getLayer(t){return l(this,pn).get(t)}get currentPageIndex(){return l(this,Sh)}addLayer(t){l(this,pn).set(t.pageIndex,t),l(this,rl)?t.enable():t.disable()}removeLayer(t){l(this,pn).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,s=!1,i=!1){var o,d,u,p,m,g;if(l(this,an)!==t&&!(l(this,ki)&&(await l(this,ki).promise,!l(this,ki)))){if(b(this,ki,Promise.withResolvers()),(o=l(this,nl))==null||o.commitOrRemove(),l(this,an)===Bt.POPUP&&((d=l(this,Jn))==null||d.hideSidebar()),(u=l(this,Jn))==null||u.destroyPopup(),b(this,an,t),t===Bt.NONE){this.setEditingState(!1),C(this,ct,N3).call(this);for(const x of l(this,Ve).values())x.hideStandaloneCommentButton();(p=this._editorUndoBar)==null||p.hide(),this.toggleComment(null),l(this,ki).resolve();return}for(const x of l(this,Ve).values())x.addStandaloneCommentButton();t===Bt.SIGNATURE&&await((m=l(this,cl))==null?void 0:m.loadSignatures()),this.setEditingState(!0),await C(this,ct,D3).call(this),this.unselectAll();for(const x of l(this,pn).values())x.updateMode(t);if(t===Bt.POPUP){l(this,vh)||b(this,vh,await l(this,Ch).getAnnotationsByType(new Set(l(this,_i).map(k=>k._editorType))));const x=new Set,v=[];for(const k of l(this,Ve).values()){const{annotationElementId:S,hasComment:_,deleted:E}=k;S&&x.add(S),_&&!E&&v.push(k.getData())}for(const k of l(this,vh)){const{id:S,popupRef:_,contentsObj:E}=k;_&&(E!=null&&E.str)&&!x.has(S)&&!l(this,sl).has(S)&&v.push(k)}(g=l(this,Jn))==null||g.showSidebar(v)}if(!e){n&&this.addNewEditorFromKeyboard(),l(this,ki).resolve();return}for(const x of l(this,Ve).values())x.uid===e?(this.setSelected(x),i?x.editComment():s?x.enterInEditMode():x.focus()):x.unselect();l(this,ki).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==l(this,an)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(l(this,_i)){switch(t){case Wt.CREATE:this.currentLayer.addNewEditor(e);return;case Wt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,$f)||b(this,$f,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of l(this,ae))n.updateParams(t,e);else for(const n of l(this,_i))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var i;for(const o of l(this,Ve).values())o.editorType===t&&o.show(e);(((i=l(this,$f))==null?void 0:i.get(Wt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&C(this,ct,hr).call(this,[[Wt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(l(this,Lf)!==t){b(this,Lf,t);for(const e of l(this,pn).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}*getEditors(t){for(const e of l(this,Ve).values())e.pageIndex===t&&(yield e)}getEditor(t){return l(this,Ve).get(t)}addEditor(t){l(this,Ve).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(l(this,Ta)&&clearTimeout(l(this,Ta)),b(this,Ta,setTimeout(()=>{this.focusMainContainer(),b(this,Ta,null)},0))),l(this,Ve).delete(t.id),t.annotationElementId&&((e=l(this,ll))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!l(this,sl).has(t.annotationElementId))&&((n=l(this,Si))==null||n.remove(t.id))}addDeletedAnnotationElement(t){l(this,sl).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return l(this,sl).has(t)}removeDeletedAnnotationElement(t){l(this,sl).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){l(this,Us)!==t&&(b(this,Us,t),t&&C(this,ct,hr).call(this,t.propertiesToUpdate))}updateUI(t){l(this,ct,R3)===t&&C(this,ct,hr).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){C(this,ct,hr).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(l(this,ae).has(t)){l(this,ae).delete(t),t.unselect(),C(this,ct,is).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,ae).add(t),t.select(),C(this,ct,hr).call(this,t.propertiesToUpdate),C(this,ct,is).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.uid}),(e=l(this,nl))==null||e.commitOrRemove();for(const n of l(this,ae))n!==t&&n.unselect();l(this,ae).clear(),l(this,ae).add(t),t.select(),C(this,ct,hr).call(this,t.propertiesToUpdate),C(this,ct,is).call(this,{hasSelectedEditor:!0})}isSelected(t){return l(this,ae).has(t)}get firstSelectedEditor(){return l(this,ae).values().next().value}unselect(t){t.unselect(),l(this,ae).delete(t),C(this,ct,is).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,ae).size!==0}get isEnterHandled(){return l(this,ae).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;l(this,Ai).undo(),C(this,ct,is).call(this,{hasSomethingToUndo:l(this,Ai).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:C(this,ct,Wm).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){l(this,Ai).redo(),C(this,ct,is).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,Ai).hasSomethingToRedo(),isEmpty:C(this,ct,Wm).call(this)})}addCommands(t){l(this,Ai).add(t),C(this,ct,is).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:C(this,ct,Wm).call(this)})}cleanUndoStack(t){l(this,Ai).cleanType(t)}delete(){var i;this.commitOrRemove();const t=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...l(this,ae)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,e.length===1?e[0].editorType:e.length);for(const d of e)d.remove()},s=()=>{for(const o of e)C(this,ct,Xw).call(this,o)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=l(this,Us))==null||t.commitOrRemove()}hasSomethingToControl(){return l(this,Us)||this.hasSelection}selectAll(){for(const t of l(this,ae))t.commit();C(this,ct,Yw).call(this,l(this,Ve).values())}unselectAll(){var t;if(!(l(this,Us)&&(l(this,Us).commitOrRemove(),l(this,an)!==Bt.NONE))&&!((t=l(this,nl))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of l(this,ae))e.unselect();l(this,ae).clear(),C(this,ct,is).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;l(this,ul)[0]+=t,l(this,ul)[1]+=e;const[s,i]=l(this,ul),o=[...l(this,ae)],d=1e3;l(this,Da)&&clearTimeout(l(this,Da)),b(this,Da,setTimeout(()=>{b(this,Da,null),l(this,ul)[0]=l(this,ul)[1]=0,this.addCommands({cmd:()=>{for(const u of o)l(this,Ve).has(u.id)&&(u.translateInPage(s,i),u.translationDone())},undo:()=>{for(const u of o)l(this,Ve).has(u.id)&&(u.translateInPage(-s,-i),u.translationDone())},mustExec:!1})},d));for(const u of o)u.translateInPage(t,e),u.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,Ca,new Map);for(const t of l(this,ae))l(this,Ca).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Ca))return!1;this.disableUserSelect(!1);const t=l(this,Ca);b(this,Ca,null);let e=!1;for(const[{x:s,y:i,pageIndex:o},d]of t)d.newX=s,d.newY=i,d.newPageIndex=o,e||(e=s!==d.savedX||i!==d.savedY||o!==d.savedPageIndex);if(!e)return!1;const n=(s,i,o,d)=>{if(l(this,Ve).has(s.id)){const u=l(this,pn).get(d);u?s._setParentAndPosition(u,i,o):(s.pageIndex=d,s.x=i,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:o,newPageIndex:d}]of t)n(s,i,o,d)},undo:()=>{for(const[s,{savedX:i,savedY:o,savedPageIndex:d}]of t)n(s,i,o,d)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(l(this,Ca))for(const n of l(this,Ca).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||l(this,ae).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return l(this,Us)===t}getActive(){return l(this,Us)}getMode(){return l(this,an)}isEditingMode(){return l(this,an)!==Bt.NONE}get imageManager(){return Ft(this,"imageManager",new Vw)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let p=0,m=e.rangeCount;p<m;p++)if(!t.contains(e.getRangeAt(p).commonAncestorContainer))return null;const{x:n,y:s,width:i,height:o}=t.getBoundingClientRect();let d;switch(t.getAttribute("data-main-rotation")){case"90":d=(p,m,g,x)=>({x:(m-s)/o,y:1-(p+g-n)/i,width:x/o,height:g/i});break;case"180":d=(p,m,g,x)=>({x:1-(p+g-n)/i,y:1-(m+x-s)/o,width:g/i,height:x/o});break;case"270":d=(p,m,g,x)=>({x:1-(m+x-s)/o,y:(p-n)/i,width:x/o,height:g/i});break;default:d=(p,m,g,x)=>({x:(p-n)/i,y:(m-s)/o,width:g/i,height:x/o});break}const u=[];for(let p=0,m=e.rangeCount;p<m;p++){const g=e.getRangeAt(p);if(!g.collapsed)for(const{x,y:v,width:k,height:S}of g.getClientRects())k===0||S===0||u.push(d(x,v,k,S))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:t,id:e}){(l(this,wh)||b(this,wh,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=l(this,wh))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=l(this,wh))==null?void 0:s.get(t.data.id);if(!e)return;const n=l(this,Si).getRawValue(e);n&&(l(this,an)===Bt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var i;const s=(i=l(this,ll))==null?void 0:i.get(t);s&&(s.setCanvas(e,n),l(this,ll).delete(t))}addMissingCanvas(t,e){(l(this,ll)||b(this,ll,new Map)).set(t,e)}};yh=new WeakMap,Us=new WeakMap,vh=new WeakMap,Ve=new WeakMap,pn=new WeakMap,bh=new WeakMap,Si=new WeakMap,wh=new WeakMap,Ai=new WeakMap,Jn=new WeakMap,el=new WeakMap,nl=new WeakMap,Sh=new WeakMap,sl=new WeakMap,Ca=new WeakMap,_i=new WeakMap,Lc=new WeakMap,If=new WeakMap,Ff=new WeakMap,Ah=new WeakMap,jf=new WeakMap,Ta=new WeakMap,il=new WeakMap,_h=new WeakMap,al=new WeakMap,Pa=new WeakMap,gy=new WeakMap,rl=new WeakMap,kh=new WeakMap,Lf=new WeakMap,ol=new WeakMap,Uc=new WeakMap,Eh=new WeakMap,ll=new WeakMap,Uf=new WeakMap,an=new WeakMap,ae=new WeakMap,Sr=new WeakMap,cl=new WeakMap,dl=new WeakMap,$f=new WeakMap,Ch=new WeakMap,zf=new WeakMap,ul=new WeakMap,Da=new WeakMap,Ar=new WeakMap,Hf=new WeakMap,qf=new WeakMap,ki=new WeakMap,ct=new WeakSet,dx=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Gw=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of l(this,pn).values())if(n.hasTextLayer(t))return n;return null},w3=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=C(this,ct,dx).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(l(this,Pa)||b(this,Pa,new hj(this)),l(this,Pa).show(n,s,this.direction==="ltr"))},S3=function(){var i,o,d;const t=document.getSelection();if(!t||t.isCollapsed){l(this,Sr)&&((i=l(this,Pa))==null||i.hide(),b(this,Sr,null),C(this,ct,is).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===l(this,Sr))return;const s=C(this,ct,dx).call(this,t).closest(".textLayer");if(!s){l(this,Sr)&&((o=l(this,Pa))==null||o.hide(),b(this,Sr,null),C(this,ct,is).call(this,{hasSelectedText:!1}));return}if((d=l(this,Pa))==null||d.hide(),b(this,Sr,e),C(this,ct,is).call(this,{hasSelectedText:!0}),!(l(this,an)!==Bt.HIGHLIGHT&&l(this,an)!==Bt.NONE)&&(l(this,an)===Bt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,al,this.isShiftKeyDown),!this.isShiftKeyDown)){const u=l(this,an)===Bt.HIGHLIGHT?C(this,ct,Gw).call(this,s):null;if(u==null||u.toggleDrawing(),l(this,kh)){const p=new AbortController,m=this.combinedSignal(p),g=x=>{x.type==="pointerup"&&x.button!==0||(p.abort(),u==null||u.toggleDrawing(!0),x.type==="pointerup"&&C(this,ct,Vm).call(this,"main_toolbar"))};window.addEventListener("pointerup",g,{signal:m}),window.addEventListener("blur",g,{signal:m})}else u==null||u.toggleDrawing(!0),C(this,ct,Vm).call(this,"main_toolbar")}},Vm=function(t=""){l(this,an)===Bt.HIGHLIGHT?this.highlightSelection(t):l(this,If)&&C(this,ct,w3).call(this)},A3=function(){document.addEventListener("selectionchange",C(this,ct,S3).bind(this),{signal:this._signal})},_3=function(){if(l(this,il))return;b(this,il,new AbortController);const t=this.combinedSignal(l(this,il));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},k3=function(){var t;(t=l(this,il))==null||t.abort(),b(this,il,null)},Kw=function(){if(l(this,ol))return;b(this,ol,new AbortController);const t=this.combinedSignal(l(this,ol));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},E3=function(){var t;(t=l(this,ol))==null||t.abort(),b(this,ol,null)},C3=function(){if(l(this,el))return;b(this,el,new AbortController);const t=this.combinedSignal(l(this,el));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},T3=function(){var t;(t=l(this,el))==null||t.abort(),b(this,el,null)},P3=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},is=function(t){Object.entries(t).some(([n,s])=>l(this,zf)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,zf),t)}),l(this,an)===Bt.HIGHLIGHT&&t.hasSelectedEditor===!1&&C(this,ct,hr).call(this,[[Wt.HIGHLIGHT_FREE,!0]]))},hr=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},D3=async function(){if(!l(this,rl)){b(this,rl,!0);const t=[];for(const e of l(this,pn).values())t.push(e.enable());await Promise.all(t);for(const e of l(this,Ve).values())e.enable()}},N3=function(){if(this.unselectAll(),l(this,rl)){b(this,rl,!1);for(const t of l(this,pn).values())t.disable();for(const t of l(this,Ve).values())t.disable()}},Xw=function(t){const e=l(this,pn).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},R3=function(){let t=null;for(t of l(this,ae));return t},Wm=function(){if(l(this,Ve).size===0)return!0;if(l(this,Ve).size===1)for(const t of l(this,Ve).values())return t.isEmpty();return!1},Yw=function(t){for(const e of l(this,ae))e.unselect();l(this,ae).clear();for(const e of t)e.isEmpty()||(l(this,ae).add(e),e.select());C(this,ct,is).call(this,{hasSelectedEditor:this.hasSelection})},nt(Ku,"TRANSLATE_SMALL",1),nt(Ku,"TRANSLATE_BIG",10);let tu=Ku;var An,Na,Yi,Th,Ra,$s,Ph,Ma,Es,_r,$c,Oa,hl,ca,Gm,ux;const as=class as{constructor(t){A(this,ca);A(this,An,null);A(this,Na,!1);A(this,Yi,null);A(this,Th,null);A(this,Ra,null);A(this,$s,null);A(this,Ph,!1);A(this,Ma,null);A(this,Es,null);A(this,_r,null);A(this,$c,null);A(this,Oa,!1);b(this,Es,t),b(this,Oa,t._uiManager.useNewAltTextFlow),l(as,hl)||b(as,hl,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){as._l10n??(as._l10n=t)}async render(){const t=b(this,Yi,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=b(this,Th,document.createElement("span"));t.append(e),l(this,Oa)?(t.classList.add("new"),t.setAttribute("data-l10n-id",l(as,hl).missing),e.setAttribute("data-l10n-id",l(as,hl)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=l(this,Es)._uiManager._signal;t.addEventListener("contextmenu",Bi,{signal:n}),t.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const s=i=>{i.preventDefault(),l(this,Es)._uiManager.editAltText(l(this,Es)),l(this,Oa)&&l(this,Es)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,ca,Gm)}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",i=>{i.target===t&&i.key==="Enter"&&(b(this,Ph,!0),s(i))},{signal:n}),await C(this,ca,ux).call(this),t}finish(){l(this,Yi)&&(l(this,Yi).focus({focusVisible:l(this,Ph)}),b(this,Ph,!1))}isEmpty(){return l(this,Oa)?l(this,An)===null:!l(this,An)&&!l(this,Na)}hasData(){return l(this,Oa)?l(this,An)!==null||!!l(this,_r):this.isEmpty()}get guessedText(){return l(this,_r)}async setGuessedText(t){l(this,An)===null&&(b(this,_r,t),b(this,$c,await as._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),C(this,ca,ux).call(this))}toggleAltTextBadge(t=!1){var e;if(!l(this,Oa)||l(this,An)){(e=l(this,Ma))==null||e.remove(),b(this,Ma,null);return}if(!l(this,Ma)){const n=b(this,Ma,document.createElement("div"));n.className="noAltTextBadge",l(this,Es).div.append(n)}l(this,Ma).classList.toggle("hidden",!t)}serialize(t){let e=l(this,An);return!t&&l(this,_r)===e&&(e=l(this,$c)),{altText:e,decorative:l(this,Na),guessedText:l(this,_r),textWithDisclaimer:l(this,$c)}}get data(){return{altText:l(this,An),decorative:l(this,Na)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:s,cancel:i=!1}){n&&(b(this,_r,n),b(this,$c,s)),!(l(this,An)===t&&l(this,Na)===e)&&(i||(b(this,An,t),b(this,Na,e)),C(this,ca,ux).call(this))}toggle(t=!1){l(this,Yi)&&(!t&&l(this,$s)&&(clearTimeout(l(this,$s)),b(this,$s,null)),l(this,Yi).disabled=!t)}shown(){l(this,Es)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,ca,Gm)}})}destroy(){var t,e;(t=l(this,Yi))==null||t.remove(),b(this,Yi,null),b(this,Th,null),b(this,Ra,null),(e=l(this,Ma))==null||e.remove(),b(this,Ma,null)}};An=new WeakMap,Na=new WeakMap,Yi=new WeakMap,Th=new WeakMap,Ra=new WeakMap,$s=new WeakMap,Ph=new WeakMap,Ma=new WeakMap,Es=new WeakMap,_r=new WeakMap,$c=new WeakMap,Oa=new WeakMap,hl=new WeakMap,ca=new WeakSet,Gm=function(){return l(this,An)&&"added"||l(this,An)===null&&this.guessedText&&"review"||"missing"},ux=async function(){var s,i,o;const t=l(this,Yi);if(!t)return;if(l(this,Oa)){if(t.classList.toggle("done",!!l(this,An)),t.setAttribute("data-l10n-id",l(as,hl)[l(this,ca,Gm)]),(s=l(this,Th))==null||s.setAttribute("data-l10n-id",l(as,hl)[`${l(this,ca,Gm)}-label`]),!l(this,An)){(i=l(this,Ra))==null||i.remove();return}}else{if(!l(this,An)&&!l(this,Na)){t.classList.remove("done"),(o=l(this,Ra))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=l(this,Ra);if(!e){b(this,Ra,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${l(this,Es).id}`;const d=100,u=l(this,Es)._uiManager._signal;u.addEventListener("abort",()=>{clearTimeout(l(this,$s)),b(this,$s,null)},{once:!0}),t.addEventListener("mouseenter",()=>{b(this,$s,setTimeout(()=>{b(this,$s,null),l(this,Ra).classList.add("show"),l(this,Es)._reportTelemetry({action:"alt_text_tooltip"})},d))},{signal:u}),t.addEventListener("mouseleave",()=>{var p;l(this,$s)&&(clearTimeout(l(this,$s)),b(this,$s,null)),(p=l(this,Ra))==null||p.classList.remove("show")},{signal:u})}l(this,Na)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=l(this,An)),e.parentNode||t.append(e);const n=l(this,Es).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},A(as,hl,null),nt(as,"_l10n",null);let ey=as;var On,Ei,zc,Se,Vf,Hc,Qi,qc,Vc,Wc,Wf,Qw;class Y2{constructor(t){A(this,Wf);A(this,On,null);A(this,Ei,null);A(this,zc,!1);A(this,Se,null);A(this,Vf,null);A(this,Hc,null);A(this,Qi,null);A(this,qc,null);A(this,Vc,!1);A(this,Wc,null);b(this,Se,t)}renderForToolbar(){const t=b(this,Ei,document.createElement("button"));return t.className="comment",C(this,Wf,Qw).call(this,t,!1)}renderForStandalone(){const t=b(this,On,document.createElement("button"));t.className="annotationCommentButton";const e=l(this,Se).commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(l(this,Se)._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const s=l(this,Se).commentButtonColor;s&&(n.backgroundColor=s)}return C(this,Wf,Qw).call(this,t,!0)}focusButton(){setTimeout(()=>{var t;(t=l(this,On)??l(this,Ei))==null||t.focus()},0)}onUpdatedColor(){if(!l(this,On))return;const t=l(this,Se).commentButtonColor;t&&(l(this,On).style.backgroundColor=t),l(this,Se)._uiManager.updatePopupColor(l(this,Se))}get commentButtonWidth(){var t;return(((t=l(this,On))==null?void 0:t.getBoundingClientRect().width)??0)/l(this,Se).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(l(this,Wc))return l(this,Wc);if(!l(this,On))return null;const{x:t,y:e,height:n}=l(this,On).getBoundingClientRect(),{x:s,y:i,width:o,height:d}=l(this,Se).parent.boundingClientRect;return[(t-s)/o,(e+n-i)/d]}set commentPopupPositionInLayer(t){b(this,Wc,t)}hasDefaultPopupPosition(){return l(this,Wc)===null}removeStandaloneCommentButton(){var t;(t=l(this,On))==null||t.remove(),b(this,On,null)}removeToolbarCommentButton(){var t;(t=l(this,Ei))==null||t.remove(),b(this,Ei,null)}setCommentButtonStates({selected:t,hasPopup:e}){l(this,On)&&(l(this,On).classList.toggle("selected",t),l(this,On).ariaExpanded=e)}edit(t){const e=this.commentPopupPositionInLayer;let n,s;if(e)[n,s]=e;else{[n,s]=l(this,Se).commentButtonPosition;const{width:m,height:g,x,y:v}=l(this,Se);n=x+n*m,s=v+s*g}const i=l(this,Se).parent.boundingClientRect,{x:o,y:d,width:u,height:p}=i;l(this,Se)._uiManager.editComment(l(this,Se),o+n*u,d+s*p,{...t,parentDimensions:i})}finish(){l(this,Ei)&&(l(this,Ei).focus({focusVisible:l(this,zc)}),b(this,zc,!1))}isDeleted(){return l(this,Vc)||l(this,Qi)===""}isEmpty(){return l(this,Qi)===null}hasBeenEdited(){return this.isDeleted()||l(this,Qi)!==l(this,Vf)}serialize(){return this.data}get data(){return{text:l(this,Qi),richText:l(this,Hc),date:l(this,qc),deleted:this.isDeleted()}}set data(t){if(t!==l(this,Qi)&&b(this,Hc,null),t===null){b(this,Qi,""),b(this,Vc,!0);return}b(this,Qi,t),b(this,qc,new Date),b(this,Vc,!1)}setInitialText(t,e=null){b(this,Vf,t),this.data=t,b(this,qc,null),b(this,Hc,e)}shown(){}destroy(){var t,e;(t=l(this,Ei))==null||t.remove(),b(this,Ei,null),(e=l(this,On))==null||e.remove(),b(this,On,null),b(this,Qi,""),b(this,Hc,null),b(this,qc,null),b(this,Se,null),b(this,zc,!1),b(this,Vc,!1)}}On=new WeakMap,Ei=new WeakMap,zc=new WeakMap,Se=new WeakMap,Vf=new WeakMap,Hc=new WeakMap,Qi=new WeakMap,qc=new WeakMap,Vc=new WeakMap,Wc=new WeakMap,Wf=new WeakSet,Qw=function(t,e){if(!l(this,Se)._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[l(this,Se)._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=l(this,Se)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",Bi,{signal:n}),e&&(t.addEventListener("focusin",i=>{l(this,Se)._focusEventsAllowed=!1,Ye(i)},{capture:!0,signal:n}),t.addEventListener("focusout",i=>{l(this,Se)._focusEventsAllowed=!0,Ye(i)},{capture:!0,signal:n})),t.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:n});const s=i=>{i.preventDefault(),t===l(this,Ei)?this.edit():l(this,Se).toggleComment(!0)};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",i=>{i.target===t&&i.key==="Enter"&&(b(this,zc,!0),s(i))},{signal:n}),t.addEventListener("pointerenter",()=>{l(this,Se).toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{l(this,Se).toggleComment(!1,!1)},{signal:n}),t};var Dh,Gc,Gf,Kf,Xf,Yf,Qf,kr,Kc,Er,Xc,Cr,Vl,M3,O3,B3;const $A=class $A{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:i=null,onPinchEnd:o=null,signal:d}){A(this,Vl);A(this,Dh);A(this,Gc,!1);A(this,Gf,null);A(this,Kf);A(this,Xf);A(this,Yf);A(this,Qf);A(this,kr,null);A(this,Kc);A(this,Er,null);A(this,Xc);A(this,Cr,null);b(this,Dh,t),b(this,Gf,n),b(this,Kf,e),b(this,Xf,s),b(this,Yf,i),b(this,Qf,o),b(this,Xc,new AbortController),b(this,Kc,AbortSignal.any([d,l(this,Xc).signal])),t.addEventListener("touchstart",C(this,Vl,M3).bind(this),{passive:!1,signal:l(this,Kc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Qa.pixelRatio}destroy(){var t,e;(t=l(this,Xc))==null||t.abort(),b(this,Xc,null),(e=l(this,kr))==null||e.abort(),b(this,kr,null)}};Dh=new WeakMap,Gc=new WeakMap,Gf=new WeakMap,Kf=new WeakMap,Xf=new WeakMap,Yf=new WeakMap,Qf=new WeakMap,kr=new WeakMap,Kc=new WeakMap,Er=new WeakMap,Xc=new WeakMap,Cr=new WeakMap,Vl=new WeakSet,M3=function(t){var s,i,o;if((s=l(this,Kf))!=null&&s.call(this))return;if(t.touches.length===1){if(l(this,kr))return;const d=b(this,kr,new AbortController),u=AbortSignal.any([l(this,Kc),d.signal]),p=l(this,Dh),m={capture:!0,signal:u,passive:!1},g=x=>{var v;x.pointerType==="touch"&&((v=l(this,kr))==null||v.abort(),b(this,kr,null))};p.addEventListener("pointerdown",x=>{x.pointerType==="touch"&&(Ye(x),g(x))},m),p.addEventListener("pointerup",g,m),p.addEventListener("pointercancel",g,m);return}if(!l(this,Cr)){b(this,Cr,new AbortController);const d=AbortSignal.any([l(this,Kc),l(this,Cr).signal]),u=l(this,Dh),p={signal:d,capture:!1,passive:!1};u.addEventListener("touchmove",C(this,Vl,O3).bind(this),p);const m=C(this,Vl,B3).bind(this);u.addEventListener("touchend",m,p),u.addEventListener("touchcancel",m,p),p.capture=!0,u.addEventListener("pointerdown",Ye,p),u.addEventListener("pointermove",Ye,p),u.addEventListener("pointercancel",Ye,p),u.addEventListener("pointerup",Ye,p),(i=l(this,Xf))==null||i.call(this)}if(Ye(t),t.touches.length!==2||(o=l(this,Gf))!=null&&o.call(this)){b(this,Er,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),b(this,Er,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},O3=function(t){var R;if(!l(this,Er)||t.touches.length!==2)return;Ye(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:s,screenY:i}=e,{screenX:o,screenY:d}=n,u=l(this,Er),{touch0X:p,touch0Y:m,touch1X:g,touch1Y:x}=u,v=g-p,k=x-m,S=o-s,_=d-i,E=Math.hypot(S,_)||1,N=Math.hypot(v,k)||1;if(!l(this,Gc)&&Math.abs(N-E)<=$A.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=s,u.touch0Y=i,u.touch1X=o,u.touch1Y=d,!l(this,Gc)){b(this,Gc,!0);return}const P=[(s+o)/2,(i+d)/2];(R=l(this,Yf))==null||R.call(this,P,N,E)},B3=function(t){var e;t.touches.length>=2||(l(this,Cr)&&(l(this,Cr).abort(),b(this,Cr,null),(e=l(this,Qf))==null||e.call(this)),l(this,Er)&&(Ye(t),b(this,Er,null),b(this,Gc,!1)))};let ny=$A;var Yc,Ji,Ne,fe,Tr,Nh,pl,Jf,Bn,Qc,Pr,Ci,ml,Zf,Jc,zs,tg,Zc,Dr,Ba,Rh,Mh,Ti,td,eg,xy,Ct,Jw,ng,Zw,hx,I3,F3,tS,px,eS,j3,L3,U3,nS,$3,sS,z3,H3,q3,iS,Km;const Ot=class Ot{constructor(t){A(this,Ct);A(this,Yc,null);A(this,Ji,null);A(this,Ne,null);A(this,fe,null);A(this,Tr,null);A(this,Nh,!1);A(this,pl,null);A(this,Jf,"");A(this,Bn,null);A(this,Qc,null);A(this,Pr,null);A(this,Ci,null);A(this,ml,null);A(this,Zf,"");A(this,Jc,!1);A(this,zs,null);A(this,tg,!1);A(this,Zc,!1);A(this,Dr,!1);A(this,Ba,null);A(this,Rh,0);A(this,Mh,0);A(this,Ti,null);A(this,td,null);nt(this,"isSelected",!1);nt(this,"_isCopy",!1);nt(this,"_editToolbar",null);nt(this,"_initialOptions",Object.create(null));nt(this,"_initialData",null);nt(this,"_isVisible",!0);nt(this,"_uiManager",null);nt(this,"_focusEventsAllowed",!0);A(this,eg,!1);A(this,xy,Ot._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[i,o];const[d,u]=this.parentDimensions;this.x=t.x/d,this.y=t.y/u,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Ot.prototype._resizeWithKeyboard,e=tu.TRANSLATE_SMALL,n=tu.TRANSLATE_BIG;return Ft(this,"_resizerKeyboardManager",new k0([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],Ot.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ft(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new fj({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Ot._l10n??(Ot._l10n=t),Ot._l10nResizer||(Ot._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ot._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Ot._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ye("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,eg)}set _isDraggable(t){var e;b(this,eg,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,xy)}setParent(t){var e;t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(C(this,Ct,Km).call(this),(e=l(this,Ci))==null||e.remove(),b(this,Ci,null)),this.parent=t}focusin(t){this._focusEventsAllowed&&(l(this,Jc)?b(this,Jc,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){const[i,o]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/i,this.y=(e+s)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,s]=this.parentDimensions;this.setAt(t*n,e*s,this.width*n,this.height*s),this._onTranslated()}translate(t,e){C(this,Ct,Jw).call(this,this.parentDimensions,t,e)}translateInPage(t,e){l(this,zs)||b(this,zs,[this.x,this.y,this.width,this.height]),C(this,Ct,Jw).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){l(this,zs)||b(this,zs,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[s,i]}=this;if(this.x+=t/s,this.y+=e/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:x}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,x)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:d}=this;const[u,p]=this.getBaseTranslation();o+=u,d+=p;const{style:m}=n;m.left=`${(100*o).toFixed(2)}%`,m.top=`${(100*d).toFixed(2)}%`,this._onTranslating(o,d),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!l(this,zs)&&(l(this,zs)[0]!==this.x||l(this,zs)[1]!==this.y)}get _hasBeenResized(){return!!l(this,zs)&&(l(this,zs)[2]!==this.width||l(this,zs)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=Ot,s=n/t,i=n/e;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,s]}=this;let{x:i,y:o,width:d,height:u}=this;if(d*=n,u*=s,i*=n,o*=s,this._mustFixPosition)switch(t){case 0:i=hs(i,0,n-d),o=hs(o,0,s-u);break;case 90:i=hs(i,0,n-u),o=hs(o,d,s);break;case 180:i=hs(i,d,n),o=hs(o,u,s);break;case 270:i=hs(i,u,n),o=hs(o,0,s-d);break}this.x=i/=n,this.y=o/=s;const[p,m]=this.getBaseTranslation();i+=p,o+=m,e.left=`${(100*i).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return C(n=Ot,ng,Zw).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return C(n=Ot,ng,Zw).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=l(this,Ne))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||l(this,Zc))return this._editToolbar;this._editToolbar=new Hw(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var t;(t=this._editToolbar)==null||t.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var t;(t=this._editToolbar)==null||t.removeButton("comment")}removeEditToolbar(){var t,e;(t=this._editToolbar)==null||t.remove(),this._editToolbar=null,(e=l(this,Ne))==null||e.destroy()}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return l(this,Ne)||(ey.initialize(Ot._l10n),b(this,Ne,new ey(this)),l(this,Yc)&&(l(this,Ne).data=l(this,Yc),b(this,Yc,null))),l(this,Ne)}get altTextData(){var t;return(t=l(this,Ne))==null?void 0:t.data}set altTextData(t){l(this,Ne)&&(l(this,Ne).data=t)}get guessedAltText(){var t;return(t=l(this,Ne))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=l(this,Ne))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=l(this,Ne))==null?void 0:e.serialize(t)}hasAltText(){return!!l(this,Ne)&&!l(this,Ne).isEmpty()}hasAltTextData(){var t;return((t=l(this,Ne))==null?void 0:t.hasData())??!1}focusCommentButton(){var t;(t=l(this,fe))==null||t.focusButton()}addCommentButton(){return this.canAddComment?l(this,fe)||b(this,fe,new Y2(this)):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(l(this,Tr)){this._uiManager.isEditingMode()&&l(this,Tr).classList.remove("hidden");return}this.hasComment&&(b(this,Tr,l(this,fe).renderForStandalone()),this.div.append(l(this,Tr)))}}removeStandaloneCommentButton(){l(this,fe).removeStandaloneCommentButton(),b(this,Tr,null)}hideStandaloneCommentButton(){var t;(t=l(this,Tr))==null||t.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:n,deleted:s}}=l(this,fe);return{text:e,richText:t,date:n,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){l(this,fe)||b(this,fe,new Y2(this)),l(this,fe).data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(l(this,fe)||b(this,fe,new Y2(this)),l(this,fe).setInitialText(t,n),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){var t;return(t=l(this,fe))==null?void 0:t.hasBeenEdited()}get hasDeletedComment(){var t;return(t=l(this,fe))==null?void 0:t.isDeleted()}get hasComment(){return!!l(this,fe)&&!l(this,fe).isEmpty()&&!l(this,fe).isDeleted()}async editComment(t){l(this,fe)||b(this,fe,new Y2(this)),l(this,fe).edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){l(this,fe).setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,s]=t.rect,[i]=this.pageDimensions,[o]=this.pageTranslation,d=o+i+1,u=s-100,p=d+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[d,u,p,s]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){l(this,fe).data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=l(this,Nh)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),C(this,Ct,sS).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),v3(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,td)||b(this,td,new ny({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:C(this,Ct,j3).bind(this),onPinching:C(this,Ct,L3).bind(this),onPinchEnd:C(this,Ct,U3).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=zn.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(b(this,Jc,!0),this._isDraggable){C(this,Ct,$3).call(this,t);return}C(this,Ct,nS).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,Ba)&&clearTimeout(l(this,Ba)),b(this,Ba,setTimeout(()=>{var t;b(this,Ba,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const s=this.parentScale,[i,o]=this.pageDimensions,[d,u]=this.pageTranslation,p=t/s,m=e/s,g=this.x*i,x=this.y*o,v=this.width*i,k=this.height*o;switch(n){case 0:return[g+p+d,o-x-m-k+u,g+p+v+d,o-x-m+u];case 90:return[g+m+d,o-x+p+u,g+m+k+d,o-x+p+v+u];case 180:return[g-p-v+d,o-x+m+u,g-p+d,o-x+m+k+u];case 270:return[g-m-k+d,o-x-p-v+u,g-m+d,o-x-p+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,s,i,o]=t,d=i-n,u=o-s;switch(this.rotation){case 0:return[n,e-o,d,u];case 90:return[n,e-s,u,d];case 180:return[i,e-s,d,u];case 270:return[i,e-o,u,d];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Ot._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var t;(t=l(this,fe))==null||t.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:s,deleted:i,richText:o},uid:d,pageIndex:u,creationDate:p,modificationDate:m}=this;return{id:d,pageIndex:u,rect:this.getPDFRect(),richText:o,contentsObj:{str:t},creationDate:p,modificationDate:n||m,popupRef:!i,color:e,opacity:s}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),b(this,Zc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),b(this,Zc,!1),!0):!1}isInEditMode(){return l(this,Zc)}shouldGetKeyboardEvents(){return l(this,Dr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return e<o&&s>0&&t<i&&n>0}rebuild(){C(this,Ct,sS).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(t,e,n){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});s.rotation=t.rotation,b(s,Yc,t.accessibilityData),s._isCopy=t.isCopy||!1;const[i,o]=s.pageDimensions,[d,u,p,m]=s.getRectInCurrentCoords(t.rect,o);return s.x=d/i,s.y=u/o,s.width=p/i,s.height=m/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e,n;if((t=l(this,ml))==null||t.abort(),b(this,ml,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),l(this,Ba)&&(clearTimeout(l(this,Ba)),b(this,Ba,null)),C(this,Ct,Km).call(this),this.removeEditToolbar(),l(this,Ti)){for(const s of l(this,Ti).values())clearTimeout(s);b(this,Ti,null)}this.parent=null,(e=l(this,td))==null||e.destroy(),b(this,td,null),(n=l(this,Ci))==null||n.remove(),b(this,Ci,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(C(this,Ct,I3).call(this),l(this,Bn).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,s,i,o]=this.getPDFRect();return[Ot._round(n+(i-n)*t),Ot._round(s+(o-s)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return l(this,fe).commentPopupPositionInLayer}set commentPopupPosition(t){l(this,fe).commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return l(this,fe).hasDefaultPopupPosition()}get commentButtonWidth(){return l(this,fe).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){var e;(e=l(this,fe))==null||e.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),b(this,Pr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=l(this,Bn).children;if(!l(this,Ji)){b(this,Ji,Array.from(e));const o=C(this,Ct,z3).bind(this),d=C(this,Ct,H3).bind(this),u=this._uiManager._signal;for(const p of l(this,Ji)){const m=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",o,{signal:u}),p.addEventListener("blur",d,{signal:u}),p.addEventListener("focus",C(this,Ct,q3).bind(this,m),{signal:u}),p.setAttribute("data-l10n-id",Ot._l10nResizer[m])}}const n=l(this,Ji)[0];let s=0;for(const o of e){if(o===n)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(l(this,Ji).length/4);if(i!==s){if(i<s)for(let d=0;d<s-i;d++)l(this,Bn).append(l(this,Bn).firstChild);else if(i>s)for(let d=0;d<i-s;d++)l(this,Bn).firstChild.before(l(this,Bn).lastChild);let o=0;for(const d of e){const p=l(this,Ji)[o++].getAttribute("data-resizer-name");d.setAttribute("data-l10n-id",Ot._l10nResizer[p])}}C(this,Ct,iS).call(this,0),b(this,Dr,!0),l(this,Bn).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){l(this,Dr)&&C(this,Ct,eS).call(this,l(this,Zf),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){C(this,Ct,Km).call(this),this.div.focus()}select(){var t,e,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,i;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(e=this._editToolbar)==null||e.show(),(n=l(this,Ne))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var t;return(t=this.div)==null?void 0:t.focus({preventScroll:!0})},0)}unselect(){var t,e,n,s,i;this.isSelected&&(this.isSelected=!1,(t=l(this,Bn))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(i=l(this,Ne))==null||i.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return l(this,tg)}set isEditing(t){b(this,tg,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){l(this,Ti)||b(this,Ti,new Map);const{action:n}=t;let s=l(this,Ti).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),l(this,Ti).delete(n),l(this,Ti).size===0&&b(this,Ti,null)},Ot._telemetryTimeout),l(this,Ti).set(n,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),b(this,Nh,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,Nh,!0)}updateFakeAnnotationElement(t){if(!l(this,Ci)&&!this.deleted){b(this,Ci,t.addFakeAnnotation(this));return}if(this.deleted){l(this,Ci).remove(),b(this,Ci,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&l(this,Ci).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Yc=new WeakMap,Ji=new WeakMap,Ne=new WeakMap,fe=new WeakMap,Tr=new WeakMap,Nh=new WeakMap,pl=new WeakMap,Jf=new WeakMap,Bn=new WeakMap,Qc=new WeakMap,Pr=new WeakMap,Ci=new WeakMap,ml=new WeakMap,Zf=new WeakMap,Jc=new WeakMap,zs=new WeakMap,tg=new WeakMap,Zc=new WeakMap,Dr=new WeakMap,Ba=new WeakMap,Rh=new WeakMap,Mh=new WeakMap,Ti=new WeakMap,td=new WeakMap,eg=new WeakMap,xy=new WeakMap,Ct=new WeakSet,Jw=function([t,e],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},ng=new WeakSet,Zw=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},hx=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},I3=function(){if(l(this,Bn))return;b(this,Bn,document.createElement("div")),l(this,Bn).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const s=document.createElement("div");l(this,Bn).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",C(this,Ct,F3).bind(this,n),{signal:e}),s.addEventListener("contextmenu",Bi,{signal:e}),s.tabIndex=-1}this.div.prepend(l(this,Bn))},F3=function(t,e){var m;e.preventDefault();const{isMac:n}=zn.platform;if(e.button!==0||e.ctrlKey&&n)return;(m=l(this,Ne))==null||m.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,b(this,Qc,[e.screenX,e.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",C(this,Ct,eS).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Ye,{passive:!1,signal:o}),window.addEventListener("contextmenu",Bi,{signal:o}),b(this,Pr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const d=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{var g;i.abort(),this.parent.togglePointerEvents(!0),(g=l(this,Ne))==null||g.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=d,this.div.style.cursor=u,C(this,Ct,px).call(this)};window.addEventListener("pointerup",p,{signal:o}),window.addEventListener("blur",p,{signal:o})},tS=function(t,e,n,s){this.width=n,this.height=s,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()},px=function(){if(!l(this,Pr))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:s}=l(this,Pr);b(this,Pr,null);const i=this.x,o=this.y,d=this.width,u=this.height;i===t&&o===e&&d===n&&u===s||this.addCommands({cmd:C(this,Ct,tS).bind(this,i,o,d,u),undo:C(this,Ct,tS).bind(this,t,e,n,s),mustExec:!0})},eS=function(t,e){const[n,s]=this.parentDimensions,i=this.x,o=this.y,d=this.width,u=this.height,p=Ot.MIN_SIZE/n,m=Ot.MIN_SIZE/s,g=C(this,Ct,hx).call(this,this.rotation),x=(ot,it)=>[g[0]*ot+g[2]*it,g[1]*ot+g[3]*it],v=C(this,Ct,hx).call(this,360-this.rotation),k=(ot,it)=>[v[0]*ot+v[2]*it,v[1]*ot+v[3]*it];let S,_,E=!1,N=!1;switch(t){case"topLeft":E=!0,S=(ot,it)=>[0,0],_=(ot,it)=>[ot,it];break;case"topMiddle":S=(ot,it)=>[ot/2,0],_=(ot,it)=>[ot/2,it];break;case"topRight":E=!0,S=(ot,it)=>[ot,0],_=(ot,it)=>[0,it];break;case"middleRight":N=!0,S=(ot,it)=>[ot,it/2],_=(ot,it)=>[0,it/2];break;case"bottomRight":E=!0,S=(ot,it)=>[ot,it],_=(ot,it)=>[0,0];break;case"bottomMiddle":S=(ot,it)=>[ot/2,it],_=(ot,it)=>[ot/2,0];break;case"bottomLeft":E=!0,S=(ot,it)=>[0,it],_=(ot,it)=>[ot,0];break;case"middleLeft":N=!0,S=(ot,it)=>[0,it/2],_=(ot,it)=>[ot,it/2];break}const P=S(d,u),R=_(d,u);let M=x(...R);const O=Ot._round(i+M[0]),I=Ot._round(o+M[1]);let H=1,K=1,W,Y;if(e.fromKeyboard)({deltaX:W,deltaY:Y}=e);else{const{screenX:ot,screenY:it}=e,[U,Q]=l(this,Qc);[W,Y]=this.screenToPageTranslation(ot-U,it-Q),l(this,Qc)[0]=ot,l(this,Qc)[1]=it}if([W,Y]=k(W/n,Y/s),E){const ot=Math.hypot(d,u);H=K=Math.max(Math.min(Math.hypot(R[0]-P[0]-W,R[1]-P[1]-Y)/ot,1/d,1/u),p/d,m/u)}else N?H=hs(Math.abs(R[0]-P[0]-W),p,1)/d:K=hs(Math.abs(R[1]-P[1]-Y),m,1)/u;const q=Ot._round(d*H),tt=Ot._round(u*K);M=x(..._(q,tt));const et=O-M[0],lt=I-M[1];l(this,zs)||b(this,zs,[this.x,this.y,this.width,this.height]),this.width=q,this.height=tt,this.x=et,this.y=lt,this.setDims(),this.fixAndSetPosition(),this._onResizing()},j3=function(){var t;b(this,Pr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=l(this,Ne))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},L3=function(t,e,n){let i=.7*(n/e)+1-.7;if(i===1)return;const o=C(this,Ct,hx).call(this,this.rotation),d=(O,I)=>[o[0]*O+o[2]*I,o[1]*O+o[3]*I],[u,p]=this.parentDimensions,m=this.x,g=this.y,x=this.width,v=this.height,k=Ot.MIN_SIZE/u,S=Ot.MIN_SIZE/p;i=Math.max(Math.min(i,1/x,1/v),k/x,S/v);const _=Ot._round(x*i),E=Ot._round(v*i);if(_===x&&E===v)return;l(this,zs)||b(this,zs,[m,g,x,v]);const N=d(x/2,v/2),P=Ot._round(m+N[0]),R=Ot._round(g+N[1]),M=d(_/2,E/2);this.x=P-M[0],this.y=R-M[1],this.width=_,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()},U3=function(){var t;(t=l(this,Ne))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),C(this,Ct,px).call(this)},nS=function(t){const{isMac:e}=zn.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},$3=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,i=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:i},d=p=>{s.abort(),b(this,pl,null),b(this,Jc,!1),this._uiManager.endDragSession()||C(this,Ct,nS).call(this,p),n&&this._onStopDragging()};e&&(b(this,Rh,t.clientX),b(this,Mh,t.clientY),b(this,pl,t.pointerId),b(this,Jf,t.pointerType),window.addEventListener("pointermove",p=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:m,clientY:g,pointerId:x}=p;if(x!==l(this,pl)){Ye(p);return}const[v,k]=this.screenToPageTranslation(m-l(this,Rh),g-l(this,Mh));b(this,Rh,m),b(this,Mh,g),this._uiManager.dragSelectedEditors(v,k)},o),window.addEventListener("touchmove",Ye,o),window.addEventListener("pointerdown",p=>{p.pointerType===l(this,Jf)&&(l(this,td)||p.isPrimary)&&d(p),Ye(p)},o));const u=p=>{if(!l(this,pl)||l(this,pl)===p.pointerId){d(p);return}Ye(p)};window.addEventListener("pointerup",u,{signal:i}),window.addEventListener("blur",u,{signal:i})},sS=function(){if(l(this,ml)||!this.div)return;b(this,ml,new AbortController);const t=this._uiManager.combinedSignal(l(this,ml));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},z3=function(t){Ot._resizerKeyboardManager.exec(this,t)},H3=function(t){var e;l(this,Dr)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==l(this,Bn)&&C(this,Ct,Km).call(this)},q3=function(t){b(this,Zf,l(this,Dr)?t:"")},iS=function(t){if(l(this,Ji))for(const e of l(this,Ji))e.tabIndex=t},Km=function(){b(this,Dr,!1),C(this,Ct,iS).call(this,-1),C(this,Ct,px).call(this)},A(Ot,ng),nt(Ot,"_l10n",null),nt(Ot,"_l10nResizer",null),nt(Ot,"_borderLineWidth",-1),nt(Ot,"_colorManager",new Ww),nt(Ot,"_zIndex",1),nt(Ot,"_telemetryTimeout",1e3);let Ae=Ot;class fj extends Ae{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ZE=3285377520,xi=4294901760,Sa=65535;class V3{constructor(t){this.h1=t?t&4294967295:ZE,this.h2=t?t&4294967295:ZE}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let S=0,_=t.length;S<_;S++){const E=t.charCodeAt(S);E<=255?e[n++]=E:(e[n++]=E>>>8,e[n++]=E&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,i=n-s*4,o=new Uint32Array(e.buffer,0,s);let d=0,u=0,p=this.h1,m=this.h2;const g=3432918353,x=461845907,v=g&Sa,k=x&Sa;for(let S=0;S<s;S++)S&1?(d=o[S],d=d*g&xi|d*v&Sa,d=d<<15|d>>>17,d=d*x&xi|d*k&Sa,p^=d,p=p<<13|p>>>19,p=p*5+3864292196):(u=o[S],u=u*g&xi|u*v&Sa,u=u<<15|u>>>17,u=u*x&xi|u*k&Sa,m^=u,m=m<<13|m>>>19,m=m*5+3864292196);switch(d=0,i){case 3:d^=e[s*4+2]<<16;case 2:d^=e[s*4+1]<<8;case 1:d^=e[s*4],d=d*g&xi|d*v&Sa,d=d<<15|d>>>17,d=d*x&xi|d*k&Sa,s&1?p^=d:m^=d}this.h1=p,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&xi|t*36045&Sa,e=e*4283543511&xi|((e<<16|t>>>16)*2950163797&xi)>>>16,t^=e>>>1,t=t*444984403&xi|t*60499&Sa,e=e*3301882366&xi|((e<<16|t>>>16)*3120437893&xi)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const aS=Object.freeze({map:null,hash:"",transfer:void 0});var ed,nd,Nr,In,yy,W3;class RA{constructor(){A(this,yy);A(this,ed,!1);A(this,nd,null);A(this,Nr,null);A(this,In,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=l(this,In).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return l(this,In).get(t)}remove(t){const e=l(this,In).get(t);if(e!==void 0&&(e instanceof Ae&&l(this,Nr).delete(e.annotationElementId),l(this,In).delete(t),l(this,In).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of l(this,In).values())if(n instanceof Ae)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=l(this,In).get(t);let s=!1;if(n!==void 0)for(const[i,o]of Object.entries(e))n[i]!==o&&(s=!0,n[i]=o);else s=!0,l(this,In).set(t,e);s&&C(this,yy,W3).call(this),e instanceof Ae&&((l(this,Nr)||b(this,Nr,new Map)).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return l(this,In).has(t)}get size(){return l(this,In).size}resetModified(){l(this,ed)&&(b(this,ed,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new G3(this)}get serializable(){if(l(this,In).size===0)return aS;const t=new Map,e=new V3,n=[],s=Object.create(null);let i=!1;for(const[o,d]of l(this,In)){const u=d instanceof Ae?d.serialize(!1,s):d;u&&(t.set(o,u),e.update(`${o}:${JSON.stringify(u)}`),i||(i=!!u.bitmap))}if(i)for(const o of t.values())o.bitmap&&n.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:aS}get editorStats(){let t=null;const e=new Map;let n=0,s=0;for(const i of l(this,In).values()){if(!(i instanceof Ae)){i.popup&&(i.popup.deleted?s+=1:n+=1);continue}i.isCommentDeleted?s+=1:i.hasEditedComment&&(n+=1);const o=i.telemetryFinalData;if(!o)continue;const{type:d}=o;e.has(d)||e.set(d,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const u=t[d]||(t[d]=new Map);for(const[p,m]of Object.entries(o)){if(p==="type")continue;let g=u.get(p);g||(g=new Map,u.set(p,g));const x=g.get(m)??0;g.set(m,x+1)}}if((s>0||n>0)&&(t||(t=Object.create(null)),t.comments={deleted:s,edited:n}),!t)return null;for(const[i,o]of e)t[i]=o.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){b(this,nd,null)}updateEditor(t,e){var s;const n=(s=l(this,Nr))==null?void 0:s.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){var e;return((e=l(this,Nr))==null?void 0:e.get(t))||null}get modifiedIds(){if(l(this,nd))return l(this,nd);const t=[];if(l(this,Nr))for(const e of l(this,Nr).values())e.serialize()&&t.push(e.annotationElementId);return b(this,nd,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return l(this,In).entries()}}ed=new WeakMap,nd=new WeakMap,Nr=new WeakMap,In=new WeakMap,yy=new WeakSet,W3=function(){l(this,ed)||(b(this,ed,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var sg;class G3 extends RA{constructor(e){super();A(this,sg);const{map:n,hash:s,transfer:i}=e.serializable,o=structuredClone(n,i?{transfer:i}:null);b(this,sg,{map:o,hash:s,transfer:i})}get print(){ye("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,sg)}get modifiedIds(){return Ft(this,"modifiedIds",{ids:new Set,hash:""})}}sg=new WeakMap;var Oh;class gj{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){A(this,Oh,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),l(this,Oh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||l(this,Oh).has(t.loadedName))){if(Gt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:o}=t,d=new FontFace(s,i,o);this.addNativeFontFace(d);try{await d.load(),l(this,Oh).add(s),n==null||n(t)}catch{Mt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(d)}return}ye("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw Mt(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Ft(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Ft(this,"isSyncFontLoadingSupported",us||zn.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Gt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const i=n.shift();setTimeout(i.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ft(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(R,M){return R.charCodeAt(M)<<24|R.charCodeAt(M+1)<<16|R.charCodeAt(M+2)<<8|R.charCodeAt(M+3)&255}function s(R,M,O,I){const H=R.substring(0,M),K=R.substring(M+O);return H+I+K}let i,o;const d=this._document.createElement("canvas");d.width=1,d.height=1;const u=d.getContext("2d");let p=0;function m(R,M){if(++p>30){Mt("Load test font never loaded."),M();return}if(u.font="30px "+R,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){M();return}setTimeout(m.bind(null,R,M))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=s(x,976,g.length,g);const k=16,S=1482184792;let _=n(x,k);for(i=0,o=g.length-3;i<o;i+=4)_=_-S+n(g,i)|0;i<g.length&&(_=_-S+n(g+"XXX",i)|0),x=s(x,k,4,YF(_));const E=`url(data:font/opentype;base64,${btoa(x)});`,N=`@font-face {font-family:"${g}";src:${E}}`;this.insertRule(N);const P=this._document.createElement("div");P.style.visibility="hidden",P.style.width=P.style.height="10px",P.style.position="absolute",P.style.top=P.style.left="0px";for(const R of[t.loadedName,g]){const M=this._document.createElement("span");M.textContent="Hi",M.style.fontFamily=R,P.append(M)}this._document.body.append(P),m(g,()=>{P.remove(),e.complete()})}}Oh=new WeakMap;var ce;class xj{constructor(t,e=null,n,s){A(this,ce);this.compiledGlyphs=Object.create(null),b(this,ce,t),this._inspectFont=e,n&&Object.assign(this,n),s&&(this.charProcOperatorList=s)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${d3(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let s;try{s=t.get(n)}catch(o){Mt(`getPathGenerator - ignoring character: "${o}".`)}const i=p3(s);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=i}get black(){return l(this,ce).black}get bold(){return l(this,ce).bold}get disableFontFace(){return l(this,ce).disableFontFace??!1}get fontExtraProperties(){return l(this,ce).fontExtraProperties??!1}get isInvalidPDFjsFont(){return l(this,ce).isInvalidPDFjsFont}get isType3Font(){return l(this,ce).isType3Font}get italic(){return l(this,ce).italic}get missingFile(){return l(this,ce).missingFile}get remeasure(){return l(this,ce).remeasure}get vertical(){return l(this,ce).vertical}get ascent(){return l(this,ce).ascent}get defaultWidth(){return l(this,ce).defaultWidth}get descent(){return l(this,ce).descent}get bbox(){return l(this,ce).bbox}get fontMatrix(){return l(this,ce).fontMatrix}get fallbackName(){return l(this,ce).fallbackName}get loadedName(){return l(this,ce).loadedName}get mimetype(){return l(this,ce).mimetype}get name(){return l(this,ce).name}get data(){return l(this,ce).data}clearData(){l(this,ce).clearData()}get cssFontInfo(){return l(this,ce).cssFontInfo}get systemFontInfo(){return l(this,ce).systemFontInfo}get defaultVMetrics(){return l(this,ce).defaultVMetrics}}ce=new WeakMap;var Bh,Ih,ig,Fh,mx;const Xu=class Xu{constructor(t){A(this,Fh);A(this,Bh);A(this,Ih);A(this,ig);b(this,Bh,t),b(this,Ih,new DataView(l(this,Bh))),b(this,ig,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let s=0;for(const p of Xu.strings){const m=e.encode(t[p]);n[p]=m,s+=4+m.length}const i=new ArrayBuffer(s),o=new Uint8Array(i),d=new DataView(i);let u=0;for(const p of Xu.strings){const m=n[p],g=m.length;d.setUint32(u,g),o.set(m,u+4),u+=4+g}return Gt(u===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return C(this,Fh,mx).call(this,0)}get fontWeight(){return C(this,Fh,mx).call(this,1)}get italicAngle(){return C(this,Fh,mx).call(this,2)}};Bh=new WeakMap,Ih=new WeakMap,ig=new WeakMap,Fh=new WeakSet,mx=function(t){Gt(t<Xu.strings.length,"Invalid string index");let e=0;for(let s=0;s<t;s++)e+=l(this,Ih).getUint32(e)+4;const n=l(this,Ih).getUint32(e);return l(this,ig).decode(new Uint8Array(l(this,Bh),e+4,n))},nt(Xu,"strings",["fontFamily","fontWeight","italicAngle"]);let sy=Xu;var fl,Ia,sd,id,Xm;const Yu=class Yu{constructor(t){A(this,id);A(this,fl);A(this,Ia);A(this,sd);b(this,fl,t),b(this,Ia,new DataView(l(this,fl))),b(this,sd,new TextDecoder)}static write(t){const e=new TextEncoder,n={};let s=0;for(const x of Yu.strings){const v=e.encode(t[x]);n[x]=v,s+=4+v.length}s+=4;let i,o,d=1+s;t.style&&(i=e.encode(t.style.style),o=e.encode(t.style.weight),d+=4+i.length+4+o.length);const u=new ArrayBuffer(d),p=new Uint8Array(u),m=new DataView(u);let g=0;m.setUint8(g++,t.guessFallback?1:0),m.setUint32(g,0),g+=4,s=0;for(const x of Yu.strings){const v=n[x],k=v.length;s+=4+k,m.setUint32(g,k),p.set(v,g+4),g+=4+k}return m.setUint32(g-s-4,s),t.style&&(m.setUint32(g,i.length),p.set(i,g+4),g+=4+i.length,m.setUint32(g,o.length),p.set(o,g+4),g+=4+o.length),Gt(g<=u.byteLength,"SubstitionInfo.write: Buffer overflow"),u.transferToFixedLength(g)}get guessFallback(){return l(this,Ia).getUint8(0)!==0}get css(){return C(this,id,Xm).call(this,0)}get loadedName(){return C(this,id,Xm).call(this,1)}get baseFontName(){return C(this,id,Xm).call(this,2)}get src(){return C(this,id,Xm).call(this,3)}get style(){let t=1;t+=4+l(this,Ia).getUint32(t);const e=l(this,Ia).getUint32(t),n=l(this,sd).decode(new Uint8Array(l(this,fl),t+4,e));t+=4+e;const s=l(this,Ia).getUint32(t),i=l(this,sd).decode(new Uint8Array(l(this,fl),t+4,s));return{style:n,weight:i}}};fl=new WeakMap,Ia=new WeakMap,sd=new WeakMap,id=new WeakSet,Xm=function(t){Gt(t<Yu.strings.length,"Invalid string index");let e=5;for(let s=0;s<t;s++)e+=l(this,Ia).getUint32(e)+4;const n=l(this,Ia).getUint32(e);return l(this,sd).decode(new Uint8Array(l(this,fl),e+4,n))},nt(Yu,"strings",["css","loadedName","baseFontName","src"]);let iy=Yu;var jh,Lh,Uh,$h,Hs,Fa,ag,de,Xe,Vi,fx,Ym;const It=class It{constructor({data:t,extra:e}){A(this,Xe);A(this,Fa);A(this,ag);A(this,de);b(this,Fa,t),b(this,ag,new TextDecoder),b(this,de,new DataView(l(this,Fa))),e&&Object.assign(this,e)}get black(){return C(this,Xe,Vi).call(this,0)}get bold(){return C(this,Xe,Vi).call(this,1)}get disableFontFace(){return C(this,Xe,Vi).call(this,2)}get fontExtraProperties(){return C(this,Xe,Vi).call(this,3)}get isInvalidPDFjsFont(){return C(this,Xe,Vi).call(this,4)}get isType3Font(){return C(this,Xe,Vi).call(this,5)}get italic(){return C(this,Xe,Vi).call(this,6)}get missingFile(){return C(this,Xe,Vi).call(this,7)}get remeasure(){return C(this,Xe,Vi).call(this,8)}get vertical(){return C(this,Xe,Vi).call(this,9)}get ascent(){return C(this,Xe,fx).call(this,0)}get defaultWidth(){return C(this,Xe,fx).call(this,1)}get descent(){return C(this,Xe,fx).call(this,2)}get bbox(){let t=l(It,Lh);if(l(this,de).getUint8(t)===0)return;t+=1;const n=[];for(let s=0;s<4;s++)n.push(l(this,de).getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=l(It,Uh);if(l(this,de).getUint8(t)===0)return;t+=1;const n=[];for(let s=0;s<6;s++)n.push(l(this,de).getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=l(It,$h);if(l(this,de).getUint8(t)===0)return;t+=1;const n=[];for(let s=0;s<3;s++)n.push(l(this,de).getInt16(t,!0)),t+=2;return n}get fallbackName(){return C(this,Xe,Ym).call(this,0)}get loadedName(){return C(this,Xe,Ym).call(this,1)}get mimetype(){return C(this,Xe,Ym).call(this,2)}get name(){return C(this,Xe,Ym).call(this,3)}get data(){let t=l(It,Hs);const e=l(this,de).getUint32(t);t+=4+e;const n=l(this,de).getUint32(t);t+=4+n;const s=l(this,de).getUint32(t);t+=4+s;const i=l(this,de).getUint32(t);if(i!==0)return new Uint8Array(l(this,Fa),t+4,i)}clearData(){let t=l(It,Hs);const e=l(this,de).getUint32(t);t+=4+e;const n=l(this,de).getUint32(t);t+=4+n;const s=l(this,de).getUint32(t);t+=4+s;const i=l(this,de).getUint32(t);new Uint8Array(l(this,Fa),t+4,i).fill(0),l(this,de).setUint32(t,0)}get cssFontInfo(){let t=l(It,Hs);const e=l(this,de).getUint32(t);t+=4+e;const n=l(this,de).getUint32(t);t+=4+n;const s=l(this,de).getUint32(t);if(s===0)return null;const i=new Uint8Array(s);return i.set(new Uint8Array(l(this,Fa),t+4,s)),new sy(i.buffer)}get systemFontInfo(){let t=l(It,Hs);const e=l(this,de).getUint32(t);t+=4+e;const n=l(this,de).getUint32(t);if(n===0)return null;const s=new Uint8Array(n);return s.set(new Uint8Array(l(this,Fa),t+4,n)),new iy(s.buffer)}static write(t){const e=t.systemFontInfo?iy.write(t.systemFontInfo):null,n=t.cssFontInfo?sy.write(t.cssFontInfo):null,s=new TextEncoder,i={};let o=0;for(const S of It.strings)i[S]=s.encode(t[S]),o+=4+i[S].length;const d=l(It,Hs)+4+o+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),u=new ArrayBuffer(d),p=new Uint8Array(u),m=new DataView(u);let g=0;const x=It.bools.length;let v=0,k=0;for(let S=0;S<x;S++){const _=t[It.bools[S]];v|=(_===void 0?0:_?2:1)<<k,k+=2,(k===8||S===x-1)&&(m.setUint8(g++,v),v=0,k=0)}Gt(g===l(It,jh),"FontInfo.write: Boolean properties offset mismatch");for(const S of It.numbers)m.setFloat64(g,t[S]),g+=8;if(Gt(g===l(It,Lh),"FontInfo.write: Number properties offset mismatch"),t.bbox){m.setUint8(g++,4);for(const S of t.bbox)m.setInt16(g,S,!0),g+=2}else m.setUint8(g++,0),g+=2*4;if(Gt(g===l(It,Uh),"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){m.setUint8(g++,6);for(const S of t.fontMatrix)m.setFloat64(g,S,!0),g+=8}else m.setUint8(g++,0),g+=8*6;if(Gt(g===l(It,$h),"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){m.setUint8(g++,1);for(const S of t.defaultVMetrics)m.setInt16(g,S,!0),g+=2}else m.setUint8(g++,0),g+=3*2;Gt(g===l(It,Hs),"FontInfo.write: DefaultVMetrics properties offset mismatch"),m.setUint32(l(It,Hs),0),g+=4;for(const S of It.strings){const _=i[S],E=_.length;m.setUint32(g,E),p.set(_,g+4),g+=4+E}if(m.setUint32(l(It,Hs),g-l(It,Hs)-4),!e)m.setUint32(g,0),g+=4;else{const S=e.byteLength;m.setUint32(g,S),Gt(g+4+S<=u.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),p.set(new Uint8Array(e),g+4),g+=4+S}if(!n)m.setUint32(g,0),g+=4;else{const S=n.byteLength;m.setUint32(g,S),Gt(g+4+S<=u.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),p.set(new Uint8Array(n),g+4),g+=4+S}return t.data===void 0?(m.setUint32(g,0),g+=4):(m.setUint32(g,t.data.length),p.set(t.data,g+4),g+=4+t.data.length),Gt(g<=u.byteLength,"FontInfo.write: Buffer overflow"),u.transferToFixedLength(g)}};jh=new WeakMap,Lh=new WeakMap,Uh=new WeakMap,$h=new WeakMap,Hs=new WeakMap,Fa=new WeakMap,ag=new WeakMap,de=new WeakMap,Xe=new WeakSet,Vi=function(t){Gt(t<It.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,s=l(this,de).getUint8(e)>>n&3;return s===0?void 0:s===2},fx=function(t){return Gt(t<It.numbers.length,"Invalid number index"),l(this,de).getFloat64(l(It,jh)+t*8)},Ym=function(t){Gt(t<It.strings.length,"Invalid string index");let e=l(It,Hs)+4;for(let i=0;i<t;i++)e+=l(this,de).getUint32(e)+4;const n=l(this,de).getUint32(e),s=new Uint8Array(n);return s.set(new Uint8Array(l(this,Fa),e+4,n)),l(this,ag).decode(s)},nt(It,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),nt(It,"numbers",["ascent","defaultWidth","descent"]),nt(It,"strings",["fallbackName","loadedName","mimetype","name"]),A(It,jh,Math.ceil(It.bools.length*2/8)),A(It,Lh,l(It,jh)+It.numbers.length*8),A(It,Uh,l(It,Lh)+1+2*4),A(It,$h,l(It,Uh)+1+8*6),A(It,Hs,l(It,$h)+1+2*3);let rS=It;var rg,og,lg,cg,dg,ug,hg,pg;const we=class we{constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,s=[],i=[],o=[],d=[],u=null,p=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],o=t[3],e===1?s.push(...t[4],...t[5]):s.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,u=t[1],s=t[2],i=t[3],d=t[4]||[],n=t[6],p=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const m=Math.floor(s.length/2),g=Math.floor(i.length/3),x=o.length,v=d.length;let k=0;for(const M of d)k+=1,k=Math.ceil(k/4)*4,k+=4+M.coords.length*4,k+=4+M.colors.length*4,M.verticesPerRow!==void 0&&(k+=4);const S=20+m*8+g*3+x*8+(n?16:0)+(p?3:0)+k,_=new ArrayBuffer(S),E=new DataView(_),N=new Uint8Array(_);E.setUint8(l(we,rg),e),E.setUint8(l(we,og),n?1:0),E.setUint8(l(we,lg),p?1:0),E.setUint8(l(we,cg),u),E.setUint32(l(we,dg),m,!0),E.setUint32(l(we,ug),g,!0),E.setUint32(l(we,hg),x,!0),E.setUint32(l(we,pg),v,!0);let P=20;new Float32Array(_,P,m*2).set(s),P+=m*8,N.set(i,P),P+=g*3;for(const[M,O]of o)E.setFloat32(P,M,!0),P+=4,E.setUint32(P,parseInt(O.slice(1),16),!0),P+=4;if(n)for(const M of n)E.setFloat32(P,M,!0),P+=4;p&&(N.set(p,P),P+=3);for(let M=0;M<d.length;M++){const O=d[M];E.setUint8(P,O.type),P+=1,P=Math.ceil(P/4)*4,E.setUint32(P,O.coords.length,!0),P+=4,new Int32Array(_,P,O.coords.length).set(O.coords),P+=O.coords.length*4,E.setUint32(P,O.colors.length,!0),P+=4,new Int32Array(_,P,O.colors.length).set(O.colors),P+=O.colors.length*4,O.verticesPerRow!==void 0&&(E.setUint32(P,O.verticesPerRow,!0),P+=4)}return _}getIR(){const t=this.view,e=this.data[l(we,rg)],n=!!this.data[l(we,og)],s=!!this.data[l(we,lg)],i=t.getUint32(l(we,dg),!0),o=t.getUint32(l(we,ug),!0),d=t.getUint32(l(we,hg),!0),u=t.getUint32(l(we,pg),!0);let p=20;const m=new Float32Array(this.buffer,p,i*2);p+=i*8;const g=new Uint8Array(this.buffer,p,o*3);p+=o*3;const x=[];for(let _=0;_<d;++_){const E=t.getFloat32(p,!0);p+=4;const N=t.getUint32(p,!0);p+=4,x.push([E,`#${N.toString(16).padStart(6,"0")}`])}let v=null;if(n){v=[];for(let _=0;_<4;++_)v.push(t.getFloat32(p,!0)),p+=4}let k=null;s&&(k=new Uint8Array(this.buffer,p,3),p+=3);const S=[];for(let _=0;_<u;++_){const E=t.getUint8(p);p+=1,p=Math.ceil(p/4)*4;const N=t.getUint32(p,!0);p+=4;const P=new Int32Array(this.buffer,p,N);p+=N*4;const R=t.getUint32(p,!0);p+=4;const M=new Int32Array(this.buffer,p,R);p+=R*4;const O={type:E,coords:P,colors:M};E===jw.LATTICE&&(O.verticesPerRow=t.getUint32(p,!0),p+=4),S.push(O)}if(e===1)return["RadialAxial","axial",v,x,Array.from(m.slice(0,2)),Array.from(m.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",v,x,[m[0],m[1]],[m[3],m[4]],m[2],m[5]];if(e===3){const _=this.data[l(we,cg)];let E=null;if(m.length>0){let N=m[0],P=m[0],R=m[1],M=m[1];for(let O=0;O<m.length;O+=2){const I=m[O],H=m[O+1];N=N>I?I:N,R=R>H?H:R,P=P<I?I:P,M=M<H?H:M}E=[N,R,P,M]}return["Mesh",_,m,g,S,E,v,k]}throw new Error(`Unsupported pattern kind: ${e}`)}};rg=new WeakMap,og=new WeakMap,lg=new WeakMap,cg=new WeakMap,dg=new WeakMap,ug=new WeakMap,hg=new WeakMap,pg=new WeakMap,A(we,rg,0),A(we,og,1),A(we,lg,2),A(we,cg,3),A(we,dg,4),A(we,ug,8),A(we,hg,12),A(we,pg,16);let oS=we;function yj(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(us)return r;const t=URL.parse(r,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function vj(r){if(us&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return w0(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r==null?void 0:r.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Q2(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const lS=r=>typeof r=="object"&&Number.isInteger(r==null?void 0:r.num)&&r.num>=0&&Number.isInteger(r==null?void 0:r.gen)&&r.gen>=0,bj=r=>typeof r=="object"&&typeof(r==null?void 0:r.name)=="string",wj=ej.bind(null,lS,bj);var Rr,vy;class Sj{constructor(){A(this,Rr,new Map);A(this,vy,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};l(this,vy).then(()=>{for(const[s]of l(this,Rr))s.call(this,n)})}addEventListener(t,e,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:i}=n;if(i.aborted){Mt("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);s=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}l(this,Rr).set(e,s)}removeEventListener(t,e){const n=l(this,Rr).get(e);n==null||n(),l(this,Rr).delete(e)}terminate(){for(const[,t]of l(this,Rr))t==null||t();l(this,Rr).clear()}}Rr=new WeakMap,vy=new WeakMap;const J2={DATA:1,ERROR:2},nn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function tC(){}function Ss(r){if(r instanceof Hl||r instanceof Lw||r instanceof WE||r instanceof Zx||r instanceof Gb)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||ye('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Hl(r.message);case"InvalidPDFException":return new Lw(r.message);case"PasswordException":return new WE(r.message,r.code);case"ResponseException":return new Zx(r.message,r.status,r.missing);case"UnknownErrorException":return new Gb(r.message,r.details)}return new Gb(r.message,r.toString())}var zh,Oi,K3,X3,Y3,gx;class Qm{constructor(t,e,n){A(this,Oi);A(this,zh,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",C(this,Oi,K3).bind(this),{signal:l(this,zh).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(o){i.reject(o)}return i.promise}sendWithStream(t,e,n,s){const i=this.streamId++,o=this.sourceName,d=this.targetName,u=this.comObj;return new ReadableStream({start:p=>{const m=Promise.withResolvers();return this.streamControllers[i]={controller:p,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:o,targetName:d,action:t,streamId:i,data:e,desiredSize:p.desiredSize},s),m.promise},pull:p=>{const m=Promise.withResolvers();return this.streamControllers[i].pullCall=m,u.postMessage({sourceName:o,targetName:d,stream:nn.PULL,streamId:i,desiredSize:p.desiredSize}),m.promise},cancel:p=>{Gt(p instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[i].cancelCall=m,this.streamControllers[i].isClosed=!0,u.postMessage({sourceName:o,targetName:d,stream:nn.CANCEL,streamId:i,reason:Ss(p)}),m.promise}},n)}destroy(){var t;(t=l(this,zh))==null||t.abort(),b(this,zh,null)}}zh=new WeakMap,Oi=new WeakSet,K3=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){C(this,Oi,Y3).call(this,t);return}if(t.callback){const n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===J2.DATA)s.resolve(t.data);else if(t.callback===J2.ERROR)s.reject(Ss(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,s=t.sourceName,i=this.comObj;Promise.try(e,t.data).then(function(o){i.postMessage({sourceName:n,targetName:s,callback:J2.DATA,callbackId:t.callbackId,data:o})},function(o){i.postMessage({sourceName:n,targetName:s,callback:J2.ERROR,callbackId:t.callbackId,reason:Ss(o)})});return}if(t.streamId){C(this,Oi,X3).call(this,t);return}e(t.data)},X3=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,i=this.comObj,o=this,d=this.actionHandler[t.action],u={enqueue(p,m=1,g){if(this.isCancelled)return;const x=this.desiredSize;this.desiredSize-=m,x>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:s,stream:nn.ENQUEUE,streamId:e,chunk:p},g)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:s,stream:nn.CLOSE,streamId:e}),delete o.streamSinks[e])},error(p){Gt(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:s,stream:nn.ERROR,streamId:e,reason:Ss(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[e]=u,Promise.try(d,t.data,u).then(function(){i.postMessage({sourceName:n,targetName:s,stream:nn.START_COMPLETE,streamId:e,success:!0})},function(p){i.postMessage({sourceName:n,targetName:s,stream:nn.START_COMPLETE,streamId:e,reason:Ss(p)})})},Y3=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,i=this.comObj,o=this.streamControllers[e],d=this.streamSinks[e];switch(t.stream){case nn.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Ss(t.reason));break;case nn.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Ss(t.reason));break;case nn.PULL:if(!d){i.postMessage({sourceName:n,targetName:s,stream:nn.PULL_COMPLETE,streamId:e,success:!0});break}d.desiredSize<=0&&t.desiredSize>0&&d.sinkCapability.resolve(),d.desiredSize=t.desiredSize,Promise.try(d.onPull||tC).then(function(){i.postMessage({sourceName:n,targetName:s,stream:nn.PULL_COMPLETE,streamId:e,success:!0})},function(p){i.postMessage({sourceName:n,targetName:s,stream:nn.PULL_COMPLETE,streamId:e,reason:Ss(p)})});break;case nn.ENQUEUE:if(Gt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case nn.CLOSE:if(Gt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),C(this,Oi,gx).call(this,o,e);break;case nn.ERROR:Gt(o,"error should have stream controller"),o.controller.error(Ss(t.reason)),C(this,Oi,gx).call(this,o,e);break;case nn.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Ss(t.reason)),C(this,Oi,gx).call(this,o,e);break;case nn.CANCEL:if(!d)break;const u=Ss(t.reason);Promise.try(d.onCancel||tC,u).then(function(){i.postMessage({sourceName:n,targetName:s,stream:nn.CANCEL_COMPLETE,streamId:e,success:!0})},function(p){i.postMessage({sourceName:n,targetName:s,stream:nn.CANCEL_COMPLETE,streamId:e,reason:Ss(p)})}),d.sinkCapability.reject(u),d.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},gx=async function(t,e){var n,s,i;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(s=t.pullCall)==null?void 0:s.promise,(i=t.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[e]};var mg;class Q3{constructor({enableHWA:t=!1}){A(this,mg,!1);b(this,mg,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!l(this,mg)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ye("Abstract method `_createCanvas` called.")}}mg=new WeakMap;class Aj extends Q3{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class J3{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){ye("Abstract method `_fetch` called.")}}class eC extends J3{async _fetch(t){const e=await S0(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):w0(e)}}class Z3{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,i){return"none"}destroy(t=!1){}}var ad,Hh,Mr,Or,Zn,rd,od,pt,Kn,Jm,Uu,xx,$u,tP,cS,zu,Zm,tf,dS,ef;class _j extends Z3{constructor({docId:e,ownerDocument:n=globalThis.document}){super();A(this,pt);A(this,ad);A(this,Hh);A(this,Mr);A(this,Or);A(this,Zn);A(this,rd);A(this,od,0);b(this,Or,e),b(this,Zn,n)}addFilter(e){if(!e)return"none";let n=l(this,pt,Kn).get(e);if(n)return n;const[s,i,o]=C(this,pt,xx).call(this,e),d=e.length===1?s:`${s}${i}${o}`;if(n=l(this,pt,Kn).get(d),n)return l(this,pt,Kn).set(e,n),n;const u=`g_${l(this,Or)}_transfer_map_${He(this,od)._++}`,p=C(this,pt,$u).call(this,u);l(this,pt,Kn).set(e,p),l(this,pt,Kn).set(d,p);const m=C(this,pt,zu).call(this,u);return C(this,pt,tf).call(this,s,i,o,m),p}addHCMFilter(e,n){var k;const s=`${e}-${n}`,i="base";let o=l(this,pt,Jm).get(i);if((o==null?void 0:o.key)===s||(o?((k=o.filter)==null||k.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},l(this,pt,Jm).set(i,o)),!e||!n))return o.url;const d=C(this,pt,ef).call(this,e);e=xt.makeHexColor(...d);const u=C(this,pt,ef).call(this,n);if(n=xt.makeHexColor(...u),l(this,pt,Uu).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return o.url;const p=new Array(256);for(let S=0;S<=255;S++){const _=S/255;p[S]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const m=p.join(","),g=`g_${l(this,Or)}_hcm_filter`,x=o.filter=C(this,pt,zu).call(this,g);C(this,pt,tf).call(this,m,m,m,x),C(this,pt,cS).call(this,x);const v=(S,_)=>{const E=d[S]/255,N=u[S]/255,P=new Array(_+1);for(let R=0;R<=_;R++)P[R]=E+R/_*(N-E);return P.join(",")};return C(this,pt,tf).call(this,v(0,5),v(1,5),v(2,5),x),o.url=C(this,pt,$u).call(this,g),o.url}addAlphaFilter(e){let n=l(this,pt,Kn).get(e);if(n)return n;const[s]=C(this,pt,xx).call(this,[e]),i=`alpha_${s}`;if(n=l(this,pt,Kn).get(i),n)return l(this,pt,Kn).set(e,n),n;const o=`g_${l(this,Or)}_alpha_map_${He(this,od)._++}`,d=C(this,pt,$u).call(this,o);l(this,pt,Kn).set(e,d),l(this,pt,Kn).set(i,d);const u=C(this,pt,zu).call(this,o);return C(this,pt,dS).call(this,s,u),d}addLuminosityFilter(e){let n=l(this,pt,Kn).get(e||"luminosity");if(n)return n;let s,i;if(e?([s]=C(this,pt,xx).call(this,[e]),i=`luminosity_${s}`):i="luminosity",n=l(this,pt,Kn).get(i),n)return l(this,pt,Kn).set(e,n),n;const o=`g_${l(this,Or)}_luminosity_map_${He(this,od)._++}`,d=C(this,pt,$u).call(this,o);l(this,pt,Kn).set(e,d),l(this,pt,Kn).set(i,d);const u=C(this,pt,zu).call(this,o);return C(this,pt,tP).call(this,u),e&&C(this,pt,dS).call(this,s,u),d}addHighlightHCMFilter(e,n,s,i,o){var N;const d=`${n}-${s}-${i}-${o}`;let u=l(this,pt,Jm).get(e);if((u==null?void 0:u.key)===d||(u?((N=u.filter)==null||N.remove(),u.key=d,u.url="none",u.filter=null):(u={key:d,url:"none",filter:null},l(this,pt,Jm).set(e,u)),!n||!s))return u.url;const[p,m]=[n,s].map(C(this,pt,ef).bind(this));let g=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),x=Math.round(.2126*m[0]+.7152*m[1]+.0722*m[2]),[v,k]=[i,o].map(C(this,pt,ef).bind(this));x<g&&([g,x,v,k]=[x,g,k,v]),l(this,pt,Uu).style.color="";const S=(P,R,M)=>{const O=new Array(256),I=(x-g)/M,H=P/255,K=(R-P)/(255*M);let W=0;for(let Y=0;Y<=M;Y++){const q=Math.round(g+Y*I),tt=H+Y*K;for(let et=W;et<=q;et++)O[et]=tt;W=q+1}for(let Y=W;Y<256;Y++)O[Y]=O[W-1];return O.join(",")},_=`g_${l(this,Or)}_hcm_${e}_filter`,E=u.filter=C(this,pt,zu).call(this,_);return C(this,pt,cS).call(this,E),C(this,pt,tf).call(this,S(v[0],k[0],5),S(v[1],k[1],5),S(v[2],k[2],5),E),u.url=C(this,pt,$u).call(this,_),u.url}destroy(e=!1){var n,s,i,o;e&&((n=l(this,rd))!=null&&n.size)||((s=l(this,Mr))==null||s.parentNode.parentNode.remove(),b(this,Mr,null),(i=l(this,Hh))==null||i.clear(),b(this,Hh,null),(o=l(this,rd))==null||o.clear(),b(this,rd,null),b(this,od,0))}}ad=new WeakMap,Hh=new WeakMap,Mr=new WeakMap,Or=new WeakMap,Zn=new WeakMap,rd=new WeakMap,od=new WeakMap,pt=new WeakSet,Kn=function(){return l(this,Hh)||b(this,Hh,new Map)},Jm=function(){return l(this,rd)||b(this,rd,new Map)},Uu=function(){if(!l(this,Mr)){const e=l(this,Zn).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=l(this,Zn).createElementNS(ur,"svg");s.setAttribute("width",0),s.setAttribute("height",0),b(this,Mr,l(this,Zn).createElementNS(ur,"defs")),e.append(s),s.append(l(this,Mr)),l(this,Zn).body.append(e)}return l(this,Mr)},xx=function(e){if(e.length===1){const p=e[0],m=new Array(256);for(let x=0;x<256;x++)m[x]=p[x]/255;const g=m.join(",");return[g,g,g]}const[n,s,i]=e,o=new Array(256),d=new Array(256),u=new Array(256);for(let p=0;p<256;p++)o[p]=n[p]/255,d[p]=s[p]/255,u[p]=i[p]/255;return[o.join(","),d.join(","),u.join(",")]},$u=function(e){if(l(this,ad)===void 0){b(this,ad,"");const n=l(this,Zn).URL;n!==l(this,Zn).baseURI&&(Ly(n)?Mt('#createUrl: ignore "data:"-URL for performance reasons.'):b(this,ad,o3(n,"")))}return`url(${l(this,ad)}#${e})`},tP=function(e){const n=l(this,Zn).createElementNS(ur,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},cS=function(e){const n=l(this,Zn).createElementNS(ur,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},zu=function(e){const n=l(this,Zn).createElementNS(ur,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),l(this,pt,Uu).append(n),n},Zm=function(e,n,s){const i=l(this,Zn).createElementNS(ur,n);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),e.append(i)},tf=function(e,n,s,i){const o=l(this,Zn).createElementNS(ur,"feComponentTransfer");i.append(o),C(this,pt,Zm).call(this,o,"feFuncR",e),C(this,pt,Zm).call(this,o,"feFuncG",n),C(this,pt,Zm).call(this,o,"feFuncB",s)},dS=function(e,n){const s=l(this,Zn).createElementNS(ur,"feComponentTransfer");n.append(s),C(this,pt,Zm).call(this,s,"feFuncA",e)},ef=function(e){return l(this,pt,Uu).style.color=e,_0(getComputedStyle(l(this,pt,Uu)).getPropertyValue("color"))};class eP{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){ye("Abstract method `_fetch` called.")}}class nC extends eP{async _fetch(t){const e=await S0(t,"arraybuffer");return new Uint8Array(e)}}class nP{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){ye("Abstract method `_fetch` called.")}}class sC extends nP{async _fetch(t){const e=await S0(t,"arraybuffer");return new Uint8Array(e)}}us&&Mt("Please use the `legacy` build in Node.js environments.");async function MA(r){const e=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(e)}class kj extends Z3{}class Ej extends Q3{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class Cj extends J3{async _fetch(t){return MA(t)}}class Tj extends eP{async _fetch(t){return MA(t)}}class Pj extends nP{async _fetch(t){return MA(t)}}const Bu="__forcedDependency",{floor:iC,ceil:aC}=Math;function Z2(r,t,e,n,s,i){r[t*4+0]=Math.min(r[t*4+0],e),r[t*4+1]=Math.min(r[t*4+1],n),r[t*4+2]=Math.max(r[t*4+2],s),r[t*4+3]=Math.max(r[t*4+3],i)}const uS=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var qh,gl;class Dj{constructor(t,e){A(this,qh);A(this,gl);b(this,qh,t),b(this,gl,e)}get length(){return l(this,qh).length}isEmpty(t){return l(this,qh)[t]===uS}minX(t){return l(this,gl)[t*4+0]/256}minY(t){return l(this,gl)[t*4+1]/256}maxX(t){return(l(this,gl)[t*4+2]+1)/256}maxY(t){return(l(this,gl)[t*4+3]+1)/256}}qh=new WeakMap,gl=new WeakMap;const tx=(r,t)=>{if(!r)return;let e=r.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},r.set(t,e)),e};var Cs,Ts,ld,Zi,cd,Br,re,ue,Ir,Ps,fg,Vh,dd,ud,Fr,ts,ja,gg,hS;class Nj{constructor(t,e,n=!1){A(this,gg);A(this,Cs,{__proto__:null});A(this,Ts,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Bu]:[]});A(this,ld,new Map);A(this,Zi,[]);A(this,cd,[]);A(this,Br,[[1,0,0,1,0,0]]);A(this,re,[-1/0,-1/0,1/0,1/0]);A(this,ue,new Float64Array([1/0,1/0,-1/0,-1/0]));A(this,Ir,-1);A(this,Ps,new Set);A(this,fg,new Map);A(this,Vh,new Map);A(this,dd);A(this,ud);A(this,Fr);A(this,ts);A(this,ja);b(this,dd,t.width),b(this,ud,t.height),C(this,gg,hS).call(this,e),n&&b(this,ja,new Map)}growOperationsCount(t){t>=l(this,ts).length&&C(this,gg,hS).call(this,t,l(this,ts))}save(t){return b(this,Cs,{__proto__:l(this,Cs)}),b(this,Ts,{__proto__:l(this,Ts),transform:{__proto__:l(this,Ts).transform},moveText:{__proto__:l(this,Ts).moveText},sameLineText:{__proto__:l(this,Ts).sameLineText},[Bu]:{__proto__:l(this,Ts)[Bu]}}),b(this,re,{__proto__:l(this,re)}),l(this,Zi).push(t),this}restore(t){var s;const e=Object.getPrototypeOf(l(this,Cs));if(e===null)return this;b(this,Cs,e),b(this,Ts,Object.getPrototypeOf(l(this,Ts))),b(this,re,Object.getPrototypeOf(l(this,re)));const n=l(this,Zi).pop();return n!==void 0&&((s=tx(l(this,ja),t))==null||s.dependencies.add(n),l(this,ts)[t]=l(this,ts)[n]),this}recordOpenMarker(t){return l(this,Zi).push(t),this}getOpenMarker(){return l(this,Zi).length===0?null:l(this,Zi).at(-1)}recordCloseMarker(t){var n;const e=l(this,Zi).pop();return e!==void 0&&((n=tx(l(this,ja),t))==null||n.dependencies.add(e),l(this,ts)[t]=l(this,ts)[e]),this}beginMarkedContent(t){return l(this,cd).push(t),this}endMarkedContent(t){var n;const e=l(this,cd).pop();return e!==void 0&&((n=tx(l(this,ja),t))==null||n.dependencies.add(e),l(this,ts)[t]=l(this,ts)[e]),this}pushBaseTransform(t){return l(this,Br).push(xt.multiplyByDOMMatrix(l(this,Br).at(-1),t.getTransform())),this}popBaseTransform(){return l(this,Br).length>1&&l(this,Br).pop(),this}recordSimpleData(t,e){return l(this,Cs)[t]=e,this}recordIncrementalData(t,e){return l(this,Ts)[t].push(e),this}resetIncrementalData(t,e){return l(this,Ts)[t].length=0,this}recordNamedData(t,e){return l(this,ld).set(t,e),this}recordSimpleDataFromNamed(t,e,n){l(this,Cs)[t]=l(this,ld).get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Bu,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in l(this,Cs)&&this.recordFutureForcedDependency(e,l(this,Cs)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of l(this,Ps))this.recordFutureForcedDependency(Bu,t);return this}resetBBox(t){return l(this,Ir)!==t&&(b(this,Ir,t),l(this,ue)[0]=1/0,l(this,ue)[1]=1/0,l(this,ue)[2]=-1/0,l(this,ue)[3]=-1/0),this}recordClipBox(t,e,n,s,i,o){const d=xt.multiplyByDOMMatrix(l(this,Br).at(-1),e.getTransform()),u=[1/0,1/0,-1/0,-1/0];xt.axialAlignedBoundingBox([n,i,s,o],d,u);const p=xt.intersect(l(this,re),u);return p?(l(this,re)[0]=p[0],l(this,re)[1]=p[1],l(this,re)[2]=p[2],l(this,re)[3]=p[3]):(l(this,re)[0]=l(this,re)[1]=1/0,l(this,re)[2]=l(this,re)[3]=-1/0),this}recordBBox(t,e,n,s,i,o){const d=l(this,re);if(d[0]===1/0)return this;const u=xt.multiplyByDOMMatrix(l(this,Br).at(-1),e.getTransform());if(d[0]===-1/0)return xt.axialAlignedBoundingBox([n,i,s,o],u,l(this,ue)),this;const p=[1/0,1/0,-1/0,-1/0];return xt.axialAlignedBoundingBox([n,i,s,o],u,p),l(this,ue)[0]=Math.min(l(this,ue)[0],Math.max(p[0],d[0])),l(this,ue)[1]=Math.min(l(this,ue)[1],Math.max(p[1],d[1])),l(this,ue)[2]=Math.max(l(this,ue)[2],Math.min(p[2],d[2])),l(this,ue)[3]=Math.max(l(this,ue)[3],Math.min(p[3],d[3])),this}recordCharacterBBox(t,e,n,s=1,i=0,o=0,d){const u=n.bbox;let p,m;if(u&&(p=u[2]!==u[0]&&u[3]!==u[1]&&l(this,Vh).get(n),p!==!1&&(m=[0,0,0,0],xt.axialAlignedBoundingBox(u,n.fontMatrix,m),(s!==1||i!==0||o!==0)&&xt.scaleMinMax([s,0,0,-s,i,o],m),p)))return this.recordBBox(t,e,m[0],m[2],m[1],m[3]);if(!d)return this.recordFullPageBBox(t);const g=d();return u&&m&&p===void 0&&(p=m[0]<=i-g.actualBoundingBoxLeft&&m[2]>=i+g.actualBoundingBoxRight&&m[1]<=o-g.actualBoundingBoxAscent&&m[3]>=o+g.actualBoundingBoxDescent,l(this,Vh).set(n,p),p)?this.recordBBox(t,e,m[0],m[2],m[1],m[3]):this.recordBBox(t,e,i-g.actualBoundingBoxLeft,i+g.actualBoundingBoxRight,o-g.actualBoundingBoxAscent,o+g.actualBoundingBoxDescent)}recordFullPageBBox(t){return l(this,ue)[0]=Math.max(0,l(this,re)[0]),l(this,ue)[1]=Math.max(0,l(this,re)[1]),l(this,ue)[2]=Math.min(l(this,dd),l(this,re)[2]),l(this,ue)[3]=Math.min(l(this,ud),l(this,re)[3]),this}getSimpleIndex(t){return l(this,Cs)[t]}recordDependencies(t,e){const n=l(this,Ps),s=l(this,Cs),i=l(this,Ts);for(const o of e)o in l(this,Cs)?n.add(s[o]):o in i&&i[o].forEach(n.add,n);return this}recordNamedDependency(t,e){return l(this,ld).has(e)&&l(this,Ps).add(l(this,ld).get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Bu]),l(this,ja)){const n=tx(l(this,ja),t),{dependencies:s}=n;l(this,Ps).forEach(s.add,s),l(this,Zi).forEach(s.add,s),l(this,cd).forEach(s.add,s),s.delete(t),n.isRenderingOperation=!0}if(l(this,Ir)===t){const n=iC(l(this,ue)[0]*256/l(this,dd)),s=iC(l(this,ue)[1]*256/l(this,ud)),i=aC(l(this,ue)[2]*256/l(this,dd)),o=aC(l(this,ue)[3]*256/l(this,ud));Z2(l(this,Fr),t,n,s,i,o);for(const d of l(this,Ps))d!==t&&Z2(l(this,Fr),d,n,s,i,o);for(const d of l(this,Zi))d!==t&&Z2(l(this,Fr),d,n,s,i,o);for(const d of l(this,cd))d!==t&&Z2(l(this,Fr),d,n,s,i,o);e||(l(this,Ps).clear(),b(this,Ir,-1))}return this}recordShowTextOperation(t,e=!1){const n=Array.from(l(this,Ps));this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const s of n)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(t,e=!1){return l(this,Ir)===t&&(b(this,Ir,-1),l(this,re)[0]=Math.max(l(this,re)[0],l(this,ue)[0]),l(this,re)[1]=Math.max(l(this,re)[1],l(this,ue)[1]),l(this,re)[2]=Math.min(l(this,re)[2],l(this,ue)[2]),l(this,re)[3]=Math.min(l(this,re)[3],l(this,ue)[3]),e||l(this,Ps).clear()),this}_takePendingDependencies(){const t=l(this,Ps);return b(this,Ps,new Set),t}_extractOperation(t){const e=l(this,fg).get(t);return l(this,fg).delete(t),e}_pushPendingDependencies(t){for(const e of t)l(this,Ps).add(e)}take(){return l(this,Vh).clear(),new Dj(l(this,ts),l(this,Fr))}takeDebugMetadata(){return l(this,ja)}}Cs=new WeakMap,Ts=new WeakMap,ld=new WeakMap,Zi=new WeakMap,cd=new WeakMap,Br=new WeakMap,re=new WeakMap,ue=new WeakMap,Ir=new WeakMap,Ps=new WeakMap,fg=new WeakMap,Vh=new WeakMap,dd=new WeakMap,ud=new WeakMap,Fr=new WeakMap,ts=new WeakMap,ja=new WeakMap,gg=new WeakSet,hS=function(t,e){const n=new ArrayBuffer(t*4);b(this,Fr,new Uint8ClampedArray(n)),b(this,ts,new Uint32Array(n)),e&&e.length>0?(l(this,ts).set(e),l(this,ts).fill(uS,e.length)):l(this,ts).fill(uS)};var ge,We,ta,Wh,Gh;const zA=class zA{constructor(t,e,n){A(this,ge);A(this,We);A(this,ta);A(this,Wh,0);A(this,Gh,0);if(t instanceof zA&&l(t,ta)===!!n)return t;b(this,ge,t),b(this,We,e),b(this,ta,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(t){return He(this,Gh)._++,l(this,ge).save(l(this,We)),this}restore(t){return l(this,Gh)>0&&(l(this,ge).restore(l(this,We)),He(this,Gh)._--),this}recordOpenMarker(t){return He(this,Wh)._++,this}getOpenMarker(){return l(this,Wh)>0?l(this,We):l(this,ge).getOpenMarker()}recordCloseMarker(t){return He(this,Wh)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return l(this,ge).pushBaseTransform(t),this}popBaseTransform(){return l(this,ge).popBaseTransform(),this}recordSimpleData(t,e){return l(this,ge).recordSimpleData(t,l(this,We)),this}recordIncrementalData(t,e){return l(this,ge).recordIncrementalData(t,l(this,We)),this}resetIncrementalData(t,e){return l(this,ge).resetIncrementalData(t,l(this,We)),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return l(this,ge).recordSimpleDataFromNamed(t,e,l(this,We)),this}recordFutureForcedDependency(t,e){return l(this,ge).recordFutureForcedDependency(t,l(this,We)),this}inheritSimpleDataAsFutureForcedDependencies(t){return l(this,ge).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return l(this,ge).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return l(this,ta)||l(this,ge).resetBBox(l(this,We)),this}recordClipBox(t,e,n,s,i,o){return l(this,ta)||l(this,ge).recordClipBox(l(this,We),e,n,s,i,o),this}recordBBox(t,e,n,s,i,o){return l(this,ta)||l(this,ge).recordBBox(l(this,We),e,n,s,i,o),this}recordCharacterBBox(t,e,n,s,i,o,d){return l(this,ta)||l(this,ge).recordCharacterBBox(l(this,We),e,n,s,i,o,d),this}recordFullPageBBox(t){return l(this,ta)||l(this,ge).recordFullPageBBox(l(this,We)),this}getSimpleIndex(t){return l(this,ge).getSimpleIndex(t)}recordDependencies(t,e){return l(this,ge).recordDependencies(l(this,We),e),this}recordNamedDependency(t,e){return l(this,ge).recordNamedDependency(l(this,We),e),this}recordOperation(t){return l(this,ge).recordOperation(l(this,We),!0),this}recordShowTextOperation(t){return l(this,ge).recordShowTextOperation(l(this,We),!0),this}bboxToClipBoxDropOperation(t){return l(this,ta)||l(this,ge).bboxToClipBoxDropOperation(l(this,We),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};ge=new WeakMap,We=new WeakMap,ta=new WeakMap,Wh=new WeakMap,Gh=new WeakMap;let ay=zA;const yi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ln={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function pS(r,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),r.clip(s)}class OA{isModifyingCurrentTransform(){return!1}getPattern(){ye("Abstract method `getPattern` called.")}}class Rj extends OA{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,s){let i;if(s===Ln.STROKE||s===Ln.FILL){const o=e.current.getClippedPathBoundingBox(s,Fe(t))||[0,0,0,0],d=Math.ceil(o[2]-o[0])||1,u=Math.ceil(o[3]-o[1])||1,p=e.cachedCanvases.getCanvas("pattern",d,u),m=p.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-o[0],-o[1]),n=xt.transform(n,[1,0,0,1,o[0],o[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),pS(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),i=t.createPattern(p.canvas,"no-repeat");const g=new DOMMatrix(n);i.setTransform(g)}else pS(t,this._bbox),i=this._createGradient(t);return i}}function Yb(r,t,e,n,s,i,o,d){const u=t.coords,p=t.colors,m=r.data,g=r.width*4;let x;u[e+1]>u[n+1]&&(x=e,e=n,n=x,x=i,i=o,o=x),u[n+1]>u[s+1]&&(x=n,n=s,s=x,x=o,o=d,d=x),u[e+1]>u[n+1]&&(x=e,e=n,n=x,x=i,i=o,o=x);const v=(u[e]+t.offsetX)*t.scaleX,k=(u[e+1]+t.offsetY)*t.scaleY,S=(u[n]+t.offsetX)*t.scaleX,_=(u[n+1]+t.offsetY)*t.scaleY,E=(u[s]+t.offsetX)*t.scaleX,N=(u[s+1]+t.offsetY)*t.scaleY;if(k>=N)return;const P=p[i],R=p[i+1],M=p[i+2],O=p[o],I=p[o+1],H=p[o+2],K=p[d],W=p[d+1],Y=p[d+2],q=Math.round(k),tt=Math.round(N);let et,lt,ot,it,U,Q,at,j;for(let G=q;G<=tt;G++){if(G<_){const Pt=G<k?0:(k-G)/(k-_);et=v-(v-S)*Pt,lt=P-(P-O)*Pt,ot=R-(R-I)*Pt,it=M-(M-H)*Pt}else{let Pt;G>N?Pt=1:_===N?Pt=0:Pt=(_-G)/(_-N),et=S-(S-E)*Pt,lt=O-(O-K)*Pt,ot=I-(I-W)*Pt,it=H-(H-Y)*Pt}let ut;G<k?ut=0:G>N?ut=1:ut=(k-G)/(k-N),U=v-(v-E)*ut,Q=P-(P-K)*ut,at=R-(R-W)*ut,j=M-(M-Y)*ut;const St=Math.round(Math.min(et,U)),Nt=Math.round(Math.max(et,U));let Tt=g*G+St*4;for(let Pt=St;Pt<=Nt;Pt++)ut=(et-Pt)/(et-U),ut<0?ut=0:ut>1&&(ut=1),m[Tt++]=lt-(lt-Q)*ut|0,m[Tt++]=ot-(ot-at)*ut|0,m[Tt++]=it-(it-j)*ut|0,m[Tt++]=255}}function Mj(r,t,e){const n=t.coords,s=t.colors;let i,o;switch(t.type){case jw.LATTICE:const d=t.verticesPerRow,u=Math.floor(n.length/d)-1,p=d-1;for(i=0;i<u;i++){let m=i*d;for(let g=0;g<p;g++,m++)Yb(r,e,n[m],n[m+1],n[m+d],s[m],s[m+1],s[m+d]),Yb(r,e,n[m+d+1],n[m+1],n[m+d],s[m+d+1],s[m+1],s[m+d])}break;case jw.TRIANGLES:for(i=0,o=n.length;i<o;i+=3)Yb(r,e,n[i],n[i+1],n[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class Oj extends OA{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const d=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-d,m=Math.ceil(this._bounds[3])-u,g=Math.min(Math.ceil(Math.abs(p*t[0]*1.1)),3e3),x=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),v=p/g,k=m/x,S={coords:this._coords,colors:this._colors,offsetX:-d,offsetY:-u,scaleX:1/v,scaleY:1/k},_=g+2*2,E=x+2*2,N=n.getCanvas("mesh",_,E),P=N.context,R=P.createImageData(g,x);if(e){const O=R.data;for(let I=0,H=O.length;I<H;I+=4)O[I]=e[0],O[I+1]=e[1],O[I+2]=e[2],O[I+3]=255}for(const O of this._figures)Mj(R,O,S);return P.putImageData(R,2,2),{canvas:N.canvas,offsetX:d-2*v,offsetY:u-2*k,scaleX:v,scaleY:k}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,s){pS(t,this._bbox);const i=new Float32Array(2);if(s===Ln.SHADING)xt.singularValueDecompose2dScale(Fe(t),i);else if(this.matrix){xt.singularValueDecompose2dScale(this.matrix,i);const[d,u]=i;xt.singularValueDecompose2dScale(e.baseTransform,i),i[0]*=d,i[1]*=u}else xt.singularValueDecompose2dScale(e.baseTransform,i);const o=this._createMeshCanvas(i,s===Ln.SHADING?null:this._background,e.cachedCanvases);return s!==Ln.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class Bj extends OA{getPattern(){return"hotpink"}}function Ij(r){switch(r[0]){case"RadialAxial":return new Rj(r);case"Mesh":return new Oj(r);case"Dummy":return new Bj}throw new Error(`Unknown IR type: ${r[0]}`)}const rC={COLORED:1,UNCOLORED:2},by=class by{constructor(t,e,n,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(t,e){var Q,at;const{bbox:n,operatorList:s,paintType:i,tilingType:o,color:d,canvasGraphicsFactory:u}=this;let{xstep:p,ystep:m}=this;p=Math.abs(p),m=Math.abs(m),jy("TilingType: "+o);const g=n[0],x=n[1],v=n[2],k=n[3],S=v-g,_=k-x,E=new Float32Array(2);xt.singularValueDecompose2dScale(this.matrix,E);const[N,P]=E;xt.singularValueDecompose2dScale(this.baseTransform,E);const R=N*E[0],M=P*E[1];let O=S,I=_,H=!1,K=!1;const W=Math.ceil(p*R),Y=Math.ceil(m*M),q=Math.ceil(S*R),tt=Math.ceil(_*M);W>=q?O=p:H=!0,Y>=tt?I=m:K=!0;const et=this.getSizeAndScale(O,this.ctx.canvas.width,R),lt=this.getSizeAndScale(I,this.ctx.canvas.height,M),ot=t.cachedCanvases.getCanvas("pattern",et.size,lt.size),it=ot.context,U=u.createCanvasGraphics(it,e);if(U.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(U,i,d),it.translate(-et.scale*g,-lt.scale*x),U.transform(0,et.scale,0,0,lt.scale,0,0),it.save(),(Q=U.dependencyTracker)==null||Q.save(),this.clipBbox(U,g,x,v,k),U.baseTransform=Fe(U.ctx),U.executeOperatorList(s),U.endDrawing(),(at=U.dependencyTracker)==null||at.restore(),it.restore(),H||K){const j=ot.canvas;H&&(O=p),K&&(I=m);const G=this.getSizeAndScale(O,this.ctx.canvas.width,R),ut=this.getSizeAndScale(I,this.ctx.canvas.height,M),St=G.size,Nt=ut.size,Tt=t.cachedCanvases.getCanvas("pattern-workaround",St,Nt),Pt=Tt.context,Ht=H?Math.floor(S/p):0,Zt=K?Math.floor(_/m):0;for(let Te=0;Te<=Ht;Te++)for(let Dn=0;Dn<=Zt;Dn++)Pt.drawImage(j,St*Te,Nt*Dn,St,Nt,0,0,St,Nt);return{canvas:Tt.canvas,scaleX:G.scale,scaleY:ut.scale,offsetX:g,offsetY:x}}return{canvas:ot.canvas,scaleX:et.scale,scaleY:lt.scale,offsetX:g,offsetY:x}}getSizeAndScale(t,e,n){const s=Math.max(by.MAX_PATTERN_SIZE,e);let i=Math.ceil(t*n);return i>=s?i=s:n=i/t,{scale:n,size:i}}clipBbox(t,e,n,s,i){const o=s-e,d=i-n;t.ctx.rect(e,n,o,d),xt.axialAlignedBoundingBox([e,n,s,i],Fe(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const s=t.ctx,i=t.current;switch(e){case rC.COLORED:const{fillStyle:o,strokeStyle:d}=this.ctx;s.fillStyle=i.fillColor=o,s.strokeStyle=i.strokeColor=d;break;case rC.UNCOLORED:s.fillStyle=s.strokeStyle=n,i.fillColor=i.strokeColor=n;break;default:throw new XF(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,s,i){let o=n;s!==Ln.SHADING&&(o=xt.transform(o,e.baseTransform),this.matrix&&(o=xt.transform(o,this.matrix)));const d=this.createPatternCanvas(e,i);let u=new DOMMatrix(o);u=u.translate(d.offsetX,d.offsetY),u=u.scale(1/d.scaleX,1/d.scaleY);const p=t.createPattern(d.canvas,"repeat");return p.setTransform(u),p}};nt(by,"MAX_PATTERN_SIZE",3e3);let mS=by;function Fj({src:r,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const d=zn.isLittleEndian?4278190080:255,[u,p]=o?[i,d]:[d,i],m=n>>3,g=n&7,x=r.length;e=new Uint32Array(e.buffer);let v=0;for(let k=0;k<s;k++){for(const _=t+m;t<_;t++){const E=t<x?r[t]:255;e[v++]=E&128?p:u,e[v++]=E&64?p:u,e[v++]=E&32?p:u,e[v++]=E&16?p:u,e[v++]=E&8?p:u,e[v++]=E&4?p:u,e[v++]=E&2?p:u,e[v++]=E&1?p:u}if(g===0)continue;const S=t<x?r[t++]:255;for(let _=0;_<g;_++)e[v++]=S&1<<7-_?p:u}return{srcPos:t,destPos:v}}const oC=16,lC=100,jj=15,cC=10,Ms=16,Qb=new DOMMatrix,ai=new Float32Array(2),Gu=new Float32Array([1/0,1/0,-1/0,-1/0]);function Lj(r,t){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){t.save(),this.__originalSave()},r.restore=function(){t.restore(),this.__originalRestore()},r.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},r.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},r.transform=function(e,n,s,i,o,d){t.transform(e,n,s,i,o,d),this.__originalTransform(e,n,s,i,o,d)},r.setTransform=function(e,n,s,i,o,d){t.setTransform(e,n,s,i,o,d),this.__originalSetTransform(e,n,s,i,o,d)},r.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},r.rotate=function(e){t.rotate(e),this.__originalRotate(e)},r.clip=function(e){t.clip(e),this.__originalClip(e)},r.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},r.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},r.bezierCurveTo=function(e,n,s,i,o,d){t.bezierCurveTo(e,n,s,i,o,d),this.__originalBezierCurveTo(e,n,s,i,o,d)},r.rect=function(e,n,s,i){t.rect(e,n,s,i),this.__originalRect(e,n,s,i)},r.closePath=function(){t.closePath(),this.__originalClosePath()},r.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Uj{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function ex(r,t,e,n,s,i,o,d,u,p){const[m,g,x,v,k,S]=Fe(r);if(g===0&&x===0){const N=o*m+k,P=Math.round(N),R=d*v+S,M=Math.round(R),O=(o+u)*m+k,I=Math.abs(Math.round(O)-P)||1,H=(d+p)*v+S,K=Math.abs(Math.round(H)-M)||1;return r.setTransform(Math.sign(m),0,0,Math.sign(v),P,M),r.drawImage(t,e,n,s,i,0,0,I,K),r.setTransform(m,g,x,v,k,S),[I,K]}if(m===0&&v===0){const N=d*x+k,P=Math.round(N),R=o*g+S,M=Math.round(R),O=(d+p)*x+k,I=Math.abs(Math.round(O)-P)||1,H=(o+u)*g+S,K=Math.abs(Math.round(H)-M)||1;return r.setTransform(0,Math.sign(g),Math.sign(x),0,P,M),r.drawImage(t,e,n,s,i,0,0,K,I),r.setTransform(m,g,x,v,k,S),[K,I]}r.drawImage(t,e,n,s,i,o,d,u,p);const _=Math.hypot(m,g),E=Math.hypot(x,v);return[_*u,E*p]}class dC{constructor(t,e,n){nt(this,"alphaIsShape",!1);nt(this,"fontSize",0);nt(this,"fontSizeScale",1);nt(this,"textMatrix",null);nt(this,"textMatrixScale",1);nt(this,"fontMatrix",Fw);nt(this,"leading",0);nt(this,"x",0);nt(this,"y",0);nt(this,"lineX",0);nt(this,"lineY",0);nt(this,"charSpacing",0);nt(this,"wordSpacing",0);nt(this,"textHScale",1);nt(this,"textRenderingMode",Mn.FILL);nt(this,"textRise",0);nt(this,"fillColor","#000000");nt(this,"strokeColor","#000000");nt(this,"patternFill",!1);nt(this,"patternStroke",!1);nt(this,"fillAlpha",1);nt(this,"strokeAlpha",1);nt(this,"lineWidth",1);nt(this,"activeSMask",null);nt(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Gu.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Ln.FILL,e=null){const n=this.minMax.slice();if(t===Ln.STROKE){e||ye("Stroke bounding box must include transform."),xt.singularValueDecompose2dScale(e,ai);const s=ai[0]*this.lineWidth/2,i=ai[1]*this.lineWidth/2;n[0]-=s,n[1]-=i,n[2]+=s,n[3]+=i}return n}updateClipFromPath(){const t=xt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Gu,0)}getClippedPathBoundingBox(t=Ln.FILL,e=null){return xt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function uC(r,t){if(t instanceof ImageData){r.putImageData(t,0,0);return}const e=t.height,n=t.width,s=e%Ms,i=(e-s)/Ms,o=s===0?i:i+1,d=r.createImageData(n,Ms);let u=0,p;const m=t.data,g=d.data;let x,v,k,S;if(t.kind===ox.GRAYSCALE_1BPP){const _=m.byteLength,E=new Uint32Array(g.buffer,0,g.byteLength>>2),N=E.length,P=n+7>>3,R=4294967295,M=zn.isLittleEndian?4278190080:255;for(x=0;x<o;x++){for(k=x<i?Ms:s,p=0,v=0;v<k;v++){const O=_-u;let I=0;const H=O>P?n:O*8-7,K=H&-8;let W=0,Y=0;for(;I<K;I+=8)Y=m[u++],E[p++]=Y&128?R:M,E[p++]=Y&64?R:M,E[p++]=Y&32?R:M,E[p++]=Y&16?R:M,E[p++]=Y&8?R:M,E[p++]=Y&4?R:M,E[p++]=Y&2?R:M,E[p++]=Y&1?R:M;for(;I<H;I++)W===0&&(Y=m[u++],W=128),E[p++]=Y&W?R:M,W>>=1}for(;p<N;)E[p++]=0;r.putImageData(d,0,x*Ms)}}else if(t.kind===ox.RGBA_32BPP){for(v=0,S=n*Ms*4,x=0;x<i;x++)g.set(m.subarray(u,u+S)),u+=S,r.putImageData(d,0,v),v+=Ms;x<o&&(S=n*s*4,g.set(m.subarray(u,u+S)),r.putImageData(d,0,v))}else if(t.kind===ox.RGB_24BPP)for(k=Ms,S=n*k,x=0;x<o;x++){for(x>=i&&(k=s,S=n*k),p=0,v=S;v--;)g[p++]=m[u++],g[p++]=m[u++],g[p++]=m[u++],g[p++]=255;r.putImageData(d,0,x*Ms)}else throw new Error(`bad image kind: ${t.kind}`)}function hC(r,t){if(t.bitmap){r.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,s=e%Ms,i=(e-s)/Ms,o=s===0?i:i+1,d=r.createImageData(n,Ms);let u=0;const p=t.data,m=d.data;for(let g=0;g<o;g++){const x=g<i?Ms:s;({srcPos:u}=Fj({src:p,srcPos:u,dest:m,width:n,height:x,nonBlackColor:0})),r.putImageData(d,0,g*Ms)}}function Bm(r,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)r[n]!==void 0&&(t[n]=r[n]);r.setLineDash!==void 0&&(t.setLineDash(r.getLineDash()),t.lineDashOffset=r.lineDashOffset)}function nx(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:t}=r;t!=="none"&&t!==""&&(r.filter="none")}function pC(r,t){if(t)return!0;xt.singularValueDecompose2dScale(r,ai);const e=Math.fround(Qa.pixelRatio*ql.PDF_TO_CSS_UNITS);return ai[0]<=e&&ai[1]<=e}const $j=["butt","round","square"],zj=["miter","round","bevel"],Hj={},mC={};var ua,fS,gS,xS;const HA=class HA{constructor(t,e,n,s,i,{optionalContentConfig:o,markedContentStack:d=null},u,p,m){A(this,ua);this.ctx=t,this.current=new dC(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=o,this.cachedCanvases=new Uj(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=m??null}getObject(t,e,n=null){var s;return typeof e=="string"?((s=this.dependencyTracker)==null||s.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,d=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=d,n){const u=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...Fe(this.compositeCtx))}this.ctx.save(),nx(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Fe(this.ctx)}executeOperatorList(t,e,n,s,i){var E;const o=t.argsArray,d=t.fnArray;let u=e||0;const p=o.length;if(p===u)return u;const m=p-u>cC&&typeof n=="function",g=m?Date.now()+jj:0;let x=0;const v=this.commonObjs,k=this.objs;let S,_;for(;;){if(s!==void 0&&u===s.nextBreakPoint)return s.breakIt(u,n),u;if(!i||i(u))if(S=d[u],_=o[u]??null,S!==wf.dependency)_===null?this[S](u):this[S](u,..._);else for(const N of _){(E=this.dependencyTracker)==null||E.recordNamedData(N,u);const P=N.startsWith("g_")?v:k;if(!P.has(N))return P.get(N,n),u}if(u++,u===p)return u;if(m&&++x>cC){if(Date.now()>g)return n(),u;x=0}}}endDrawing(){C(this,ua,fS).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),C(this,ua,gS).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,s=t.height??t.displayHeight;let i=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),d=n,u=s,p="prescale1",m,g;for(;i>2&&d>1||o>2&&u>1;){let x=d,v=u;i>2&&d>1&&(x=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),i/=d/x),o>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,o/=u/v),m=this.cachedCanvases.getCanvas(p,x,v),g=m.context,g.clearRect(0,0,x,v),g.drawImage(t,0,0,d,u,0,0,x,v),t=m.canvas,d=x,u=v,p=p==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:d,paintHeight:u}}_createMaskCanvas(t,e){var W,Y;const n=this.ctx,{width:s,height:i}=e,o=this.current.fillColor,d=this.current.patternFill,u=Fe(n);let p,m,g,x;if((e.bitmap||e.data)&&e.count>1){const q=e.bitmap||e.data.buffer;m=JSON.stringify(d?u:[u.slice(0,4),o]),p=this._cachedBitmapsMap.get(q),p||(p=new Map,this._cachedBitmapsMap.set(q,p));const tt=p.get(m);if(tt&&!d){const et=Math.round(Math.min(u[0],u[2])+u[4]),lt=Math.round(Math.min(u[1],u[3])+u[5]);return(W=this.dependencyTracker)==null||W.recordDependencies(t,yi.transformAndFill),{canvas:tt,offsetX:et,offsetY:lt}}g=tt}g||(x=this.cachedCanvases.getCanvas("maskCanvas",s,i),hC(x.context,e));let v=xt.transform(u,[1/s,0,0,-1/i,0,0]);v=xt.transform(v,[1,0,0,1,0,-i]);const k=Gu.slice();xt.axialAlignedBoundingBox([0,0,s,i],v,k);const[S,_,E,N]=k,P=Math.round(E-S)||1,R=Math.round(N-_)||1,M=this.cachedCanvases.getCanvas("fillCanvas",P,R),O=M.context,I=S,H=_;O.translate(-I,-H),O.transform(...v),g||(g=this._scaleImage(x.canvas,wa(O)),g=g.img,p&&d&&p.set(m,g)),O.imageSmoothingEnabled=pC(Fe(O),e.interpolate),ex(O,g,0,0,g.width,g.height,0,0,s,i),O.globalCompositeOperation="source-in";const K=xt.transform(wa(O),[1,0,0,1,-I,-H]);return O.fillStyle=d?o.getPattern(n,this,K,Ln.FILL,t):o,O.fillRect(0,0,s,i),p&&!d&&(this.cachedCanvases.delete("fillCanvas"),p.set(m,M.canvas)),(Y=this.dependencyTracker)==null||Y.recordDependencies(t,yi.transformAndFill),{canvas:M.canvas,offsetX:Math.round(I),offsetY:Math.round(H)}}setLineWidth(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",t),this.ctx.lineCap=$j[e]}setLineJoin(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",t),this.ctx.lineJoin=zj[e]}setMiterLimit(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",t);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var n,s,i,o,d;for(const[u,p]of e)switch(u){case"LW":this.setLineWidth(t,p);break;case"LC":this.setLineCap(t,p);break;case"LJ":this.setLineJoin(t,p);break;case"ML":this.setMiterLimit(t,p);break;case"D":this.setDash(t,p[0],p[1]);break;case"RI":this.setRenderingIntent(t,p);break;case"FL":this.setFlatness(t,p);break;case"Font":this.setFont(t,p[0],p[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=p;break;case"ca":(s=this.dependencyTracker)==null||s.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=p;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=p;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",t),this.current.activeSMask=p?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(d=this.dependencyTracker)==null||d.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(p);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,e,n);this.suspendedCtx=this.ctx;const o=this.ctx=i.context;o.setTransform(this.suspendedCtx.getTransform()),Bm(this.suspendedCtx,o),Lj(o,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Bm(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){const i=s[0],o=s[1],d=s[2]-i,u=s[3]-o;d===0||u===0||(this.genericComposeSMask(e.context,n,d,u,e.subtype,e.backdrop,e.transferMap,i,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,i,o,d,u,p,m,g){let x=t.canvas,v=u-m,k=p-g;if(o)if(v<0||k<0||v+n>x.width||k+s>x.height){const _=this.cachedCanvases.getCanvas("maskExtension",n,s),E=_.context;E.drawImage(x,-v,-k),E.globalCompositeOperation="destination-atop",E.fillStyle=o,E.fillRect(0,0,n,s),E.globalCompositeOperation="source-over",x=_.canvas,v=k=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(v,k,n,s),t.clip(_),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(v,k,n,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),i==="Alpha"&&d?e.filter=this.filterFactory.addAlphaFilter(d):i==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(d));const S=new Path2D;S.rect(u,p,n,s),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(x,v,k,n,s,u,p,n,s),e.restore()}save(t){var n;this.inSMaskMode&&Bm(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(n=this.dependencyTracker)==null||n.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Bm(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,s,i,o,d){var u;(u=this.dependencyTracker)==null||u.recordIncrementalData("transform",t),this.ctx.transform(e,n,s,i,o,d),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,s){let[i]=n;if(!s){i||(i=n[0]=new Path2D),this[e](t,i);return}if(this.dependencyTracker!==null){const o=e===wf.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,s[0]-o,s[2]+o,s[1]-o,s[3]+o).recordDependencies(t,["transform"])}i instanceof Path2D||(i=n[0]=p3(i)),xt.axialAlignedBoundingBox(s,Fe(this.ctx),this.current.minMax),this[e](t,i),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){var o;const s=this.ctx,i=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const d=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=i.getPattern(s,this,wa(s),Ln.STROKE,t),d){const u=new Path2D;u.addPath(e,s.getTransform().invertSelf().multiplySelf(d)),e=u}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);(o=this.dependencyTracker)==null||o.recordDependencies(t,yi.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Ln.STROKE,Fe(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){var p,m,g;const s=this.ctx,i=this.current.fillColor,o=this.current.patternFill;let d=!1;if(o){const x=i.isModifyingCurrentTransform()?s.getTransform():null;if((p=this.dependencyTracker)==null||p.save(t),s.save(),s.fillStyle=i.getPattern(s,this,wa(s),Ln.FILL,t),x){const v=new Path2D;v.addPath(e,s.getTransform().invertSelf().multiplySelf(x)),e=v}d=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),(m=this.dependencyTracker)==null||m.recordDependencies(t,yi.fill),d&&(s.restore(),(g=this.dependencyTracker)==null||g.restore(t)),n&&this.consumePath(t,e,u)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var n;this.ctx.fill(e),(n=this.dependencyTracker)==null||n.recordDependencies(t,yi.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=Hj}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=mC}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;e!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",t),s.recordCloseMarker(t)}if(e!==void 0){const s=new Path2D,i=n.getTransform().invertSelf();for(const{transform:o,x:d,y:u,fontSize:p,path:m}of e)m&&s.addPath(m,new DOMMatrix(o).preMultiplySelf(i).translate(d,u).scale(p,-p));n.clip(s)}delete this.pendingTextPaths}setCharSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){var g,x;(g=this.dependencyTracker)==null||g.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const s=this.commonObjs.get(e),i=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=s.fontMatrix||Fw,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Mt("Invalid font matrix for font "+e),n<0?(n=-n,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const o=s.loadedName||"sans-serif",d=((x=s.systemFontInfo)==null?void 0:x.css)||`"${o}", ${s.fallbackName}`;let u="normal";s.black?u="900":s.bold&&(u="bold");const p=s.italic?"italic":"normal";let m=n;n<oC?m=oC:n>lC&&(m=lC),this.current.fontSizeScale=n/m,this.ctx.font=`${p} ${u} ${m}px ${d}`}setTextRenderingMode(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,n,s,i,o){var E,N,P,R;const d=this.ctx,u=this.current,p=u.font,m=u.textRenderingMode,g=u.fontSize/u.fontSizeScale,x=m&Mn.FILL_STROKE_MASK,v=!!(m&Mn.ADD_TO_PATH_FLAG),k=u.patternFill&&!p.missingFile,S=u.patternStroke&&!p.missingFile;let _;if((p.disableFontFace||v||k||S)&&!p.missingFile&&(_=p.getPathGenerator(this.commonObjs,e)),_&&(p.disableFontFace||k||S)){d.save(),d.translate(n,s),d.scale(g,-g),(E=this.dependencyTracker)==null||E.recordCharacterBBox(t,d,p);let M;if(x===Mn.FILL||x===Mn.FILL_STROKE)if(i){M=d.getTransform(),d.setTransform(...i);const O=C(this,ua,xS).call(this,_,M,i);d.fill(O)}else d.fill(_);if(x===Mn.STROKE||x===Mn.FILL_STROKE)if(o){M||(M=d.getTransform()),d.setTransform(...o);const{a:O,b:I,c:H,d:K}=M,W=xt.inverseTransform(o),Y=xt.transform([O,I,H,K,0,0],W);xt.singularValueDecompose2dScale(Y,ai),d.lineWidth*=Math.max(ai[0],ai[1])/g,d.stroke(C(this,ua,xS).call(this,_,M,o))}else d.lineWidth/=g,d.stroke(_);d.restore()}else(x===Mn.FILL||x===Mn.FILL_STROKE)&&(d.fillText(e,n,s),(N=this.dependencyTracker)==null||N.recordCharacterBBox(t,d,p,g,n,s,()=>d.measureText(e))),(x===Mn.STROKE||x===Mn.FILL_STROKE)&&(this.dependencyTracker&&((P=this.dependencyTracker)==null||P.recordCharacterBBox(t,d,p,g,n,s,()=>d.measureText(e)).recordDependencies(t,yi.stroke)),d.strokeText(e,n,s));v&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Fe(d),x:n,y:s,fontSize:g,path:_}),(R=this.dependencyTracker)==null||R.recordCharacterBBox(t,d,p,g,n,s))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return Ft(this,"isFontSubpixelAAEnabled",n)}showText(t,e){var H,K,W,Y;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,yi.showText).resetBBox(t),this.current.textRenderingMode&Mn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,s=n.font;if(s.isType3Font){this.showType3Text(t,e),(H=this.dependencyTracker)==null||H.recordShowTextOperation(t);return}const i=n.fontSize;if(i===0){(K=this.dependencyTracker)==null||K.recordOperation(t);return}const o=this.ctx,d=n.fontSizeScale,u=n.charSpacing,p=n.wordSpacing,m=n.fontDirection,g=n.textHScale*m,x=e.length,v=s.vertical,k=v?1:-1,S=s.defaultVMetrics,_=i*n.fontMatrix[0],E=n.textRenderingMode===Mn.FILL&&!s.disableFontFace&&!n.patternFill;o.save(),n.textMatrix&&o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),m>0?o.scale(g,-1):o.scale(g,1);let N,P;if(n.patternFill){o.save();const q=n.fillColor.getPattern(o,this,wa(o),Ln.FILL,t);N=Fe(o),o.restore(),o.fillStyle=q}if(n.patternStroke){o.save();const q=n.strokeColor.getPattern(o,this,wa(o),Ln.STROKE,t);P=Fe(o),o.restore(),o.strokeStyle=q}let R=n.lineWidth;const M=n.textMatrixScale;if(M===0||R===0){const q=n.textRenderingMode&Mn.FILL_STROKE_MASK;(q===Mn.STROKE||q===Mn.FILL_STROKE)&&(R=this.getSinglePixelWidth())}else R/=M;if(d!==1&&(o.scale(d,d),R/=d),o.lineWidth=R,s.isInvalidPDFjsFont){const q=[];let tt=0;for(const lt of e)q.push(lt.unicode),tt+=lt.width;const et=q.join("");if(o.fillText(et,0,0),this.dependencyTracker!==null){const lt=o.measureText(et);this.dependencyTracker.recordBBox(t,this.ctx,-lt.actualBoundingBoxLeft,lt.actualBoundingBoxRight,-lt.actualBoundingBoxAscent,lt.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=tt*_*g,o.restore(),this.compose();return}let O=0,I;for(I=0;I<x;++I){const q=e[I];if(typeof q=="number"){O+=k*q*i/1e3;continue}let tt=!1;const et=(q.isSpace?p:0)+u,lt=q.fontChar,ot=q.accent;let it,U,Q=q.width;if(v){const G=q.vmetric||S,ut=-(q.vmetric?G[1]:Q*.5)*_,St=G[2]*_;Q=G?-G[0]:Q,it=ut/d,U=(O+St)/d}else it=O/d,U=0;let at;if(s.remeasure&&Q>0){at=o.measureText(lt);const G=at.width*1e3/i*d;if(Q<G&&this.isFontSubpixelAAEnabled){const ut=Q/G;tt=!0,o.save(),o.scale(ut,1),it/=ut}else Q!==G&&(it+=(Q-G)/2e3*i/d)}if(this.contentVisible&&(q.isInFont||s.missingFile)){if(E&&!ot)o.fillText(lt,it,U),(W=this.dependencyTracker)==null||W.recordCharacterBBox(t,o,at?{bbox:null}:s,i/d,it,U,()=>at??o.measureText(lt));else if(this.paintChar(t,lt,it,U,N,P),ot){const G=it+i*ot.offset.x/d,ut=U-i*ot.offset.y/d;this.paintChar(t,ot.fontChar,G,ut,N,P)}}const j=v?Q*_-et*m:Q*_+et*m;O+=j,tt&&o.restore()}v?n.y-=O:n.x+=O*g,o.restore(),this.compose(),(Y=this.dependencyTracker)==null||Y.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,s=this.current,i=s.font,o=s.fontSize,d=s.fontDirection,u=i.vertical?1:-1,p=s.charSpacing,m=s.wordSpacing,g=s.textHScale*d,x=s.fontMatrix||Fw,v=e.length,k=s.textRenderingMode===Mn.INVISIBLE;let S,_,E,N;if(k||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),s.textMatrix&&n.transform(...s.textMatrix),n.translate(s.x,s.y+s.textRise),n.scale(g,d);const P=this.dependencyTracker;for(this.dependencyTracker=P?new ay(P,t):null,S=0;S<v;++S){if(_=e[S],typeof _=="number"){N=u*_*o/1e3,this.ctx.translate(N,0),s.x+=N*g;continue}const R=(_.isSpace?m:0)+p,M=i.charProcOperatorList[_.operatorListId];M?this.contentVisible&&(this.save(),n.scale(o,o),n.transform(...x),this.executeOperatorList(M),this.restore()):Mt(`Type3 character "${_.operatorListId}" is not available.`);const O=[_.width,0];xt.applyTransform(O,x),E=O[0]*o+R,n.translate(E,0),s.x+=E*g}n.restore(),P&&(this.dependencyTracker=P)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,s,i,o,d){var p;const u=new Path2D;u.rect(s,i,o-s,d-i),this.ctx.clip(u),(p=this.dependencyTracker)==null||p.recordBBox(t,this.ctx,s,o,i,d).recordClipBox(t,this.ctx,s,o,i,d),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const s=this.baseTransform||Fe(this.ctx),i={createCanvasGraphics:(o,d)=>new HA(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new ay(this.dependencyTracker,d,!0):null)};n=new mS(e,this.ctx,i,s)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=Ij(this.getObject(t,e)),this.cachedPatterns.set(e,s)),n&&(s.matrix=n),s}shadingFill(t,e){var o;if(!this.contentVisible)return;const n=this.ctx;this.save(t);const s=this._getPattern(t,e);n.fillStyle=s.getPattern(n,this,wa(n),Ln.SHADING,t);const i=wa(n);if(i){const{width:d,height:u}=n.canvas,p=Gu.slice();xt.axialAlignedBoundingBox([0,0,d,u],i,p);const[m,g,x,v]=p;this.ctx.fillRect(m,g,x-m,v-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,yi.transform).recordDependencies(t,yi.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){ye("Should not call beginInlineImage")}beginImageData(){ye("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){var s;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Fe(this.ctx),n)){xt.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[i,o,d,u]=n,p=new Path2D;p.rect(i,o,d-i,u-o),this.ctx.clip(p),(s=this.dependencyTracker)==null||s.recordClipBox(t,this.ctx,i,d,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var P;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||jy("TODO: Support non-isolated groups."),e.knockout&&Mt("Knockout groups not supported.");const s=Fe(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=Gu.slice();xt.axialAlignedBoundingBox(e.bbox,Fe(n),i);const o=[0,0,n.canvas.width,n.canvas.height];i=xt.intersect(i,o)||[0,0,0,0];const d=Math.floor(i[0]),u=Math.floor(i[1]),p=Math.max(Math.ceil(i[2])-d,1),m=Math.max(Math.ceil(i[3])-u,1);this.current.startNewPathAndClipBox([0,0,p,m]);let g="groupAt"+this.groupLevel;e.smask&&(g+="_smask_"+this.smaskCounter++%2);const x=this.cachedCanvases.getCanvas(g,p,m),v=x.context;v.translate(-d,-u),v.transform(...s);let k=new Path2D;const[S,_,E,N]=e.bbox;if(k.rect(S,_,E-S,N-_),e.matrix){const R=new Path2D;R.addPath(k,new DOMMatrix(e.matrix)),k=R}v.clip(k),e.smask&&this.smaskStack.push({canvas:x.canvas,context:v,offsetX:d,offsetY:u,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(d,u),n.save()),Bm(n,v),this.ctx=v,(P=this.dependencyTracker)==null||P.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){var i;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Fe(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const d=Gu.slice();xt.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,d),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(d)}}beginAnnotation(t,e,n,s,i,o){if(C(this,ua,fS).call(this),nx(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const d=n[2]-n[0],u=n[3]-n[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=d,n[3]=u,xt.singularValueDecompose2dScale(Fe(this.ctx),ai);const{viewportScale:p}=this,m=Math.ceil(d*this.outputScaleX*p),g=Math.ceil(u*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(m,g);const{canvas:x,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(e,x),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(ai[0],0,0,-ai[1],0,u*ai[1]),nx(this.ctx)}else{nx(this.ctx),this.endPath(t);const p=new Path2D;p.rect(n[0],n[1],d,u),this.ctx.clip(p)}}this.current=new dC(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...s),this.transform(t,...i)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),C(this,ua,gS).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var d;if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const s=this.ctx,i=this._createMaskCanvas(t,e),o=i.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,i.offsetX,i.offsetY),(d=this.dependencyTracker)==null||d.resetBBox(t).recordBBox(t,this.ctx,i.offsetX,i.offsetX+o.width,i.offsetY,i.offsetY+o.height).recordOperation(t),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,s=0,i=0,o,d){var g,x,v;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const u=this.ctx;u.save();const p=Fe(u);u.transform(n,s,i,o,0,0);const m=this._createMaskCanvas(t,e);u.setTransform(1,0,0,1,m.offsetX-p[4],m.offsetY-p[5]),(g=this.dependencyTracker)==null||g.resetBBox(t);for(let k=0,S=d.length;k<S;k+=2){const _=xt.transform(p,[n,s,i,o,d[k],d[k+1]]);u.drawImage(m.canvas,_[4],_[5]),(x=this.dependencyTracker)==null||x.recordBBox(t,this.ctx,_[4],_[4]+m.canvas.width,_[5],_[5]+m.canvas.height)}u.restore(),this.compose(),(v=this.dependencyTracker)==null||v.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var o,d,u;if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,i=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(t).recordDependencies(t,yi.transformAndFill);for(const p of e){const{data:m,width:g,height:x,transform:v}=p,k=this.cachedCanvases.getCanvas("maskCanvas",g,x),S=k.context;S.save();const _=this.getObject(t,m,p);hC(S,_),S.globalCompositeOperation="source-in",S.fillStyle=i?s.getPattern(S,this,wa(n),Ln.FILL,t):s,S.fillRect(0,0,g,x),S.restore(),n.save(),n.transform(...v),n.scale(1,-1),ex(n,k.canvas,0,0,g,x,0,-1,1,1),(d=this.dependencyTracker)==null||d.recordBBox(t,n,0,g,0,x),n.restore()}this.compose(),(u=this.dependencyTracker)==null||u.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){Mt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,s,i){if(!this.contentVisible)return;const o=this.getObject(t,e);if(!o){Mt("Dependent image isn't ready yet");return}const d=o.width,u=o.height,p=[];for(let m=0,g=i.length;m<g;m+=2)p.push({transform:[n,0,0,s,i[m],i[m+1]],x:0,y:0,w:d,h:u});this.paintInlineImageXObjectGroup(t,o,p)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:s}=t,i=this.cachedCanvases.getCanvas("inlineImage",n,s),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",i.canvas}paintInlineImageXObject(t,e){var p;if(!this.contentVisible)return;const n=e.width,s=e.height,i=this.ctx;this.save(t);const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none"),i.scale(1/n,-1/s);let d;if(e.bitmap)d=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)d=e;else{const g=this.cachedCanvases.getCanvas("inlineImage",n,s).context;uC(g,e),d=this.applyTransferMapsToCanvas(g)}const u=this._scaleImage(d,wa(i));i.imageSmoothingEnabled=pC(Fe(i),e.interpolate),(p=this.dependencyTracker)==null||p.resetBBox(t).recordBBox(t,i,0,n,-s,0).recordDependencies(t,yi.imageXObject).recordOperation(t),ex(i,u.img,0,0,u.paintWidth,u.paintHeight,0,-s,n,s),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){var o,d,u;if(!this.contentVisible)return;const s=this.ctx;let i;if(e.bitmap)i=e.bitmap;else{const p=e.width,m=e.height,x=this.cachedCanvases.getCanvas("inlineImage",p,m).context;uC(x,e),i=this.applyTransferMapsToCanvas(x)}(o=this.dependencyTracker)==null||o.resetBBox(t);for(const p of n)s.save(),s.transform(...p.transform),s.scale(1,-1),ex(s,i,p.x,p.y,p.w,p.h,0,-1,1,1),(d=this.dependencyTracker)==null||d.recordBBox(t,s,0,1,-1,0),s.restore();(u=this.dependencyTracker)==null||u.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,yi.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){var o,d;const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const i=this.ctx;this.pendingClip?(s||(this.pendingClip===mC?i.clip(e,"evenodd"):i.clip(e)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(d=this.dependencyTracker)==null||d.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Fe(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:s,d:i}=this.ctx.getTransform();let o,d;if(n===0&&s===0){const u=Math.abs(e),p=Math.abs(i);if(u===p)if(t===0)o=d=1/u;else{const m=u*t;o=d=m<1?1/m:1}else if(t===0)o=1/u,d=1/p;else{const m=u*t,g=p*t;o=m<1?1/m:1,d=g<1?1/g:1}}else{const u=Math.abs(e*i-n*s),p=Math.hypot(e,n),m=Math.hypot(s,i);if(t===0)o=m/u,d=p/u;else{const g=t*u;o=m>g?m/g:1,d=p>g?p/g:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=d}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:s}}=this,[i,o]=this.getScaleForStroking();if(i===o){n.lineWidth=(s||1)*i,n.stroke(t);return}const d=n.getLineDash();e&&n.save(),n.scale(i,o),Qb.a=1/i,Qb.d=1/o;const u=new Path2D;if(u.addPath(t,Qb),d.length>0){const p=Math.max(i,o);n.setLineDash(d.map(m=>m/p)),n.lineDashOffset/=p}n.lineWidth=s||1,n.stroke(u),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};ua=new WeakSet,fS=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},gS=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},xS=function(t,e,n){const s=new Path2D;return s.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),s};let Zu=HA;for(const r in wf)Zu.prototype[r]!==void 0&&(Zu.prototype[wf[r]]=Zu.prototype[r]);var xg,yg;class Xa{static get workerPort(){return l(this,xg)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");b(this,xg,t)}static get workerSrc(){return l(this,yg)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");b(this,yg,t)}}xg=new WeakMap,yg=new WeakMap,A(Xa,xg,null),A(Xa,yg,"");var Kh,vg;class qj{constructor({parsedData:t,rawData:e}){A(this,Kh);A(this,vg);b(this,Kh,t),b(this,vg,e)}getRaw(){return l(this,vg)}get(t){return l(this,Kh).get(t)??null}[Symbol.iterator](){return l(this,Kh).entries()}}Kh=new WeakMap,vg=new WeakMap;const Hu=Symbol("INTERNAL");var bg,wg,Sg,Xh;class Vj{constructor(t,{name:e,intent:n,usage:s,rbGroups:i}){A(this,bg,!1);A(this,wg,!1);A(this,Sg,!1);A(this,Xh,!0);b(this,bg,!!(t&ii.DISPLAY)),b(this,wg,!!(t&ii.PRINT)),this.name=e,this.intent=n,this.usage=s,this.rbGroups=i}get visible(){if(l(this,Sg))return l(this,Xh);if(!l(this,Xh))return!1;const{print:t,view:e}=this.usage;return l(this,bg)?(e==null?void 0:e.viewState)!=="OFF":l(this,wg)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Hu&&ye("Internal method `_setVisible` called."),b(this,Sg,n),b(this,Xh,e)}}bg=new WeakMap,wg=new WeakMap,Sg=new WeakMap,Xh=new WeakMap;var xl,he,Yh,Qh,Ag,yS;class Wj{constructor(t,e=ii.DISPLAY){A(this,Ag);A(this,xl,null);A(this,he,new Map);A(this,Yh,null);A(this,Qh,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,b(this,Qh,t.order);for(const n of t.groups)l(this,he).set(n.id,new Vj(e,n));if(t.baseState==="OFF")for(const n of l(this,he).values())n._setVisible(Hu,!1);for(const n of t.on)l(this,he).get(n)._setVisible(Hu,!0);for(const n of t.off)l(this,he).get(n)._setVisible(Hu,!1);b(this,Yh,this.getHash())}}isVisible(t){if(l(this,he).size===0)return!0;if(!t)return jy("Optional content group not defined."),!0;if(t.type==="OCG")return l(this,he).has(t.id)?l(this,he).get(t.id).visible:(Mt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return C(this,Ag,yS).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!l(this,he).has(e))return Mt(`Optional content group not found: ${e}`),!0;if(l(this,he).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!l(this,he).has(e))return Mt(`Optional content group not found: ${e}`),!0;if(!l(this,he).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!l(this,he).has(e))return Mt(`Optional content group not found: ${e}`),!0;if(!l(this,he).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!l(this,he).has(e))return Mt(`Optional content group not found: ${e}`),!0;if(l(this,he).get(e).visible)return!1}return!0}return Mt(`Unknown optional content policy ${t.policy}.`),!0}return Mt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var i;const s=l(this,he).get(t);if(!s){Mt(`Optional content group not found: ${t}`);return}if(n&&e&&s.rbGroups.length)for(const o of s.rbGroups)for(const d of o)d!==t&&((i=l(this,he).get(d))==null||i._setVisible(Hu,!1,!0));s._setVisible(Hu,!!e,!0),b(this,xl,null)}setOCGState({state:t,preserveRB:e}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const i=l(this,he).get(s);if(i)switch(n){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!i.visible,e);break}}b(this,xl,null)}get hasInitialVisibility(){return l(this,Yh)===null||this.getHash()===l(this,Yh)}getOrder(){return l(this,he).size?l(this,Qh)?l(this,Qh).slice():[...l(this,he).keys()]:null}getGroup(t){return l(this,he).get(t)||null}getHash(){if(l(this,xl)!==null)return l(this,xl);const t=new V3;for(const[e,n]of l(this,he))t.update(`${e}:${n.visible}`);return b(this,xl,t.hexdigest())}[Symbol.iterator](){return l(this,he).entries()}}xl=new WeakMap,he=new WeakMap,Yh=new WeakMap,Qh=new WeakMap,Ag=new WeakSet,yS=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let s=1;s<e;s++){const i=t[s];let o;if(Array.isArray(i))o=C(this,Ag,yS).call(this,i);else if(l(this,he).has(i))o=l(this,he).get(i).visible;else return Mt(`Optional content group not found: ${i}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class Gj{constructor(t,{disableRange:e=!1,disableStream:n=!1}){Gt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:o,contentDispositionFilename:d}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=d,(i==null?void 0:i.length)>0){const u=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((u,p)=>{this._onReceiveData({begin:u,chunk:p})}),t.addProgressListener((u,p)=>{this._onProgress({loaded:u,total:p})}),t.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(i){return i._begin!==t?!1:(i._enqueue(n),!0)});Gt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,s,i;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(i=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||i.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Gt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Kj(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Xj(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class Kj{constructor(t,e,n=!1,s=null){this._stream=t,this._done=n||!1,this._filename=NA(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Xj{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Yj(r){let t=!0,e=n("filename\\*","i").exec(r);if(e){e=e[1];let m=d(e);return m=unescape(m),m=u(m),m=p(m),i(m)}if(e=o(r),e){const m=p(e);return i(m)}if(e=n("filename","i").exec(r),e){e=e[1];let m=d(e);return m=p(m),i(m)}function n(m,g){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function s(m,g){if(m){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const x=new TextDecoder(m,{fatal:!0}),v=w0(g);g=x.decode(v),t=!1}catch{}}return g}function i(m){return t&&/[\x80-\xff]/.test(m)&&(m=s("utf-8",m),t&&(m=s("iso-8859-1",m))),m}function o(m){const g=[];let x;const v=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(x=v.exec(m))!==null;){let[,S,_,E]=x;if(S=parseInt(S,10),S in g){if(S===0)break;continue}g[S]=[_,E]}const k=[];for(let S=0;S<g.length&&S in g;++S){let[_,E]=g[S];E=d(E),_&&(E=unescape(E),S===0&&(E=u(E))),k.push(E)}return k.join("")}function d(m){if(m.startsWith('"')){const g=m.slice(1).split('\\"');for(let x=0;x<g.length;++x){const v=g[x].indexOf('"');v!==-1&&(g[x]=g[x].slice(0,v),g.length=x+1),g[x]=g[x].replaceAll(/\\(.)/g,"$1")}m=g.join('"')}return m}function u(m){const g=m.indexOf("'");if(g===-1)return m;const x=m.slice(0,g),k=m.slice(g+1).replace(/^[^']*'/,"");return s(x,k)}function p(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,x,v,k){if(v==="q"||v==="Q")return k=k.replaceAll("_"," "),k=k.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,_){return String.fromCharCode(parseInt(_,16))}),s(x,k);try{k=atob(k)}catch{}return s(x,k)})}return""}function sP(r,t){const e=new Headers;if(!r||!t||typeof t!="object")return e;for(const n in t){const s=t[n];s!==void 0&&e.append(n,s)}return e}function Uy(r){var t;return((t=URL.parse(r))==null?void 0:t.origin)??null}function iP({responseHeaders:r,isHttp:t,rangeChunkSize:e,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(r.get("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*e)||n||!t||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function aP(r){const t=r.get("Content-Disposition");if(t){let e=Yj(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(NA(e))return e}return null}function E0(r,t){return new Zx(`Unexpected server response (${r}) while retrieving PDF "${t}".`,r,r===404||r===0&&t.startsWith("file:"))}function rP(r){return r===200||r===206}function oP(r,t,e){return{method:"GET",headers:r,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function lP(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(Mt(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class Qj{constructor(t){nt(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=sP(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Gt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Jj(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Zj(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class Jj{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),s=e.url;fetch(s,oP(n,this._withCredentials,this._abortController)).then(i=>{if(t._responseOrigin=Uy(i.url),!rP(i.status))throw E0(i.status,s);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:d,suggestedLength:u}=iP({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=d,this._contentLength=u||this._contentLength,this._filename=aP(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Hl("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:lP(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class Zj{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const i=new Headers(t.headers);i.append("Range",`bytes=${e}-${n-1}`);const o=s.url;fetch(o,oP(i,this._withCredentials,this._abortController)).then(d=>{const u=Uy(d.url);if(u!==t._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${t._responseOrigin}".`);if(!rP(d.status))throw E0(d.status,o);this._readCapability.resolve(),this._reader=d.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:lP(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Jb=200,Zb=206;function tL(r){const t=r.response;return typeof t!="string"?t:w0(t).buffer}class eL{constructor({url:t,httpHeaders:e,withCredentials:n}){nt(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=sP(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[i,o]of this.headers)e.setRequestHeader(i,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=Zb):s.expectedStatus=Jb,e.responseType="arraybuffer",Gt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var s;const n=this.pendingRequests[t];n&&((s=n.onProgress)==null||s.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){n.onError(s.status);return}const i=s.status||Jb;if(!(i===Jb&&n.expectedStatus===Zb)&&i!==n.expectedStatus){n.onError(s.status);return}const d=tL(s);if(i===Zb){const u=s.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);p?n.onDone({begin:parseInt(p[1],10),chunk:d}):(Mt('Missing or invalid "Content-Range" header.'),n.onError(0))}else d?n.onDone({begin:0,chunk:d}):n.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class nL{constructor(t){this._source=t,this._manager=new eL(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Gt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new sL(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new iL(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class sL{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Uy(e.responseURL);const n=e.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(d=>{const[u,...p]=d.split(": ");return[u,p.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:o}=iP({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=aP(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=E0(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class iL{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Uy((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=E0(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const aL=/^[a-z][a-z0-9\-+.]+:/i;function rL(r){if(aL.test(r))return new URL(r);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(r))}class oL{constructor(t){this.source=t,this.url=rL(t.url),Gt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Gt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new lL(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new cL(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class lL{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=E0(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Hl("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class cL{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Im=Symbol("INITIAL_DATA");var qs,_g,vS;class cP{constructor(){A(this,_g);A(this,qs,Object.create(null))}get(t,e=null){if(e){const s=C(this,_g,vS).call(this,t);return s.promise.then(()=>e(s.data)),null}const n=l(this,qs)[t];if(!n||n.data===Im)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=l(this,qs)[t];return!!e&&e.data!==Im}delete(t){const e=l(this,qs)[t];return!e||e.data===Im?!1:(delete l(this,qs)[t],!0)}resolve(t,e=null){const n=C(this,_g,vS).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in l(this,qs)){const{data:n}=l(this,qs)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}b(this,qs,Object.create(null))}*[Symbol.iterator](){for(const t in l(this,qs)){const{data:e}=l(this,qs)[t];e!==Im&&(yield[t,e])}}}qs=new WeakMap,_g=new WeakSet,vS=function(t){var e;return(e=l(this,qs))[t]||(e[t]={...Promise.withResolvers(),data:Im})};const dL=1e5,fC=30;var MC,yl,Ds,kg,Eg,hd,jr,Cg,Tg,pd,Jh,Zh,vl,tp,Pg,ep,md,Dg,Ng,np,fd,Rg,bl,sp,lo,dP,uP,bS,ci,yx,wS,hP,pP;const un=class un{constructor({textContentSource:t,container:e,viewport:n}){A(this,lo);A(this,yl,Promise.withResolvers());A(this,Ds,null);A(this,kg,!1);A(this,Eg,!!((MC=globalThis.FontInspector)!=null&&MC.enabled));A(this,hd,null);A(this,jr,null);A(this,Cg,0);A(this,Tg,0);A(this,pd,null);A(this,Jh,null);A(this,Zh,0);A(this,vl,0);A(this,tp,Object.create(null));A(this,Pg,[]);A(this,ep,null);A(this,md,[]);A(this,Dg,new WeakMap);A(this,Ng,null);var u;if(t instanceof ReadableStream)b(this,ep,t);else if(typeof t=="object")b(this,ep,new ReadableStream({start(p){p.enqueue(t),p.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,Ds,b(this,Jh,e)),b(this,vl,n.scale*Qa.pixelRatio),b(this,Zh,n.rotation),b(this,jr,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:i,pageX:o,pageY:d}=n.rawDims;b(this,Ng,[1,0,0,-1,-o,d+i]),b(this,Tg,s),b(this,Cg,i),C(u=un,ci,hP).call(u),Zd(e,n),l(this,yl).promise.finally(()=>{l(un,sp).delete(this),b(this,jr,null),b(this,tp,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=zn.platform;return Ft(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{l(this,pd).read().then(({value:e,done:n})=>{if(n){l(this,yl).resolve();return}l(this,hd)??b(this,hd,e.lang),Object.assign(l(this,tp),e.styles),C(this,lo,dP).call(this,e.items),t()},l(this,yl).reject)};return b(this,pd,l(this,ep).getReader()),l(un,sp).add(this),t(),l(this,yl).promise}update({viewport:t,onBefore:e=null}){var i;const n=t.scale*Qa.pixelRatio,s=t.rotation;if(s!==l(this,Zh)&&(e==null||e(),b(this,Zh,s),Zd(l(this,Jh),{rotation:s})),n!==l(this,vl)){e==null||e(),b(this,vl,n);const o={div:null,properties:null,ctx:C(i=un,ci,yx).call(i,l(this,hd))};for(const d of l(this,md))o.properties=l(this,Dg).get(d),o.div=d,C(this,lo,bS).call(this,o)}}cancel(){var e;const t=new Hl("TextLayer task cancelled.");(e=l(this,pd))==null||e.cancel(t).catch(()=>{}),b(this,pd,null),l(this,yl).reject(t)}get textDivs(){return l(this,md)}get textContentItemsStr(){return l(this,Pg)}static cleanup(){if(!(l(this,sp).size>0)){l(this,np).clear();for(const{canvas:t}of l(this,fd).values())t.remove();l(this,fd).clear()}}};yl=new WeakMap,Ds=new WeakMap,kg=new WeakMap,Eg=new WeakMap,hd=new WeakMap,jr=new WeakMap,Cg=new WeakMap,Tg=new WeakMap,pd=new WeakMap,Jh=new WeakMap,Zh=new WeakMap,vl=new WeakMap,tp=new WeakMap,Pg=new WeakMap,ep=new WeakMap,md=new WeakMap,Dg=new WeakMap,Ng=new WeakMap,np=new WeakMap,fd=new WeakMap,Rg=new WeakMap,bl=new WeakMap,sp=new WeakMap,lo=new WeakSet,dP=function(t){var s,i;if(l(this,kg))return;(i=l(this,jr)).ctx??(i.ctx=C(s=un,ci,yx).call(s,l(this,hd)));const e=l(this,md),n=l(this,Pg);for(const o of t){if(e.length>dL){Mt("Ignoring additional textDivs for performance reasons."),b(this,kg,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const d=l(this,Ds);b(this,Ds,document.createElement("span")),l(this,Ds).classList.add("markedContent"),o.id&&l(this,Ds).setAttribute("id",`${o.id}`),d.append(l(this,Ds))}else o.type==="endMarkedContent"&&b(this,Ds,l(this,Ds).parentNode);continue}n.push(o.str),C(this,lo,uP).call(this,o)}},uP=function(t){var S;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};l(this,md).push(e);const s=xt.transform(l(this,Ng),t.transform);let i=Math.atan2(s[1],s[0]);const o=l(this,tp)[t.fontName];o.vertical&&(i+=Math.PI/2);let d=l(this,Eg)&&o.fontSubstitution||o.fontFamily;d=un.fontFamilyMap.get(d)||d;const u=Math.hypot(s[2],s[3]),p=u*C(S=un,ci,pP).call(S,d,o,l(this,hd));let m,g;i===0?(m=s[4],g=s[5]-p):(m=s[4]+p*Math.sin(i),g=s[5]-p*Math.cos(i));const x="calc(var(--total-scale-factor) *",v=e.style;l(this,Ds)===l(this,Jh)?(v.left=`${(100*m/l(this,Tg)).toFixed(2)}%`,v.top=`${(100*g/l(this,Cg)).toFixed(2)}%`):(v.left=`${x}${m.toFixed(2)}px)`,v.top=`${x}${g.toFixed(2)}px)`),v.fontSize=`${x}${(l(un,bl)*u).toFixed(2)}px)`,v.fontFamily=d,n.fontSize=u,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,l(this,Eg)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),i!==0&&(n.angle=i*(180/Math.PI));let k=!1;if(t.str.length>1)k=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const _=Math.abs(t.transform[0]),E=Math.abs(t.transform[3]);_!==E&&Math.max(_,E)/Math.min(_,E)>1.5&&(k=!0)}if(k&&(n.canvasWidth=o.vertical?t.height:t.width),l(this,Dg).set(e,n),l(this,jr).div=e,l(this,jr).properties=n,C(this,lo,bS).call(this,l(this,jr)),n.hasText&&l(this,Ds).append(e),n.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),l(this,Ds).append(_)}},bS=function(t){var d;const{div:e,properties:n,ctx:s}=t,{style:i}=e;let o="";if(l(un,bl)>1&&(o=`scale(${1/l(un,bl)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=i,{canvasWidth:p,fontSize:m}=n;C(d=un,ci,wS).call(d,s,m*l(this,vl),u);const{width:g}=s.measureText(e.textContent);g>0&&(o=`scaleX(${p*l(this,vl)/g}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(i.transform=o)},ci=new WeakSet,yx=function(t=null){let e=l(this,fd).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,fd).set(t,e),l(this,Rg).set(e,{size:0,family:""})}return e},wS=function(t,e,n){const s=l(this,Rg).get(t);e===s.size&&n===s.family||(t.font=`${e}px ${n}`,s.size=e,s.family=n)},hP=function(){if(l(this,bl)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),b(this,bl,t.getBoundingClientRect().height),t.remove()},pP=function(t,e,n){const s=l(this,np).get(t);if(s)return s;const i=C(this,ci,yx).call(this,n);i.canvas.width=i.canvas.height=fC,C(this,ci,wS).call(this,i,fC,t);const o=i.measureText(""),d=o.fontBoundingBoxAscent,u=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let p=.8;return d?p=d/(d+u):(zn.platform.isFirefox&&Mt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?p=e.ascent:e.descent&&(p=1+e.descent)),l(this,np).set(t,p),p},A(un,ci),A(un,np,new Map),A(un,fd,new Map),A(un,Rg,new WeakMap),A(un,bl,null),A(un,sp,new Set);let Af=un;const uL=100;function mP(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const t=new SS,{docId:e}=t,n=r.url?yj(r.url):null,s=r.data?vj(r.data):null,i=r.httpHeaders||null,o=r.withCredentials===!0,d=r.password??null,u=r.range instanceof fP?r.range:null,p=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let m=r.worker instanceof _f?r.worker:null;const g=r.verbosity,x=typeof r.docBaseUrl=="string"&&!Ly(r.docBaseUrl)?r.docBaseUrl:null,v=Q2(r.cMapUrl),k=r.cMapPacked!==!1,S=r.CMapReaderFactory||(us?Cj:eC),_=Q2(r.iccUrl),E=Q2(r.standardFontDataUrl),N=r.StandardFontDataFactory||(us?Tj:nC),P=Q2(r.wasmUrl),R=r.WasmFactory||(us?Pj:sC),M=r.stopAtErrors!==!0,O=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,I=r.isEvalSupported!==!1,H=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!us,K=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!us&&(zn.platform.isFirefox||!globalThis.chrome),W=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,Y=typeof r.disableFontFace=="boolean"?r.disableFontFace:us,q=r.fontExtraProperties===!0,tt=r.enableXfa===!0,et=r.ownerDocument||globalThis.document,lt=r.disableRange===!0,ot=r.disableStream===!0,it=r.disableAutoFetch===!0,U=r.pdfBug===!0,Q=r.CanvasFactory||(us?Ej:Aj),at=r.FilterFactory||(us?kj:_j),j=r.enableHWA===!0,G=r.useWasm!==!1,ut=u?u.length:r.length??NaN,St=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!us&&!Y,Nt=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(S===eC&&N===nC&&R===sC&&v&&E&&P&&Hm(v,document.baseURI)&&Hm(E,document.baseURI)&&Hm(P,document.baseURI)),Tt=null;WF(g);const Pt={canvasFactory:new Q({ownerDocument:et,enableHWA:j}),filterFactory:new at({docId:e,ownerDocument:et}),cMapReaderFactory:Nt?null:new S({baseUrl:v,isCompressed:k}),standardFontDataFactory:Nt?null:new N({baseUrl:E}),wasmFactory:Nt?null:new R({baseUrl:P})};m||(m=_f.create({verbosity:g,port:Xa.workerPort}),t._worker=m);const Ht={docId:e,apiVersion:"5.4.394",data:s,password:d,disableAutoFetch:it,rangeChunkSize:p,length:ut,docBaseUrl:x,enableXfa:tt,evaluatorOptions:{maxImageSize:O,disableFontFace:Y,ignoreErrors:M,isEvalSupported:I,isOffscreenCanvasSupported:H,isImageDecoderSupported:K,canvasMaxAreaInBytes:W,fontExtraProperties:q,useSystemFonts:St,useWasm:G,useWorkerFetch:Nt,cMapUrl:v,iccUrl:_,standardFontDataUrl:E,wasmUrl:P}},Zt={ownerDocument:et,pdfBug:U,styleElement:Tt,loadingParams:{disableAutoFetch:it,enableXfa:tt}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Te=m.messageHandler.sendWithPromise("GetDocRequest",Ht,s?[s.buffer]:null);let Dn;if(u)Dn=new Gj(u,{disableRange:lt,disableStream:ot});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");const Os=Hm(n)?Qj:us?oL:nL;Dn=new Os({url:n,length:ut,httpHeaders:i,withCredentials:o,rangeChunkSize:p,disableRange:lt,disableStream:ot})}return Te.then(Os=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const ha=new Qm(e,Os,m.port),uo=new mL(ha,t,Dn,Zt,Pt,j);t._transport=uo,ha.send("Ready",null)})}).catch(t._capability.reject),t}var wy;const Sy=class Sy{constructor(){nt(this,"_capability",Promise.withResolvers());nt(this,"_transport",null);nt(this,"_worker",null);nt(this,"docId",`d${He(Sy,wy)._++}`);nt(this,"destroyed",!1);nt(this,"onPassword",null);nt(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(i){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,i}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};wy=new WeakMap,A(Sy,wy,0);let SS=Sy;var gd,Mg,Og,Bg,Ig;class fP{constructor(t,e,n=!1,s=null){A(this,gd,Promise.withResolvers());A(this,Mg,[]);A(this,Og,[]);A(this,Bg,[]);A(this,Ig,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=s}addRangeListener(t){l(this,Ig).push(t)}addProgressListener(t){l(this,Bg).push(t)}addProgressiveReadListener(t){l(this,Og).push(t)}addProgressiveDoneListener(t){l(this,Mg).push(t)}onDataRange(t,e){for(const n of l(this,Ig))n(t,e)}onDataProgress(t,e){l(this,gd).promise.then(()=>{for(const n of l(this,Bg))n(t,e)})}onDataProgressiveRead(t){l(this,gd).promise.then(()=>{for(const e of l(this,Og))e(t)})}onDataProgressiveDone(){l(this,gd).promise.then(()=>{for(const t of l(this,Mg))t()})}transportReady(){l(this,gd).resolve()}requestDataRange(t,e){ye("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}gd=new WeakMap,Mg=new WeakMap,Og=new WeakMap,Bg=new WeakMap,Ig=new WeakMap;class hL{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ft(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Lr,xd,nf;class pL{constructor(t,e,n,s=!1){A(this,xd);A(this,Lr,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new KE:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new cP,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:i=!1}={}){return new A0({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:i})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ft(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:s="display",annotationMode:i=$o.ENABLE,transform:o=null,background:d=null,optionalContentConfigPromise:u=null,annotationCanvasMap:p=null,pageColors:m=null,printAnnotationStorage:g=null,isEditing:x=!1,recordOperations:v=!1,operationsFilter:k=null}){var K,W,Y;(K=this._stats)==null||K.time("Overall");const S=this._transport.getRenderingIntent(s,i,g,x),{renderingIntent:_,cacheKey:E}=S;b(this,Lr,!1),u||(u=this._transport.getOptionalContentConfig(_));let N=this._intentStates.get(E);N||(N=Object.create(null),this._intentStates.set(E,N)),N.streamReaderCancelTimeout&&(clearTimeout(N.streamReaderCancelTimeout),N.streamReaderCancelTimeout=null);const P=!!(_&ii.PRINT);N.displayReadyCapability||(N.displayReadyCapability=Promise.withResolvers(),N.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(W=this._stats)==null||W.time("Page Request"),this._pumpOperatorList(S));const R=!!(this._pdfBug&&((Y=globalThis.StepperManager)!=null&&Y.enabled)),M=!this.recordedBBoxes&&(v||R),O=q=>{var tt,et;if(N.renderTasks.delete(I),M){const lt=(tt=I.gfx)==null?void 0:tt.dependencyTracker.take();lt&&(I.stepper&&I.stepper.setOperatorBBoxes(lt,I.gfx.dependencyTracker.takeDebugMetadata()),v&&(this.recordedBBoxes=lt))}P&&b(this,Lr,!0),C(this,xd,nf).call(this),q?(I.capability.reject(q),this._abortOperatorList({intentState:N,reason:q instanceof Error?q:new Error(q)})):I.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(et=globalThis.Stats)!=null&&et.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},I=new AS({callback:O,params:{canvas:e,canvasContext:t,dependencyTracker:M?new Nj(e,N.operatorList.length,R):null,viewport:n,transform:o,background:d},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:N.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!P,pdfBug:this._pdfBug,pageColors:m,enableHWA:this._transport.enableHWA,operationsFilter:k});(N.renderTasks||(N.renderTasks=new Set)).add(I);const H=I.task;return Promise.all([N.displayReadyCapability.promise,u]).then(([q,tt])=>{var et;if(this.destroyed){O();return}if((et=this._stats)==null||et.time("Rendering"),!(tt.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");I.initializeGraphics({transparency:q,optionalContentConfig:tt}),I.operatorListChanged()}).catch(O),H}getOperatorList({intent:t="display",annotationMode:e=$o.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var p;function i(){d.operatorList.lastChunk&&(d.opListReadCapability.resolve(d.operatorList),d.renderTasks.delete(u))}const o=this._transport.getRenderingIntent(t,e,n,s,!0);let d=this._intentStates.get(o.cacheKey);d||(d=Object.create(null),this._intentStates.set(o.cacheKey,d));let u;return d.opListReadCapability||(u=Object.create(null),u.operatorListChanged=i,d.opListReadCapability=Promise.withResolvers(),(d.renderTasks||(d.renderTasks=new Set)).add(u),d.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(p=this._stats)==null||p.time("Page Request"),this._pumpOperatorList(o)),d.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Sf.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,s){function i(){o.read().then(function({value:u,done:p}){if(p){n(d);return}d.lang??(d.lang=u.lang),Object.assign(d.styles,u.styles),d.items.push(...u.items),i()},s)}const o=e.getReader(),d={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),b(this,Lr,!1),Promise.all(t)}cleanup(t=!1){b(this,Lr,!0);const e=C(this,xd,nf).call(this);return t&&e&&this._stats&&(this._stats=new KE),e}_startRenderPage(t,e){var s,i;const n=this._intentStates.get(e);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(i=n.displayReadyCapability)==null||i.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&C(this,xd,nf).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:s}){const{map:i,transfer:o}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:i,modifiedIds:s},o).getReader(),p=this._intentStates.get(e);p.streamReader=u;const m=()=>{u.read().then(({value:g,done:x})=>{if(x){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,p),m())},g=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const x of p.renderTasks)x.operatorListChanged();C(this,xd,nf).call(this)}if(p.displayReadyCapability)p.displayReadyCapability.reject(g);else if(p.opListReadCapability)p.opListReadCapability.reject(g);else throw g}})};m()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof DA){let s=uL;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Hl(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Lr=new WeakMap,xd=new WeakSet,nf=function(){if(!l(this,Lr)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,Lr,!1),!0};var wl,ea,Ur,yd,Ay,vd,bd,ms,vx,gP,xP,sf,ip,bx;const De=class De{constructor({name:t=null,port:e=null,verbosity:n=GF()}={}){A(this,ms);A(this,wl,Promise.withResolvers());A(this,ea,null);A(this,Ur,null);A(this,yd,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(l(De,bd).has(e))throw new Error("Cannot use more than one PDFWorker per port.");l(De,bd).set(e,this),C(this,ms,gP).call(this,e)}else C(this,ms,xP).call(this)}get promise(){return l(this,wl).promise}get port(){return l(this,Ur)}get messageHandler(){return l(this,ea)}destroy(){var t,e;this.destroyed=!0,(t=l(this,yd))==null||t.terminate(),b(this,yd,null),l(De,bd).delete(l(this,Ur)),b(this,Ur,null),(e=l(this,ea))==null||e.destroy(),b(this,ea,null)}static create(t){const e=l(this,bd).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new De(t)}static get workerSrc(){if(Xa.workerSrc)return Xa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ft(this,"_setupFakeWorkerGlobal",(async()=>l(this,ip,bx)?l(this,ip,bx):(await import(this.workerSrc)).WorkerMessageHandler)())}};wl=new WeakMap,ea=new WeakMap,Ur=new WeakMap,yd=new WeakMap,Ay=new WeakMap,vd=new WeakMap,bd=new WeakMap,ms=new WeakSet,vx=function(){l(this,wl).resolve(),l(this,ea).send("configure",{verbosity:this.verbosity})},gP=function(t){b(this,Ur,t),b(this,ea,new Qm("main","worker",t)),l(this,ea).on("ready",()=>{}),C(this,ms,vx).call(this)},xP=function(){if(l(De,vd)||l(De,ip,bx)){C(this,ms,sf).call(this);return}let{workerSrc:t}=De;try{De._isSameOrigin(window.location,t)||(t=De._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Qm("main","worker",e),s=()=>{i.abort(),n.destroy(),e.terminate(),this.destroyed?l(this,wl).reject(new Error("Worker was destroyed")):C(this,ms,sf).call(this)},i=new AbortController;e.addEventListener("error",()=>{l(this,yd)||s()},{signal:i.signal}),n.on("test",d=>{if(i.abort(),this.destroyed||!d){s();return}b(this,ea,n),b(this,Ur,e),b(this,yd,e),C(this,ms,vx).call(this)}),n.on("ready",d=>{if(i.abort(),this.destroyed){s();return}try{o()}catch{C(this,ms,sf).call(this)}});const o=()=>{const d=new Uint8Array;n.send("test",d,[d.buffer])};o();return}catch{jy("The worker has been disabled.")}C(this,ms,sf).call(this)},sf=function(){l(De,vd)||(Mt("Setting up fake worker."),b(De,vd,!0)),De._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){l(this,wl).reject(new Error("Worker was destroyed"));return}const e=new Sj;b(this,Ur,e);const n=`fake${He(De,Ay)._++}`,s=new Qm(n+"_worker",n,e);t.setup(s,e),b(this,ea,new Qm(n,n+"_worker",e)),C(this,ms,vx).call(this)}).catch(t=>{l(this,wl).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},ip=new WeakSet,bx=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},A(De,ip),A(De,Ay,0),A(De,vd,!1),A(De,bd,new WeakMap),us&&(b(De,vd,!0),Xa.workerSrc||(Xa.workerSrc="./pdf.worker.mjs")),De._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const s=new URL(e,n);return n.origin===s.origin},De._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},De.fromPort=t=>{if(aj("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return De.create(t)};let _f=De;var $r,La,ap,rp,zr,wd,af;class mL{constructor(t,e,n,s,i,o){A(this,wd);A(this,$r,new Map);A(this,La,new Map);A(this,ap,new Map);A(this,rp,new Map);A(this,zr,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new cP,this.fontLoader=new gj({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return Ft(this,"annotationStorage",new RA)}getRenderingIntent(t,e=$o.ENABLE,n=null,s=!1,i=!1){let o=ii.DISPLAY,d=aS;switch(t){case"any":o=ii.ANY;break;case"display":break;case"print":o=ii.PRINT;break;default:Mt(`getRenderingIntent - invalid intent: ${t}`)}const u=o&ii.PRINT&&n instanceof G3?n:this.annotationStorage;switch(e){case $o.DISABLE:o+=ii.ANNOTATIONS_DISABLE;break;case $o.ENABLE:break;case $o.ENABLE_FORMS:o+=ii.ANNOTATIONS_FORMS;break;case $o.ENABLE_STORAGE:o+=ii.ANNOTATIONS_STORAGE,d=u.serializable;break;default:Mt(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(o+=ii.IS_EDITING),i&&(o+=ii.OPLIST);const{ids:p,hash:m}=u.modifiedIds,g=[o,d.hash,m];return{renderingIntent:o,cacheKey:g.join("_"),annotationStorageSerializable:d,modifiedIds:p}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=l(this,zr))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of l(this,La).values())t.push(s._destroy());l(this,La).clear(),l(this,ap).clear(),l(this,rp).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s,i;this.commonObjs.clear(),this.fontLoader.clear(),l(this,$r).clear(),this.filterFactory.destroy(),Af.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Hl("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{Gt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){s.close();return}Gt(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async n=>{var d;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:i,contentLength:o}=this._fullReader;return(!s||!i)&&(this._lastProgress&&((d=e.onProgress)==null||d.call(e,this._lastProgress)),this._fullReader.onProgress=u=>{var p;(p=e.onProgress)==null||p.call(e,{loaded:u.loaded,total:u.total})}),{isStreamingSupported:s,isRangeSupported:i,contentLength:o}}),t.on("GetRangeReader",(n,s)=>{Gt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(n.begin,n.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:o,done:d}){if(d){s.close();return}Gt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{i.cancel(o),s.ready.catch(d=>{if(!this.destroyed)throw d})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new hL(n,this))}),t.on("DocException",n=>{e._capability.reject(Ss(n))}),t.on("PasswordRequest",n=>{b(this,zr,Promise.withResolvers());try{if(!e.onPassword)throw Ss(n);const s=i=>{i instanceof Error?l(this,zr).reject(i):l(this,zr).resolve({password:i})};e.onPassword(s,n.code)}catch(s){l(this,zr).reject(s)}return l(this,zr).promise}),t.on("DataLoaded",n=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;l(this,La).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,i])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":if("error"in i){const x=i.error;Mt(`Error during font loading: ${x}`),this.commonObjs.resolve(n,x);break}const d=new rS(i),u=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(x,v)=>globalThis.FontInspector.fontAdded(x,v):null,p=new xj(d,u,i.extra,i.charProcOperatorList);this.fontLoader.bind(p).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!p.fontExtraProperties&&p.data&&p.clearData(),this.commonObjs.resolve(n,p)});break;case"CopyLocalImage":const{imageRef:m}=i;Gt(m,"The imageRef must be defined.");for(const x of l(this,La).values())for(const[,v]of x.objs)if((v==null?void 0:v.ref)===m)return v.dataLen?(this.commonObjs.resolve(n,structuredClone(v)),v.dataLen):null;break;case"FontPath":case"Image":this.commonObjs.resolve(n,i);break;case"Pattern":const g=new oS(i);this.commonObjs.resolve(n,g.getIR());break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,i,o])=>{var u;if(this.destroyed)return;const d=l(this,La).get(s);if(!d.objs.has(n)){if(d._intentStates.size===0){(u=o==null?void 0:o.bitmap)==null||u.close();return}switch(i){case"Image":case"Pattern":d.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),t.on("DocProgress",n=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[n.type];if(!s)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Mt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=l(this,ap).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&l(this,rp).set(i.refStr,t);const o=new pL(e,i,this,this._params.pdfBug);return l(this,La).set(e,o),o});return l(this,ap).set(e,s),s}getPageIndex(t){return lS(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return C(this,wd,af).call(this,"GetFieldObjects")}hasJSActions(){return C(this,wd,af).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return C(this,wd,af).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return C(this,wd,af).call(this,"GetOptionalContentConfig").then(e=>new Wj(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=l(this,$r).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(s=>{var i,o;return{info:s[0],metadata:s[1]?new qj(s[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return l(this,$r).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of l(this,La).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),l(this,$r).clear(),this.filterFactory.destroy(!0),Af.cleanup()}}cachedPageNumber(t){if(!lS(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return l(this,rp).get(e)??null}}$r=new WeakMap,La=new WeakMap,ap=new WeakMap,rp=new WeakMap,zr=new WeakMap,wd=new WeakSet,af=function(t,e=null){const n=l(this,$r).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,e);return l(this,$r).set(t,s),s};var Sl;class fL{constructor(t){A(this,Sl,null);nt(this,"onContinue",null);nt(this,"onError",null);b(this,Sl,t)}get promise(){return l(this,Sl).capability.promise}cancel(t=0){l(this,Sl).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=l(this,Sl).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=l(this,Sl);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Sl=new WeakMap;var Al,Sd;const wc=class wc{constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:i,operatorList:o,pageIndex:d,canvasFactory:u,filterFactory:p,useRequestAnimationFrame:m=!1,pdfBug:g=!1,pageColors:x=null,enableHWA:v=!1,operationsFilter:k=null}){A(this,Al,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=d,this.canvasFactory=u,this.filterFactory=p,this._pdfBug=g,this.pageColors=x,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new fL(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=v,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=k}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var u,p;if(this.cancelled)return;if(this._canvas){if(l(wc,Sd).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(wc,Sd).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:s,background:i,dependencyTracker:o}=this.params,d=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Zu(d,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:s,viewport:n,transparency:t,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(p=this.graphicsReadyCallback)==null||p.call(this)}cancel(t=null,e=0){var n,s,i;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),l(this,Al)&&(window.cancelAnimationFrame(l(this,Al)),b(this,Al,null)),l(wc,Sd).delete(this._canvas),t||(t=new DA(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(i=(s=this.task).onError)==null||i.call(s,t)}operatorListChanged(){var t,e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.gfx.dependencyTracker)==null||t.growOperationsCount(this.operatorList.fnArray.length),(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,Al,window.requestAnimationFrame(()=>{b(this,Al,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(wc,Sd).delete(this._canvas),this.callback())))}};Al=new WeakMap,Sd=new WeakMap,A(wc,Sd,new WeakSet);let AS=wc;const gL="5.4.394",xL="2cc809ade";var Vs,Ad,op,mn,Fg,lp,Hr,jg,_l,na,Lg,pe,_S,kS,ES,mc,yP,jo;const As=class As{constructor({editor:t=null,uiManager:e=null}){A(this,pe);A(this,Vs,null);A(this,Ad,null);A(this,op);A(this,mn,null);A(this,Fg,!1);A(this,lp,!1);A(this,Hr,null);A(this,jg);A(this,_l,null);A(this,na,null);var n,s;t?(b(this,lp,!1),b(this,Hr,t)):b(this,lp,!0),b(this,na,(t==null?void 0:t._uiManager)||e),b(this,jg,l(this,na)._eventBus),b(this,op,((n=t==null?void 0:t.color)==null?void 0:n.toUpperCase())||((s=l(this,na))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),l(As,Lg)||b(As,Lg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ft(this,"_keyboardManager",new k0([[["Escape","mac+Escape"],As.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],As.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],As.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],As.prototype._moveToPrevious],[["Home","mac+Home"],As.prototype._moveToBeginning],[["End","mac+End"],As.prototype._moveToEnd]]))}renderButton(){const t=b(this,Vs,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",l(this,Hr)&&(t.ariaControls=`${l(this,Hr).id}_colorpicker_dropdown`);const e=l(this,na)._signal;t.addEventListener("click",C(this,pe,mc).bind(this),{signal:e}),t.addEventListener("keydown",C(this,pe,ES).bind(this),{signal:e});const n=b(this,Ad,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=l(this,op),t.append(n),t}renderMainDropdown(){const t=b(this,mn,C(this,pe,_S).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===l(this,Vs)){C(this,pe,mc).call(this,t);return}const e=t.target.getAttribute("data-color");e&&C(this,pe,kS).call(this,e,t)}_moveToNext(t){var e,n;if(!l(this,pe,jo)){C(this,pe,mc).call(this,t);return}if(t.target===l(this,Vs)){(e=l(this,mn).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=l(this,mn))==null?void 0:e.firstChild)||t.target===l(this,Vs)){l(this,pe,jo)&&this._hideDropdownFromKeyboard();return}l(this,pe,jo)||C(this,pe,mc).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!l(this,pe,jo)){C(this,pe,mc).call(this,t);return}(e=l(this,mn).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!l(this,pe,jo)){C(this,pe,mc).call(this,t);return}(e=l(this,mn).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=l(this,mn))==null||t.classList.add("hidden"),l(this,Vs).ariaExpanded="false",(e=l(this,_l))==null||e.abort(),b(this,_l,null)}_hideDropdownFromKeyboard(){var t;if(!l(this,lp)){if(!l(this,pe,jo)){(t=l(this,Hr))==null||t.unselect();return}this.hideDropdown(),l(this,Vs).focus({preventScroll:!0,focusVisible:l(this,Fg)})}}updateColor(t){if(l(this,Ad)&&(l(this,Ad).style.backgroundColor=t),!l(this,mn))return;const e=l(this,na).highlightColors.values();for(const n of l(this,mn).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=l(this,Vs))==null||t.remove(),b(this,Vs,null),b(this,Ad,null),(e=l(this,mn))==null||e.remove(),b(this,mn,null)}};Vs=new WeakMap,Ad=new WeakMap,op=new WeakMap,mn=new WeakMap,Fg=new WeakMap,lp=new WeakMap,Hr=new WeakMap,jg=new WeakMap,_l=new WeakMap,na=new WeakMap,Lg=new WeakMap,pe=new WeakSet,_S=function(){const t=document.createElement("div"),e=l(this,na)._signal;t.addEventListener("contextmenu",Bi,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),l(this,Hr)&&(t.id=`${l(this,Hr).id}_colorpicker_dropdown`);for(const[n,s]of l(this,na).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=n,i.setAttribute("data-l10n-id",l(As,Lg)[n]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=s,i.ariaSelected=s===l(this,op),i.addEventListener("click",C(this,pe,kS).bind(this,s),{signal:e}),t.append(i)}return t.addEventListener("keydown",C(this,pe,ES).bind(this),{signal:e}),t},kS=function(t,e){e.stopPropagation(),l(this,jg).dispatch("switchannotationeditorparams",{source:this,type:Wt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},ES=function(t){As._keyboardManager.exec(this,t)},mc=function(t){if(l(this,pe,jo)){this.hideDropdown();return}if(b(this,Fg,t.detail===0),l(this,_l)||(b(this,_l,new AbortController),window.addEventListener("pointerdown",C(this,pe,yP).bind(this),{signal:l(this,na).combinedSignal(l(this,_l))})),l(this,Vs).ariaExpanded="true",l(this,mn)){l(this,mn).classList.remove("hidden");return}const e=b(this,mn,C(this,pe,_S).call(this));l(this,Vs).append(e)},yP=function(t){var e;(e=l(this,mn))!=null&&e.contains(t.target)||this.hideDropdown()},jo=function(){return l(this,mn)&&!l(this,mn).classList.contains("hidden")},A(As,Lg,null);let ry=As;var Ua,Ug,cp,$g;const Sc=class Sc{constructor(t){A(this,Ua,null);A(this,Ug,null);A(this,cp,null);b(this,Ug,t),b(this,cp,t._uiManager),l(Sc,$g)||b(Sc,$g,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(l(this,Ua))return l(this,Ua);const{editorType:t,colorType:e,color:n}=l(this,Ug),s=b(this,Ua,document.createElement("input"));return s.type="color",s.value=n||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",l(Sc,$g)[t]),s.addEventListener("input",()=>{l(this,cp).updateParams(e,s.value)},{signal:l(this,cp)._signal}),s}update(t){l(this,Ua)&&(l(this,Ua).value=t)}destroy(){var t;(t=l(this,Ua))==null||t.remove(),b(this,Ua,null)}hideDropdown(){}};Ua=new WeakMap,Ug=new WeakMap,cp=new WeakMap,$g=new WeakMap,A(Sc,$g,null);let oy=Sc;function gC(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function Fm(r){return Math.max(0,Math.min(255,255*r))}class xC{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Fm(t),[t,t,t]}static G_HTML([t]){const e=gC(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Fm)}static RGB_HTML(t){return`#${t.map(gC).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[Fm(1-Math.min(1,t+s)),Fm(1-Math.min(1,n+s)),Fm(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const s=1-t,i=1-e,o=1-n,d=Math.min(s,i,o);return["CMYK",s,i,o,d]}}class yL{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ye("Abstract method `_createSVG` called.")}}class ly extends yL{_createSVG(t){return document.createElementNS(ur,t)}}const vL=9,eu=new WeakSet,bL=new Date().getTimezoneOffset()*60*1e3;class tw{static create(t){switch(t.data.annotationType){case sn.LINK:return new BA(t);case sn.TEXT:return new SL(t);case sn.WIDGET:switch(t.data.fieldType){case"Tx":return new AL(t);case"Btn":return t.data.radioButton?new wP(t):t.data.checkBox?new kL(t):new EL(t);case"Ch":return new CL(t);case"Sig":return new _L(t)}return new su(t);case sn.POPUP:return new TS(t);case sn.FREETEXT:return new EP(t);case sn.LINE:return new PL(t);case sn.SQUARE:return new DL(t);case sn.CIRCLE:return new NL(t);case sn.POLYLINE:return new CP(t);case sn.CARET:return new ML(t);case sn.INK:return new IA(t);case sn.POLYGON:return new RL(t);case sn.HIGHLIGHT:return new TP(t);case sn.UNDERLINE:return new OL(t);case sn.SQUIGGLY:return new BL(t);case sn.STRIKEOUT:return new IL(t);case sn.STAMP:return new PP(t);case sn.FILEATTACHMENT:return new FL(t);default:return new Ue(t)}}}var _d,dp,Pi,zg,CS;const qA=class qA{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){A(this,zg);A(this,_d,null);A(this,dp,!1);A(this,Pi,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return qA._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:t}=this,e=(n=this.annotationStorage)==null?void 0:n.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var d;const t=(d=this.annotationStorage)==null?void 0:d.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:s}=this.data;let i=-1/0,o=-1/0;if((e==null?void 0:e.length)>=8){for(let u=0;u<e.length;u+=8)e[u+1]>o?(o=e[u+1],i=e[u+2]):e[u+1]===o&&(i=Math.max(i,e[u+2]));return[i,o]}if((n==null?void 0:n.length)>=1){for(const u of n)for(let p=0,m=u.length;p<m;p+=2)u[p+1]>o?(o=u[p+1],i=u[p]):u[p+1]===o&&(i=Math.max(i,u[p]));if(i!==1/0)return[i,o]}return s?[s[2],s[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:i,pageY:o}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-i)/n,t[1]=100*(t[1]-o)/s,t}get commentText(){var e,n,s;const{data:t}=this;return((n=(e=this.annotationStorage.getRawValue(`${bf}${t.id}`))==null?void 0:e.popup)==null?void 0:n.contents)||((s=t.contentsObj)==null?void 0:s.str)||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${bf}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){var t,e;(e=((t=l(this,Pi))==null?void 0:t.popup)||this.popup)==null||e.remove(),b(this,Pi,this.popup=null)}updateEdited(t){var i;if(!this.container)return;t.rect&&(l(this,_d)||b(this,_d,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&C(this,zg,CS).call(this,e);let s=((i=l(this,Pi))==null?void 0:i.popup)||this.popup;!s&&(n!=null&&n.text)&&(this._createPopup(n),s=l(this,Pi).popup),s&&(s.updateEdited(t),n!=null&&n.deleted&&(s.remove(),b(this,Pi,null),this.popup=null))}resetEdited(){var t;l(this,_d)&&(C(this,zg,CS).call(this,l(this,_d).rect),(t=l(this,Pi))==null||t.popup.resetEdited(),b(this,_d,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",e.id),!(this instanceof su)&&!(this instanceof BA)&&(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(i.title=e.alternativeText),e.noRotate&&i.classList.add("norotate"),!e.rect||this instanceof TS){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,i),i}const{width:d,height:u}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,_=e.borderStyle.verticalCornerRadius;if(S>0||_>0){const N=`calc(${S}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;o.borderRadius=N}else if(this instanceof wP){const N=`calc(${d}px * var(--total-scale-factor)) / calc(${u}px * var(--total-scale-factor))`;o.borderRadius=N}switch(e.borderStyle.style){case ju.SOLID:o.borderStyle="solid";break;case ju.DASHED:o.borderStyle="dashed";break;case ju.BEVELED:Mt("Unimplemented border style: beveled");break;case ju.INSET:Mt("Unimplemented border style: inset");break;case ju.UNDERLINE:o.borderBottomStyle="solid";break}const E=e.borderColor||null;E?(b(this,dp,!0),o.borderColor=xt.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):o.borderWidth=0}const p=xt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:m,pageHeight:g,pageX:x,pageY:v}=s.rawDims;o.left=`${100*(p[0]-x)/m}%`,o.top=`${100*(p[1]-v)/g}%`;const{rotation:k}=e;return e.hasOwnCanvas||k===0?(o.width=`${100*d/m}%`,o.height=`${100*u/g}%`):this.setRotation(k,i),i}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims;let{width:i,height:o}=this;t%180!==0&&([i,o]=[o,i]),e.style.width=`${100*i/n}%`,e.style.height=`${100*o/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,s)=>{const i=s.detail[e],o=i[0],d=i.slice(1);s.target.style[n]=xC[`${o}_HTML`](d),this.annotationStorage.setValue(this.data.id,{[n]:xC[`${o}_rgb`](d)})};return Ft(this,"_commonActions",{display:e=>{const{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const s of Object.keys(e.detail)){const i=t[s]||n[s];i==null||i(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[s,i]of Object.entries(e)){const o=n[s];if(o){const d={detail:{[s]:i},target:t};o(d),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,s,i]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,_,E,N]=t.subarray(2,6);if(s===S&&i===_&&e===E&&n===N)return}const{style:o}=this.container;let d;if(l(this,dp)){const{borderColor:S,borderWidth:_}=o;o.borderWidth=0,d=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const u=s-e,p=i-n,{svgFactory:m}=this,g=m.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const x=m.createElement("defs");g.append(x);const v=m.createElement("clipPath"),k=`clippath_${this.data.id}`;v.setAttribute("id",k),v.setAttribute("clipPathUnits","objectBoundingBox"),x.append(v);for(let S=2,_=t.length;S<_;S+=8){const E=t[S],N=t[S+1],P=t[S+2],R=t[S+3],M=m.createElement("rect"),O=(P-e)/u,I=(i-N)/p,H=(E-P)/u,K=(N-R)/p;M.setAttribute("x",O),M.setAttribute("y",I),M.setAttribute("width",H),M.setAttribute("height",K),v.append(M),d==null||d.push(`<rect vector-effect="non-scaling-stroke" x="${O}" y="${I}" width="${H}" height="${K}"/>`)}l(this,dp)&&(d.push("</g></svg>')"),o.backgroundImage=d.join("")),this.container.append(g),this.container.style.clipPath=`url(#${k})`}_createPopup(t=null){const{data:e}=this;let n,s;t?(n={str:t.text},s=t.date):(n=e.contentsObj,s=e.modificationDate),b(this,Pi,new TS({data:{color:e.color,titleObj:e.titleObj,modificationDate:s,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}))}get hasPopupElement(){return!!(l(this,Pi)||this.popup||this.data.popupRef)}get extraPopupElement(){return l(this,Pi)}render(){ye("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:i,id:o,exportValues:d}of s){if(i===-1||o===e)continue;const u=typeof d=="string"?d:null,p=document.querySelector(`[data-element-id="${o}"]`);if(p&&!eu.has(p)){Mt(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:u,domElement:p})}return n}for(const s of document.getElementsByName(t)){const{exportValue:i}=s,o=s.getAttribute("data-element-id");o!==e&&eu.has(s)&&n.push({id:o,exportValue:i,domElement:s})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};_d=new WeakMap,dp=new WeakMap,Pi=new WeakMap,zg=new WeakSet,CS=function(t){const{container:{style:e},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:d,pageY:u}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-d)/i}%`,e.top=`${100*(o-t[3]+u)/o}%`,s===0?(e.width=`${100*(t[2]-t[0])/i}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(s)};let Ue=qA;class wL extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}var ri,fc,vP,bP;class BA extends Ue{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});A(this,ri);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let i=!1;return e.url?(n.addLinkAttributes(s,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(s,e.action,e.overlaidText),i=!0):e.attachment?(C(this,ri,vP).call(this,s,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(C(this,ri,bP).call(this,s,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(s,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),i=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&(this.contentElement=s,this.container.append(s)),this.container}_bindLink(e,n,s=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&C(this,ri,fc).call(this),s&&(e.title=s)}_bindNamedAction(e,n,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),s&&(e.title=s),C(this,ri,fc).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(n.actions)){const o=s.get(i);o&&(e[o]=()=>{var d;return(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:i}}),!1})}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),C(this,ri,fc).call(this)}_bindResetFormAction(e,n){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),C(this,ri,fc).call(this),!this._fieldObjects){Mt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var g;s==null||s();const{fields:i,refs:o,include:d}=n,u=[];if(i.length!==0||o.length!==0){const x=new Set(o);for(const v of i){const k=this._fieldObjects[v]||[];for(const{id:S}of k)x.add(S)}for(const v of Object.values(this._fieldObjects))for(const k of v)x.has(k.id)===d&&u.push(k)}else for(const x of Object.values(this._fieldObjects))u.push(...x);const p=this.annotationStorage,m=[];for(const x of u){const{id:v}=x;switch(m.push(v),x.type){case"text":{const S=x.defaultValue||"";p.setValue(v,{value:S});break}case"checkbox":case"radiobutton":{const S=x.defaultValue===x.exportValues;p.setValue(v,{value:S});break}case"combobox":case"listbox":{const S=x.defaultValue||"";p.setValue(v,{value:S});break}default:continue}const k=document.querySelector(`[data-element-id="${v}"]`);if(k){if(!eu.has(k)){Mt(`_bindResetFormAction - element not allowed: ${v}`);continue}}else continue;k.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:m,name:"ResetForm"}})),!1}}}ri=new WeakSet,fc=function(){this.container.setAttribute("data-internal-link","")},vP=function(e,n,s="",i=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:s&&(e.title=s),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,i),!1},C(this,ri,fc).call(this)},bP=function(e,n,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),s&&(e.title=s),C(this,ri,fc).call(this)};class SL extends Ue{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class su extends Ue{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return zn.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,i){n.includes("mouse")?t.addEventListener(n,o=>{var d;(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(n,o=>{var d;if(n==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}i&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(o)}}))})}_setEventListeners(t,e,n,s){var i,o,d;for(const[u,p]of n)(p==="Action"||(i=this.data.actions)!=null&&i[p])&&((p==="Focus"||p==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,u,p,s),p==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):p==="Blur"&&!((d=this.data.actions)!=null&&d.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":xt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||vL,i=t.style;let o;const d=2,u=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-d),m=Math.round(p/(Wb*s))||1,g=p/m;o=Math.min(s,u(g/Wb))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-d);o=Math.min(s,u(p/Wb))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=xt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(i.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class AL extends su{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){const i=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=n),i.setValue(o.id,{[s]:n})}render(){var s,i;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let d=o.value||"";const u=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;u&&d.length>u&&(d=d.slice(0,u));let p=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;p&&this.data.comb&&(p=p.replaceAll(/\s+/g,""));const m={userValue:d,formattedValue:p,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=p??d,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",p??d),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),eu.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:g,datetimeType:x,timeStep:v}=this.data,k=!!x&&this.enableScripting;g&&(n.title=g),this._setRequired(n,this.data.required),u&&(n.maxLength=u),n.addEventListener("input",_=>{t.setValue(e,{value:_.target.value}),this.setPropertyOnSiblings(n,"value",_.target.value,"value"),m.formattedValue=null}),n.addEventListener("resetform",_=>{const E=this.data.defaultFieldValue??"";n.value=m.userValue=E,m.formattedValue=null});let S=_=>{const{formattedValue:E}=m;E!=null&&(_.target.value=E),_.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",E=>{var P;if(m.focused)return;const{target:N}=E;if(k&&(N.type=x,v&&(N.step=v)),m.userValue){const R=m.userValue;if(k)if(x==="time"){const M=new Date(R),O=[M.getHours(),M.getMinutes(),M.getSeconds()];N.value=O.map(I=>I.toString().padStart(2,"0")).join(":")}else N.value=new Date(R-bL).toISOString().split(x==="date"?"T":".",1)[0];else N.value=R}m.lastCommittedValue=N.value,m.commitKey=1,(P=this.data.actions)!=null&&P.Focus||(m.focused=!0)}),n.addEventListener("updatefromsandbox",E=>{this.showElementAndHideCanvas(E.target);const N={value(P){m.userValue=P.detail.value??"",k||t.setValue(e,{value:m.userValue.toString()}),P.target.value=m.userValue},formattedValue(P){const{formattedValue:R}=P.detail;m.formattedValue=R,R!=null&&P.target!==document.activeElement&&(P.target.value=R);const M={formattedValue:R};k&&(M.value=R),t.setValue(e,M)},selRange(P){P.target.setSelectionRange(...P.detail.selRange)},charLimit:P=>{var I;const{charLimit:R}=P.detail,{target:M}=P;if(R===0){M.removeAttribute("maxLength");return}M.setAttribute("maxLength",R);let O=m.userValue;!O||O.length<=R||(O=O.slice(0,R),M.value=m.userValue=O,t.setValue(e,{value:O}),(I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:O,willCommit:!0,commitKey:1,selStart:M.selectionStart,selEnd:M.selectionEnd}}))}};this._dispatchEventFromSandbox(N,E)}),n.addEventListener("keydown",E=>{var R;m.commitKey=1;let N=-1;if(E.key==="Escape"?N=0:E.key==="Enter"&&!this.data.multiLine?N=2:E.key==="Tab"&&(m.commitKey=3),N===-1)return;const{value:P}=E.target;m.lastCommittedValue!==P&&(m.lastCommittedValue=P,m.userValue=P,(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:P,willCommit:!0,commitKey:N,selStart:E.target.selectionStart,selEnd:E.target.selectionEnd}}))});const _=S;S=null,n.addEventListener("blur",E=>{var R,M;if(!m.focused||!E.relatedTarget)return;(R=this.data.actions)!=null&&R.Blur||(m.focused=!1);const{target:N}=E;let{value:P}=N;if(k){if(P&&x==="time"){const O=P.split(":").map(I=>parseInt(I,10));P=new Date(2e3,0,1,O[0],O[1],O[2]||0).valueOf(),N.step=""}else P.includes("T")||(P=`${P}T00:00`),P=new Date(P).valueOf();N.type="text"}m.userValue=P,m.lastCommittedValue!==P&&((M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:P,willCommit:!0,commitKey:m.commitKey,selStart:E.target.selectionStart,selEnd:E.target.selectionEnd}})),_(E)}),(i=this.data.actions)!=null&&i.Keystroke&&n.addEventListener("beforeinput",E=>{var K;m.lastCommittedValue=null;const{data:N,target:P}=E,{value:R,selectionStart:M,selectionEnd:O}=P;let I=M,H=O;switch(E.inputType){case"deleteWordBackward":{const W=R.substring(0,M).match(/\w*[^\w]*$/);W&&(I-=W[0].length);break}case"deleteWordForward":{const W=R.substring(M).match(/^[^\w]*\w*/);W&&(H+=W[0].length);break}case"deleteContentBackward":M===O&&(I-=1);break;case"deleteContentForward":M===O&&(H+=1);break}E.preventDefault(),(K=this.linkService.eventBus)==null||K.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,change:N||"",willCommit:!1,selStart:I,selEnd:H}})}),this._setEventListeners(n,m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],E=>E.target.value)}if(S&&n.addEventListener("blur",S),this.data.comb){const E=(this.data.rect[2]-this.data.rect[0])/u;n.classList.add("comb"),n.style.letterSpacing=`calc(${E}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class _L extends su{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class kL extends su{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return eu.add(i),i.setAttribute("data-element-id",n),i.disabled=e.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=e.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",e.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:d,checked:u}=o.target;for(const p of this._getElementsByName(d,n)){const m=u&&p.exportValue===e.exportValue;p.domElement&&(p.domElement.checked=m),t.setValue(p.id,{value:m})}t.setValue(n,{value:u})}),i.addEventListener("resetform",o=>{const d=e.defaultFieldValue||"Off";o.target.checked=d===e.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const d={value(u){u.target.checked=u.detail.value!=="Off",t.setValue(n,{value:u.target.checked})}};this._dispatchEventFromSandbox(d,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class wP extends su{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(const o of this._getElementsByName(e.fieldName,n))t.setValue(o.id,{value:!1});const i=document.createElement("input");if(eu.add(i),i.setAttribute("data-element-id",n),i.disabled=e.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=e.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:d,checked:u}=o.target;for(const p of this._getElementsByName(d,n))t.setValue(p.id,{value:!1});t.setValue(n,{value:u})}),i.addEventListener("resetform",o=>{const d=e.defaultFieldValue;o.target.checked=d!=null&&d===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;i.addEventListener("updatefromsandbox",d=>{const u={value:p=>{const m=o===p.detail.value;for(const g of this._getElementsByName(p.target.name)){const x=m&&g.id===n;g.domElement&&(g.domElement.checked=x),t.setValue(g.id,{value:x})}}};this._dispatchEventFromSandbox(u,d)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class EL extends BA{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class CL extends su{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");eu.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",m=>{const g=this.data.defaultFieldValue;for(const x of s.options)x.selected=x.value===g});for(const m of this.data.options){const g=document.createElement("option");g.textContent=m.displayValue,g.value=m.exportValue,n.value.includes(m.exportValue)&&(g.setAttribute("selected",!0),i=!1),s.append(g)}let o=null;if(i){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),s.prepend(m),o=()=>{m.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const d=m=>{const g=m?"value":"textContent",{options:x,multiple:v}=s;return v?Array.prototype.filter.call(x,k=>k.selected).map(k=>k[g]):x.selectedIndex===-1?null:x[x.selectedIndex][g]};let u=d(!1);const p=m=>{const g=m.target.options;return Array.prototype.map.call(g,x=>({displayValue:x.textContent,exportValue:x.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",m=>{const g={value(x){o==null||o();const v=x.detail.value,k=new Set(Array.isArray(v)?v:[v]);for(const S of s.options)S.selected=k.has(S.value);t.setValue(e,{value:d(!0)}),u=d(!1)},multipleSelection(x){s.multiple=!0},remove(x){const v=s.options,k=x.detail.remove;v[k].selected=!1,s.remove(k),v.length>0&&Array.prototype.findIndex.call(v,_=>_.selected)===-1&&(v[0].selected=!0),t.setValue(e,{value:d(!0),items:p(x)}),u=d(!1)},clear(x){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),u=d(!1)},insert(x){const{index:v,displayValue:k,exportValue:S}=x.detail.insert,_=s.children[v],E=document.createElement("option");E.textContent=k,E.value=S,_?_.before(E):s.append(E),t.setValue(e,{value:d(!0),items:p(x)}),u=d(!1)},items(x){const{items:v}=x.detail;for(;s.length!==0;)s.remove(0);for(const k of v){const{displayValue:S,exportValue:_}=k,E=document.createElement("option");E.textContent=S,E.value=_,s.append(E)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:d(!0),items:p(x)}),u=d(!1)},indices(x){const v=new Set(x.detail.indices);for(const k of x.target.options)k.selected=v.has(k.index);t.setValue(e,{value:d(!0)}),u=d(!1)},editable(x){x.target.disabled=!x.detail.editable}};this._dispatchEventFromSandbox(g,m)}),s.addEventListener("input",m=>{var v;const g=d(!0),x=d(!1);t.setValue(e,{value:g}),m.preventDefault(),(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:u,change:x,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):s.addEventListener("input",function(m){t.setValue(e,{value:d(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}var Hg,PS;class TS extends Ue{constructor(e){const{data:n,elements:s,parent:i}=e,o=!!i._commentManager;super(e,{isRenderable:!o&&Ue._hasPopupData(n)});A(this,Hg);if(this.elements=s,o&&Ue._hasPopupData(n)){const d=this.popup=C(this,Hg,PS).call(this);for(const u of s)u.popup=d}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=C(this,Hg,PS).call(this),s=[];for(const i of this.elements)i.popup=n,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${Wu}${i}`).join(",")),this.container}}Hg=new WeakSet,PS=function(){return new TL({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Ws,kl,_y,ky,up,hp,Ge,$a,El,kd,pp,mp,za,Gs,qr,Vr,Ke,Wr,Cl,qg,Gr,fp,Ed,Tl,_n,Pl,Ut,wx,DS,NS,RS,Sx,MS,SP,AP,_P,kP,Ax,_x,OS;class TL{constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:i,contentsObj:o,richText:d,parent:u,rect:p,parentRect:m,open:g,commentManager:x=null}){A(this,Ut);A(this,Ws,null);A(this,kl,C(this,Ut,_P).bind(this));A(this,_y,C(this,Ut,OS).bind(this));A(this,ky,C(this,Ut,_x).bind(this));A(this,up,C(this,Ut,Ax).bind(this));A(this,hp,null);A(this,Ge,null);A(this,$a,null);A(this,El,null);A(this,kd,null);A(this,pp,null);A(this,mp,null);A(this,za,!1);A(this,Gs,null);A(this,qr,null);A(this,Vr,null);A(this,Ke,null);A(this,Wr,null);A(this,Cl,null);A(this,qg,null);A(this,Gr,null);A(this,fp,null);A(this,Ed,null);A(this,Tl,!1);A(this,_n,null);A(this,Pl,null);b(this,Ge,t),b(this,fp,s),b(this,$a,o),b(this,Gr,d),b(this,pp,u),b(this,hp,e),b(this,qg,p),b(this,mp,m),b(this,kd,n),b(this,Ws,x),b(this,_n,n[0]),b(this,El,ty.toDateObject(i)),this.trigger=n.flatMap(v=>v.getElementsToTriggerPopup()),x||(C(this,Ut,wx).call(this),l(this,Ge).hidden=!0,g&&C(this,Ut,Ax).call(this))}renderCommentButton(){if(l(this,Ke)){l(this,Ke).parentNode||l(this,_n).container.after(l(this,Ke));return}if(l(this,Wr)||C(this,Ut,DS).call(this),!l(this,Wr))return;const{signal:t}=b(this,qr,new AbortController),e=l(this,_n).hasOwnCommentButton,n=()=>{l(this,Ws).toggleCommentPopup(this,!0,void 0,!e)},s=()=>{l(this,Ws).toggleCommentPopup(this,!1,!0,!e)},i=()=>{l(this,Ws).toggleCommentPopup(this,!1,!1)};if(e){b(this,Ke,l(this,_n).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",l(this,kl),{signal:t}),o.addEventListener("click",n,{signal:t}),o.addEventListener("pointerenter",s,{signal:t}),o.addEventListener("pointerleave",i,{signal:t}),o.classList.add("popupTriggerArea")}else{const o=b(this,Ke,document.createElement("button"));o.className="annotationCommentButton";const d=l(this,_n).container;o.style.zIndex=d.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),C(this,Ut,RS).call(this),C(this,Ut,NS).call(this),o.addEventListener("keydown",l(this,kl),{signal:t}),o.addEventListener("click",n,{signal:t}),o.addEventListener("pointerenter",s,{signal:t}),o.addEventListener("pointerleave",i,{signal:t}),d.after(o)}}get commentButtonColor(){const{color:t,opacity:e}=l(this,_n).commentData;return t?l(this,pp)._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{var t;(t=l(this,Ke))==null||t.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:s,modificationDate:i}=l(this,_n).commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:s,modificationDate:i}}get elementBeforePopup(){return l(this,Ke)}get comment(){return l(this,Pl)||b(this,Pl,l(this,_n).commentText),l(this,Pl)}set comment(t){t!==this.comment&&(l(this,_n).commentText=b(this,Pl,t))}focus(){var t;(t=l(this,_n).container)==null||t.focus()}get parentBoundingClientRect(){return l(this,_n).layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){l(this,Ke)&&(l(this,Ke).classList.toggle("selected",t),l(this,Ke).ariaExpanded=e)}setSelectedCommentButton(t){l(this,Ke).classList.toggle("selected",t)}get commentPopupPosition(){if(l(this,Cl))return l(this,Cl);const{x:t,y:e,height:n}=l(this,Ke).getBoundingClientRect(),{x:s,y:i,width:o,height:d}=l(this,_n).layer.getBoundingClientRect();return[(t-s)/o,(e+n-i)/d]}set commentPopupPosition(t){b(this,Cl,t)}hasDefaultPopupPosition(){return l(this,Cl)===null}get commentButtonPosition(){return l(this,Wr)}get commentButtonWidth(){return l(this,Ke).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=l(this,Cl)||this.commentButtonPosition.map(p=>p/100),s=this.parentBoundingClientRect,{x:i,y:o,width:d,height:u}=s;l(this,Ws).showDialog(null,this,i+e*d,o+n*u,{...t,parentDimensions:s})}render(){var n,s;if(l(this,Gs))return;const t=b(this,Gs,document.createElement("div"));if(t.className="popup",l(this,hp)){const i=t.style.outlineColor=xt.makeHexColor(...l(this,hp));t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const e=document.createElement("span");if(e.className="header",(n=l(this,fp))!=null&&n.str){const i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=l(this,fp)}if(t.append(e),l(this,El)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,El).valueOf()})),i.dateTime=l(this,El).toISOString(),e.append(i)}h3({html:l(this,Ut,Sx)||l(this,$a).str,dir:(s=l(this,$a))==null?void 0:s.dir,className:"popupContent"},t),l(this,Ge).append(t)}updateEdited({rect:t,popup:e,deleted:n}){var s;if(l(this,Ws)){n?(this.remove(),b(this,Pl,null)):e&&(e.deleted?this.remove():(C(this,Ut,RS).call(this),b(this,Pl,e.text))),t&&(b(this,Wr,null),C(this,Ut,DS).call(this),C(this,Ut,NS).call(this));return}if(n||e!=null&&e.deleted){this.remove();return}C(this,Ut,wx).call(this),l(this,Ed)||b(this,Ed,{contentsObj:l(this,$a),richText:l(this,Gr)}),t&&b(this,Vr,null),e&&e.text&&(b(this,Gr,C(this,Ut,AP).call(this,e.text)),b(this,El,ty.toDateObject(e.date)),b(this,$a,null)),(s=l(this,Gs))==null||s.remove(),b(this,Gs,null)}resetEdited(){var t;l(this,Ed)&&({contentsObj:He(this,$a)._,richText:He(this,Gr)._}=l(this,Ed),b(this,Ed,null),(t=l(this,Gs))==null||t.remove(),b(this,Gs,null),b(this,Vr,null))}remove(){var t,e,n;if((t=l(this,qr))==null||t.abort(),b(this,qr,null),(e=l(this,Gs))==null||e.remove(),b(this,Gs,null),b(this,Tl,!1),b(this,za,!1),(n=l(this,Ke))==null||n.remove(),b(this,Ke,null),this.trigger)for(const s of this.trigger)s.classList.remove("popupTriggerArea")}forceHide(){b(this,Tl,this.isVisible),l(this,Tl)&&(l(this,Ge).hidden=!0)}maybeShow(){l(this,Ws)||(C(this,Ut,wx).call(this),l(this,Tl)&&(l(this,Gs)||C(this,Ut,_x).call(this),b(this,Tl,!1),l(this,Ge).hidden=!1))}get isVisible(){return l(this,Ws)?!1:l(this,Ge).hidden===!1}}Ws=new WeakMap,kl=new WeakMap,_y=new WeakMap,ky=new WeakMap,up=new WeakMap,hp=new WeakMap,Ge=new WeakMap,$a=new WeakMap,El=new WeakMap,kd=new WeakMap,pp=new WeakMap,mp=new WeakMap,za=new WeakMap,Gs=new WeakMap,qr=new WeakMap,Vr=new WeakMap,Ke=new WeakMap,Wr=new WeakMap,Cl=new WeakMap,qg=new WeakMap,Gr=new WeakMap,fp=new WeakMap,Ed=new WeakMap,Tl=new WeakMap,_n=new WeakMap,Pl=new WeakMap,Ut=new WeakSet,wx=function(){var e;if(l(this,qr))return;b(this,qr,new AbortController);const{signal:t}=l(this,qr);for(const n of this.trigger)n.addEventListener("click",l(this,up),{signal:t}),n.addEventListener("pointerenter",l(this,ky),{signal:t}),n.addEventListener("pointerleave",l(this,_y),{signal:t}),n.classList.add("popupTriggerArea");for(const n of l(this,kd))(e=n.container)==null||e.addEventListener("keydown",l(this,kl),{signal:t})},DS=function(){const t=l(this,kd).find(e=>e.hasCommentButton);t&&b(this,Wr,t._normalizePoint(t.commentButtonPosition))},NS=function(){if(l(this,_n).extraPopupElement&&!l(this,_n).editor)return;l(this,Ke)||this.renderCommentButton();const[t,e]=l(this,Wr),{style:n}=l(this,Ke);n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`},RS=function(){l(this,_n).extraPopupElement||(l(this,Ke)||this.renderCommentButton(),l(this,Ke).style.backgroundColor=this.commentButtonColor||"")},Sx=function(){const t=l(this,Gr),e=l(this,$a);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&l(this,Gr).html||null},MS=function(){var t,e,n;return((n=(e=(t=l(this,Ut,Sx))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},SP=function(){var t,e,n;return((n=(e=(t=l(this,Ut,Sx))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},AP=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:l(this,Ut,SP),fontSize:l(this,Ut,MS)?`calc(${l(this,Ut,MS)}px * var(--total-scale-factor))`:""}};for(const i of t.split(`
`))e.push({name:"span",value:i,attributes:s});return n},_P=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&l(this,za))&&C(this,Ut,Ax).call(this)},kP=function(){if(l(this,Vr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:s,pageY:i}}}=l(this,pp);let o=!!l(this,mp),d=o?l(this,mp):l(this,qg);for(const k of l(this,kd))if(!d||xt.intersect(k.data.rect,d)!==null){d=k.data.rect,o=!0;break}const u=xt.normalizeRect([d[0],t[3]-d[1]+t[1],d[2],t[3]-d[3]+t[1]]),m=o?d[2]-d[0]+5:0,g=u[0]+m,x=u[1];b(this,Vr,[100*(g-s)/e,100*(x-i)/n]);const{style:v}=l(this,Ge);v.left=`${l(this,Vr)[0]}%`,v.top=`${l(this,Vr)[1]}%`},Ax=function(){if(l(this,Ws)){l(this,Ws).toggleCommentPopup(this,!1);return}b(this,za,!l(this,za)),l(this,za)?(C(this,Ut,_x).call(this),l(this,Ge).addEventListener("click",l(this,up)),l(this,Ge).addEventListener("keydown",l(this,kl))):(C(this,Ut,OS).call(this),l(this,Ge).removeEventListener("click",l(this,up)),l(this,Ge).removeEventListener("keydown",l(this,kl)))},_x=function(){l(this,Gs)||this.render(),this.isVisible?l(this,za)&&l(this,Ge).classList.add("focused"):(C(this,Ut,kP).call(this),l(this,Ge).hidden=!1,l(this,Ge).style.zIndex=parseInt(l(this,Ge).style.zIndex)+1e3)},OS=function(){l(this,Ge).classList.remove("focused"),!(l(this,za)||!this.isVisible)&&(l(this,Ge).hidden=!0,l(this,Ge).style.zIndex=parseInt(l(this,Ge).style.zIndex)-1e3)};class EP extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Bt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Vg;class PL extends Ue{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,Vg,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:s}=this,i=this.svgFactory.create(n,s,!0),o=b(this,Vg,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,Vg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vg=new WeakMap;var Wg;class DL extends Ue{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,Wg,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:s}=this,i=this.svgFactory.create(n,s,!0),o=e.borderStyle.width,d=b(this,Wg,this.svgFactory.createElement("svg:rect"));return d.setAttribute("x",o/2),d.setAttribute("y",o/2),d.setAttribute("width",n-o),d.setAttribute("height",s-o),d.setAttribute("stroke-width",o||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),i.append(d),this.container.append(i),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,Wg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wg=new WeakMap;var Gg;class NL extends Ue{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,Gg,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:s}=this,i=this.svgFactory.create(n,s,!0),o=e.borderStyle.width,d=b(this,Gg,this.svgFactory.createElement("svg:ellipse"));return d.setAttribute("cx",n/2),d.setAttribute("cy",s/2),d.setAttribute("rx",n/2-o/2),d.setAttribute("ry",s/2-o/2),d.setAttribute("stroke-width",o||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),i.append(d),this.container.append(i),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,Gg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Gg=new WeakMap;var Kg;class CP extends Ue{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,Kg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:s,popupRef:i},width:o,height:d}=this;if(!n)return this.container;const u=this.svgFactory.create(o,d,!0);let p=[];for(let g=0,x=n.length;g<x;g+=2){const v=n[g]-e[0],k=e[3]-n[g+1];p.push(`${v},${k}`)}p=p.join(" ");const m=b(this,Kg,this.svgFactory.createElement(this.svgElementName));return m.setAttribute("points",p),m.setAttribute("stroke-width",s.width||1),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),u.append(m),this.container.append(u),!i&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return l(this,Kg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kg=new WeakMap;class RL extends CP{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ML extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}var Xg,Cd,Yg,BS;class IA extends Ue{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});A(this,Yg);A(this,Xg,null);A(this,Cd,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Bt.HIGHLIGHT:Bt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:s,borderStyle:i,popupRef:o}}=this,{transform:d,width:u,height:p}=C(this,Yg,BS).call(this,n,e),m=this.svgFactory.create(u,p,!0),g=b(this,Xg,this.svgFactory.createElement("svg:g"));m.append(g),g.setAttribute("stroke-width",i.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",d);for(let x=0,v=s.length;x<v;x++){const k=this.svgFactory.createElement(this.svgElementName);l(this,Cd).push(k),k.setAttribute("points",s[x].join(",")),g.append(k)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(m),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:s,rect:i}=e,o=l(this,Xg);if(n>=0&&o.setAttribute("stroke-width",n||1),s)for(let d=0,u=l(this,Cd).length;d<u;d++)l(this,Cd)[d].setAttribute("points",s[d].join(","));if(i){const{transform:d,width:u,height:p}=C(this,Yg,BS).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${p}`),o.setAttribute("transform",d)}}getElementsToTriggerPopup(){return l(this,Cd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xg=new WeakMap,Cd=new WeakMap,Yg=new WeakSet,BS=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class TP extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Bt.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class OL extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class BL extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class IL extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class PP extends Ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Bt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}var Qg,Jg,IS;class FL extends Ue{constructor(e){var s;super(e,{isRenderable:!0});A(this,Jg);A(this,Qg,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",C(this,Jg,IS).bind(this)),b(this,Qg,s);const{isMac:i}=zn.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&C(this,Jg,IS).call(this)}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return l(this,Qg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qg=new WeakMap,Jg=new WeakSet,IS=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Td,Pd,gp,Dl,Zg,Dd,Ks,t0,io,kx,jS;const VA=class VA{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:s,page:i,viewport:o,structTreeLayer:d,commentManager:u,linkService:p,annotationStorage:m}){A(this,io);A(this,Td,null);A(this,Pd,null);A(this,gp,null);A(this,Dl,new Map);A(this,Zg,null);A(this,Dd,null);A(this,Ks,[]);A(this,t0,!1);this.div=t,b(this,Td,e),b(this,Pd,n),b(this,Zg,d||null),b(this,Dd,p||null),b(this,gp,m||new RA),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=u||null}hasEditableAnnotations(){return l(this,Dl).size>0}async render(t){var d;const{annotations:e}=t,n=this.div;Zd(n,this.viewport);const s=new Map,i=[],o={data:null,layer:n,linkService:l(this,Dd),downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ly,annotationStorage:l(this,gp),enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const p=u.annotationType===sn.POPUP;if(p){const x=s.get(u.id);if(!x)continue;if(!this._commentManager){i.push(u);continue}o.elements=x}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;o.data=u;const m=tw.create(o);if(!m.isRenderable)continue;if(!p&&(l(this,Ks).push(m),u.popupRef)){const x=s.get(u.popupRef);x?x.push(m):s.set(u.popupRef,[m])}const g=m.render();u.hidden&&(g.style.visibility="hidden"),m._isEditable&&(l(this,Dl).set(m.data.id,m),(d=this._annotationEditorUIManager)==null||d.renderAnnotationElement(m))}await C(this,io,kx).call(this);for(const u of i){const p=o.elements=s.get(u.id);o.data=u;const m=tw.create(o);if(!m.isRenderable)continue;const g=m.render();m.contentElement.id=`${Wu}${u.id}`,u.hidden&&(g.style.visibility="hidden"),p.at(-1).container.after(g)}C(this,io,jS).call(this)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:l(this,Dd),svgFactory:new ly,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=VA._defaultBorderStyle),e.data=n;const s=tw.create(e);s.isRenderable&&(s.render(),s.contentElement.id=`${Wu}${n.id}`,l(this,Ks).push(s))}await C(this,io,kx).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,Zd(e,{rotation:t.rotation}),C(this,io,jS).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(l(this,Dl).values())}getEditableAnnotation(t){return l(this,Dl).get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:s}=t,i=new wL({data:{id:n,rect:t.getPDFRect(),rotation:s},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:l(this,Dd),annotationStorage:l(this,gp)});return i.render(),i.contentElement.id=`${Wu}${n}`,i.createOrUpdatePopup(),l(this,Ks).push(i),i}removeAnnotation(t){var s;const e=l(this,Ks).findIndex(i=>i.data.id===t);if(e<0)return;const[n]=l(this,Ks).splice(e,1);(s=l(this,Td))==null||s.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);C(this,io,kx).call(this)}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return Ft(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:ju.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Td=new WeakMap,Pd=new WeakMap,gp=new WeakMap,Dl=new WeakMap,Zg=new WeakMap,Dd=new WeakMap,Ks=new WeakMap,t0=new WeakMap,io=new WeakSet,kx=async function(){var n,s,i;if(l(this,Ks).length===0)return;this.div.replaceChildren();const t=[];if(!l(this,t0)){b(this,t0,!0);for(const{contentElement:o,data:{id:d}}of l(this,Ks)){const u=o.id=`${Wu}${d}`;t.push((n=l(this,Zg))==null?void 0:n.getAriaAttributes(u).then(p=>{if(p)for(const[m,g]of p)o.setAttribute(m,g)}))}}l(this,Ks).sort(({data:{rect:[o,d,u,p]}},{data:{rect:[m,g,x,v]}})=>{if(o===u&&d===p)return 1;if(m===x&&g===v)return-1;const k=p,S=d,_=(d+p)/2,E=v,N=g,P=(g+v)/2;if(_>=E&&P<=S)return-1;if(P>=k&&_<=N)return 1;const R=(o+u)/2,M=(m+x)/2;return R-M});const e=document.createDocumentFragment();for(const o of l(this,Ks))e.append(o.container),this._commentManager?(i=((s=o.extraPopupElement)==null?void 0:s.popup)||o.popup)==null||i.renderCommentButton():o.extraPopupElement&&e.append(o.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),l(this,Td))for(const o of l(this,Ks))l(this,Td).addPointerInTextLayer(o.contentElement,!1)},jS=function(){var e;if(!l(this,Pd))return;const t=this.div;for(const[n,s]of l(this,Pd)){const i=t.querySelector(`[data-annotation-id="${n}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):i.append(s);const d=l(this,Dl).get(n);d&&(d._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,i.id,s),d._hasNoCanvas=!1):d.canvas=s)}l(this,Pd).clear()};let FS=VA;const sx=/\r\n?|\n/g;var Xs,e0,Nd,Ys,on,DP,NP,RP,Ex,ao,Cx,Tx,MP,US,OP;const Ce=class Ce extends Ae{constructor(e){super({...e,name:"freeTextEditor"});A(this,on);A(this,Xs,"");A(this,e0,`${this.id}-editor`);A(this,Nd,null);A(this,Ys);nt(this,"_colorPicker",null);this.color=e.color||Ce._defaultColor||Ae._defaultLineColor,b(this,Ys,e.fontSize||Ce._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static get _keyboardManager(){const e=Ce.prototype,n=o=>o.isEmpty(),s=tu.TRANSLATE_SMALL,i=tu.TRANSLATE_BIG;return Ft(this,"_keyboardManager",new k0([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}]]))}static initialize(e,n){Ae.initialize(e,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Wt.FREETEXT_SIZE:Ce._defaultFontSize=n;break;case Wt.FREETEXT_COLOR:Ce._defaultColor=n;break}}updateParams(e,n){switch(e){case Wt.FREETEXT_SIZE:C(this,on,DP).call(this,n);break;case Wt.FREETEXT_COLOR:C(this,on,NP).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Wt.FREETEXT_SIZE,Ce._defaultFontSize],[Wt.FREETEXT_COLOR,Ce._defaultColor||Ae._defaultLineColor]]}get propertiesToUpdate(){return[[Wt.FREETEXT_SIZE,l(this,Ys)],[Wt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new oy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Wt.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ce._internalPadding*e,-(Ce._internalPadding+l(this,Ys))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),b(this,Nd,new AbortController);const e=this._uiManager.combinedSignal(l(this,Nd));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,e0)),this._isDraggable=!0,(e=l(this,Nd))==null||e.abort(),b(this,Nd,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=l(this,Xs),n=b(this,Xs,C(this,on,RP).call(this).trimEnd());if(e===n)return;const s=i=>{if(b(this,Xs,i),!i){this.remove();return}C(this,on,Tx).call(this),this._uiManager.rebuild(this),C(this,on,Ex).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(e)},mustExec:!1}),C(this,on,Ex).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ce._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,e0)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${l(this,Ys)}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:d}=this._initialData;let[u,p]=this.getInitialTranslation();[u,p]=this.pageTranslationToScreen(u,p);const[m,g]=this.pageDimensions,[x,v]=this.pageTranslation;let k,S;switch(this.rotation){case 0:k=e+(d[0]-x)/m,S=n+this.height-(d[1]-v)/g;break;case 90:k=e+(d[0]-x)/m,S=n-(d[1]-v)/g,[u,p]=[p,-u];break;case 180:k=e-this.width+(d[0]-x)/m,S=n-(d[1]-v)/g,[u,p]=[-u,-p];break;case 270:k=e+(d[0]-x-this.height*g)/m,S=n+(d[1]-v-this.width*m)/g,[u,p]=[-p,u];break}this.setAt(k*i,S*o,u,p)}else this._moveAfterPaste(e,n);C(this,on,Tx).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var k,S,_;const n=e.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const i=C(k=Ce,ao,US).call(k,n.getData("text")||"").replaceAll(sx,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const d=o.getRangeAt(0);if(!i.includes(`
`)){d.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:p}=d,m=[],g=[];if(u.nodeType===Node.TEXT_NODE){const E=u.parentElement;if(g.push(u.nodeValue.slice(p).replaceAll(sx,"")),E!==this.editorDiv){let N=m;for(const P of this.editorDiv.childNodes){if(P===E){N=g;continue}N.push(C(S=Ce,ao,Cx).call(S,P))}}m.push(u.nodeValue.slice(0,p).replaceAll(sx,""))}else if(u===this.editorDiv){let E=m,N=0;for(const P of this.editorDiv.childNodes)N++===p&&(E=g),E.push(C(_=Ce,ao,Cx).call(_,P))}b(this,Xs,`${m.join(`
`)}${i}${g.join(`
`)}`),C(this,on,Tx).call(this);const x=new Range;let v=Math.sumPrecise(m.map(E=>E.length));for(const{firstChild:E}of this.editorDiv.childNodes)if(E.nodeType===Node.TEXT_NODE){const N=E.nodeValue.length;if(v<=N){x.setStart(E,v),x.setEnd(E,v);break}v-=N}o.removeAllRanges(),o.addRange(x)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Ce._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,s){var d;let i=null;if(e instanceof EP){const{data:{defaultAppearanceData:{fontSize:u,fontColor:p},rect:m,rotation:g,id:x,popupRef:v,richText:k,contentsObj:S,creationDate:_,modificationDate:E},textContent:N,textPosition:P,parent:{page:{pageNumber:R}}}=e;if(!N||N.length===0)return null;i=e={annotationType:Bt.FREETEXT,color:Array.from(p),fontSize:u,value:N.join(`
`),position:P,pageIndex:R-1,rect:m.slice(0),rotation:g,annotationElementId:x,id:x,deleted:!1,popupRef:v,comment:(S==null?void 0:S.str)||null,richText:k,creationDate:_,modificationDate:E}}const o=await super.deserialize(e,n,s);return b(o,Ys,e.fontSize),o.color=xt.makeHexColor(...e.color),b(o,Xs,C(d=Ce,ao,US).call(d,e.value)),o._initialData=i,e.comment&&o.setCommentData(e),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Ae._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(e),{color:n,fontSize:l(this,Ys),value:C(this,on,MP).call(this)});return this.addComment(s),e?(s.isCopy=!0,s):this.annotationElementId&&!C(this,on,OP).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:s}=n;s.fontSize=`calc(${l(this,Ys)}px * var(--total-scale-factor))`,s.color=this.color,n.replaceChildren();for(const i of l(this,Xs).split(`
`)){const o=document.createElement("div");o.append(i?document.createTextNode(i):document.createElement("br")),n.append(o)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:l(this,Xs)}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Xs=new WeakMap,e0=new WeakMap,Nd=new WeakMap,Ys=new WeakMap,on=new WeakSet,DP=function(e){const n=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-l(this,Ys))*this.parentScale),b(this,Ys,i),C(this,on,Ex).call(this)},s=l(this,Ys);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},NP=function(e){const n=i=>{this.color=i,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},RP=function(){var s;const e=[];this.editorDiv.normalize();let n=null;for(const i of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(e.push(C(s=Ce,ao,Cx).call(s,i)),n=i);return e.join(`
`)},Ex=function(){const[e,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,d=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=d,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/n):(this.width=s.height/e,this.height=s.width/n),this.fixAndSetPosition()},ao=new WeakSet,Cx=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(sx,"")},Tx=function(){if(this.editorDiv.replaceChildren(),!!l(this,Xs))for(const e of l(this,Xs).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},MP=function(){return l(this,Xs).replaceAll(""," ")},US=function(e){return e.replaceAll(" ","")},OP=function(e){const{value:n,fontSize:s,color:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==s||e.color.some((d,u)=>d!==i[u])||e.pageIndex!==o},A(Ce,ao),nt(Ce,"_freeTextDefaultContent",""),nt(Ce,"_internalPadding",0),nt(Ce,"_defaultColor",null),nt(Ce,"_defaultFontSize",10),nt(Ce,"_type","freetext"),nt(Ce,"_editorType",Bt.FREETEXT);let LS=Ce;class mt{toSVGPath(){ye("Abstract method `toSVGPath` must be implemented.")}get box(){ye("Abstract getter `box` must be implemented.")}serialize(t,e){ye("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,s,i,o){o||(o=new Float32Array(t.length));for(let d=0,u=t.length;d<u;d+=2)o[d]=e+t[d]*s,o[d+1]=n+t[d+1]*i;return o}static _rescaleAndSwap(t,e,n,s,i,o){o||(o=new Float32Array(t.length));for(let d=0,u=t.length;d<u;d+=2)o[d]=e+t[d+1]*s,o[d+1]=n+t[d]*i;return o}static _translate(t,e,n,s){s||(s=new Float32Array(t.length));for(let i=0,o=t.length;i<o;i+=2)s[i]=e+t[i],s[i+1]=n+t[i+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,s,i){switch(i){case 90:return[1-e/n,t/s];case 180:return[1-t/n,1-e/s];case 270:return[e/n,1-t/s];default:return[t/n,e/s]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,s,i,o){return[(t+5*n)/6,(e+5*s)/6,(5*n+i)/6,(5*s+o)/6,(n+i)/2,(s+o)/2]}}nt(mt,"PRECISION",1e-4);var Qs,sa,xp,yp,Ha,zt,Rd,Md,n0,s0,vp,bp,Nl,i0,Ey,Cy,xn,rf,BP,IP,FP,jP,LP,UP;const gr=class gr{constructor({x:t,y:e},n,s,i,o,d=0){A(this,xn);A(this,Qs);A(this,sa,[]);A(this,xp);A(this,yp);A(this,Ha,[]);A(this,zt,new Float32Array(18));A(this,Rd);A(this,Md);A(this,n0);A(this,s0);A(this,vp);A(this,bp);A(this,Nl,[]);b(this,Qs,n),b(this,bp,i*s),b(this,yp,o),l(this,zt).set([NaN,NaN,NaN,NaN,t,e],6),b(this,xp,d),b(this,s0,l(gr,i0)*s),b(this,n0,l(gr,Cy)*s),b(this,vp,s),l(this,Nl).push(t,e)}isEmpty(){return isNaN(l(this,zt)[8])}add({x:t,y:e}){var K;b(this,Rd,t),b(this,Md,e);const[n,s,i,o]=l(this,Qs);let[d,u,p,m]=l(this,zt).subarray(8,12);const g=t-p,x=e-m,v=Math.hypot(g,x);if(v<l(this,n0))return!1;const k=v-l(this,s0),S=k/v,_=S*g,E=S*x;let N=d,P=u;d=p,u=m,p+=_,m+=E,(K=l(this,Nl))==null||K.push(t,e);const R=-E/k,M=_/k,O=R*l(this,bp),I=M*l(this,bp);return l(this,zt).set(l(this,zt).subarray(2,8),0),l(this,zt).set([p+O,m+I],4),l(this,zt).set(l(this,zt).subarray(14,18),12),l(this,zt).set([p-O,m-I],16),isNaN(l(this,zt)[6])?(l(this,Ha).length===0&&(l(this,zt).set([d+O,u+I],2),l(this,Ha).push(NaN,NaN,NaN,NaN,(d+O-n)/i,(u+I-s)/o),l(this,zt).set([d-O,u-I],14),l(this,sa).push(NaN,NaN,NaN,NaN,(d-O-n)/i,(u-I-s)/o)),l(this,zt).set([N,P,d,u,p,m],6),!this.isEmpty()):(l(this,zt).set([N,P,d,u,p,m],6),Math.abs(Math.atan2(P-u,N-d)-Math.atan2(E,_))<Math.PI/2?([d,u,p,m]=l(this,zt).subarray(2,6),l(this,Ha).push(NaN,NaN,NaN,NaN,((d+p)/2-n)/i,((u+m)/2-s)/o),[d,u,N,P]=l(this,zt).subarray(14,18),l(this,sa).push(NaN,NaN,NaN,NaN,((N+d)/2-n)/i,((P+u)/2-s)/o),!0):([N,P,d,u,p,m]=l(this,zt).subarray(0,6),l(this,Ha).push(((N+5*d)/6-n)/i,((P+5*u)/6-s)/o,((5*d+p)/6-n)/i,((5*u+m)/6-s)/o,((d+p)/2-n)/i,((u+m)/2-s)/o),[p,m,d,u,N,P]=l(this,zt).subarray(12,18),l(this,sa).push(((N+5*d)/6-n)/i,((P+5*u)/6-s)/o,((5*d+p)/6-n)/i,((5*u+m)/6-s)/o,((d+p)/2-n)/i,((u+m)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=l(this,Ha),e=l(this,sa);if(isNaN(l(this,zt)[6])&&!this.isEmpty())return C(this,xn,BP).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);C(this,xn,FP).call(this,n);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return C(this,xn,IP).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,s,i,o){return new $P(t,e,n,s,i,o)}getOutlines(){var g;const t=l(this,Ha),e=l(this,sa),n=l(this,zt),[s,i,o,d]=l(this,Qs),u=new Float32Array((((g=l(this,Nl))==null?void 0:g.length)??0)+2);for(let x=0,v=u.length-2;x<v;x+=2)u[x]=(l(this,Nl)[x]-s)/o,u[x+1]=(l(this,Nl)[x+1]-i)/d;if(u[u.length-2]=(l(this,Rd)-s)/o,u[u.length-1]=(l(this,Md)-i)/d,isNaN(n[6])&&!this.isEmpty())return C(this,xn,jP).call(this,u);const p=new Float32Array(l(this,Ha).length+24+l(this,sa).length);let m=t.length;for(let x=0;x<m;x+=2){if(isNaN(t[x])){p[x]=p[x+1]=NaN;continue}p[x]=t[x],p[x+1]=t[x+1]}m=C(this,xn,UP).call(this,p,m);for(let x=e.length-6;x>=6;x-=6)for(let v=0;v<6;v+=2){if(isNaN(e[x+v])){p[m]=p[m+1]=NaN,m+=2;continue}p[m]=e[x+v],p[m+1]=e[x+v+1],m+=2}return C(this,xn,LP).call(this,p,m),this.newFreeDrawOutline(p,u,l(this,Qs),l(this,vp),l(this,xp),l(this,yp))}};Qs=new WeakMap,sa=new WeakMap,xp=new WeakMap,yp=new WeakMap,Ha=new WeakMap,zt=new WeakMap,Rd=new WeakMap,Md=new WeakMap,n0=new WeakMap,s0=new WeakMap,vp=new WeakMap,bp=new WeakMap,Nl=new WeakMap,i0=new WeakMap,Ey=new WeakMap,Cy=new WeakMap,xn=new WeakSet,rf=function(){const t=l(this,zt).subarray(4,6),e=l(this,zt).subarray(16,18),[n,s,i,o]=l(this,Qs);return[(l(this,Rd)+(t[0]-e[0])/2-n)/i,(l(this,Md)+(t[1]-e[1])/2-s)/o,(l(this,Rd)+(e[0]-t[0])/2-n)/i,(l(this,Md)+(e[1]-t[1])/2-s)/o]},BP=function(){const[t,e,n,s]=l(this,Qs),[i,o,d,u]=C(this,xn,rf).call(this);return`M${(l(this,zt)[2]-t)/n} ${(l(this,zt)[3]-e)/s} L${(l(this,zt)[4]-t)/n} ${(l(this,zt)[5]-e)/s} L${i} ${o} L${d} ${u} L${(l(this,zt)[16]-t)/n} ${(l(this,zt)[17]-e)/s} L${(l(this,zt)[14]-t)/n} ${(l(this,zt)[15]-e)/s} Z`},IP=function(t){const e=l(this,sa);t.push(`L${e[4]} ${e[5]} Z`)},FP=function(t){const[e,n,s,i]=l(this,Qs),o=l(this,zt).subarray(4,6),d=l(this,zt).subarray(16,18),[u,p,m,g]=C(this,xn,rf).call(this);t.push(`L${(o[0]-e)/s} ${(o[1]-n)/i} L${u} ${p} L${m} ${g} L${(d[0]-e)/s} ${(d[1]-n)/i}`)},jP=function(t){const e=l(this,zt),[n,s,i,o]=l(this,Qs),[d,u,p,m]=C(this,xn,rf).call(this),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(e[2]-n)/i,(e[3]-s)/o,NaN,NaN,NaN,NaN,(e[4]-n)/i,(e[5]-s)/o,NaN,NaN,NaN,NaN,d,u,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,(e[16]-n)/i,(e[17]-s)/o,NaN,NaN,NaN,NaN,(e[14]-n)/i,(e[15]-s)/o],0),this.newFreeDrawOutline(g,t,l(this,Qs),l(this,vp),l(this,xp),l(this,yp))},LP=function(t,e){const n=l(this,sa);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},UP=function(t,e){const n=l(this,zt).subarray(4,6),s=l(this,zt).subarray(16,18),[i,o,d,u]=l(this,Qs),[p,m,g,x]=C(this,xn,rf).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-i)/d,(n[1]-o)/u,NaN,NaN,NaN,NaN,p,m,NaN,NaN,NaN,NaN,g,x,NaN,NaN,NaN,NaN,(s[0]-i)/d,(s[1]-o)/u],e),e+=24},A(gr,i0,8),A(gr,Ey,2),A(gr,Cy,l(gr,i0)+l(gr,Ey));let cy=gr;var wp,Od,Kr,a0,Js,r0,tn,Ty,zP;class $P extends mt{constructor(e,n,s,i,o,d){super();A(this,Ty);A(this,wp);A(this,Od,new Float32Array(4));A(this,Kr);A(this,a0);A(this,Js);A(this,r0);A(this,tn);b(this,tn,e),b(this,Js,n),b(this,wp,s),b(this,r0,i),b(this,Kr,o),b(this,a0,d),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],C(this,Ty,zP).call(this,d);const[u,p,m,g]=l(this,Od);for(let x=0,v=e.length;x<v;x+=2)e[x]=(e[x]-u)/m,e[x+1]=(e[x+1]-p)/g;for(let x=0,v=n.length;x<v;x+=2)n[x]=(n[x]-u)/m,n[x+1]=(n[x+1]-p)/g}toSVGPath(){const e=[`M${l(this,tn)[4]} ${l(this,tn)[5]}`];for(let n=6,s=l(this,tn).length;n<s;n+=6){if(isNaN(l(this,tn)[n])){e.push(`L${l(this,tn)[n+4]} ${l(this,tn)[n+5]}`);continue}e.push(`C${l(this,tn)[n]} ${l(this,tn)[n+1]} ${l(this,tn)[n+2]} ${l(this,tn)[n+3]} ${l(this,tn)[n+4]} ${l(this,tn)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,s,i],o){const d=s-e,u=i-n;let p,m;switch(o){case 0:p=mt._rescale(l(this,tn),e,i,d,-u),m=mt._rescale(l(this,Js),e,i,d,-u);break;case 90:p=mt._rescaleAndSwap(l(this,tn),e,n,d,u),m=mt._rescaleAndSwap(l(this,Js),e,n,d,u);break;case 180:p=mt._rescale(l(this,tn),s,n,-d,u),m=mt._rescale(l(this,Js),s,n,-d,u);break;case 270:p=mt._rescaleAndSwap(l(this,tn),s,i,-d,-u),m=mt._rescaleAndSwap(l(this,Js),s,i,-d,-u);break}return{outline:Array.from(p),points:[Array.from(m)]}}get box(){return l(this,Od)}newOutliner(e,n,s,i,o,d=0){return new cy(e,n,s,i,o,d)}getNewOutline(e,n){const[s,i,o,d]=l(this,Od),[u,p,m,g]=l(this,wp),x=o*m,v=d*g,k=s*m+u,S=i*g+p,_=this.newOutliner({x:l(this,Js)[0]*x+k,y:l(this,Js)[1]*v+S},l(this,wp),l(this,r0),e,l(this,a0),n??l(this,Kr));for(let E=2;E<l(this,Js).length;E+=2)_.add({x:l(this,Js)[E]*x+k,y:l(this,Js)[E+1]*v+S});return _.getOutlines()}}wp=new WeakMap,Od=new WeakMap,Kr=new WeakMap,a0=new WeakMap,Js=new WeakMap,r0=new WeakMap,tn=new WeakMap,Ty=new WeakSet,zP=function(e){const n=l(this,tn);let s=n[4],i=n[5];const o=[s,i,s,i];let d=s,u=i,p=s,m=i;const g=e?Math.max:Math.min,x=new Float32Array(4);for(let k=6,S=n.length;k<S;k+=6){const _=n[k+4],E=n[k+5];isNaN(n[k])?(xt.pointBoundingBox(_,E,o),u>E?(d=_,u=E):u===E&&(d=g(d,_)),m<E?(p=_,m=E):m===E&&(p=g(p,_))):(x[0]=x[1]=1/0,x[2]=x[3]=-1/0,xt.bezierBoundingBox(s,i,...n.slice(k,k+6),x),xt.rectBoundingBox(x[0],x[1],x[2],x[3],o),u>x[1]?(d=x[0],u=x[1]):u===x[1]&&(d=g(d,x[0])),m<x[3]?(p=x[2],m=x[3]):m===x[3]&&(p=g(p,x[2]))),s=_,i=E}const v=l(this,Od);v[0]=o[0]-l(this,Kr),v[1]=o[1]-l(this,Kr),v[2]=o[2]-o[0]+2*l(this,Kr),v[3]=o[3]-o[1]+2*l(this,Kr),this.firstPoint=[d,u],this.lastPoint=[p,m]};var o0,l0,c0,Rl,ia,fs,HP,Px,qP,VP,zS;class $S{constructor(t,e=0,n=0,s=!0){A(this,fs);A(this,o0);A(this,l0);A(this,c0);A(this,Rl,[]);A(this,ia,[]);const i=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:S,y:_,width:E,height:N}of t){const P=Math.floor((S-e)/o)*o,R=Math.ceil((S+E+e)/o)*o,M=Math.floor((_-e)/o)*o,O=Math.ceil((_+N+e)/o)*o,I=[P,M,O,!0],H=[R,M,O,!1];l(this,Rl).push(I,H),xt.rectBoundingBox(P,M,R,O,i)}const d=i[2]-i[0]+2*n,u=i[3]-i[1]+2*n,p=i[0]-n,m=i[1]-n;let g=s?-1/0:1/0,x=1/0;const v=l(this,Rl).at(s?-1:-2),k=[v[0],v[2]];for(const S of l(this,Rl)){const[_,E,N,P]=S;!P&&s?E<x?(x=E,g=_):E===x&&(g=Math.max(g,_)):P&&!s&&(E<x?(x=E,g=_):E===x&&(g=Math.min(g,_))),S[0]=(_-p)/d,S[1]=(E-m)/u,S[2]=(N-m)/u}b(this,o0,new Float32Array([p,m,d,u])),b(this,l0,[g,x]),b(this,c0,k)}getOutlines(){l(this,Rl).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of l(this,Rl))e[3]?(t.push(...C(this,fs,zS).call(this,e)),C(this,fs,qP).call(this,e)):(C(this,fs,VP).call(this,e),t.push(...C(this,fs,zS).call(this,e)));return C(this,fs,HP).call(this,t)}}o0=new WeakMap,l0=new WeakMap,c0=new WeakMap,Rl=new WeakMap,ia=new WeakMap,fs=new WeakSet,HP=function(t){const e=[],n=new Set;for(const o of t){const[d,u,p]=o;e.push([d,u,o],[d,p,o])}e.sort((o,d)=>o[1]-d[1]||o[0]-d[0]);for(let o=0,d=e.length;o<d;o+=2){const u=e[o][2],p=e[o+1][2];u.push(p),p.push(u),n.add(u),n.add(p)}const s=[];let i;for(;n.size>0;){const o=n.values().next().value;let[d,u,p,m,g]=o;n.delete(o);let x=d,v=u;for(i=[d,p],s.push(i);;){let k;if(n.has(m))k=m;else if(n.has(g))k=g;else break;n.delete(k),[d,u,p,m,g]=k,x!==d&&(i.push(x,v,d,v===u?u:p),x=d),v=v===u?p:u}i.push(x,v)}return new jL(s,l(this,o0),l(this,l0),l(this,c0))},Px=function(t){const e=l(this,ia);let n=0,s=e.length-1;for(;n<=s;){const i=n+s>>1,o=e[i][0];if(o===t)return i;o<t?n=i+1:s=i-1}return s+1},qP=function([,t,e]){const n=C(this,fs,Px).call(this,t);l(this,ia).splice(n,0,[t,e])},VP=function([,t,e]){const n=C(this,fs,Px).call(this,t);for(let s=n;s<l(this,ia).length;s++){const[i,o]=l(this,ia)[s];if(i!==t)break;if(i===t&&o===e){l(this,ia).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[i,o]=l(this,ia)[s];if(i!==t)break;if(i===t&&o===e){l(this,ia).splice(s,1);return}}},zS=function(t){const[e,n,s]=t,i=[[e,n,s]],o=C(this,fs,Px).call(this,s);for(let d=0;d<o;d++){const[u,p]=l(this,ia)[d];for(let m=0,g=i.length;m<g;m++){const[,x,v]=i[m];if(!(p<=x||v<=u)){if(x>=u){if(v>p)i[m][1]=p;else{if(g===1)return[];i.splice(m,1),m--,g--}continue}i[m][2]=u,v>p&&i.push([e,p,v])}}}return i};var d0,Sp;class jL extends mt{constructor(e,n,s,i){super();A(this,d0);A(this,Sp);b(this,Sp,e),b(this,d0,n),this.firstPoint=s,this.lastPoint=i}toSVGPath(){const e=[];for(const n of l(this,Sp)){let[s,i]=n;e.push(`M${s} ${i}`);for(let o=2;o<n.length;o+=2){const d=n[o],u=n[o+1];d===s?(e.push(`V${u}`),i=u):u===i&&(e.push(`H${d}`),s=d)}e.push("Z")}return e.join(" ")}serialize([e,n,s,i],o){const d=[],u=s-e,p=i-n;for(const m of l(this,Sp)){const g=new Array(m.length);for(let x=0;x<m.length;x+=2)g[x]=e+m[x]*u,g[x+1]=i-m[x+1]*p;d.push(g)}return d}get box(){return l(this,d0)}get classNamesForOutlining(){return["highlightOutline"]}}d0=new WeakMap,Sp=new WeakMap;class HS extends cy{newFreeDrawOutline(t,e,n,s,i,o){return new LL(t,e,n,s,i,o)}}class LL extends $P{newOutliner(t,e,n,s,i,o=0){return new HS(t,e,n,s,i,o)}}var Ap,u0,Xr,Bd,h0,Ns,p0,m0,Id,Zs,ti,Fn,_p,kp,es,Ep,Di,f0,Lt,qS,Dx,WP,GP,KP,VS,gc,Mi,qu,XP,Nx,Rx,YP,QP,JP,ZP,tD;const te=class te extends Ae{constructor(e){super({...e,name:"highlightEditor"});A(this,Lt);A(this,Ap,null);A(this,u0,0);A(this,Xr);A(this,Bd,null);A(this,h0,null);A(this,Ns,null);A(this,p0,null);A(this,m0,0);A(this,Id,null);A(this,Zs,null);A(this,ti,null);A(this,Fn,!1);A(this,_p,null);A(this,kp,null);A(this,es,null);A(this,Ep,"");A(this,Di);A(this,f0,"");this.color=e.color||te._defaultColor,b(this,Di,e.thickness||te._defaultThickness),this.opacity=e.opacity||te._defaultOpacity,b(this,Xr,e.boxes||null),b(this,f0,e.methodOfCreation||""),b(this,Ep,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(b(this,Fn,!0),C(this,Lt,Dx).call(this,e),C(this,Lt,gc).call(this)):l(this,Xr)&&(b(this,Ap,e.anchorNode),b(this,u0,e.anchorOffset),b(this,p0,e.focusNode),b(this,m0,e.focusOffset),C(this,Lt,qS).call(this),C(this,Lt,gc).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=te.prototype;return Ft(this,"_keyboardManager",new k0([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,Fn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:l(this,Di),methodOfCreation:l(this,f0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var s;Ae.initialize(e,n),te._defaultColor||(te._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Wt.HIGHLIGHT_COLOR:te._defaultColor=n;break;case Wt.HIGHLIGHT_THICKNESS:te._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return l(this,kp)}get commentButtonPosition(){return l(this,_p)}updateParams(e,n){switch(e){case Wt.HIGHLIGHT_COLOR:C(this,Lt,WP).call(this,n);break;case Wt.HIGHLIGHT_THICKNESS:C(this,Lt,GP).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Wt.HIGHLIGHT_COLOR,te._defaultColor],[Wt.HIGHLIGHT_THICKNESS,te._defaultThickness]]}get propertiesToUpdate(){return[[Wt.HIGHLIGHT_COLOR,this.color||te._defaultColor],[Wt.HIGHLIGHT_THICKNESS,l(this,Di)||te._defaultThickness],[Wt.HIGHLIGHT_FREE,l(this,Fn)]]}onUpdatedColor(){var e,n;(e=this.parent)==null||e.drawLayer.updateProperties(l(this,ti),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=l(this,h0))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",b(this,h0,new ry({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(C(this,Lt,Rx).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,C(this,Lt,Rx).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){C(this,Lt,VS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,Lt,gc).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?C(this,Lt,VS).call(this):e&&(C(this,Lt,gc).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var i,o,d;const{drawLayer:n}=this.parent;let s;l(this,Fn)?(e=(e-this.rotation+360)%360,s=C(i=te,Mi,qu).call(i,l(this,Zs).box,e)):s=C(o=te,Mi,qu).call(o,[this.x,this.y,this.width,this.height],e),n.updateProperties(l(this,ti),{bbox:s,root:{"data-main-rotation":e}}),n.updateProperties(l(this,es),{bbox:C(d=te,Mi,qu).call(d,l(this,Ns).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();l(this,Ep)&&(e.setAttribute("aria-label",l(this,Ep)),e.setAttribute("role","mark")),l(this,Fn)?e.classList.add("free"):this.div.addEventListener("keydown",C(this,Lt,XP).bind(this),{signal:this._uiManager._signal});const n=b(this,Id,document.createElement("div"));return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=l(this,Bd),this.setDims(),v3(this,l(this,Id),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,es),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,es),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:C(this,Lt,Nx).call(this,!0);break;case 1:case 3:C(this,Lt,Nx).call(this,!1);break}}select(){var e;super.select(),l(this,es)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,es),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),l(this,es)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,es),{rootClass:{selected:!1}}),l(this,Fn)||C(this,Lt,Nx).call(this,!1))}get _mustFixPosition(){return!l(this,Fn)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(l(this,ti),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(l(this,es),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:s,x:i,y:o}){const{x:d,y:u,width:p,height:m}=s.getBoundingClientRect(),g=new AbortController,x=e.combinedSignal(g),v=k=>{g.abort(),C(this,Mi,ZP).call(this,e,k)};window.addEventListener("blur",v,{signal:x}),window.addEventListener("pointerup",v,{signal:x}),window.addEventListener("pointerdown",Ye,{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",Bi,{signal:x}),s.addEventListener("pointermove",C(this,Mi,JP).bind(this,e),{signal:x}),this._freeHighlight=new HS({x:i,y:o},[d,u,p,m],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,s){var S,_,E,N;let i=null;if(e instanceof TP){const{data:{quadPoints:P,rect:R,rotation:M,id:O,color:I,opacity:H,popupRef:K,richText:W,contentsObj:Y,creationDate:q,modificationDate:tt},parent:{page:{pageNumber:et}}}=e;i=e={annotationType:Bt.HIGHLIGHT,color:Array.from(I),opacity:H,quadPoints:P,boxes:null,pageIndex:et-1,rect:R.slice(0),rotation:M,annotationElementId:O,id:O,deleted:!1,popupRef:K,richText:W,comment:(Y==null?void 0:Y.str)||null,creationDate:q,modificationDate:tt}}else if(e instanceof IA){const{data:{inkLists:P,rect:R,rotation:M,id:O,color:I,borderStyle:{rawWidth:H},popupRef:K,richText:W,contentsObj:Y,creationDate:q,modificationDate:tt},parent:{page:{pageNumber:et}}}=e;i=e={annotationType:Bt.HIGHLIGHT,color:Array.from(I),thickness:H,inkLists:P,boxes:null,pageIndex:et-1,rect:R.slice(0),rotation:M,annotationElementId:O,id:O,deleted:!1,popupRef:K,richText:W,comment:(Y==null?void 0:Y.str)||null,creationDate:q,modificationDate:tt}}const{color:o,quadPoints:d,inkLists:u,opacity:p}=e,m=await super.deserialize(e,n,s);m.color=xt.makeHexColor(...o),m.opacity=p||1,u&&b(m,Di,e.thickness),m._initialData=i,e.comment&&m.setCommentData(e);const[g,x]=m.pageDimensions,[v,k]=m.pageTranslation;if(d){const P=b(m,Xr,[]);for(let R=0;R<d.length;R+=8)P.push({x:(d[R]-v)/g,y:1-(d[R+1]-k)/x,width:(d[R+2]-d[R])/g,height:(d[R+1]-d[R+5])/x});C(S=m,Lt,qS).call(S),C(_=m,Lt,gc).call(_),m.rotate(m.rotation)}else if(u){b(m,Fn,!0);const P=u[0],R={x:P[0]-v,y:x-(P[1]-k)},M=new HS(R,[0,0,g,x],1,l(m,Di)/2,!0,.001);for(let H=0,K=P.length;H<K;H+=2)R.x=P[H]-v,R.y=x-(P[H+1]-k),M.add(R);const{id:O,clipPathId:I}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:m.color,"fill-opacity":m._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:M.toSVGPath()}},!0,!0);C(E=m,Lt,Dx).call(E,{highlightOutlines:M.getOutlines(),highlightId:O,clipPathId:I}),C(N=m,Lt,gc).call(N),m.rotate(m.parentRotation)}return m}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=Ae._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(e);return Object.assign(s,{color:n,opacity:this.opacity,thickness:l(this,Di),quadPoints:C(this,Lt,YP).call(this),outlines:C(this,Lt,QP).call(this,s.rect)}),this.addComment(s),this.annotationElementId&&!C(this,Lt,tD).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Ap=new WeakMap,u0=new WeakMap,Xr=new WeakMap,Bd=new WeakMap,h0=new WeakMap,Ns=new WeakMap,p0=new WeakMap,m0=new WeakMap,Id=new WeakMap,Zs=new WeakMap,ti=new WeakMap,Fn=new WeakMap,_p=new WeakMap,kp=new WeakMap,es=new WeakMap,Ep=new WeakMap,Di=new WeakMap,f0=new WeakMap,Lt=new WeakSet,qS=function(){const e=new $S(l(this,Xr),.001);b(this,Zs,e.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,Zs).box;const n=new $S(l(this,Xr),.0025,.001,this._uiManager.direction==="ltr");b(this,Ns,n.getOutlines());const{firstPoint:s}=l(this,Zs);b(this,_p,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]);const{lastPoint:i}=l(this,Ns);b(this,kp,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},Dx=function({highlightOutlines:e,highlightId:n,clipPathId:s}){var x,v;if(b(this,Zs,e),b(this,Ns,e.getNewOutline(l(this,Di)/2+1.5,.0025)),n>=0)b(this,ti,n),b(this,Bd,s),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),b(this,es,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,Ns).box,path:{d:l(this,Ns).toSVGPath()}},!0));else if(this.parent){const k=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,ti),{bbox:C(x=te,Mi,qu).call(x,l(this,Zs).box,(k-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,es),{bbox:C(v=te,Mi,qu).call(v,l(this,Ns).box,k),path:{d:l(this,Ns).toSVGPath()}})}const[o,d,u,p]=e.box;switch(this.rotation){case 0:this.x=o,this.y=d,this.width=u,this.height=p;break;case 90:{const[k,S]=this.parentDimensions;this.x=d,this.y=1-o,this.width=u*S/k,this.height=p*k/S;break}case 180:this.x=1-o,this.y=1-d,this.width=u,this.height=p;break;case 270:{const[k,S]=this.parentDimensions;this.x=1-d,this.y=o,this.width=u*S/k,this.height=p*k/S;break}}const{firstPoint:m}=e;b(this,_p,[(m[0]-o)/u,(m[1]-d)/p]);const{lastPoint:g}=l(this,Ns);b(this,kp,[(g[0]-o)/u,(g[1]-d)/p])},WP=function(e){const n=(o,d)=>{this.color=o,this.opacity=d,this.onUpdatedColor()},s=this.color,i=this.opacity;this.addCommands({cmd:n.bind(this,e,te._defaultOpacity),undo:n.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},GP=function(e){const n=l(this,Di),s=i=>{b(this,Di,i),C(this,Lt,KP).call(this,i)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},KP=function(e){l(this,Fn)&&(C(this,Lt,Dx).call(this,{highlightOutlines:l(this,Zs).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())},VS=function(){l(this,ti)===null||!this.parent||(this.parent.drawLayer.remove(l(this,ti)),b(this,ti,null),this.parent.drawLayer.remove(l(this,es)),b(this,es,null))},gc=function(e=this.parent){l(this,ti)===null&&({id:He(this,ti)._,clipPathId:He(this,Bd)._}=e.drawLayer.draw({bbox:l(this,Zs).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:l(this,Fn)},path:{d:l(this,Zs).toSVGPath()}},!1,!0),b(this,es,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,Fn)},bbox:l(this,Ns).box,path:{d:l(this,Ns).toSVGPath()}},l(this,Fn))),l(this,Id)&&(l(this,Id).style.clipPath=l(this,Bd)))},Mi=new WeakSet,qu=function([e,n,s,i],o){switch(o){case 90:return[1-n-i,e,i,s];case 180:return[1-e-s,1-n-i,s,i];case 270:return[n,1-e-s,i,s]}return[e,n,s,i]},XP=function(e){te._keyboardManager.exec(this,e)},Nx=function(e){if(!l(this,Ap))return;const n=window.getSelection();e?n.setPosition(l(this,Ap),l(this,u0)):n.setPosition(l(this,p0),l(this,m0))},Rx=function(){return l(this,Fn)?this.rotation:0},YP=function(){if(l(this,Fn))return null;const[e,n]=this.pageDimensions,[s,i]=this.pageTranslation,o=l(this,Xr),d=new Float32Array(o.length*8);let u=0;for(const{x:p,y:m,width:g,height:x}of o){const v=p*e+s,k=(1-m)*n+i;d[u]=d[u+4]=v,d[u+1]=d[u+3]=k,d[u+2]=d[u+6]=v+g*e,d[u+5]=d[u+7]=k-x*n,u+=8}return d},QP=function(e){return l(this,Zs).serialize(e,C(this,Lt,Rx).call(this))},JP=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},ZP=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},tD=function(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((s,i)=>s!==n[i])},A(te,Mi),nt(te,"_defaultColor",null),nt(te,"_defaultOpacity",1),nt(te,"_defaultThickness",12),nt(te,"_type","highlight"),nt(te,"_editorType",Bt.HIGHLIGHT),nt(te,"_freeHighlightId",-1),nt(te,"_freeHighlight",null),nt(te,"_freeHighlightClipId","");let dy=te;var Fd;class eD{constructor(){A(this,Fd,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){l(this,Fd)[t]=e}toSVGProperties(){const t=l(this,Fd);return b(this,Fd,Object.create(null)),{root:t}}reset(){b(this,Fd,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){ye("Not implemented")}}Fd=new WeakMap;var ei,Cp,kn,jd,Ld,Yt,WS,GS,KS,of,nD,Mx,lf,Vu;const qt=class qt extends Ae{constructor(e){super(e);A(this,Yt);A(this,ei,null);A(this,Cp);nt(this,"_colorPicker",null);nt(this,"_drawId",null);b(this,Cp,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;(e=this._colorPicker)==null||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(C(this,Yt,WS).call(this,e),C(this,Yt,of).call(this))}static _mergeSVGProperties(e,n){const s=new Set(Object.keys(e));for(const[i,o]of Object.entries(n))s.has(i)?Object.assign(e[i],o):e[i]=o;return e}static getDefaultDrawingOptions(e){ye("Not implemented")}static get typesMap(){ye("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(l(qt,kn).updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)e.push([s,n[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[s,i]of this.constructor.typesMap)e.push([s,n[i]]);return e}_updateProperty(e,n,s){const i=this._drawingOptions,o=i[n],d=u=>{var m;i.updateProperty(n,u);const p=l(this,ei).updateProperty(n,u);p&&C(this,Yt,lf).call(this,p),(m=this.parent)==null||m.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:d.bind(this,s),undo:d.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,qt._mergeSVGProperties(l(this,ei).getPathResizingSVGProperties(C(this,Yt,Mx).call(this)),{bbox:C(this,Yt,Vu).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,qt._mergeSVGProperties(l(this,ei).getPathResizedSVGProperties(C(this,Yt,Mx).call(this)),{bbox:C(this,Yt,Vu).call(this)}))}_onTranslating(e,n){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:C(this,Yt,Vu).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,qt._mergeSVGProperties(l(this,ei).getPathTranslatedSVGProperties(C(this,Yt,Mx).call(this),this.parentDimensions),{bbox:C(this,Yt,Vu).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,Cp)&&(b(this,Cp,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){C(this,Yt,KS).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,Yt,of).call(this),C(this,Yt,lf).call(this,l(this,ei).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),C(this,Yt,KS).call(this)):e&&(this._uiManager.addShouldRescale(this),C(this,Yt,of).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,qt._mergeSVGProperties({bbox:C(this,Yt,Vu).call(this)},l(this,ei).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&C(this,Yt,lf).call(this,l(this,ei).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");return s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),s}static createDrawerInstance(e,n,s,i,o){ye("Not implemented")}static startDrawing(e,n,s,i){var _;const{target:o,offsetX:d,offsetY:u,pointerId:p,pointerType:m}=i;if(Yn.isInitializedAndDifferentPointerType(m))return;const{viewport:{rotation:g}}=e,{width:x,height:v}=o.getBoundingClientRect(),k=b(qt,jd,new AbortController),S=e.combinedSignal(k);if(Yn.setPointer(m,p),window.addEventListener("pointerup",E=>{Yn.isSamePointerIdOrRemove(E.pointerId)&&this._endDraw(E)},{signal:S}),window.addEventListener("pointercancel",E=>{Yn.isSamePointerIdOrRemove(E.pointerId)&&this._currentParent.endDrawingSession()},{signal:S}),window.addEventListener("pointerdown",E=>{Yn.isSamePointerType(E.pointerType)&&(Yn.initializeAndAddPointerId(E.pointerId),l(qt,kn).isCancellable()&&(l(qt,kn).removeLastElement(),l(qt,kn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",Bi,{signal:S}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),o.addEventListener("touchmove",E=>{Yn.isSameTimeStamp(E.timeStamp)&&Ye(E)},{signal:S}),e.toggleDrawing(),(_=n._editorUndoBar)==null||_.hide(),l(qt,kn)){e.drawLayer.updateProperties(this._currentDrawId,l(qt,kn).startNew(d,u,x,v,g));return}n.updateUIForDefaultProperties(this),b(qt,kn,this.createDrawerInstance(d,u,x,v,g)),b(qt,Ld,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(l(qt,Ld).toSVGProperties(),l(qt,kn).defaultSVGProperties),!0,!1)}static _drawMove(e){if(Yn.isSameTimeStamp(e.timeStamp),!l(qt,kn))return;const{offsetX:n,offsetY:s,pointerId:i}=e;if(Yn.isSamePointerId(i)){if(Yn.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(qt,kn).add(n,s)),Yn.setTimeStamp(e.timeStamp),Ye(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,b(qt,kn,null),b(qt,Ld,null),Yn.clearPointerType(),Yn.clearTimeStamp()),l(qt,jd)&&(l(qt,jd).abort(),b(qt,jd,null),Yn.clearPointerIds())}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,l(qt,kn).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=l(qt,kn),i=this._currentDrawId,o=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(i,s.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:Wt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(Wt.DRAW_STEP),!l(qt,kn).isEmpty()){const{pageDimensions:[s,i],scale:o}=n,d=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(qt,kn).getOutlines(s*o,i*o,o,this._INNER_MARGIN),drawingOptions:l(qt,Ld),mustBeCommitted:!e});return this._cleanup(!0),d}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,s,i,o,d){ye("Not implemented")}static async deserialize(e,n,s){var g,x;const{rawDims:{pageWidth:i,pageHeight:o,pageX:d,pageY:u}}=n.viewport,p=this.deserializeDraw(d,u,i,o,this._INNER_MARGIN,e),m=await super.deserialize(e,n,s);return m.createDrawingOptions(e),C(g=m,Yt,WS).call(g,{drawOutlines:p}),C(x=m,Yt,of).call(x),m.onScaleChanging(),m.rotate(),m}serializeDraw(e){const[n,s]=this.pageTranslation,[i,o]=this.pageDimensions;return l(this,ei).serialize([n,s,i,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};ei=new WeakMap,Cp=new WeakMap,kn=new WeakMap,jd=new WeakMap,Ld=new WeakMap,Yt=new WeakSet,WS=function({drawOutlines:e,drawId:n,drawingOptions:s}){b(this,ei,e),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=C(this,Yt,GS).call(this,e,this.parent),C(this,Yt,lf).call(this,e.box)},GS=function(e,n){const{id:s}=n.drawLayer.draw(qt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s},KS=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},of=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=C(this,Yt,GS).call(this,l(this,ei),e)}},nD=function([e,n,s,i]){const{parentDimensions:[o,d],rotation:u}=this;switch(u){case 90:return[n,1-e,s*(d/o),i*(o/d)];case 180:return[1-e,1-n,s,i];case 270:return[1-n,e,s*(d/o),i*(o/d)];default:return[e,n,s,i]}},Mx=function(){const{x:e,y:n,width:s,height:i,parentDimensions:[o,d],rotation:u}=this;switch(u){case 90:return[1-n,e,s*(o/d),i*(d/o)];case 180:return[1-e,1-n,s,i];case 270:return[n,1-e,s*(o/d),i*(d/o)];default:return[e,n,s,i]}},lf=function(e){[this.x,this.y,this.width,this.height]=C(this,Yt,nD).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Vu=function(){const{x:e,y:n,width:s,height:i,rotation:o,parentRotation:d,parentDimensions:[u,p]}=this;switch((o*4+d)/90){case 1:return[1-n-i,e,i,s];case 2:return[1-e-s,1-n-i,s,i];case 3:return[n,1-e-s,i,s];case 4:return[e,n-s*(u/p),i*(p/u),s*(u/p)];case 5:return[1-n,e,s*(u/p),i*(p/u)];case 6:return[1-e-i*(p/u),1-n,i*(p/u),s*(u/p)];case 7:return[n-s*(u/p),1-e-i*(p/u),s*(u/p),i*(p/u)];case 8:return[e-s,n-i,s,i];case 9:return[1-n,e-s,i,s];case 10:return[1-e,1-n,s,i];case 11:return[n-i,1-e,i,s];case 12:return[e-i*(p/u),n,i*(p/u),s*(u/p)];case 13:return[1-n-s*(u/p),e-i*(p/u),s*(u/p),i*(p/u)];case 14:return[1-e,1-n-s*(u/p),i*(p/u),s*(u/p)];case 15:return[n,1-e,s*(u/p),i*(p/u)];default:return[e,n,s,i]}},nt(qt,"_currentDrawId",-1),nt(qt,"_currentParent",null),A(qt,kn,null),A(qt,jd,null),A(qt,Ld,null),nt(qt,"_INNER_MARGIN",3);let uy=qt;var qa,En,Cn,Ud,Tp,ls,jn,Ni,$d,zd,Hd,Pp,Ox;class UL{constructor(t,e,n,s,i,o){A(this,Pp);A(this,qa,new Float64Array(6));A(this,En);A(this,Cn);A(this,Ud);A(this,Tp);A(this,ls);A(this,jn,"");A(this,Ni,0);A(this,$d,new C0);A(this,zd);A(this,Hd);b(this,zd,n),b(this,Hd,s),b(this,Ud,i),b(this,Tp,o),[t,e]=C(this,Pp,Ox).call(this,t,e);const d=b(this,En,[NaN,NaN,NaN,NaN,t,e]);b(this,ls,[t,e]),b(this,Cn,[{line:d,points:l(this,ls)}]),l(this,qa).set(d,0)}updateProperty(t,e){t==="stroke-width"&&b(this,Tp,e)}isEmpty(){return!l(this,Cn)||l(this,Cn).length===0}isCancellable(){return l(this,ls).length<=10}add(t,e){[t,e]=C(this,Pp,Ox).call(this,t,e);const[n,s,i,o]=l(this,qa).subarray(2,6),d=t-i,u=e-o;return Math.hypot(l(this,zd)*d,l(this,Hd)*u)<=2?null:(l(this,ls).push(t,e),isNaN(n)?(l(this,qa).set([i,o,t,e],2),l(this,En).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(l(this,qa)[0])&&l(this,En).splice(6,6),l(this,qa).set([n,s,i,o,t,e],0),l(this,En).push(...mt.createBezierPoints(n,s,i,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(l(this,ls).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,s,i){b(this,zd,n),b(this,Hd,s),b(this,Ud,i),[t,e]=C(this,Pp,Ox).call(this,t,e);const o=b(this,En,[NaN,NaN,NaN,NaN,t,e]);b(this,ls,[t,e]);const d=l(this,Cn).at(-1);return d&&(d.line=new Float32Array(d.line),d.points=new Float32Array(d.points)),l(this,Cn).push({line:o,points:l(this,ls)}),l(this,qa).set(o,0),b(this,Ni,0),this.toSVGPath(),null}getLastElement(){return l(this,Cn).at(-1)}setLastElement(t){return l(this,Cn)?(l(this,Cn).push(t),b(this,En,t.line),b(this,ls,t.points),b(this,Ni,0),{path:{d:this.toSVGPath()}}):l(this,$d).setLastElement(t)}removeLastElement(){if(!l(this,Cn))return l(this,$d).removeLastElement();l(this,Cn).pop(),b(this,jn,"");for(let t=0,e=l(this,Cn).length;t<e;t++){const{line:n,points:s}=l(this,Cn)[t];b(this,En,n),b(this,ls,s),b(this,Ni,0),this.toSVGPath()}return{path:{d:l(this,jn)}}}toSVGPath(){const t=mt.svgRound(l(this,En)[4]),e=mt.svgRound(l(this,En)[5]);if(l(this,ls).length===2)return b(this,jn,`${l(this,jn)} M ${t} ${e} Z`),l(this,jn);if(l(this,ls).length<=6){const s=l(this,jn).lastIndexOf("M");b(this,jn,`${l(this,jn).slice(0,s)} M ${t} ${e}`),b(this,Ni,6)}if(l(this,ls).length===4){const s=mt.svgRound(l(this,En)[10]),i=mt.svgRound(l(this,En)[11]);return b(this,jn,`${l(this,jn)} L ${s} ${i}`),b(this,Ni,12),l(this,jn)}const n=[];l(this,Ni)===0&&(n.push(`M ${t} ${e}`),b(this,Ni,6));for(let s=l(this,Ni),i=l(this,En).length;s<i;s+=6){const[o,d,u,p,m,g]=l(this,En).slice(s,s+6).map(mt.svgRound);n.push(`C${o} ${d} ${u} ${p} ${m} ${g}`)}return b(this,jn,l(this,jn)+n.join(" ")),b(this,Ni,l(this,En).length),l(this,jn)}getOutlines(t,e,n,s){const i=l(this,Cn).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),l(this,$d).build(l(this,Cn),t,e,n,l(this,Ud),l(this,Tp),s),b(this,qa,null),b(this,En,null),b(this,Cn,null),b(this,jn,null),l(this,$d)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}qa=new WeakMap,En=new WeakMap,Cn=new WeakMap,Ud=new WeakMap,Tp=new WeakMap,ls=new WeakMap,jn=new WeakMap,Ni=new WeakMap,$d=new WeakMap,zd=new WeakMap,Hd=new WeakMap,Pp=new WeakSet,Ox=function(t,e){return mt._normalizePoint(t,e,l(this,zd),l(this,Hd),l(this,Ud))};var cs,g0,x0,ni,Va,Wa,Dp,Np,qd,Un,pr,sD,iD,aD;class C0 extends mt{constructor(){super(...arguments);A(this,Un);A(this,cs);A(this,g0,0);A(this,x0);A(this,ni);A(this,Va);A(this,Wa);A(this,Dp);A(this,Np);A(this,qd)}build(e,n,s,i,o,d,u){b(this,Va,n),b(this,Wa,s),b(this,Dp,i),b(this,Np,o),b(this,qd,d),b(this,x0,u??0),b(this,ni,e),C(this,Un,iD).call(this)}get thickness(){return l(this,qd)}setLastElement(e){return l(this,ni).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,ni).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of l(this,ni)){if(e.push(`M${mt.svgRound(n[4])} ${mt.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${mt.svgRound(n[10])} ${mt.svgRound(n[11])}`);continue}for(let s=6,i=n.length;s<i;s+=6){const[o,d,u,p,m,g]=n.subarray(s,s+6).map(mt.svgRound);e.push(`C${o} ${d} ${u} ${p} ${m} ${g}`)}}return e.join("")}serialize([e,n,s,i],o){const d=[],u=[],[p,m,g,x]=C(this,Un,sD).call(this);let v,k,S,_,E,N,P,R,M;switch(l(this,Np)){case 0:M=mt._rescale,v=e,k=n+i,S=s,_=-i,E=e+p*s,N=n+(1-m-x)*i,P=e+(p+g)*s,R=n+(1-m)*i;break;case 90:M=mt._rescaleAndSwap,v=e,k=n,S=s,_=i,E=e+m*s,N=n+p*i,P=e+(m+x)*s,R=n+(p+g)*i;break;case 180:M=mt._rescale,v=e+s,k=n,S=-s,_=i,E=e+(1-p-g)*s,N=n+m*i,P=e+(1-p)*s,R=n+(m+x)*i;break;case 270:M=mt._rescaleAndSwap,v=e+s,k=n+i,S=-s,_=-i,E=e+(1-m-x)*s,N=n+(1-p-g)*i,P=e+(1-m)*s,R=n+(1-p)*i;break}for(const{line:O,points:I}of l(this,ni))d.push(M(O,v,k,S,_,o?new Array(O.length):null)),u.push(M(I,v,k,S,_,o?new Array(I.length):null));return{lines:d,points:u,rect:[E,N,P,R]}}static deserialize(e,n,s,i,o,{paths:{lines:d,points:u},rotation:p,thickness:m}){const g=[];let x,v,k,S,_;switch(p){case 0:_=mt._rescale,x=-e/s,v=n/i+1,k=1/s,S=-1/i;break;case 90:_=mt._rescaleAndSwap,x=-n/i,v=-e/s,k=1/i,S=1/s;break;case 180:_=mt._rescale,x=e/s+1,v=-n/i,k=-1/s,S=1/i;break;case 270:_=mt._rescaleAndSwap,x=n/i+1,v=e/s+1,k=-1/i,S=-1/s;break}if(!d){d=[];for(const N of u){const P=N.length;if(P===2){d.push(new Float32Array([NaN,NaN,NaN,NaN,N[0],N[1]]));continue}if(P===4){d.push(new Float32Array([NaN,NaN,NaN,NaN,N[0],N[1],NaN,NaN,NaN,NaN,N[2],N[3]]));continue}const R=new Float32Array(3*(P-2));d.push(R);let[M,O,I,H]=N.subarray(0,4);R.set([NaN,NaN,NaN,NaN,M,O],0);for(let K=4;K<P;K+=2){const W=N[K],Y=N[K+1];R.set(mt.createBezierPoints(M,O,I,H,W,Y),(K-2)*3),[M,O,I,H]=[I,H,W,Y]}}}for(let N=0,P=d.length;N<P;N++)g.push({line:_(d[N].map(R=>R??NaN),x,v,k,S),points:_(u[N].map(R=>R??NaN),x,v,k,S)});const E=new this.prototype.constructor;return E.build(g,s,i,1,p,m,o),E}get box(){return l(this,cs)}updateProperty(e,n){return e==="stroke-width"?C(this,Un,aD).call(this,n):null}updateParentDimensions([e,n],s){const[i,o]=C(this,Un,pr).call(this);b(this,Va,e),b(this,Wa,n),b(this,Dp,s);const[d,u]=C(this,Un,pr).call(this),p=d-i,m=u-o,g=l(this,cs);return g[0]-=p,g[1]-=m,g[2]+=2*p,g[3]+=2*m,g}updateRotation(e){return b(this,g0,e),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,cs).map(mt.svgRound).join(" ")}get defaultProperties(){const[e,n]=l(this,cs);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${mt.svgRound(e)} ${mt.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=l(this,cs);let s=0,i=0,o=0,d=0,u=0,p=0;switch(l(this,g0)){case 90:i=n/e,o=-e/n,u=e;break;case 180:s=-1,d=-1,u=e,p=n;break;case 270:i=-n/e,o=e/n,p=n;break;default:return""}return`matrix(${s} ${i} ${o} ${d} ${mt.svgRound(u)} ${mt.svgRound(p)})`}getPathResizingSVGProperties([e,n,s,i]){const[o,d]=C(this,Un,pr).call(this),[u,p,m,g]=l(this,cs);if(Math.abs(m-o)<=mt.PRECISION||Math.abs(g-d)<=mt.PRECISION){const _=e+s/2-(u+m/2),E=n+i/2-(p+g/2);return{path:{"transform-origin":`${mt.svgRound(e)} ${mt.svgRound(n)}`,transform:`${this.rotationTransform} translate(${_} ${E})`}}}const x=(s-2*o)/(m-2*o),v=(i-2*d)/(g-2*d),k=m/s,S=g/i;return{path:{"transform-origin":`${mt.svgRound(u)} ${mt.svgRound(p)}`,transform:`${this.rotationTransform} scale(${k} ${S}) translate(${mt.svgRound(o)} ${mt.svgRound(d)}) scale(${x} ${v}) translate(${mt.svgRound(-o)} ${mt.svgRound(-d)})`}}}getPathResizedSVGProperties([e,n,s,i]){const[o,d]=C(this,Un,pr).call(this),u=l(this,cs),[p,m,g,x]=u;if(u[0]=e,u[1]=n,u[2]=s,u[3]=i,Math.abs(g-o)<=mt.PRECISION||Math.abs(x-d)<=mt.PRECISION){const E=e+s/2-(p+g/2),N=n+i/2-(m+x/2);for(const{line:P,points:R}of l(this,ni))mt._translate(P,E,N,P),mt._translate(R,E,N,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${mt.svgRound(e)} ${mt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(s-2*o)/(g-2*o),k=(i-2*d)/(x-2*d),S=-v*(p+o)+e+o,_=-k*(m+d)+n+d;if(v!==1||k!==1||S!==0||_!==0)for(const{line:E,points:N}of l(this,ni))mt._rescale(E,S,_,v,k,E),mt._rescale(N,S,_,v,k,N);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${mt.svgRound(e)} ${mt.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],s){const[i,o]=s,d=l(this,cs),u=e-d[0],p=n-d[1];if(l(this,Va)===i&&l(this,Wa)===o)for(const{line:m,points:g}of l(this,ni))mt._translate(m,u,p,m),mt._translate(g,u,p,g);else{const m=l(this,Va)/i,g=l(this,Wa)/o;b(this,Va,i),b(this,Wa,o);for(const{line:x,points:v}of l(this,ni))mt._rescale(x,u,p,m,g,x),mt._rescale(v,u,p,m,g,v);d[2]*=m,d[3]*=g}return d[0]=e,d[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${mt.svgRound(e)} ${mt.svgRound(n)}`}}}get defaultSVGProperties(){const e=l(this,cs);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${mt.svgRound(e[0])} ${mt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}cs=new WeakMap,g0=new WeakMap,x0=new WeakMap,ni=new WeakMap,Va=new WeakMap,Wa=new WeakMap,Dp=new WeakMap,Np=new WeakMap,qd=new WeakMap,Un=new WeakSet,pr=function(e=l(this,qd)){const n=l(this,x0)+e/2*l(this,Dp);return l(this,Np)%180===0?[n/l(this,Va),n/l(this,Wa)]:[n/l(this,Wa),n/l(this,Va)]},sD=function(){const[e,n,s,i]=l(this,cs),[o,d]=C(this,Un,pr).call(this,0);return[e+o,n+d,s-2*o,i-2*d]},iD=function(){const e=b(this,cs,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of l(this,ni)){if(i.length<=12){for(let u=4,p=i.length;u<p;u+=6)xt.pointBoundingBox(i[u],i[u+1],e);continue}let o=i[4],d=i[5];for(let u=6,p=i.length;u<p;u+=6){const[m,g,x,v,k,S]=i.subarray(u,u+6);xt.bezierBoundingBox(o,d,m,g,x,v,k,S,e),o=k,d=S}}const[n,s]=C(this,Un,pr).call(this);e[0]=hs(e[0]-n,0,1),e[1]=hs(e[1]-s,0,1),e[2]=hs(e[2]+n,0,1),e[3]=hs(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]},aD=function(e){const[n,s]=C(this,Un,pr).call(this);b(this,qd,e);const[i,o]=C(this,Un,pr).call(this),[d,u]=[i-n,o-s],p=l(this,cs);return p[0]-=d,p[1]-=u,p[2]+=2*d,p[3]+=2*u,p};class $y extends eD{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Ae._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new $y(this._viewParameters);return t.updateAll(this),t}}var Py,rD;const Qu=class Qu extends uy{constructor(e){super({...e,name:"inkEditor"});A(this,Py);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){Ae.initialize(e,n),this._defaultDrawingOptions=new $y(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ft(this,"typesMap",new Map([[Wt.INK_THICKNESS,"stroke-width"],[Wt.INK_COLOR,"stroke"],[Wt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,s,i,o){return new UL(e,n,s,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,s,i,o,d){return C0.deserialize(e,n,s,i,o,d)}static async deserialize(e,n,s){let i=null;if(e instanceof IA){const{data:{inkLists:d,rect:u,rotation:p,id:m,color:g,opacity:x,borderStyle:{rawWidth:v},popupRef:k,richText:S,contentsObj:_,creationDate:E,modificationDate:N},parent:{page:{pageNumber:P}}}=e;i=e={annotationType:Bt.INK,color:Array.from(g),thickness:v,opacity:x,paths:{points:d},boxes:null,pageIndex:P-1,rect:u.slice(0),rotation:p,annotationElementId:m,id:m,deleted:!1,popupRef:k,richText:S,comment:(_==null?void 0:_.str)||null,creationDate:E,modificationDate:N}}const o=await super.deserialize(e,n,s);return o._initialData=i,e.comment&&o.setCommentData(e),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new oy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Wt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:s}){this._drawingOptions=Qu.getDefaultDrawingOptions({stroke:xt.makeHexColor(...e),"stroke-width":n,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":o,"stroke-width":d}}=this,u=Object.assign(super.serialize(e),{color:Ae._colorManager.convert(i),opacity:o,thickness:d,paths:{lines:n,points:s}});return this.addComment(u),e?(u.isCopy=!0,u):this.annotationElementId&&!C(this,Py,rD).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};Py=new WeakSet,rD=function(e){const{color:n,thickness:s,opacity:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((d,u)=>d!==n[u])||e.thickness!==s||e.opacity!==i||e.pageIndex!==o},nt(Qu,"_type","ink"),nt(Qu,"_editorType",Bt.INK),nt(Qu,"_defaultDrawingOptions",null);let XS=Qu;class YS extends C0{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const ix=8,jm=3;var Vd,se,QS,aa,oD,lD,JS,Bx,cD,dD,uD,ZS,tA,hD;class eo{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:s},i,o,d,u){let p=new OffscreenCanvas(1,1),m=p.getContext("2d",{alpha:!1});const g=200,x=m.font=`${n} ${s} ${g}px ${e}`,{actualBoundingBoxLeft:v,actualBoundingBoxRight:k,actualBoundingBoxAscent:S,actualBoundingBoxDescent:_,fontBoundingBoxAscent:E,fontBoundingBoxDescent:N,width:P}=m.measureText(t),R=1.5,M=Math.ceil(Math.max(Math.abs(v)+Math.abs(k)||0,P)*R),O=Math.ceil(Math.max(Math.abs(S)+Math.abs(_)||g,Math.abs(E)+Math.abs(N)||g)*R);p=new OffscreenCanvas(M,O),m=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=x,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,M,O),m.fillStyle="black",m.fillText(t,M*(R-1)/2,O*(3-R)/2);const I=C(this,se,ZS).call(this,m.getImageData(0,0,M,O).data),H=C(this,se,uD).call(this,I),K=C(this,se,tA).call(this,H),W=C(this,se,JS).call(this,I,M,O,K);return this.processDrawnLines({lines:{curves:W,width:M,height:O},pageWidth:i,pageHeight:o,rotation:d,innerMargin:u,mustSmooth:!0,areContours:!0})}static process(t,e,n,s,i){const[o,d,u]=C(this,se,hD).call(this,t),[p,m]=C(this,se,dD).call(this,o,d,u,Math.hypot(d,u)*l(this,Vd).sigmaSFactor,l(this,Vd).sigmaR,l(this,Vd).kernelSize),g=C(this,se,tA).call(this,m),x=C(this,se,JS).call(this,p,d,u,g);return this.processDrawnLines({lines:{curves:x,width:d,height:u},pageWidth:e,pageHeight:n,rotation:s,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:s,innerMargin:i,mustSmooth:o,areContours:d}){s%180!==0&&([e,n]=[n,e]);const{curves:u,width:p,height:m}=t,g=t.thickness??0,x=[],v=Math.min(e/p,n/m),k=v/e,S=v/n,_=[];for(const{points:N}of u){const P=o?C(this,se,cD).call(this,N):N;if(!P)continue;_.push(P);const R=P.length,M=new Float32Array(R),O=new Float32Array(3*(R===2?2:R-2));if(x.push({line:O,points:M}),R===2){M[0]=P[0]*k,M[1]=P[1]*S,O.set([NaN,NaN,NaN,NaN,M[0],M[1]],0);continue}let[I,H,K,W]=P;I*=k,H*=S,K*=k,W*=S,M.set([I,H,K,W],0),O.set([NaN,NaN,NaN,NaN,I,H],0);for(let Y=4;Y<R;Y+=2){const q=M[Y]=P[Y]*k,tt=M[Y+1]=P[Y+1]*S;O.set(mt.createBezierPoints(I,H,K,W,q,tt),(Y-2)*3),[I,H,K,W]=[K,W,q,tt]}}if(x.length===0)return null;const E=d?new YS:new C0;return E.build(x,e,n,1,s,d?0:g,i),{outline:E,newCurves:_,areContours:d,thickness:g,width:p,height:m}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:s,height:i}){let o=1/0,d=-1/0,u=0;for(const P of t){u+=P.length;for(let R=2,M=P.length;R<M;R++){const O=P[R]-P[R-2];o=Math.min(o,O),d=Math.max(d,O)}}let p;o>=-128&&d<=127?p=Int8Array:o>=-32768&&d<=32767?p=Int16Array:p=Int32Array;const m=t.length,g=ix+jm*m,x=new Uint32Array(g);let v=0;x[v++]=g*Uint32Array.BYTES_PER_ELEMENT+(u-2*m)*p.BYTES_PER_ELEMENT,x[v++]=0,x[v++]=s,x[v++]=i,x[v++]=e?0:1,x[v++]=Math.max(0,Math.floor(n??0)),x[v++]=m,x[v++]=p.BYTES_PER_ELEMENT;for(const P of t)x[v++]=P.length-2,x[v++]=P[0],x[v++]=P[1];const k=new CompressionStream("deflate-raw"),S=k.writable.getWriter();await S.ready,S.write(x);const _=p.prototype.constructor;for(const P of t){const R=new _(P.length-2);for(let M=2,O=P.length;M<O;M++)R[M-2]=P[M]-P[M-2];S.write(R)}S.close();const E=await new Response(k.readable).arrayBuffer(),N=new Uint8Array(E);return d3(N)}static async decompressSignature(t){try{const e=nj(t),{readable:n,writable:s}=new DecompressionStream("deflate-raw"),i=s.getWriter();await i.ready,i.write(e).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,d=0;for await(const P of n)o||(o=new Uint8Array(new Uint32Array(P.buffer,0,4)[0])),o.set(P,d),d+=P.length;const u=new Uint32Array(o.buffer,0,o.length>>2),p=u[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const m=u[2],g=u[3],x=u[4]===0,v=u[5],k=u[6],S=u[7],_=[],E=(ix+jm*k)*Uint32Array.BYTES_PER_ELEMENT;let N;switch(S){case Int8Array.BYTES_PER_ELEMENT:N=new Int8Array(o.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:N=new Int16Array(o.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:N=new Int32Array(o.buffer,E);break}d=0;for(let P=0;P<k;P++){const R=u[jm*P+ix],M=new Float32Array(R+2);_.push(M);for(let O=0;O<jm-1;O++)M[O]=u[jm*P+ix+O+1];for(let O=0;O<R;O++)M[O+2]=M[O]+N[d++]}return{areContours:x,thickness:v,outlines:_,width:m,height:g}}catch(e){return Mt(`decompressSignature: ${e}`),null}}}Vd=new WeakMap,se=new WeakSet,QS=function(t,e,n,s){return n-=t,s-=e,n===0?s>0?0:4:n===1?s+6:2-s},aa=new WeakMap,oD=function(t,e,n,s,i,o,d){const u=C(this,se,QS).call(this,n,s,i,o);for(let p=0;p<8;p++){const m=(-p+u-d+16)%8,g=l(this,aa)[2*m],x=l(this,aa)[2*m+1];if(t[(n+g)*e+(s+x)]!==0)return m}return-1},lD=function(t,e,n,s,i,o,d){const u=C(this,se,QS).call(this,n,s,i,o);for(let p=0;p<8;p++){const m=(p+u+d+16)%8,g=l(this,aa)[2*m],x=l(this,aa)[2*m+1];if(t[(n+g)*e+(s+x)]!==0)return m}return-1},JS=function(t,e,n,s){const i=t.length,o=new Int32Array(i);for(let m=0;m<i;m++)o[m]=t[m]<=s?1:0;for(let m=1;m<n-1;m++)o[m*e]=o[m*e+e-1]=0;for(let m=0;m<e;m++)o[m]=o[e*n-1-m]=0;let d=1,u;const p=[];for(let m=1;m<n-1;m++){u=1;for(let g=1;g<e-1;g++){const x=m*e+g,v=o[x];if(v===0)continue;let k=m,S=g;if(v===1&&o[x-1]===0)d+=1,S-=1;else if(v>=1&&o[x+1]===0)d+=1,S+=1,v>1&&(u=v);else{v!==1&&(u=Math.abs(v));continue}const _=[g,m],E=S===g+1,N={isHole:E,points:_,id:d,parent:0};p.push(N);let P;for(const Y of p)if(Y.id===u){P=Y;break}P?P.isHole?N.parent=E?P.parent:u:N.parent=E?u:P.parent:N.parent=E?u:0;const R=C(this,se,oD).call(this,o,e,m,g,k,S,0);if(R===-1){o[x]=-d,o[x]!==1&&(u=Math.abs(o[x]));continue}let M=l(this,aa)[2*R],O=l(this,aa)[2*R+1];const I=m+M,H=g+O;k=I,S=H;let K=m,W=g;for(;;){const Y=C(this,se,lD).call(this,o,e,K,W,k,S,1);M=l(this,aa)[2*Y],O=l(this,aa)[2*Y+1];const q=K+M,tt=W+O;_.push(tt,q);const et=K*e+W;if(o[et+1]===0?o[et]=-d:o[et]===1&&(o[et]=d),q===m&&tt===g&&K===I&&W===H){o[x]!==1&&(u=Math.abs(o[x]));break}else k=K,S=W,K=q,W=tt}}}return p},Bx=function(t,e,n,s){if(n-e<=4){for(let I=e;I<n-2;I+=2)s.push(t[I],t[I+1]);return}const i=t[e],o=t[e+1],d=t[n-4]-i,u=t[n-3]-o,p=Math.hypot(d,u),m=d/p,g=u/p,x=m*o-g*i,v=u/d,k=1/p,S=Math.atan(v),_=Math.cos(S),E=Math.sin(S),N=k*(Math.abs(_)+Math.abs(E)),P=k*(1-N+N**2),R=Math.max(Math.atan(Math.abs(E+_)*P),Math.atan(Math.abs(E-_)*P));let M=0,O=e;for(let I=e+2;I<n-2;I+=2){const H=Math.abs(x-m*t[I+1]+g*t[I]);H>M&&(O=I,M=H)}M>(p*R)**2?(C(this,se,Bx).call(this,t,e,O+2,s),C(this,se,Bx).call(this,t,O,n,s)):s.push(i,o)},cD=function(t){const e=[],n=t.length;return C(this,se,Bx).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},dD=function(t,e,n,s,i,o){const d=new Float32Array(o**2),u=-2*s**2,p=o>>1;for(let S=0;S<o;S++){const _=(S-p)**2;for(let E=0;E<o;E++)d[S*o+E]=Math.exp((_+(E-p)**2)/u)}const m=new Float32Array(256),g=-2*i**2;for(let S=0;S<256;S++)m[S]=Math.exp(S**2/g);const x=t.length,v=new Uint8Array(x),k=new Uint32Array(256);for(let S=0;S<n;S++)for(let _=0;_<e;_++){const E=S*e+_,N=t[E];let P=0,R=0;for(let O=0;O<o;O++){const I=S+O-p;if(!(I<0||I>=n))for(let H=0;H<o;H++){const K=_+H-p;if(K<0||K>=e)continue;const W=t[I*e+K],Y=d[O*o+H]*m[Math.abs(W-N)];P+=W*Y,R+=Y}}const M=v[E]=Math.round(P/R);k[M]++}return[v,k]},uD=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},ZS=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let s=-1/0,i=1/0;for(let d=0,u=n.length;d<u;d++){const p=n[d]=t[d<<2];s=Math.max(s,p),i=Math.min(i,p)}const o=255/(s-i);for(let d=0,u=n.length;d<u;d++)n[d]=(n[d]-i)*o;return n},tA=function(t){let e,n=-1/0,s=-1/0;const i=t.findIndex(u=>u!==0);let o=i,d=i;for(e=i;e<256;e++){const u=t[e];u>n&&(e-o>s&&(s=e-o,d=e-1),n=u,o=e)}for(e=d-1;e>=0&&!(t[e]>t[e+1]);e--);return e},hD=function(t){const e=t,{width:n,height:s}=t,{maxDim:i}=l(this,Vd);let o=n,d=s;if(n>i||s>i){let x=n,v=s,k=Math.log2(Math.max(n,s)/i);const S=Math.floor(k);k=k===S?S-1:S;for(let E=0;E<k;E++){o=Math.ceil(x/2),d=Math.ceil(v/2);const N=new OffscreenCanvas(o,d);N.getContext("2d").drawImage(t,0,0,x,v,0,0,o,d),x=o,v=d,t!==e&&t.close(),t=N.transferToImageBitmap()}const _=Math.min(i/o,i/d);o=Math.round(o*_),d=Math.round(d*_)}const p=new OffscreenCanvas(o,d).getContext("2d",{willReadFrequently:!0});p.fillStyle="white",p.fillRect(0,0,o,d),p.filter="grayscale(1)",p.drawImage(t,0,0,t.width,t.height,0,0,o,d);const m=p.getImageData(0,0,o,d).data;return[C(this,se,ZS).call(this,m),o,d]},A(eo,se),A(eo,Vd,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),A(eo,aa,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class FA extends eD{constructor(){super(),super.updateProperties({fill:Ae._defaultLineColor,"stroke-width":0})}clone(){const t=new FA;return t.updateAll(this),t}}class jA extends $y{constructor(t){super(t),super.updateProperties({stroke:Ae._defaultLineColor,"stroke-width":1})}clone(){const t=new jA(this._viewParameters);return t.updateAll(this),t}}var Ml,Ga,Ol,Wd;const Ls=class Ls extends uy{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});A(this,Ml,!1);A(this,Ga,null);A(this,Ol,null);A(this,Wd,null);this._willKeepAspectRatio=!0,b(this,Ol,e.signatureData||null),b(this,Ga,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){Ae.initialize(e,n),this._defaultDrawingOptions=new FA,this._defaultDrawnSignatureOptions=new jA(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ft(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!l(this,Ga)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(l(this,Ol)){const{lines:i,mustSmooth:o,areContours:d,description:u,uuid:p,heightInPage:m}=l(this,Ol),{rawDims:{pageWidth:g,pageHeight:x},rotation:v}=this.parent.viewport,k=eo.processDrawnLines({lines:i,pageWidth:g,pageHeight:x,rotation:v,innerMargin:Ls._INNER_MARGIN,mustSmooth:o,areContours:d});this.addSignature(k,m,u,p)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:l(this,Ga)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){b(this,Wd,e),this.addEditToolbar()}getUuid(){return l(this,Wd)}get description(){return l(this,Ga)}set description(e){b(this,Ga,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:s,width:i,height:o}=l(this,Ol),d=Math.max(i,o),u=eo.processDrawnLines({lines:{curves:e.map(p=>({points:p})),thickness:s,width:i,height:o},pageWidth:d,pageHeight:d,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,s,i){const{x:o,y:d}=this,{outline:u}=b(this,Ol,e);b(this,Ml,u instanceof YS),this.description=s;let p;l(this,Ml)?p=Ls.getDefaultDrawingOptions():(p=Ls._defaultDrawnSignatureOptions.clone(),p.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:p});const[,m]=this.pageDimensions;let g=n/m;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=o,this.y=d,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:s},rotation:i}=this.parent.viewport;return eo.process(e,n,s,i,Ls._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:s,pageHeight:i},rotation:o}=this.parent.viewport;return eo.extractContoursFromText(e,n,s,i,o,Ls._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:s},rotation:i}=this.parent.viewport;return eo.processDrawnLines({lines:e,pageWidth:n,pageHeight:s,rotation:i,innerMargin:Ls._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=Ls.getDefaultDrawingOptions():(this._drawingOptions=Ls._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,o=Object.assign(super.serialize(e),{isSignature:!0,areContours:l(this,Ml),color:[0,0,0],thickness:l(this,Ml)?0:i});return this.addComment(o),e?(o.paths={lines:n,points:s},o.uuid=l(this,Wd),o.isCopy=!0):o.lines=n,l(this,Ga)&&(o.accessibilityData={type:"Figure",alt:l(this,Ga)}),o}static deserializeDraw(e,n,s,i,o,d){return d.areContours?YS.deserialize(e,n,s,i,o,d):C0.deserialize(e,n,s,i,o,d)}static async deserialize(e,n,s){var o;const i=await super.deserialize(e,n,s);return b(i,Ml,e.areContours),i.description=((o=e.accessibilityData)==null?void 0:o.alt)||"",b(i,Wd,e.uuid),i}};Ml=new WeakMap,Ga=new WeakMap,Ol=new WeakMap,Wd=new WeakMap,nt(Ls,"_type","signature"),nt(Ls,"_editorType",Bt.SIGNATURE),nt(Ls,"_defaultDrawingOptions",null);let eA=Ls;var Re,Tn,Bl,Yr,Il,Rp,Qr,Gd,Ka,si,Mp,Qt,cf,df,Ix,Fx,jx,sA,Lx,pD;class nA extends Ae{constructor(e){super({...e,name:"stampEditor"});A(this,Qt);A(this,Re,null);A(this,Tn,null);A(this,Bl,null);A(this,Yr,null);A(this,Il,null);A(this,Rp,"");A(this,Qr,null);A(this,Gd,!1);A(this,Ka,null);A(this,si,!1);A(this,Mp,!1);b(this,Yr,e.bitmapUrl),b(this,Il,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){Ae.initialize(e,n)}static isHandlingMimeForPasting(e){return $w.includes(e)}static paste(e,n){n.pasteEditor({mode:Bt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:d}=e||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:i,width:o,height:d,channels:i.length/(o*d)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const p=u.output;return await this.setGuessedAltText(p),n&&!this.hasAltTextData()&&(this.altTextData={alt:p,decorative:!1}),p}remove(){var e;l(this,Tn)&&(b(this,Re,null),this._uiManager.imageManager.deleteId(l(this,Tn)),(e=l(this,Qr))==null||e.remove(),b(this,Qr,null),l(this,Ka)&&(clearTimeout(l(this,Ka)),b(this,Ka,null))),super.remove()}rebuild(){if(!this.parent){l(this,Tn)&&C(this,Qt,Ix).call(this);return}super.rebuild(),this.div!==null&&(l(this,Tn)&&l(this,Qr)===null&&C(this,Qt,Ix).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(l(this,Bl)||l(this,Re)||l(this,Yr)||l(this,Il)||l(this,Tn)||l(this,Gd))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),l(this,Gd)||(l(this,Re)?C(this,Qt,Fx).call(this):C(this,Qt,Ix).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(b(this,Tn,s),i&&b(this,Re,i),b(this,Gd,!1),C(this,Qt,Fx).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,Ka)!==null&&clearTimeout(l(this,Ka)),b(this,Ka,setTimeout(()=>{b(this,Ka,null),C(this,Qt,sA).call(this)},200))}copyCanvas(e,n,s=!1){e||(e=224);const{width:i,height:o}=l(this,Re),d=new Qa;let u=l(this,Re),p=i,m=o,g=null;if(n){if(i>n||o>n){const I=Math.min(n/i,n/o);p=Math.floor(i*I),m=Math.floor(o*I)}g=document.createElement("canvas");const v=g.width=Math.ceil(p*d.sx),k=g.height=Math.ceil(m*d.sy);l(this,si)||(u=C(this,Qt,jx).call(this,v,k));const S=g.getContext("2d");S.filter=this._uiManager.hcmFilter;let _="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":lj.isDarkMode&&(_="#8f8f9d",E="#42414d");const N=15,P=N*d.sx,R=N*d.sy,M=new OffscreenCanvas(P*2,R*2),O=M.getContext("2d");O.fillStyle=_,O.fillRect(0,0,P*2,R*2),O.fillStyle=E,O.fillRect(0,0,P,R),O.fillRect(P,R,P,R),S.fillStyle=S.createPattern(M,"repeat"),S.fillRect(0,0,v,k),S.drawImage(u,0,0,u.width,u.height,0,0,v,k)}let x=null;if(s){let v,k;if(d.symmetric&&u.width<e&&u.height<e)v=u.width,k=u.height;else if(u=l(this,Re),i>e||o>e){const E=Math.min(e/i,e/o);v=Math.floor(i*E),k=Math.floor(o*E),l(this,si)||(u=C(this,Qt,jx).call(this,v,k))}const _=new OffscreenCanvas(v,k).getContext("2d",{willReadFrequently:!0});_.drawImage(u,0,0,u.width,u.height,0,0,v,k),x={width:v,height:k,data:_.getImageData(0,0,v,k).data}}return{canvas:g,width:p,height:m,imageData:x}}static async deserialize(e,n,s){var _;let i=null,o=!1;if(e instanceof PP){const{data:{rect:E,rotation:N,id:P,structParent:R,popupRef:M,richText:O,contentsObj:I,creationDate:H,modificationDate:K},container:W,parent:{page:{pageNumber:Y}},canvas:q}=e;let tt,et;q?(delete e.canvas,{id:tt,bitmap:et}=s.imageManager.getFromCanvas(W.id,q),q.remove()):(o=!0,e._hasNoCanvas=!0);const lt=((_=await n._structTree.getAriaAttributes(`${Wu}${P}`))==null?void 0:_.get("aria-label"))||"";i=e={annotationType:Bt.STAMP,bitmapId:tt,bitmap:et,pageIndex:Y-1,rect:E.slice(0),rotation:N,annotationElementId:P,id:P,deleted:!1,accessibilityData:{decorative:!1,altText:lt},isSvg:!1,structParent:R,popupRef:M,richText:O,comment:(I==null?void 0:I.str)||null,creationDate:H,modificationDate:K}}const d=await super.deserialize(e,n,s),{rect:u,bitmap:p,bitmapUrl:m,bitmapId:g,isSvg:x,accessibilityData:v}=e;o?(s.addMissingCanvas(e.id,d),b(d,Gd,!0)):g&&s.imageManager.isValidId(g)?(b(d,Tn,g),p&&b(d,Re,p)):b(d,Yr,m),b(d,si,x);const[k,S]=d.pageDimensions;return d.width=(u[2]-u[0])/k,d.height=(u[3]-u[1])/S,v&&(d.altTextData=v),d._initialData=i,e.comment&&d.setCommentData(e),b(d,Mp,!!i),d}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(e),{bitmapId:l(this,Tn),isSvg:l(this,si)});if(this.addComment(s),e)return s.bitmapUrl=C(this,Qt,Lx).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=C(this,Qt,pD).call(this,s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(n===null)return s;n.stamps||(n.stamps=new Map);const d=l(this,si)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(l(this,Tn)))n.stamps.set(l(this,Tn),{area:d,serialized:s}),s.bitmap=C(this,Qt,Lx).call(this,!1);else if(l(this,si)){const u=n.stamps.get(l(this,Tn));d>u.area&&(u.area=d,u.serialized.bitmap.close(),u.serialized.bitmap=C(this,Qt,Lx).call(this,!1))}return s}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Re=new WeakMap,Tn=new WeakMap,Bl=new WeakMap,Yr=new WeakMap,Il=new WeakMap,Rp=new WeakMap,Qr=new WeakMap,Gd=new WeakMap,Ka=new WeakMap,si=new WeakMap,Mp=new WeakMap,Qt=new WeakSet,cf=function(e,n=!1){if(!e){this.remove();return}b(this,Re,e.bitmap),n||(b(this,Tn,e.id),b(this,si,e.isSvg)),e.file&&b(this,Rp,e.file.name),C(this,Qt,Fx).call(this)},df=function(){if(b(this,Bl,null),this._uiManager.enableWaiting(!1),!!l(this,Qr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Re)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Re)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Ix=function(){if(l(this,Tn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,Tn)).then(s=>C(this,Qt,cf).call(this,s,!0)).finally(()=>C(this,Qt,df).call(this));return}if(l(this,Yr)){const s=l(this,Yr);b(this,Yr,null),this._uiManager.enableWaiting(!0),b(this,Bl,this._uiManager.imageManager.getFromUrl(s).then(i=>C(this,Qt,cf).call(this,i)).finally(()=>C(this,Qt,df).call(this)));return}if(l(this,Il)){const s=l(this,Il);b(this,Il,null),this._uiManager.enableWaiting(!0),b(this,Bl,this._uiManager.imageManager.getFromFile(s).then(i=>C(this,Qt,cf).call(this,i)).finally(()=>C(this,Qt,df).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=$w.join(",");const n=this._uiManager._signal;b(this,Bl,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),C(this,Qt,cf).call(this,i)}s()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>C(this,Qt,df).call(this))),e.click()},Fx=function(){var p;const{div:e}=this;let{width:n,height:s}=l(this,Re);const[i,o]=this.pageDimensions,d=.75;if(this.width)n=this.width*i,s=this.height*o;else if(n>d*i||s>d*o){const m=Math.min(d*i/n,d*o/s);n*=m,s*=m}this._uiManager.enableWaiting(!1);const u=b(this,Qr,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=n/i,this.height=s/o,this.setDims(),(p=this._initialOptions)!=null&&p.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),C(this,Qt,sA).call(this),l(this,Mp)||(this.parent.addUndoableEditor(this),b(this,Mp,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,Rp)&&this.div.setAttribute("aria-description",l(this,Rp)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},jx=function(e,n){const{width:s,height:i}=l(this,Re);let o=s,d=i,u=l(this,Re);for(;o>2*e||d>2*n;){const p=o,m=d;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),d>2*n&&(d=d>=16384?Math.floor(d/2)-1:Math.ceil(d/2));const g=new OffscreenCanvas(o,d);g.getContext("2d").drawImage(u,0,0,p,m,0,0,o,d),u=g.transferToImageBitmap()}return u},sA=function(){const[e,n]=this.parentDimensions,{width:s,height:i}=this,o=new Qa,d=Math.ceil(s*e*o.sx),u=Math.ceil(i*n*o.sy),p=l(this,Qr);if(!p||p.width===d&&p.height===u)return;p.width=d,p.height=u;const m=l(this,si)?l(this,Re):C(this,Qt,jx).call(this,d,u),g=p.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(m,0,0,m.width,m.height,0,0,d,u)},Lx=function(e){if(e){if(l(this,si)){const i=this._uiManager.imageManager.getSvgUrl(l(this,Tn));if(i)return i}const n=document.createElement("canvas");return{width:n.width,height:n.height}=l(this,Re),n.getContext("2d").drawImage(l(this,Re),0,0),n.toDataURL()}if(l(this,si)){const[n,s]=this.pageDimensions,i=Math.round(this.width*n*ql.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*ql.PDF_TO_CSS_UNITS),d=new OffscreenCanvas(i,o);return d.getContext("2d").drawImage(l(this,Re),0,0,l(this,Re).width,l(this,Re).height,0,0,i,o),d.transferToImageBitmap()}return structuredClone(l(this,Re))},pD=function(e){var d;const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,i=e.pageIndex===n,o=(((d=e.accessibilityData)==null?void 0:d.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},nt(nA,"_type","stamp"),nt(nA,"_editorType",Bt.STAMP);var Kd,Op,Fl,jl,Jr,Rs,Ll,Bp,Ip,ra,Zr,Pn,to,Ul,Fp,bt,$l,xe,aA,mD,Aa,rA,oA,Ux;const Wi=class Wi{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:s,accessibilityManager:i,annotationLayer:o,drawLayer:d,textLayer:u,viewport:p,l10n:m}){A(this,xe);A(this,Kd);A(this,Op,!1);A(this,Fl,null);A(this,jl,null);A(this,Jr,null);A(this,Rs,new Map);A(this,Ll,!1);A(this,Bp,!1);A(this,Ip,!1);A(this,ra,null);A(this,Zr,null);A(this,Pn,null);A(this,to,null);A(this,Ul,null);A(this,Fp,-1);A(this,bt);const g=[...l(Wi,$l).values()];if(!Wi._initialized){Wi._initialized=!0;for(const x of g)x.initialize(m,t)}t.registerEditorTypes(g),b(this,bt,t),this.pageIndex=e,this.div=n,b(this,Kd,i),b(this,Fl,o),this.viewport=p,b(this,Pn,u),this.drawLayer=d,this._structTree=s,l(this,bt).addLayer(this)}get isEmpty(){return l(this,Rs).size===0}get isInvisible(){return this.isEmpty&&l(this,bt).getMode()===Bt.NONE}updateToolbar(t){l(this,bt).updateToolbar(t)}updateMode(t=l(this,bt).getMode()){switch(C(this,xe,Ux).call(this),t){case Bt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Bt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Bt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Bt.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of l(Wi,$l).values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=l(this,Pn))==null?void 0:e.div)}setEditingState(t){l(this,bt).setEditingState(t)}addCommands(t){l(this,bt).addCommands(t)}cleanUndoStack(t){l(this,bt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=l(this,Fl))==null||e.togglePointerEvents(t)}async enable(){var n;b(this,Ip,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=l(this,Ul))==null||n.abort(),b(this,Ul,null);const t=new Set;for(const s of l(this,xe,aA))s.enableEditing(),s.show(!0),s.annotationElementId&&(l(this,bt).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const e=l(this,Fl);if(e)for(const s of e.getEditableAnnotations()){if(s.hide(),l(this,bt).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}b(this,Ip,!1),l(this,bt)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var s;if(b(this,Bp,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),l(this,Pn)&&!l(this,Ul)){b(this,Ul,new AbortController);const i=l(this,bt).combinedSignal(l(this,Ul));l(this,Pn).div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:p,timeStamp:m}=o,g=l(this,Fp);if(m-g>500){b(this,Fp,m);return}b(this,Fp,-1);const{classList:x}=this.div;x.toggle("getElements",!0);const v=document.elementsFromPoint(u,p);if(x.toggle("getElements",!1),!this.div.contains(v[0]))return;let k;const S=new RegExp(`^${bf}[0-9]+$`);for(const E of v)if(S.test(E.id)){k=E.id;break}if(!k)return;const _=l(this,Rs).get(k);(_==null?void 0:_.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),_.dblclick(o))},{signal:i,capture:!0})}const t=l(this,Fl),e=[];if(t){const i=new Map,o=new Map;for(const u of l(this,xe,aA)){if(u.disableEditing(),!u.annotationElementId){e.push(u);continue}if(u.serialize()!==null){i.set(u.annotationElementId,u);continue}else o.set(u.annotationElementId,u);(s=this.getEditableAnnotation(u.annotationElementId))==null||s.show(),u.remove()}const d=t.getEditableAnnotations();for(const u of d){const{id:p}=u.data;if(l(this,bt).isDeletedAnnotationElement(p)){u.updateEdited({deleted:!0});continue}let m=o.get(p);if(m){m.resetAnnotationElement(u),m.show(!1),u.show();continue}m=i.get(p),m&&(l(this,bt).addChangedExistingAnnotation(m),m.renderAnnotationElement(u)&&m.show(!1)),u.show()}}C(this,xe,Ux).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const i of l(Wi,$l).values())n.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t==null||t.updateFakeAnnotations(e),b(this,Bp,!1)}getEditableAnnotation(t){var e;return((e=l(this,Fl))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){l(this,bt).getActive()!==t&&l(this,bt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=l(this,Pn))!=null&&t.div&&!l(this,to)){b(this,to,new AbortController);const e=l(this,bt).combinedSignal(l(this,to));l(this,Pn).div.addEventListener("pointerdown",C(this,xe,mD).bind(this),{signal:e}),l(this,Pn).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=l(this,Pn))!=null&&t.div&&l(this,to)&&(l(this,to).abort(),b(this,to,null),l(this,Pn).div.classList.remove("highlighting"))}enableClick(){if(l(this,jl))return;b(this,jl,new AbortController);const t=l(this,bt).combinedSignal(l(this,jl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=l(this,jl))==null||t.abort(),b(this,jl,null)}attach(t){l(this,Rs).set(t.id,t);const{annotationElementId:e}=t;e&&l(this,bt).isDeletedAnnotationElement(e)&&l(this,bt).removeDeletedAnnotationElement(t)}detach(t){var e;l(this,Rs).delete(t.id),(e=l(this,Kd))==null||e.removePointerInTextLayer(t.contentDiv),!l(this,Bp)&&t.annotationElementId&&l(this,bt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),l(this,bt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(l(this,bt).addDeletedAnnotationElement(t.annotationElementId),Ae.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),l(this,bt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!l(this,Ip)),l(this,bt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!l(this,Jr)&&(t._focusEventsAllowed=!1,b(this,Jr,setTimeout(()=>{b(this,Jr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:l(this,bt)._signal}),e.focus())},0))),t._structTreeParentId=(n=l(this,Kd))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of l(this,Rs).values())if(e.uid===t)return e;return null}getNextId(){return l(this,bt).getId()}combinedSignal(t){return l(this,bt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=l(this,xe,Aa))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await l(this,bt).updateMode(t.mode);const{offsetX:n,offsetY:s}=C(this,xe,oA).call(this),i=this.getNextId(),o=C(this,xe,rA).call(this,{parent:this,id:i,x:n,y:s,uiManager:l(this,bt),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=l(Wi,$l).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,l(this,bt)))||null}createAndAddNewEditor(t,e,n={}){const s=this.getNextId(),i=C(this,xe,rA).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:l(this,bt),isCentered:e,...n});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(t={}){this.createAndAddNewEditor(C(this,xe,oA).call(this),!0,t)}setSelected(t){l(this,bt).setSelected(t)}toggleSelected(t){l(this,bt).toggleSelected(t)}unselect(t){l(this,bt).unselect(t)}pointerup(t){var s;const{isMac:e}=zn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!l(this,Ll)||(b(this,Ll,!1),(s=l(this,xe,Aa))!=null&&s.isDrawer&&l(this,xe,Aa).supportMultipleDrawings))return;if(!l(this,Op)){b(this,Op,!0);return}const n=l(this,bt).getMode();if(n===Bt.STAMP||n===Bt.SIGNATURE){l(this,bt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var s;if(l(this,bt).getMode()===Bt.HIGHLIGHT&&this.enableTextSelection(),l(this,Ll)){b(this,Ll,!1);return}const{isMac:e}=zn.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(b(this,Ll,!0),(s=l(this,xe,Aa))!=null&&s.isDrawer){this.startDrawingSession(t);return}const n=l(this,bt).getActive();b(this,Op,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),l(this,ra)){l(this,xe,Aa).startDrawing(this,l(this,bt),!1,t);return}l(this,bt).setCurrentDrawingSession(this),b(this,ra,new AbortController);const e=l(this,bt).combinedSignal(l(this,ra));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(b(this,Zr,null),this.commitOrRemove())},{signal:e}),l(this,xe,Aa).startDrawing(this,l(this,bt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&b(this,Zr,e);return}l(this,Zr)&&setTimeout(()=>{var e;(e=l(this,Zr))==null||e.focus(),b(this,Zr,null)},0)}endDrawingSession(t=!1){return l(this,ra)?(l(this,bt).setCurrentDrawingSession(null),l(this,ra).abort(),b(this,ra,null),b(this,Zr,null),l(this,xe,Aa).endDrawing(t)):null}findNewParent(t,e,n){const s=l(this,bt).findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return l(this,ra)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,ra)&&l(this,xe,Aa).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=l(this,bt).getActive())==null?void 0:t.parent)===this&&(l(this,bt).commitOrRemove(),l(this,bt).setActiveEditor(null)),l(this,Jr)&&(clearTimeout(l(this,Jr)),b(this,Jr,null));for(const n of l(this,Rs).values())(e=l(this,Kd))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,l(this,Rs).clear(),l(this,bt).removeLayer(this)}render({viewport:t}){this.viewport=t,Zd(this.div,t);for(const e of l(this,bt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){l(this,bt).commitOrRemove(),C(this,xe,Ux).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,Zd(this.div,{rotation:n}),e!==n)for(const s of l(this,Rs).values())s.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return l(this,bt).viewParameters.realScale}};Kd=new WeakMap,Op=new WeakMap,Fl=new WeakMap,jl=new WeakMap,Jr=new WeakMap,Rs=new WeakMap,Ll=new WeakMap,Bp=new WeakMap,Ip=new WeakMap,ra=new WeakMap,Zr=new WeakMap,Pn=new WeakMap,to=new WeakMap,Ul=new WeakMap,Fp=new WeakMap,bt=new WeakMap,$l=new WeakMap,xe=new WeakSet,aA=function(){return l(this,Rs).size!==0?l(this,Rs).values():l(this,bt).getEditors(this.pageIndex)},mD=function(t){l(this,bt).unselectAll();const{target:e}=t;if(e===l(this,Pn).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&l(this,Pn).div.contains(e)){const{isMac:n}=zn.platform;if(t.button!==0||t.ctrlKey&&n)return;l(this,bt).showAllEditors("highlight",!0,!0),l(this,Pn).div.classList.add("free"),this.toggleDrawing(),dy.startHighlighting(this,l(this,bt).direction==="ltr",{target:l(this,Pn).div,x:t.x,y:t.y}),l(this,Pn).div.addEventListener("pointerup",()=>{l(this,Pn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,bt)._signal}),t.preventDefault()}},Aa=function(){return l(Wi,$l).get(l(this,bt).getMode())},rA=function(t){const e=l(this,xe,Aa);return e?new e.prototype.constructor(t):null},oA=function(){const{x:t,y:e,width:n,height:s}=this.boundingClientRect,i=Math.max(0,t),o=Math.max(0,e),d=Math.min(window.innerWidth,t+n),u=Math.min(window.innerHeight,e+s),p=(i+d)/2-t,m=(o+u)/2-e,[g,x]=this.viewport.rotation%180===0?[p,m]:[m,p];return{offsetX:g,offsetY:x}},Ux=function(){for(const t of l(this,Rs).values())t.isEmpty()&&t.remove()},nt(Wi,"_initialized",!1),A(Wi,$l,new Map([LS,XS,nA,dy,eA].map(t=>[t._editorType,t])));let iA=Wi;var oa,ds,Xd,y0,Dy,fD,Ja,cA,gD,dA;const hn=class hn{constructor({pageIndex:t}){A(this,Ja);A(this,oa,null);A(this,ds,new Map);A(this,Xd,new Map);this.pageIndex=t}setParent(t){if(!l(this,oa)){b(this,oa,t);return}if(l(this,oa)!==t){if(l(this,ds).size>0)for(const e of l(this,ds).values())e.remove(),t.append(e);b(this,oa,t)}}static get _svgFactory(){return Ft(this,"_svgFactory",new ly)}draw(t,e=!1,n=!1){const s=He(hn,y0)._++,i=C(this,Ja,cA).call(this),o=hn._svgFactory.createElement("defs");i.append(o);const d=hn._svgFactory.createElement("path");o.append(d);const u=`path_p${this.pageIndex}_${s}`;d.setAttribute("id",u),d.setAttribute("vector-effect","non-scaling-stroke"),e&&l(this,Xd).set(s,d);const p=n?C(this,Ja,gD).call(this,o,u):null,m=hn._svgFactory.createElement("use");return i.append(m),m.setAttribute("href",`#${u}`),this.updateProperties(i,t),l(this,ds).set(s,i),{id:s,clipPathId:`url(#${p})`}}drawOutline(t,e){const n=He(hn,y0)._++,s=C(this,Ja,cA).call(this),i=hn._svgFactory.createElement("defs");s.append(i);const o=hn._svgFactory.createElement("path");i.append(o);const d=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",d),o.setAttribute("vector-effect","non-scaling-stroke");let u;if(e){const g=hn._svgFactory.createElement("mask");i.append(g),u=`mask_p${this.pageIndex}_${n}`,g.setAttribute("id",u),g.setAttribute("maskUnits","objectBoundingBox");const x=hn._svgFactory.createElement("rect");g.append(x),x.setAttribute("width","1"),x.setAttribute("height","1"),x.setAttribute("fill","white");const v=hn._svgFactory.createElement("use");g.append(v),v.setAttribute("href",`#${d}`),v.setAttribute("stroke","none"),v.setAttribute("fill","black"),v.setAttribute("fill-rule","nonzero"),v.classList.add("mask")}const p=hn._svgFactory.createElement("use");s.append(p),p.setAttribute("href",`#${d}`),u&&p.setAttribute("mask",`url(#${u})`);const m=p.cloneNode();return s.append(m),p.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(s,t),l(this,ds).set(n,s),n}finalizeDraw(t,e){l(this,Xd).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var u;if(!e)return;const{root:n,bbox:s,rootClass:i,path:o}=e,d=typeof t=="number"?l(this,ds).get(t):t;if(d){if(n&&C(this,Ja,dA).call(this,d,n),s&&C(u=hn,Dy,fD).call(u,d,s),i){const{classList:p}=d;for(const[m,g]of Object.entries(i))p.toggle(m,g)}if(o){const m=d.firstChild.firstChild;C(this,Ja,dA).call(this,m,o)}}}updateParent(t,e){if(e===this)return;const n=l(this,ds).get(t);n&&(l(e,oa).append(n),l(this,ds).delete(t),l(e,ds).set(t,n))}remove(t){l(this,Xd).delete(t),l(this,oa)!==null&&(l(this,ds).get(t).remove(),l(this,ds).delete(t))}destroy(){b(this,oa,null);for(const t of l(this,ds).values())t.remove();l(this,ds).clear(),l(this,Xd).clear()}};oa=new WeakMap,ds=new WeakMap,Xd=new WeakMap,y0=new WeakMap,Dy=new WeakSet,fD=function(t,[e,n,s,i]){const{style:o}=t;o.top=`${100*n}%`,o.left=`${100*e}%`,o.width=`${100*s}%`,o.height=`${100*i}%`},Ja=new WeakSet,cA=function(){const t=hn._svgFactory.create(1,1,!0);return l(this,oa).append(t),t.setAttribute("aria-hidden",!0),t},gD=function(t,e){const n=hn._svgFactory.createElement("clipPath");t.append(n);const s=`clip_${e}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const i=hn._svgFactory.createElement("use");return n.append(i),i.setAttribute("href",`#${e}`),i.classList.add("clip"),s},dA=function(t,e){for(const[n,s]of Object.entries(e))s===null?t.removeAttribute(n):t.setAttribute(n,s)},A(hn,Dy),A(hn,y0,0);let lA=hn;globalThis._pdfjsTestingUtils={HighlightOutliner:$S};globalThis.pdfjsLib={AbortException:Hl,AnnotationEditorLayer:iA,AnnotationEditorParamsType:Wt,AnnotationEditorType:Bt,AnnotationEditorUIManager:tu,AnnotationLayer:FS,AnnotationMode:$o,AnnotationType:sn,applyOpacity:dj,build:xL,ColorPicker:ry,createValidAbsoluteUrl:r3,CSSConstants:cj,DOMSVGFactory:ly,DrawLayer:lA,FeatureTest:zn,fetchData:S0,findContrastColor:uj,getDocument:mP,getFilenameFromUrl:sj,getPdfFilenameFromUrl:ij,getRGB:_0,getUuid:c3,getXfaPageViewport:rj,GlobalWorkerOptions:Xa,ImageKind:ox,InvalidPDFException:Lw,isDataScheme:Ly,isPdfFile:NA,isValidExplicitDest:wj,MathClamp:hs,noContextMenu:Bi,normalizeUnicode:tj,OPS:wf,OutputScale:Qa,PasswordResponses:VF,PDFDataRangeTransport:fP,PDFDateString:ty,PDFWorker:_f,PermissionFlag:qF,PixelsPerInch:ql,RenderingCancelledException:DA,renderRichText:h3,ResponseException:Zx,setLayerDimensions:Zd,shadow:Ft,SignatureExtractor:eo,stopEvent:Ye,SupportedImageMimeTypes:$w,TextLayer:Af,TouchManager:ny,updateUrlHash:o3,Util:xt,VerbosityLevel:Iy,version:gL,XfaLayer:u3};Xa.workerSrc=new URL("/assets/pdf.worker.min-Cpi8b8z3.mjs",import.meta.url).toString();function $L(){const[r,t]=X.useState(!1),[e,n]=X.useState(!1),[s,i]=X.useState(""),[o,d]=X.useState(""),{user:u}=co(),{data:p=[]}=da({queryKey:["categories"],queryFn:async()=>{const{data:E,error:N}=await ee.from("categories").select("*").order("name");if(N)throw N;return E}}),{data:m=[],refetch:g}=da({queryKey:["uploads",u==null?void 0:u.id],queryFn:async()=>{if(!u)return[];const{data:E,error:N}=await ee.from("pdf_uploads").select("*").eq("user_id",u.id).order("upload_date",{ascending:!1});if(N)throw N;return E},enabled:!!u}),x=async E=>{try{const N=await E.arrayBuffer(),P=new Promise((O,I)=>{setTimeout(()=>I(new Error("Tempo limite de processamento excedido (60s)")),6e4)}),R=(async()=>{const I=await mP({data:N}).promise;let H="";const K=I.numPages;for(let W=1;W<=K;W++){const tt=(await(await I.getPage(W)).getTextContent()).items.map(et=>et.str).join(" ");H+=tt+`

`,W%5===0&&Kt.loading(`Extraindo texto: pgina ${W}/${K}...`,{id:"extract"})}return H})();return await Promise.race([R,P])}catch(N){throw console.error("PDF extraction error:",N),new Error(`Erro ao extrair texto do PDF: ${N.message||"Falha desconhecida"}`)}},v=X.useCallback(async E=>{var P,R,M;const N=E[0];if(N){if(N.type!=="application/pdf"){Kt.error("Apenas arquivos PDF so permitidos");return}if(N.size>50*1024*1024){Kt.error("Arquivo muito grande. Mximo: 50MB");return}if(!o){const O=N.name.replace(".pdf","");d(O)}t(!0),n(!0);try{const O=new FileReader,H=await new Promise((it,U)=>{O.onloadend=()=>it(O.result),O.onerror=U,O.readAsDataURL(N)});Kt.loading("Fazendo upload do PDF...",{id:"upload"});const{data:K,error:W}=await ee.functions.invoke("pdf-upload",{body:{pdfData:H,fileName:N.name,categoryId:s||null}});if(W)throw W;Kt.success("PDF enviado com sucesso!",{id:"upload"}),Kt.loading("Extraindo texto do PDF...",{id:"extract"});const Y=await x(N);Kt.success("Texto extrado com sucesso!",{id:"extract"}),Kt.loading("Gerando flashcards...",{id:"generate"});const q=new Date().toISOString().split("T")[0],tt=o||N.name.replace(".pdf",""),{data:et,error:lt}=await ee.functions.invoke("generate-flashcards",{body:{text:Y,pdfUploadId:K.data.upload.id,categoryId:s||null,blockName:tt,uploadDate:q}});if(lt)throw lt;const ot=et.data.subjectStats?Object.entries(et.data.subjectStats).map(([it,U])=>`${it}: ${U}`).join(", "):"";Kt.success(`${et.data.count} flashcards gerados! ${ot}`,{id:"generate",duration:5e3}),d(""),g()}catch(O){console.error("Upload error:",O);let I="Erro ao processar PDF";(P=O.message)!=null&&P.includes("Tempo limite")?I="PDF muito grande ou complexo. Tente um arquivo menor.":(R=O.message)!=null&&R.includes("extrair texto")?I="No foi possvel extrair o texto do PDF. Verifique se o arquivo no est corrompido.":(M=O.message)!=null&&M.includes("worker")?I="Erro ao carregar processador de PDF. Tente recarregar a pgina.":O.message&&(I=O.message),Kt.error(I,{id:"upload"})}finally{t(!1),n(!1)}}},[s,o,g]),{getRootProps:k,getInputProps:S,isDragActive:_}=a3({onDrop:v,accept:{"application/pdf":[".pdf"]},maxFiles:1,disabled:r});return T.jsxs("div",{className:"space-y-6","data-matrix-id":"src/components/UploadSection.tsx:215:4","data-matrix-name":"div","data-component-path":"src/components/UploadSection.tsx","data-component-line":"215","data-component-file":"UploadSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-6%22%7D",children:[T.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-6 border border-gray-200 dark:border-gray-700 transition-colors duration-300","data-matrix-id":"src/components/UploadSection.tsx:216:6","data-matrix-name":"div","data-component-path":"src/components/UploadSection.tsx","data-component-line":"216","data-component-file":"UploadSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20dark%3Abg-gray-900%20rounded-xl%20shadow-md%20p-6%20border%20border-gray-200%20dark%3Aborder-gray-700%20transition-colors%20duration-300%22%7D",children:[T.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4 transition-colors duration-300","data-matrix-id":"src/components/UploadSection.tsx:217:8","data-matrix-name":"h2","data-component-path":"src/components/UploadSection.tsx","data-component-line":"217","data-component-file":"UploadSection.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20text-gray-900%20dark%3Atext-white%20mb-4%20transition-colors%20duration-300%22%7D",children:"Upload de PDF"}),T.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 transition-colors duration-300","data-matrix-id":"src/components/UploadSection.tsx:220:8","data-matrix-name":"p","data-component-path":"src/components/UploadSection.tsx","data-component-line":"220","data-component-file":"UploadSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-600%20dark%3Atext-gray-400%20mb-6%20transition-colors%20duration-300%22%7D",children:"Faa upload de materiais de estudo em PDF para gerar flashcards automaticamente"}),T.jsxs("div",{className:"mb-4","data-matrix-id":"src/components/UploadSection.tsx:224:8","data-matrix-name":"div","data-component-path":"src/components/UploadSection.tsx","data-component-line":"224","data-component-file":"UploadSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-4%22%7D",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-300","data-matrix-id":"src/components/UploadSection.tsx:225:10","data-matrix-name":"label","data-component-path":"src/components/UploadSection.tsx","data-component-line":"225","data-component-file":"UploadSection.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-700%20dark%3Atext-gray-300%20mb-2%20transition-colors%20duration-300%22%7D",children:"Nome do Bloco"}),T.jsx("input",{type:"text",value:o,onChange:E=>d(E.target.value),placeholder:"Ex: Matemtica Financeira - Aula 01",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none bg-white dark:bg-gray-800 text-gray-900 dark:text-white transition-colors duration-300",disabled:r,"data-matrix-id":"src/components/UploadSection.tsx:228:10","data-matrix-name":"input","data-component-path":"src/components/UploadSection.tsx","data-component-line":"228","data-component-file":"UploadSection.tsx","data-component-name":"input","data-component-content":"%7B%22type%22%3A%22text%22%2C%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22placeholder%22%3A%22Ex%3A%20Matem%C3%A1tica%20Financeira%20-%20Aula%2001%22%2C%22className%22%3A%22w-full%20px-4%20py-2%20border%20border-gray-300%20dark%3Aborder-gray-600%20rounded-lg%20focus%3Aring-2%20focus%3Aring-indigo-500%20focus%3Aborder-transparent%20outline-none%20bg-white%20dark%3Abg-gray-800%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%22%2C%22disabled%22%3A%22%5BIdentifier%5D%22%7D"}),T.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 transition-colors duration-300","data-matrix-id":"src/components/UploadSection.tsx:236:10","data-matrix-name":"p","data-component-path":"src/components/UploadSection.tsx","data-component-line":"236","data-component-file":"UploadSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-xs%20text-gray-500%20dark%3Atext-gray-400%20mt-1%20transition-colors%20duration-300%22%7D",children:"Identifique este conjunto de flashcards. Se deixar vazio, usar o nome do arquivo."})]}),T.jsxs("div",{className:"mb-4","data-matrix-id":"src/components/UploadSection.tsx:241:8","data-matrix-name":"div","data-component-path":"src/components/UploadSection.tsx","data-component-line":"241","data-component-file":"UploadSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-4%22%7D",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-300","data-matrix-id":"src/components/UploadSection.tsx:242:10","data-matrix-name":"label","data-component-path":"src/components/UploadSection.tsx","data-component-line":"242","data-component-file":"UploadSection.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-700%20dark%3Atext-gray-300%20mb-2%20transition-colors%20duration-300%22%7D",children:"Categoria (opcional)"}),T.jsxs("select",{value:s,onChange:E=>i(E.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none bg-white dark:bg-gray-800 text-gray-900 dark:text-white transition-colors duration-300",disabled:r,"data-matrix-id":"src/components/UploadSection.tsx:245:10","data-matrix-name":"select","data-component-path":"src/components/UploadSection.tsx","data-component-line":"245","data-component-file":"UploadSection.tsx","data-component-name":"select","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20px-4%20py-2%20border%20border-gray-300%20dark%3Aborder-gray-600%20rounded-lg%20focus%3Aring-2%20focus%3Aring-indigo-500%20focus%3Aborder-transparent%20outline-none%20bg-white%20dark%3Abg-gray-800%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%22%2C%22disabled%22%3A%22%5BIdentifier%5D%22%7D",children:[T.jsx("option",{value:"","data-matrix-id":"src/components/UploadSection.tsx:251:12","data-matrix-name":"option","data-component-path":"src/components/UploadSection.tsx","data-component-line":"251","data-component-file":"UploadSection.tsx","data-component-name":"option","data-component-content":"%7B%22value%22%3A%22%22%7D",children:"Selecione uma categoria"}),p.map(E=>T.jsx("option",{value:E.id,"data-matrix-id":"src/components/UploadSection.tsx:253:14","data-matrix-name":"option","data-component-path":"src/components/UploadSection.tsx","data-component-line":"253","data-component-file":"UploadSection.tsx","data-component-name":"option","data-component-content":"%7B%22value%22%3A%22%5BMemberExpression%5D%22%7D",children:E.name},E.id))]})]}),T.jsxs("div",{...k(),className:`border-2 border-dashed rounded-xl p-12 text-center cursor-pointer transition-all duration-300 ${_?"border-indigo-500 bg-indigo-50 dark:bg-indigo-950":r?"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800 cursor-not-allowed":"border-gray-300 dark:border-gray-600 hover:border-indigo-400 dark:hover:border-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-950"}`,"data-matrix-id":"src/components/UploadSection.tsx:260:8","data-matrix-name":"div","data-component-path":"src/components/UploadSection.tsx","data-component-line":"260","data-component-file":"UploadSection.tsx","data-component-name":"div","data-component-content":"%7B%22...spread%22%3Atrue%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[T.jsx("input",{...S(),"data-matrix-id":"src/components/UploadSection.tsx:270:10","data-matrix-name":"input","data-component-path":"src/components/UploadSection.tsx","data-component-line":"270","data-component-file":"UploadSection.tsx","data-component-name":"input","data-component-content":"%7B%22...spread%22%3Atrue%7D"}),r?T.jsxs("div",{className:"flex flex-col items-center gap-3","data-matrix-id":"src/components/UploadSection.tsx:273:12","data-matrix-name":"div","data-component-path":"src/components/UploadSection.tsx","data-component-line":"273","data-component-file":"UploadSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20flex-col%20items-center%20gap-3%22%7D",children:[T.jsx(CE,{className:"w-12 h-12 text-indigo-600 dark:text-indigo-400 animate-spin","data-matrix-id":"src/components/UploadSection.tsx:274:14","data-matrix-name":"Loader2","data-component-path":"src/components/UploadSection.tsx","data-component-line":"274","data-component-file":"UploadSection.tsx","data-component-name":"Loader2","data-component-content":"%7B%22className%22%3A%22w-12%20h-12%20text-indigo-600%20dark%3Atext-indigo-400%20animate-spin%22%7D"}),T.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white transition-colors duration-300","data-matrix-id":"src/components/UploadSection.tsx:275:14","data-matrix-name":"p","data-component-path":"src/components/UploadSection.tsx","data-component-line":"275","data-component-file":"UploadSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-lg%20font-medium%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%22%7D",children:e?"Processando PDF...":"Fazendo upload..."}),T.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 transition-colors duration-300","data-matrix-id":"src/components/UploadSection.tsx:278:14","data-matrix-name":"p","data-component-path":"src/components/UploadSection.tsx","data-component-line":"278","data-component-file":"UploadSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-600%20dark%3Atext-gray-400%20transition-colors%20duration-300%22%7D",children:"Isso pode levar alguns instantes"})]}):T.jsxs("div",{className:"flex flex-col items-center gap-3","data-matrix-id":"src/components/UploadSection.tsx:283:12","data-matrix-name":"div","data-component-path":"src/components/UploadSection.tsx","data-component-line":"283","data-component-file":"UploadSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20flex-col%20items-center%20gap-3%22%7D",children:[T.jsx(KT,{className:"w-12 h-12 text-indigo-600 dark:text-indigo-400","data-matrix-id":"src/components/UploadSection.tsx:284:14","data-matrix-name":"Upload","data-component-path":"src/components/UploadSection.tsx","data-component-line":"284","data-component-file":"UploadSection.tsx","data-component-name":"Upload","data-component-content":"%7B%22className%22%3A%22w-12%20h-12%20text-indigo-600%20dark%3Atext-indigo-400%22%7D"}),T.jsx("p",{className:"text-lg font-medium text-gray-900 dark:text-white transition-colors duration-300","data-matrix-id":"src/components/UploadSection.tsx:285:14","data-matrix-name":"p","data-component-path":"src/components/UploadSection.tsx","data-component-line":"285","data-component-file":"UploadSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-lg%20font-medium%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%22%7D",children:_?"Solte o arquivo aqui":"Arraste um PDF ou clique para selecionar"}),T.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 transition-colors duration-300","data-matrix-id":"src/components/UploadSection.tsx:290:14","data-matrix-name":"p","data-component-path":"src/components/UploadSection.tsx","data-component-line":"290","data-component-file":"UploadSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-600%20dark%3Atext-gray-400%20transition-colors%20duration-300%22%7D",children:"Tamanho mximo: 50MB"})]})]})]}),m.length>0&&T.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-6 border border-gray-200 dark:border-gray-700 transition-colors duration-300","data-matrix-id":"src/components/UploadSection.tsx:299:8","data-matrix-name":"div","data-component-path":"src/components/UploadSection.tsx","data-component-line":"299","data-component-file":"UploadSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20dark%3Abg-gray-900%20rounded-xl%20shadow-md%20p-6%20border%20border-gray-200%20dark%3Aborder-gray-700%20transition-colors%20duration-300%22%7D",children:[T.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4 transition-colors duration-300","data-matrix-id":"src/components/UploadSection.tsx:300:10","data-matrix-name":"h3","data-component-path":"src/components/UploadSection.tsx","data-component-line":"300","data-component-file":"UploadSection.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-xl%20font-bold%20text-gray-900%20dark%3Atext-white%20mb-4%20transition-colors%20duration-300%22%7D",children:"Histrico de Uploads"}),T.jsx("div",{className:"space-y-3","data-matrix-id":"src/components/UploadSection.tsx:304:10","data-matrix-name":"div","data-component-path":"src/components/UploadSection.tsx","data-component-line":"304","data-component-file":"UploadSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-3%22%7D",children:m.map(E=>T.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 transition-colors duration-300","data-matrix-id":"src/components/UploadSection.tsx:306:14","data-matrix-name":"div","data-component-path":"src/components/UploadSection.tsx","data-component-line":"306","data-component-file":"UploadSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20p-4%20bg-gray-50%20dark%3Abg-gray-800%20rounded-lg%20border%20border-gray-200%20dark%3Aborder-gray-700%20transition-colors%20duration-300%22%7D",children:[T.jsxs("div",{className:"flex items-center gap-3","data-matrix-id":"src/components/UploadSection.tsx:310:16","data-matrix-name":"div","data-component-path":"src/components/UploadSection.tsx","data-component-line":"310","data-component-file":"UploadSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-3%22%7D",children:[T.jsx(BI,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400","data-matrix-id":"src/components/UploadSection.tsx:311:18","data-matrix-name":"FileText","data-component-path":"src/components/UploadSection.tsx","data-component-line":"311","data-component-file":"UploadSection.tsx","data-component-name":"FileText","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20text-indigo-600%20dark%3Atext-indigo-400%22%7D"}),T.jsxs("div",{"data-matrix-id":"src/components/UploadSection.tsx:312:18","data-matrix-name":"div","data-component-path":"src/components/UploadSection.tsx","data-component-line":"312","data-component-file":"UploadSection.tsx","data-component-name":"div",children:[T.jsx("p",{className:"font-medium text-gray-900 dark:text-white transition-colors duration-300","data-matrix-id":"src/components/UploadSection.tsx:313:20","data-matrix-name":"p","data-component-path":"src/components/UploadSection.tsx","data-component-line":"313","data-component-file":"UploadSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22font-medium%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%22%7D",children:E.block_name||E.file_name}),T.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 transition-colors duration-300","data-matrix-id":"src/components/UploadSection.tsx:314:20","data-matrix-name":"p","data-component-path":"src/components/UploadSection.tsx","data-component-line":"314","data-component-file":"UploadSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-600%20dark%3Atext-gray-400%20transition-colors%20duration-300%22%7D",children:[new Date(E.upload_date).toLocaleDateString("pt-BR"),"  ",E.flashcard_count||0," flashcards"]})]})]}),T.jsx("div",{"data-matrix-id":"src/components/UploadSection.tsx:320:16","data-matrix-name":"div","data-component-path":"src/components/UploadSection.tsx","data-component-line":"320","data-component-file":"UploadSection.tsx","data-component-name":"div",children:E.processing_status==="completed"?T.jsx(NI,{className:"w-6 h-6 text-green-600 dark:text-green-400","data-matrix-id":"src/components/UploadSection.tsx:322:20","data-matrix-name":"CheckCircle2","data-component-path":"src/components/UploadSection.tsx","data-component-line":"322","data-component-file":"UploadSection.tsx","data-component-name":"CheckCircle2","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20text-green-600%20dark%3Atext-green-400%22%7D"}):E.processing_status==="failed"?T.jsx(RI,{className:"w-6 h-6 text-red-600 dark:text-red-400","data-matrix-id":"src/components/UploadSection.tsx:324:20","data-matrix-name":"XCircle","data-component-path":"src/components/UploadSection.tsx","data-component-line":"324","data-component-file":"UploadSection.tsx","data-component-name":"XCircle","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20text-red-600%20dark%3Atext-red-400%22%7D"}):T.jsx(CE,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400 animate-spin","data-matrix-id":"src/components/UploadSection.tsx:326:20","data-matrix-name":"Loader2","data-component-path":"src/components/UploadSection.tsx","data-component-line":"326","data-component-file":"UploadSection.tsx","data-component-name":"Loader2","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20text-indigo-600%20dark%3Atext-indigo-400%20animate-spin%22%7D"})})]},E.id))})]})]})}function zL(){const{user:r}=co(),[t,e]=X.useState(""),[n,s]=X.useState(""),[i,o]=X.useState(null),[d,u]=X.useState(""),[p,m]=X.useState(""),[g,x]=X.useState(!1),[v,k]=X.useState("single"),[S,_]=X.useState(null),[E,N]=X.useState(""),P=$p(),{data:R=[]}=da({queryKey:["categories"],queryFn:async()=>{const{data:U,error:Q}=await ee.from("categories").select("*").order("name");if(Q)throw Q;return U}}),{data:M=[]}=da({queryKey:["blocks",r==null?void 0:r.id],queryFn:async()=>{if(!r)return[];const{data:U,error:Q}=await ee.from("flashcards").select("block_name").eq("user_id",r.id).eq("status","active").not("block_name","is",null);if(Q)throw Q;return[...new Set(U.map(j=>j.block_name))].sort()},enabled:!!r}),{data:O=[],isLoading:I}=da({queryKey:["flashcards",r==null?void 0:r.id,t,E],queryFn:async()=>{if(!r)return[];let U=ee.from("flashcards").select("*").eq("user_id",r.id).eq("status","active").order("created_at",{ascending:!1});t&&(U=U.eq("category_id",t)),E&&(U=U.eq("block_name",E));const{data:Q,error:at}=await U;if(at)throw at;return Q},enabled:!!r}),H=_c({mutationFn:async({id:U,front:Q,back:at})=>{const{error:j}=await ee.from("flashcards").update({front_text:Q,back_text:at}).eq("id",U);if(j)throw j},onSuccess:()=>{P.invalidateQueries({queryKey:["flashcards"]}),Kt.success("Flashcard atualizado!"),o(null)},onError:U=>{Kt.error("Erro ao atualizar flashcard"),console.error(U)}}),K=_c({mutationFn:async U=>{const{error:Q}=await ee.from("flashcards").delete().eq("id",U);if(Q)throw Q},onSuccess:()=>{P.invalidateQueries({queryKey:["flashcards"]}),P.invalidateQueries({queryKey:["blocks"]}),Kt.success("Flashcard excludo!")},onError:U=>{Kt.error("Erro ao excluir flashcard"),console.error(U)}}),W=_c({mutationFn:async U=>{const{error:Q}=await ee.from("flashcards").update({status:"deleted"}).eq("user_id",r==null?void 0:r.id).eq("block_name",U);if(Q)throw Q},onSuccess:()=>{P.invalidateQueries({queryKey:["flashcards"]}),P.invalidateQueries({queryKey:["blocks"]}),Kt.success("Bloco excludo com sucesso!"),x(!1)},onError:U=>{Kt.error("Erro ao excluir bloco"),console.error(U)}}),Y=_c({mutationFn:async()=>{const{error:U}=await ee.from("flashcards").update({status:"deleted"}).eq("user_id",r==null?void 0:r.id);if(U)throw U},onSuccess:()=>{P.invalidateQueries({queryKey:["flashcards"]}),P.invalidateQueries({queryKey:["blocks"]}),Kt.success("Todos os flashcards excludos!"),x(!1)},onError:U=>{Kt.error("Erro ao excluir todos os flashcards"),console.error(U)}}),q=U=>{o(U),u(U.front_text),m(U.back_text)},tt=()=>{!i||!d||!p||H.mutate({id:i.id,front:d,back:p})},et=U=>{k("single"),_(U),x(!0)},lt=U=>{k("block"),_(U),x(!0)},ot=()=>{k("all"),_(null),x(!0)},it=()=>{v==="single"&&S?K.mutate(S):v==="block"&&S?W.mutate(S):v==="all"&&Y.mutate(),x(!1),_(null)};return T.jsxs("div",{className:"space-y-6","data-matrix-id":"src/components/FlashcardsSection.tsx:217:4","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"217","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-6%22%7D",children:[T.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-6 border border-gray-200 dark:border-gray-700 transition-colors duration-300","data-matrix-id":"src/components/FlashcardsSection.tsx:218:6","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"218","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20dark%3Abg-gray-900%20rounded-xl%20shadow-md%20p-6%20border%20border-gray-200%20dark%3Aborder-gray-700%20transition-colors%20duration-300%22%7D",children:[T.jsxs("div",{className:"flex items-center justify-between mb-6","data-matrix-id":"src/components/FlashcardsSection.tsx:219:8","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"219","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-6%22%7D",children:[T.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white transition-colors duration-300","data-matrix-id":"src/components/FlashcardsSection.tsx:220:10","data-matrix-name":"h2","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"220","data-component-file":"FlashcardsSection.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%22%7D",children:"Meus Flashcards"}),T.jsxs("div",{className:"flex items-center gap-3","data-matrix-id":"src/components/FlashcardsSection.tsx:224:10","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"224","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-3%22%7D",children:[T.jsxs("div",{className:"flex items-center gap-2","data-matrix-id":"src/components/FlashcardsSection.tsx:226:12","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"226","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%22%7D",children:[T.jsx(II,{className:"w-5 h-5 text-gray-600 dark:text-gray-400","data-matrix-id":"src/components/FlashcardsSection.tsx:227:14","data-matrix-name":"Filter","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"227","data-component-file":"FlashcardsSection.tsx","data-component-name":"Filter","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-gray-600%20dark%3Atext-gray-400%22%7D"}),T.jsxs("select",{value:t,onChange:U=>e(U.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none bg-white dark:bg-gray-800 text-gray-900 dark:text-white transition-colors duration-300 text-sm","data-matrix-id":"src/components/FlashcardsSection.tsx:228:14","data-matrix-name":"select","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"228","data-component-file":"FlashcardsSection.tsx","data-component-name":"select","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22px-3%20py-2%20border%20border-gray-300%20dark%3Aborder-gray-600%20rounded-lg%20focus%3Aring-2%20focus%3Aring-indigo-500%20focus%3Aborder-transparent%20outline-none%20bg-white%20dark%3Abg-gray-800%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%20text-sm%22%7D",children:[T.jsx("option",{value:"","data-matrix-id":"src/components/FlashcardsSection.tsx:233:16","data-matrix-name":"option","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"233","data-component-file":"FlashcardsSection.tsx","data-component-name":"option","data-component-content":"%7B%22value%22%3A%22%22%7D",children:"Todas as categorias"}),R.map(U=>T.jsx("option",{value:U.id,"data-matrix-id":"src/components/FlashcardsSection.tsx:235:18","data-matrix-name":"option","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"235","data-component-file":"FlashcardsSection.tsx","data-component-name":"option","data-component-content":"%7B%22value%22%3A%22%5BMemberExpression%5D%22%7D",children:U.name},U.id))]}),T.jsxs("select",{value:E,onChange:U=>N(U.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none bg-white dark:bg-gray-800 text-gray-900 dark:text-white transition-colors duration-300 text-sm","data-matrix-id":"src/components/FlashcardsSection.tsx:241:14","data-matrix-name":"select","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"241","data-component-file":"FlashcardsSection.tsx","data-component-name":"select","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22px-3%20py-2%20border%20border-gray-300%20dark%3Aborder-gray-600%20rounded-lg%20focus%3Aring-2%20focus%3Aring-indigo-500%20focus%3Aborder-transparent%20outline-none%20bg-white%20dark%3Abg-gray-800%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%20text-sm%22%7D",children:[T.jsx("option",{value:"","data-matrix-id":"src/components/FlashcardsSection.tsx:246:16","data-matrix-name":"option","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"246","data-component-file":"FlashcardsSection.tsx","data-component-name":"option","data-component-content":"%7B%22value%22%3A%22%22%7D",children:"Todos os blocos"}),M.map(U=>T.jsx("option",{value:U,"data-matrix-id":"src/components/FlashcardsSection.tsx:248:18","data-matrix-name":"option","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"248","data-component-file":"FlashcardsSection.tsx","data-component-name":"option","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%7D",children:U},U))]})]}),T.jsxs("div",{className:"flex items-center gap-2 border-l border-gray-300 dark:border-gray-600 pl-3","data-matrix-id":"src/components/FlashcardsSection.tsx:256:12","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"256","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%20border-l%20border-gray-300%20dark%3Aborder-gray-600%20pl-3%22%7D",children:[M.length>0&&T.jsx("button",{onClick:ot,disabled:Y.isPending,className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-all duration-200 disabled:opacity-50",title:"Apagar todos os flashcards","data-matrix-id":"src/components/FlashcardsSection.tsx:258:16","data-matrix-name":"button","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"258","data-component-file":"FlashcardsSection.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22disabled%22%3A%22%5BMemberExpression%5D%22%2C%22className%22%3A%22p-2%20text-red-600%20dark%3Atext-red-400%20hover%3Abg-red-100%20dark%3Ahover%3Abg-red-900%2F50%20rounded-lg%20transition-all%20duration-200%20disabled%3Aopacity-50%22%2C%22title%22%3A%22Apagar%20todos%20os%20flashcards%22%7D",children:T.jsx(Nw,{className:"w-4 h-4","data-matrix-id":"src/components/FlashcardsSection.tsx:264:18","data-matrix-name":"Trash2","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"264","data-component-file":"FlashcardsSection.tsx","data-component-name":"Trash2","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"})}),E&&T.jsx("button",{onClick:()=>lt(E),disabled:W.isPending,className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-all duration-200 disabled:opacity-50",title:`Apagar bloco: ${E}`,"data-matrix-id":"src/components/FlashcardsSection.tsx:269:16","data-matrix-name":"button","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"269","data-component-file":"FlashcardsSection.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22disabled%22%3A%22%5BMemberExpression%5D%22%2C%22className%22%3A%22p-2%20text-red-600%20dark%3Atext-red-400%20hover%3Abg-red-100%20dark%3Ahover%3Abg-red-900%2F50%20rounded-lg%20transition-all%20duration-200%20disabled%3Aopacity-50%22%2C%22title%22%3A%22%5BTemplateLiteral%5D%22%7D",children:T.jsx(Xx,{className:"w-4 h-4","data-matrix-id":"src/components/FlashcardsSection.tsx:275:18","data-matrix-name":"Folder","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"275","data-component-file":"FlashcardsSection.tsx","data-component-name":"Folder","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"})})]})]})]}),I?T.jsxs("div",{className:"text-center py-12","data-matrix-id":"src/components/FlashcardsSection.tsx:283:10","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"283","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-12%22%7D",children:[T.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 dark:border-indigo-400","data-matrix-id":"src/components/FlashcardsSection.tsx:284:12","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"284","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22inline-block%20animate-spin%20rounded-full%20h-12%20w-12%20border-b-2%20border-indigo-600%20dark%3Aborder-indigo-400%22%7D"}),T.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400 transition-colors duration-300","data-matrix-id":"src/components/FlashcardsSection.tsx:285:12","data-matrix-name":"p","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"285","data-component-file":"FlashcardsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22mt-4%20text-gray-600%20dark%3Atext-gray-400%20transition-colors%20duration-300%22%7D",children:"Carregando flashcards..."})]}):O.length===0?T.jsxs("div",{className:"text-center py-12","data-matrix-id":"src/components/FlashcardsSection.tsx:288:10","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"288","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-12%22%7D",children:[T.jsx(Jd,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4","data-matrix-id":"src/components/FlashcardsSection.tsx:289:12","data-matrix-name":"BookOpen","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"289","data-component-file":"FlashcardsSection.tsx","data-component-name":"BookOpen","data-component-content":"%7B%22className%22%3A%22w-16%20h-16%20text-gray-400%20dark%3Atext-gray-500%20mx-auto%20mb-4%22%7D"}),T.jsx("p",{className:"text-gray-600 dark:text-gray-400 transition-colors duration-300","data-matrix-id":"src/components/FlashcardsSection.tsx:290:12","data-matrix-name":"p","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"290","data-component-file":"FlashcardsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-600%20dark%3Atext-gray-400%20transition-colors%20duration-300%22%7D",children:"Nenhum flashcard encontrado"}),T.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2 transition-colors duration-300","data-matrix-id":"src/components/FlashcardsSection.tsx:291:12","data-matrix-name":"p","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"291","data-component-file":"FlashcardsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-500%20dark%3Atext-gray-500%20mt-2%20transition-colors%20duration-300%22%7D",children:"Faa upload de um PDF para gerar flashcards automaticamente"})]}):T.jsx("div",{className:"grid gap-4","data-matrix-id":"src/components/FlashcardsSection.tsx:296:10","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"296","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22grid%20gap-4%22%7D",children:O.map(U=>T.jsx("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-gray-800 dark:to-gray-700 rounded-xl p-6 border border-indigo-100 dark:border-gray-600 transition-colors duration-300","data-matrix-id":"src/components/FlashcardsSection.tsx:298:14","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"298","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gradient-to-br%20from-indigo-50%20to-purple-50%20dark%3Afrom-gray-800%20dark%3Ato-gray-700%20rounded-xl%20p-6%20border%20border-indigo-100%20dark%3Aborder-gray-600%20transition-colors%20duration-300%22%7D",children:(i==null?void 0:i.id)===U.id?T.jsxs("div",{className:"space-y-4","data-matrix-id":"src/components/FlashcardsSection.tsx:303:18","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"303","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-4%22%7D",children:[T.jsxs("div",{"data-matrix-id":"src/components/FlashcardsSection.tsx:304:20","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"304","data-component-file":"FlashcardsSection.tsx","data-component-name":"div",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1","data-matrix-id":"src/components/FlashcardsSection.tsx:305:22","data-matrix-name":"label","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"305","data-component-file":"FlashcardsSection.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-700%20mb-1%22%7D",children:"Frente (Pergunta)"}),T.jsx("textarea",{value:d,onChange:Q=>u(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none",rows:2,"data-matrix-id":"src/components/FlashcardsSection.tsx:308:22","data-matrix-name":"textarea","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"308","data-component-file":"FlashcardsSection.tsx","data-component-name":"textarea","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20px-4%20py-2%20border%20border-gray-300%20rounded-lg%20focus%3Aring-2%20focus%3Aring-indigo-500%20focus%3Aborder-transparent%20outline-none%22%2C%22rows%22%3A2%7D"})]}),T.jsxs("div",{"data-matrix-id":"src/components/FlashcardsSection.tsx:316:20","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"316","data-component-file":"FlashcardsSection.tsx","data-component-name":"div",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1","data-matrix-id":"src/components/FlashcardsSection.tsx:317:22","data-matrix-name":"label","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"317","data-component-file":"FlashcardsSection.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-700%20mb-1%22%7D",children:"Verso (Resposta)"}),T.jsx("textarea",{value:p,onChange:Q=>m(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none",rows:3,"data-matrix-id":"src/components/FlashcardsSection.tsx:320:22","data-matrix-name":"textarea","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"320","data-component-file":"FlashcardsSection.tsx","data-component-name":"textarea","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20px-4%20py-2%20border%20border-gray-300%20rounded-lg%20focus%3Aring-2%20focus%3Aring-indigo-500%20focus%3Aborder-transparent%20outline-none%22%2C%22rows%22%3A3%7D"})]}),T.jsxs("div",{className:"flex gap-2","data-matrix-id":"src/components/FlashcardsSection.tsx:328:20","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"328","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-2%22%7D",children:[T.jsx("button",{onClick:tt,disabled:H.isPending,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50","data-matrix-id":"src/components/FlashcardsSection.tsx:329:22","data-matrix-name":"button","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"329","data-component-file":"FlashcardsSection.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22disabled%22%3A%22%5BMemberExpression%5D%22%2C%22className%22%3A%22px-4%20py-2%20bg-indigo-600%20text-white%20rounded-lg%20hover%3Abg-indigo-700%20transition-colors%20disabled%3Aopacity-50%22%7D",children:H.isPending?"Salvando...":"Salvar"}),T.jsx("button",{onClick:()=>o(null),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors","data-matrix-id":"src/components/FlashcardsSection.tsx:336:22","data-matrix-name":"button","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"336","data-component-file":"FlashcardsSection.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22px-4%20py-2%20bg-gray-200%20text-gray-700%20rounded-lg%20hover%3Abg-gray-300%20transition-colors%22%7D",children:"Cancelar"})]})]}):T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"mb-4","data-matrix-id":"src/components/FlashcardsSection.tsx:346:20","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"346","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-4%22%7D",children:[T.jsx("p",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400 mb-1 transition-colors duration-300","data-matrix-id":"src/components/FlashcardsSection.tsx:347:22","data-matrix-name":"p","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"347","data-component-file":"FlashcardsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20font-medium%20text-indigo-600%20dark%3Atext-indigo-400%20mb-1%20transition-colors%20duration-300%22%7D",children:"Pergunta:"}),T.jsx("p",{className:"text-gray-900 dark:text-white font-medium transition-colors duration-300","data-matrix-id":"src/components/FlashcardsSection.tsx:348:22","data-matrix-name":"p","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"348","data-component-file":"FlashcardsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-900%20dark%3Atext-white%20font-medium%20transition-colors%20duration-300%22%7D",children:U.front_text})]}),T.jsxs("div",{className:"mb-4","data-matrix-id":"src/components/FlashcardsSection.tsx:351:20","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"351","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-4%22%7D",children:[T.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400 mb-1 transition-colors duration-300","data-matrix-id":"src/components/FlashcardsSection.tsx:352:22","data-matrix-name":"p","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"352","data-component-file":"FlashcardsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20font-medium%20text-purple-600%20dark%3Atext-purple-400%20mb-1%20transition-colors%20duration-300%22%7D",children:"Resposta:"}),T.jsx("p",{className:"text-gray-700 dark:text-gray-300 transition-colors duration-300","data-matrix-id":"src/components/FlashcardsSection.tsx:353:22","data-matrix-name":"p","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"353","data-component-file":"FlashcardsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-700%20dark%3Atext-gray-300%20transition-colors%20duration-300%22%7D",children:U.back_text})]}),T.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-indigo-200 dark:border-gray-600","data-matrix-id":"src/components/FlashcardsSection.tsx:356:20","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"356","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20pt-4%20border-t%20border-indigo-200%20dark%3Aborder-gray-600%22%7D",children:[T.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 transition-colors duration-300","data-matrix-id":"src/components/FlashcardsSection.tsx:357:22","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"357","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-600%20dark%3Atext-gray-400%20transition-colors%20duration-300%22%7D",children:[T.jsxs("span",{"data-matrix-id":"src/components/FlashcardsSection.tsx:358:24","data-matrix-name":"span","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"358","data-component-file":"FlashcardsSection.tsx","data-component-name":"span",children:["Revises: ",U.review_count,"  "]}),T.jsxs("span",{"data-matrix-id":"src/components/FlashcardsSection.tsx:359:24","data-matrix-name":"span","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"359","data-component-file":"FlashcardsSection.tsx","data-component-name":"span",children:["Acertos: ",U.success_count]})]}),T.jsxs("div",{className:"flex gap-2","data-matrix-id":"src/components/FlashcardsSection.tsx:362:22","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"362","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-2%22%7D",children:[T.jsx("button",{onClick:()=>q(U),className:"p-2 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-100 dark:hover:bg-gray-700 rounded-lg transition-all duration-200",title:"Editar","data-matrix-id":"src/components/FlashcardsSection.tsx:363:24","data-matrix-name":"button","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"363","data-component-file":"FlashcardsSection.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-2%20text-indigo-600%20dark%3Atext-indigo-400%20hover%3Abg-indigo-100%20dark%3Ahover%3Abg-gray-700%20rounded-lg%20transition-all%20duration-200%22%2C%22title%22%3A%22Editar%22%7D",children:T.jsx(UI,{className:"w-4 h-4","data-matrix-id":"src/components/FlashcardsSection.tsx:368:26","data-matrix-name":"Edit2","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"368","data-component-file":"FlashcardsSection.tsx","data-component-name":"Edit2","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"})}),T.jsx("button",{onClick:()=>et(U.id),disabled:K.isPending,className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-all duration-200 disabled:opacity-50",title:"Excluir","data-matrix-id":"src/components/FlashcardsSection.tsx:370:24","data-matrix-name":"button","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"370","data-component-file":"FlashcardsSection.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22disabled%22%3A%22%5BMemberExpression%5D%22%2C%22className%22%3A%22p-2%20text-red-600%20dark%3Atext-red-400%20hover%3Abg-red-100%20dark%3Ahover%3Abg-red-900%2F50%20rounded-lg%20transition-all%20duration-200%20disabled%3Aopacity-50%22%2C%22title%22%3A%22Excluir%22%7D",children:T.jsx(Nw,{className:"w-4 h-4","data-matrix-id":"src/components/FlashcardsSection.tsx:376:26","data-matrix-name":"Trash2","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"376","data-component-file":"FlashcardsSection.tsx","data-component-name":"Trash2","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"})})]})]})]})},U.id))})]}),g&&T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50","data-matrix-id":"src/components/FlashcardsSection.tsx:390:8","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"390","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22fixed%20inset-0%20bg-black%20bg-opacity-50%20flex%20items-center%20justify-center%20z-50%22%7D",children:T.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 max-w-md w-full mx-4 shadow-xl","data-matrix-id":"src/components/FlashcardsSection.tsx:391:10","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"391","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20dark%3Abg-gray-800%20rounded-xl%20p-6%20max-w-md%20w-full%20mx-4%20shadow-xl%22%7D",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-4","data-matrix-id":"src/components/FlashcardsSection.tsx:392:12","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"392","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-3%20mb-4%22%7D",children:[T.jsx("div",{className:"w-12 h-12 bg-red-100 dark:bg-red-900/50 rounded-full flex items-center justify-center","data-matrix-id":"src/components/FlashcardsSection.tsx:393:14","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"393","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-12%20h-12%20bg-red-100%20dark%3Abg-red-900%2F50%20rounded-full%20flex%20items-center%20justify-center%22%7D",children:T.jsx(HI,{className:"w-6 h-6 text-red-600 dark:text-red-400","data-matrix-id":"src/components/FlashcardsSection.tsx:394:16","data-matrix-name":"AlertTriangle","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"394","data-component-file":"FlashcardsSection.tsx","data-component-name":"AlertTriangle","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20text-red-600%20dark%3Atext-red-400%22%7D"})}),T.jsx("div",{"data-matrix-id":"src/components/FlashcardsSection.tsx:396:14","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"396","data-component-file":"FlashcardsSection.tsx","data-component-name":"div",children:T.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white","data-matrix-id":"src/components/FlashcardsSection.tsx:397:16","data-matrix-name":"h3","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"397","data-component-file":"FlashcardsSection.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-lg%20font-semibold%20text-gray-900%20dark%3Atext-white%22%7D",children:"Confirmar Excluso"})})]}),T.jsxs("div",{className:"mb-6","data-matrix-id":"src/components/FlashcardsSection.tsx:403:12","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"403","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-6%22%7D",children:[v==="single"&&T.jsx("p",{className:"text-gray-600 dark:text-gray-400","data-matrix-id":"src/components/FlashcardsSection.tsx:405:16","data-matrix-name":"p","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"405","data-component-file":"FlashcardsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-600%20dark%3Atext-gray-400%22%7D",children:"Tem certeza que deseja excluir este flashcard? Esta ao no pode ser desfeita."}),v==="block"&&T.jsxs("p",{className:"text-gray-600 dark:text-gray-400","data-matrix-id":"src/components/FlashcardsSection.tsx:411:16","data-matrix-name":"p","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"411","data-component-file":"FlashcardsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-600%20dark%3Atext-gray-400%22%7D",children:["Tem certeza que deseja excluir todos os flashcards do bloco ",T.jsxs("strong",{"data-matrix-id":"src/components/FlashcardsSection.tsx:412:78","data-matrix-name":"strong","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"412","data-component-file":"FlashcardsSection.tsx","data-component-name":"strong",children:['"',S,'"']}),"? Esta ao no pode ser desfeita."]}),v==="all"&&T.jsxs("div",{"data-matrix-id":"src/components/FlashcardsSection.tsx:418:16","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"418","data-component-file":"FlashcardsSection.tsx","data-component-name":"div",children:[T.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-3","data-matrix-id":"src/components/FlashcardsSection.tsx:419:18","data-matrix-name":"p","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"419","data-component-file":"FlashcardsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-600%20dark%3Atext-gray-400%20mb-3%22%7D",children:T.jsx("strong",{"data-matrix-id":"src/components/FlashcardsSection.tsx:420:20","data-matrix-name":"strong","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"420","data-component-file":"FlashcardsSection.tsx","data-component-name":"strong",children:" CUIDADO: Esta ao  IRREVERSVEL!"})}),T.jsxs("p",{className:"text-gray-600 dark:text-gray-400","data-matrix-id":"src/components/FlashcardsSection.tsx:422:18","data-matrix-name":"p","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"422","data-component-file":"FlashcardsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-600%20dark%3Atext-gray-400%22%7D",children:["Tem certeza que deseja excluir ",T.jsx("strong",{"data-matrix-id":"src/components/FlashcardsSection.tsx:423:51","data-matrix-name":"strong","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"423","data-component-file":"FlashcardsSection.tsx","data-component-name":"strong",children:"TODOS"})," os seus flashcards? Esta ao no pode ser desfeita."]})]})]}),T.jsxs("div",{className:"flex gap-3","data-matrix-id":"src/components/FlashcardsSection.tsx:430:12","data-matrix-name":"div","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"430","data-component-file":"FlashcardsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-3%22%7D",children:[T.jsx("button",{onClick:()=>x(!1),className:"flex-1 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors","data-matrix-id":"src/components/FlashcardsSection.tsx:431:14","data-matrix-name":"button","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"431","data-component-file":"FlashcardsSection.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22flex-1%20px-4%20py-2%20bg-gray-200%20dark%3Abg-gray-700%20text-gray-800%20dark%3Atext-gray-200%20rounded-lg%20hover%3Abg-gray-300%20dark%3Ahover%3Abg-gray-600%20transition-colors%22%7D",children:"Cancelar"}),T.jsx("button",{onClick:it,disabled:v==="single"&&K.isPending||v==="block"&&W.isPending||v==="all"&&Y.isPending,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50","data-matrix-id":"src/components/FlashcardsSection.tsx:437:14","data-matrix-name":"button","data-component-path":"src/components/FlashcardsSection.tsx","data-component-line":"437","data-component-file":"FlashcardsSection.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22disabled%22%3A%22%5BLogicalExpression%5D%22%2C%22className%22%3A%22flex-1%20px-4%20py-2%20bg-red-600%20text-white%20rounded-lg%20hover%3Abg-red-700%20transition-colors%20disabled%3Aopacity-50%22%7D",children:v==="single"&&K.isPending||v==="block"&&W.isPending||v==="all"&&Y.isPending?"Excluindo...":"Excluir"})]})]})})]})}function HL(){var Y;const{user:r}=co(),[t,e]=X.useState(0),[n,s]=X.useState(!1),[i,o]=X.useState(null),[d,u]=X.useState({correct:0,incorrect:0}),[p,m]=X.useState(""),[g,x]=X.useState(""),[v,k]=X.useState(""),[S,_]=X.useState(null);$p();const{data:E=[]}=da({queryKey:["categories"],queryFn:async()=>{const{data:q,error:tt}=await ee.from("categories").select("*").order("name");if(tt)throw tt;return q}}),{data:N=[]}=da({queryKey:["blocks-for-study",r==null?void 0:r.id],queryFn:async()=>{if(!r)return[];const{data:q,error:tt}=await ee.from("flashcards").select("block_name").eq("user_id",r.id).eq("status","active").not("block_name","is",null);if(tt)throw tt;return[...new Set(q.map(lt=>lt.block_name))].sort()},enabled:!!r}),P=["Conhecimentos Bancarios","Informatica","Portugues","Matematica","Raciocinio Logico","Conhecimentos Gerais"],{data:R=[],isLoading:M,refetch:O}=da({queryKey:["dueCards",r==null?void 0:r.id,p,g,v],queryFn:async()=>{if(!r)return[];const q=new Date().toISOString();let tt=ee.from("flashcards").select("*").eq("user_id",r.id).eq("status","active").lte("next_review_date",q).order("next_review_date",{ascending:!0}).limit(20);p&&(tt=tt.eq("category_id",p)),g&&(tt=tt.eq("block_name",g)),v&&(tt=tt.eq("subject",v));const{data:et,error:lt}=await tt;if(lt)throw lt;return et},enabled:!!r});X.useEffect(()=>{R.length>0&&!i&&I()},[R]);const I=async()=>{if(!r)return;const{data:q,error:tt}=await ee.from("study_sessions").insert({user_id:r.id,category_id:p||null,cards_reviewed:0,cards_correct:0,cards_incorrect:0}).select().maybeSingle();!tt&&q&&(o(q.id),_(new Date))},H=_c({mutationFn:async({rating:q,timeSpent:tt})=>{const et=R[t],{data:lt,error:ot}=await ee.functions.invoke("record-review",{body:{flashcardId:et.id,sessionId:i,difficultyRating:q,timeSpentSeconds:tt}});if(ot)throw ot;return lt},onSuccess:(q,tt)=>{const et=tt.rating==="easy"||tt.rating==="medium";u(lt=>({correct:lt.correct+(et?1:0),incorrect:lt.incorrect+(et?0:1)})),et?Kt.success(" timo! Avanando para o prximo card..."):Kt.error(" Voltar em breve para revisar..."),t<R.length-1?(e(lt=>lt+1),s(!1),_(new Date)):(Kt.success(" Sesso concluda!"),o(null),e(0),s(!1))},onError:q=>{console.error("Error recording review:",q),Kt.error("Erro ao registrar reviso")}}),K=q=>{if(!S)return;const tt=Math.round((new Date().getTime()-S.getTime())/1e3);H.mutate({rating:q,timeSpent:tt})},W=R[t];return M?T.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-12 text-center border border-gray-200 dark:border-gray-700 transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:185:6","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"185","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20dark%3Abg-gray-900%20rounded-xl%20shadow-md%20p-12%20text-center%20border%20border-gray-200%20dark%3Aborder-gray-700%20transition-colors%20duration-300%22%7D",children:[T.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 dark:border-indigo-400","data-matrix-id":"src/components/StudySection.tsx:186:8","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"186","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22inline-block%20animate-spin%20rounded-full%20h-12%20w-12%20border-b-2%20border-indigo-600%20dark%3Aborder-indigo-400%22%7D"}),T.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400 transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:187:8","data-matrix-name":"p","data-component-path":"src/components/StudySection.tsx","data-component-line":"187","data-component-file":"StudySection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22mt-4%20text-gray-600%20dark%3Atext-gray-400%20transition-colors%20duration-300%22%7D",children:"Carregando..."})]}):R.length===0?T.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-12 text-center border border-gray-200 dark:border-gray-700 transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:194:6","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"194","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20dark%3Abg-gray-900%20rounded-xl%20shadow-md%20p-12%20text-center%20border%20border-gray-200%20dark%3Aborder-gray-700%20transition-colors%20duration-300%22%7D",children:[T.jsx(GT,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4","data-matrix-id":"src/components/StudySection.tsx:195:8","data-matrix-name":"GraduationCap","data-component-path":"src/components/StudySection.tsx","data-component-line":"195","data-component-file":"StudySection.tsx","data-component-name":"GraduationCap","data-component-content":"%7B%22className%22%3A%22w-16%20h-16%20text-gray-400%20dark%3Atext-gray-500%20mx-auto%20mb-4%22%7D"}),T.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2 transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:196:8","data-matrix-name":"h3","data-component-path":"src/components/StudySection.tsx","data-component-line":"196","data-component-file":"StudySection.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-xl%20font-bold%20text-gray-900%20dark%3Atext-white%20mb-2%20transition-colors%20duration-300%22%7D",children:"Nenhum flashcard para revisar"}),T.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:199:8","data-matrix-name":"p","data-component-path":"src/components/StudySection.tsx","data-component-line":"199","data-component-file":"StudySection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-600%20dark%3Atext-gray-400%20mb-4%20transition-colors%20duration-300%22%7D",children:"Voc est em dia com seus estudos!"}),T.jsx("div",{className:"mt-6 max-w-md mx-auto space-y-4","data-matrix-id":"src/components/StudySection.tsx:203:8","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"203","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-6%20max-w-md%20mx-auto%20space-y-4%22%7D",children:T.jsxs("div",{"data-matrix-id":"src/components/StudySection.tsx:204:10","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"204","data-component-file":"StudySection.tsx","data-component-name":"div",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2","data-matrix-id":"src/components/StudySection.tsx:205:12","data-matrix-name":"label","data-component-path":"src/components/StudySection.tsx","data-component-line":"205","data-component-file":"StudySection.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-700%20mb-2%22%7D",children:"Filtrar por Bloco"}),T.jsxs("select",{value:g,onChange:q=>{x(q.target.value),O()},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none","data-matrix-id":"src/components/StudySection.tsx:208:12","data-matrix-name":"select","data-component-path":"src/components/StudySection.tsx","data-component-line":"208","data-component-file":"StudySection.tsx","data-component-name":"select","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20px-4%20py-2%20border%20border-gray-300%20rounded-lg%20focus%3Aring-2%20focus%3Aring-indigo-500%20focus%3Aborder-transparent%20outline-none%22%7D",children:[T.jsx("option",{value:"","data-matrix-id":"src/components/StudySection.tsx:216:14","data-matrix-name":"option","data-component-path":"src/components/StudySection.tsx","data-component-line":"216","data-component-file":"StudySection.tsx","data-component-name":"option","data-component-content":"%7B%22value%22%3A%22%22%7D",children:"Todos os blocos"}),N.map(q=>T.jsx("option",{value:q,"data-matrix-id":"src/components/StudySection.tsx:218:16","data-matrix-name":"option","data-component-path":"src/components/StudySection.tsx","data-component-line":"218","data-component-file":"StudySection.tsx","data-component-name":"option","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%7D",children:q},q))]})]})})]}):T.jsxs("div",{className:"space-y-6","data-matrix-id":"src/components/StudySection.tsx:230:4","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"230","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-6%22%7D",children:[T.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-6 border border-gray-200 dark:border-gray-700 transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:232:6","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"232","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20dark%3Abg-gray-900%20rounded-xl%20shadow-md%20p-6%20border%20border-gray-200%20dark%3Aborder-gray-700%20transition-colors%20duration-300%22%7D",children:[T.jsxs("div",{className:"flex items-center justify-between mb-4","data-matrix-id":"src/components/StudySection.tsx:233:8","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"233","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-4%22%7D",children:[T.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:234:10","data-matrix-name":"h3","data-component-path":"src/components/StudySection.tsx","data-component-line":"234","data-component-file":"StudySection.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-lg%20font-bold%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%22%7D",children:"Filtros de Estudo"}),N.length>0&&T.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400","data-matrix-id":"src/components/StudySection.tsx:237:12","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"237","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-600%20dark%3Atext-gray-400%22%7D",children:[T.jsx("span",{className:"font-medium","data-matrix-id":"src/components/StudySection.tsx:238:14","data-matrix-name":"span","data-component-path":"src/components/StudySection.tsx","data-component-line":"238","data-component-file":"StudySection.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22font-medium%22%7D",children:N.length})," blocos disponveis"]})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4","data-matrix-id":"src/components/StudySection.tsx:243:8","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"243","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22grid%20grid-cols-1%20md%3Agrid-cols-2%20lg%3Agrid-cols-4%20gap-4%22%7D",children:[T.jsxs("div",{"data-matrix-id":"src/components/StudySection.tsx:245:10","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"245","data-component-file":"StudySection.tsx","data-component-name":"div",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:246:12","data-matrix-name":"label","data-component-path":"src/components/StudySection.tsx","data-component-line":"246","data-component-file":"StudySection.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-700%20dark%3Atext-gray-300%20mb-2%20transition-colors%20duration-300%22%7D",children:" Bloco (PDF)"}),T.jsxs("select",{value:g,onChange:q=>{x(q.target.value),e(0),s(!1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:249:12","data-matrix-name":"select","data-component-path":"src/components/StudySection.tsx","data-component-line":"249","data-component-file":"StudySection.tsx","data-component-name":"select","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20px-4%20py-2%20border%20border-gray-300%20dark%3Aborder-gray-600%20rounded-lg%20focus%3Aring-2%20focus%3Aring-indigo-500%20focus%3Aborder-transparent%20outline-none%20text-sm%20bg-white%20dark%3Abg-gray-800%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%22%7D",children:[T.jsx("option",{value:"","data-matrix-id":"src/components/StudySection.tsx:258:14","data-matrix-name":"option","data-component-path":"src/components/StudySection.tsx","data-component-line":"258","data-component-file":"StudySection.tsx","data-component-name":"option","data-component-content":"%7B%22value%22%3A%22%22%7D",children:" Todos os blocos"}),N.map(q=>T.jsxs("option",{value:q,"data-matrix-id":"src/components/StudySection.tsx:260:16","data-matrix-name":"option","data-component-path":"src/components/StudySection.tsx","data-component-line":"260","data-component-file":"StudySection.tsx","data-component-name":"option","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%7D",children:[" ",q]},q))]})]}),T.jsxs("div",{"data-matrix-id":"src/components/StudySection.tsx:268:10","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"268","data-component-file":"StudySection.tsx","data-component-name":"div",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:269:12","data-matrix-name":"label","data-component-path":"src/components/StudySection.tsx","data-component-line":"269","data-component-file":"StudySection.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-700%20dark%3Atext-gray-300%20mb-2%20transition-colors%20duration-300%22%7D",children:" Matria"}),T.jsxs("select",{value:v,onChange:q=>{k(q.target.value),e(0),s(!1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:272:12","data-matrix-name":"select","data-component-path":"src/components/StudySection.tsx","data-component-line":"272","data-component-file":"StudySection.tsx","data-component-name":"select","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20px-4%20py-2%20border%20border-gray-300%20dark%3Aborder-gray-600%20rounded-lg%20focus%3Aring-2%20focus%3Aring-indigo-500%20focus%3Aborder-transparent%20outline-none%20text-sm%20bg-white%20dark%3Abg-gray-800%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%22%7D",children:[T.jsx("option",{value:"","data-matrix-id":"src/components/StudySection.tsx:281:14","data-matrix-name":"option","data-component-path":"src/components/StudySection.tsx","data-component-line":"281","data-component-file":"StudySection.tsx","data-component-name":"option","data-component-content":"%7B%22value%22%3A%22%22%7D",children:"Todas as matrias"}),P.map(q=>T.jsx("option",{value:q,"data-matrix-id":"src/components/StudySection.tsx:283:16","data-matrix-name":"option","data-component-path":"src/components/StudySection.tsx","data-component-line":"283","data-component-file":"StudySection.tsx","data-component-name":"option","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%7D",children:q},q))]})]}),T.jsxs("div",{"data-matrix-id":"src/components/StudySection.tsx:291:10","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"291","data-component-file":"StudySection.tsx","data-component-name":"div",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:292:12","data-matrix-name":"label","data-component-path":"src/components/StudySection.tsx","data-component-line":"292","data-component-file":"StudySection.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-700%20dark%3Atext-gray-300%20mb-2%20transition-colors%20duration-300%22%7D",children:" Categoria"}),T.jsxs("select",{value:p,onChange:q=>{m(q.target.value),e(0),s(!1)},className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none text-sm bg-white dark:bg-gray-800 text-gray-900 dark:text-white transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:295:12","data-matrix-name":"select","data-component-path":"src/components/StudySection.tsx","data-component-line":"295","data-component-file":"StudySection.tsx","data-component-name":"select","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20px-4%20py-2%20border%20border-gray-300%20dark%3Aborder-gray-600%20rounded-lg%20focus%3Aring-2%20focus%3Aring-indigo-500%20focus%3Aborder-transparent%20outline-none%20text-sm%20bg-white%20dark%3Abg-gray-800%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%22%7D",children:[T.jsx("option",{value:"","data-matrix-id":"src/components/StudySection.tsx:304:14","data-matrix-name":"option","data-component-path":"src/components/StudySection.tsx","data-component-line":"304","data-component-file":"StudySection.tsx","data-component-name":"option","data-component-content":"%7B%22value%22%3A%22%22%7D",children:"Todas as categorias"}),E.map(q=>T.jsx("option",{value:q.id,"data-matrix-id":"src/components/StudySection.tsx:306:16","data-matrix-name":"option","data-component-path":"src/components/StudySection.tsx","data-component-line":"306","data-component-file":"StudySection.tsx","data-component-name":"option","data-component-content":"%7B%22value%22%3A%22%5BMemberExpression%5D%22%7D",children:q.name},q.id))]})]}),g&&T.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-3 border border-indigo-200 dark:border-indigo-800","data-matrix-id":"src/components/StudySection.tsx:315:12","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"315","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-indigo-50%20dark%3Abg-indigo-900%2F20%20rounded-lg%20p-3%20border%20border-indigo-200%20dark%3Aborder-indigo-800%22%7D",children:[T.jsx("h4",{className:"text-sm font-semibold text-indigo-900 dark:text-indigo-300 mb-1 transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:316:14","data-matrix-name":"h4","data-component-path":"src/components/StudySection.tsx","data-component-line":"316","data-component-file":"StudySection.tsx","data-component-name":"h4","data-component-content":"%7B%22className%22%3A%22text-sm%20font-semibold%20text-indigo-900%20dark%3Atext-indigo-300%20mb-1%20transition-colors%20duration-300%22%7D",children:" Bloco Selecionado"}),T.jsx("p",{className:"text-sm text-indigo-800 dark:text-indigo-400 font-medium transition-colors duration-300 truncate","data-matrix-id":"src/components/StudySection.tsx:319:14","data-matrix-name":"p","data-component-path":"src/components/StudySection.tsx","data-component-line":"319","data-component-file":"StudySection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-indigo-800%20dark%3Atext-indigo-400%20font-medium%20transition-colors%20duration-300%20truncate%22%7D",children:g}),T.jsx("p",{className:"text-xs text-indigo-700 dark:text-indigo-500 mt-1 transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:322:14","data-matrix-name":"p","data-component-path":"src/components/StudySection.tsx","data-component-line":"322","data-component-file":"StudySection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-xs%20text-indigo-700%20dark%3Atext-indigo-500%20mt-1%20transition-colors%20duration-300%22%7D",children:"Estudando apenas este bloco"})]})]}),T.jsxs("div",{className:"mt-4 flex flex-wrap gap-2","data-matrix-id":"src/components/StudySection.tsx:330:8","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"330","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-4%20flex%20flex-wrap%20gap-2%22%7D",children:[g&&T.jsxs("span",{className:"px-3 py-1 bg-indigo-100 dark:bg-indigo-900/50 text-indigo-800 dark:text-indigo-300 text-xs rounded-full font-medium","data-matrix-id":"src/components/StudySection.tsx:332:12","data-matrix-name":"span","data-component-path":"src/components/StudySection.tsx","data-component-line":"332","data-component-file":"StudySection.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22px-3%20py-1%20bg-indigo-100%20dark%3Abg-indigo-900%2F50%20text-indigo-800%20dark%3Atext-indigo-300%20text-xs%20rounded-full%20font-medium%22%7D",children:[" Bloco: ",g]}),v&&T.jsxs("span",{className:"px-3 py-1 bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 text-xs rounded-full font-medium","data-matrix-id":"src/components/StudySection.tsx:337:12","data-matrix-name":"span","data-component-path":"src/components/StudySection.tsx","data-component-line":"337","data-component-file":"StudySection.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22px-3%20py-1%20bg-purple-100%20dark%3Abg-purple-900%2F50%20text-purple-800%20dark%3Atext-purple-300%20text-xs%20rounded-full%20font-medium%22%7D",children:[" Matria: ",v]}),p&&T.jsxs("span",{className:"px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 text-xs rounded-full font-medium","data-matrix-id":"src/components/StudySection.tsx:342:12","data-matrix-name":"span","data-component-path":"src/components/StudySection.tsx","data-component-line":"342","data-component-file":"StudySection.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22px-3%20py-1%20bg-green-100%20dark%3Abg-green-900%2F50%20text-green-800%20dark%3Atext-green-300%20text-xs%20rounded-full%20font-medium%22%7D",children:[" Categoria: ",(Y=E.find(q=>q.id===p))==null?void 0:Y.name]})]})]}),T.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-6 border border-gray-200 dark:border-gray-700 transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:350:6","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"350","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20dark%3Abg-gray-900%20rounded-xl%20shadow-md%20p-6%20border%20border-gray-200%20dark%3Aborder-gray-700%20transition-colors%20duration-300%22%7D",children:[T.jsxs("div",{className:"flex items-center justify-between mb-6","data-matrix-id":"src/components/StudySection.tsx:351:8","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"351","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-6%22%7D",children:[T.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:352:10","data-matrix-name":"h2","data-component-path":"src/components/StudySection.tsx","data-component-line":"352","data-component-file":"StudySection.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%22%7D",children:"Sesso de Estudo"}),T.jsxs("div",{className:"flex items-center gap-4 text-sm","data-matrix-id":"src/components/StudySection.tsx:356:10","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"356","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-4%20text-sm%22%7D",children:[T.jsxs("div",{className:"flex items-center gap-2","data-matrix-id":"src/components/StudySection.tsx:357:12","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"357","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%22%7D",children:[T.jsx(EE,{className:"w-5 h-5 text-green-600 dark:text-green-400","data-matrix-id":"src/components/StudySection.tsx:358:14","data-matrix-name":"Check","data-component-path":"src/components/StudySection.tsx","data-component-line":"358","data-component-file":"StudySection.tsx","data-component-name":"Check","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-green-600%20dark%3Atext-green-400%22%7D"}),T.jsx("span",{className:"font-medium text-gray-900 dark:text-white transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:359:14","data-matrix-name":"span","data-component-path":"src/components/StudySection.tsx","data-component-line":"359","data-component-file":"StudySection.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22font-medium%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%22%7D",children:d.correct})]}),T.jsxs("div",{className:"flex items-center gap-2","data-matrix-id":"src/components/StudySection.tsx:361:12","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"361","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%22%7D",children:[T.jsx(DE,{className:"w-5 h-5 text-red-600 dark:text-red-400","data-matrix-id":"src/components/StudySection.tsx:362:14","data-matrix-name":"X","data-component-path":"src/components/StudySection.tsx","data-component-line":"362","data-component-file":"StudySection.tsx","data-component-name":"X","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-red-600%20dark%3Atext-red-400%22%7D"}),T.jsx("span",{className:"font-medium text-gray-900 dark:text-white transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:363:14","data-matrix-name":"span","data-component-path":"src/components/StudySection.tsx","data-component-line":"363","data-component-file":"StudySection.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22font-medium%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%22%7D",children:d.incorrect})]}),T.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:365:12","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"365","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-600%20dark%3Atext-gray-400%20transition-colors%20duration-300%22%7D",children:[t+1," de ",R.length]})]})]}),W&&T.jsx("div",{className:"max-w-2xl mx-auto","data-matrix-id":"src/components/StudySection.tsx:372:10","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"372","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22max-w-2xl%20mx-auto%22%7D",children:T.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-gray-800 dark:to-gray-700 rounded-xl p-8 border border-indigo-200 dark:border-gray-600 transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:373:12","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"373","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gradient-to-br%20from-indigo-50%20to-purple-50%20dark%3Afrom-gray-800%20dark%3Ato-gray-700%20rounded-xl%20p-8%20border%20border-indigo-200%20dark%3Aborder-gray-600%20transition-colors%20duration-300%22%7D",children:[T.jsxs("div",{className:"mb-6","data-matrix-id":"src/components/StudySection.tsx:374:14","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"374","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-6%22%7D",children:[T.jsxs("p",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400 mb-3 transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:375:16","data-matrix-name":"p","data-component-path":"src/components/StudySection.tsx","data-component-line":"375","data-component-file":"StudySection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20font-medium%20text-indigo-600%20dark%3Atext-indigo-400%20mb-3%20transition-colors%20duration-300%22%7D",children:[" ",W.block_name||"Flashcard","  ",W.subject]}),n?T.jsxs("div",{"data-matrix-id":"src/components/StudySection.tsx:380:18","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"380","data-component-file":"StudySection.tsx","data-component-name":"div",children:[T.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400 mb-3 transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:381:20","data-matrix-name":"p","data-component-path":"src/components/StudySection.tsx","data-component-line":"381","data-component-file":"StudySection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20font-medium%20text-purple-600%20dark%3Atext-purple-400%20mb-3%20transition-colors%20duration-300%22%7D",children:"Resposta:"}),T.jsx("p",{className:"text-lg text-gray-900 dark:text-white leading-relaxed transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:382:20","data-matrix-name":"p","data-component-path":"src/components/StudySection.tsx","data-component-line":"382","data-component-file":"StudySection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-lg%20text-gray-900%20dark%3Atext-white%20leading-relaxed%20transition-colors%20duration-300%22%7D",children:W.back_text})]}):T.jsxs("div",{"data-matrix-id":"src/components/StudySection.tsx:387:18","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"387","data-component-file":"StudySection.tsx","data-component-name":"div",children:[T.jsx("p",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400 mb-3 transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:388:20","data-matrix-name":"p","data-component-path":"src/components/StudySection.tsx","data-component-line":"388","data-component-file":"StudySection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20font-medium%20text-indigo-600%20dark%3Atext-indigo-400%20mb-3%20transition-colors%20duration-300%22%7D",children:"Pergunta:"}),T.jsx("p",{className:"text-lg text-gray-900 dark:text-white leading-relaxed transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:389:20","data-matrix-name":"p","data-component-path":"src/components/StudySection.tsx","data-component-line":"389","data-component-file":"StudySection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-lg%20text-gray-900%20dark%3Atext-white%20leading-relaxed%20transition-colors%20duration-300%22%7D",children:W.front_text})]})]}),n?T.jsxs("div",{className:"space-y-4","data-matrix-id":"src/components/StudySection.tsx:407:16","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"407","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-4%22%7D",children:[T.jsx("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400 transition-colors duration-300","data-matrix-id":"src/components/StudySection.tsx:408:18","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"408","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20text-sm%20text-gray-600%20dark%3Atext-gray-400%20transition-colors%20duration-300%22%7D",children:"Como foi sua experincia com este card?"}),T.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3","data-matrix-id":"src/components/StudySection.tsx:412:18","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"412","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22grid%20grid-cols-2%20md%3Agrid-cols-4%20gap-3%22%7D",children:[T.jsxs("button",{onClick:()=>K("again"),disabled:H.isPending,className:"bg-red-100 text-red-700 py-3 rounded-lg font-medium hover:bg-red-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2","data-matrix-id":"src/components/StudySection.tsx:413:20","data-matrix-name":"button","data-component-path":"src/components/StudySection.tsx","data-component-line":"413","data-component-file":"StudySection.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22disabled%22%3A%22%5BMemberExpression%5D%22%2C%22className%22%3A%22bg-red-100%20text-red-700%20py-3%20rounded-lg%20font-medium%20hover%3Abg-red-200%20transition-colors%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20flex%20items-center%20justify-center%20gap-2%22%7D",children:[T.jsx(DE,{className:"w-5 h-5","data-matrix-id":"src/components/StudySection.tsx:418:22","data-matrix-name":"X","data-component-path":"src/components/StudySection.tsx","data-component-line":"418","data-component-file":"StudySection.tsx","data-component-name":"X","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),"Difcil"]}),T.jsxs("button",{onClick:()=>K("hard"),disabled:H.isPending,className:"bg-orange-100 text-orange-700 py-3 rounded-lg font-medium hover:bg-orange-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2","data-matrix-id":"src/components/StudySection.tsx:422:20","data-matrix-name":"button","data-component-path":"src/components/StudySection.tsx","data-component-line":"422","data-component-file":"StudySection.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22disabled%22%3A%22%5BMemberExpression%5D%22%2C%22className%22%3A%22bg-orange-100%20text-orange-700%20py-3%20rounded-lg%20font-medium%20hover%3Abg-orange-200%20transition-colors%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20flex%20items-center%20justify-center%20gap-2%22%7D",children:[T.jsx(TE,{className:"w-5 h-5","data-matrix-id":"src/components/StudySection.tsx:427:22","data-matrix-name":"RotateCcw","data-component-path":"src/components/StudySection.tsx","data-component-line":"427","data-component-file":"StudySection.tsx","data-component-name":"RotateCcw","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),"Revisar"]}),T.jsxs("button",{onClick:()=>K("medium"),disabled:H.isPending,className:"bg-blue-100 text-blue-700 py-3 rounded-lg font-medium hover:bg-blue-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2","data-matrix-id":"src/components/StudySection.tsx:431:20","data-matrix-name":"button","data-component-path":"src/components/StudySection.tsx","data-component-line":"431","data-component-file":"StudySection.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22disabled%22%3A%22%5BMemberExpression%5D%22%2C%22className%22%3A%22bg-blue-100%20text-blue-700%20py-3%20rounded-lg%20font-medium%20hover%3Abg-blue-200%20transition-colors%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20flex%20items-center%20justify-center%20gap-2%22%7D",children:[T.jsx(PI,{className:"w-5 h-5","data-matrix-id":"src/components/StudySection.tsx:436:22","data-matrix-name":"Brain","data-component-path":"src/components/StudySection.tsx","data-component-line":"436","data-component-file":"StudySection.tsx","data-component-name":"Brain","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),"Mdio"]}),T.jsxs("button",{onClick:()=>K("easy"),disabled:H.isPending,className:"bg-green-100 text-green-700 py-3 rounded-lg font-medium hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2","data-matrix-id":"src/components/StudySection.tsx:440:20","data-matrix-name":"button","data-component-path":"src/components/StudySection.tsx","data-component-line":"440","data-component-file":"StudySection.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22disabled%22%3A%22%5BMemberExpression%5D%22%2C%22className%22%3A%22bg-green-100%20text-green-700%20py-3%20rounded-lg%20font-medium%20hover%3Abg-green-200%20transition-colors%20disabled%3Aopacity-50%20disabled%3Acursor-not-allowed%20flex%20items-center%20justify-center%20gap-2%22%7D",children:[T.jsx(EE,{className:"w-5 h-5","data-matrix-id":"src/components/StudySection.tsx:445:22","data-matrix-name":"Check","data-component-path":"src/components/StudySection.tsx","data-component-line":"445","data-component-file":"StudySection.tsx","data-component-name":"Check","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),"Fcil"]})]})]}):T.jsx("div",{className:"text-center","data-matrix-id":"src/components/StudySection.tsx:397:16","data-matrix-name":"div","data-component-path":"src/components/StudySection.tsx","data-component-line":"397","data-component-file":"StudySection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%22%7D",children:T.jsxs("button",{onClick:()=>s(!0),className:"px-8 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium flex items-center gap-2 mx-auto","data-matrix-id":"src/components/StudySection.tsx:398:18","data-matrix-name":"button","data-component-path":"src/components/StudySection.tsx","data-component-line":"398","data-component-file":"StudySection.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22px-8%20py-3%20bg-indigo-600%20text-white%20rounded-lg%20hover%3Abg-indigo-700%20transition-colors%20font-medium%20flex%20items-center%20gap-2%20mx-auto%22%7D",children:[T.jsx(TE,{className:"w-5 h-5","data-matrix-id":"src/components/StudySection.tsx:402:20","data-matrix-name":"RotateCcw","data-component-path":"src/components/StudySection.tsx","data-component-line":"402","data-component-file":"StudySection.tsx","data-component-name":"RotateCcw","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),"Ver Resposta"]})})]})})]})]})}function qL(){const{user:r}=co(),{data:t,isLoading:e}=da({queryKey:["stats",r==null?void 0:r.id],queryFn:async()=>{if(!r)return null;const{data:n}=await ee.from("flashcards").select("id, review_count, success_count, difficulty_level, next_review_date").eq("user_id",r.id),{data:s}=await ee.from("study_sessions").select("*").eq("user_id",r.id).order("start_time",{ascending:!1}),{data:i}=await ee.from("flashcard_reviews").select("*").eq("user_id",r.id),{data:o}=await ee.from("categories").select("id, name"),d=await Promise.all((o||[]).map(async R=>{const{count:M}=await ee.from("flashcards").select("*",{count:"exact",head:!0}).eq("user_id",r.id).eq("category_id",R.id);return{name:R.name,count:M||0}})),u=(n==null?void 0:n.length)||0,p=(i==null?void 0:i.length)||0,m=(s==null?void 0:s.length)||0,g=(s==null?void 0:s.reduce((R,M)=>R+(M.duration_minutes||0),0))||0,x=(s==null?void 0:s.reduce((R,M)=>R+(M.cards_correct||0),0))||0,v=(s==null?void 0:s.reduce((R,M)=>R+(M.cards_incorrect||0),0))||0,k=x+v,S=k>0?Math.round(x/k*100):0,_=new Date().toISOString(),E=(n==null?void 0:n.filter(R=>R.next_review_date<=_).length)||0,N=(n==null?void 0:n.filter(R=>R.review_count>=5&&R.difficulty_level>=3).length)||0,P=(s==null?void 0:s.slice(0,7))||[];return{totalCards:u,totalReviews:p,totalSessions:m,totalMinutes:g,accuracyRate:S,dueCards:E,masteredCards:N,categoryStats:d.filter(R=>R.count>0),recentSessions:P}},enabled:!!r});return e?T.jsxs("div",{className:"bg-white rounded-xl shadow-md p-12 text-center","data-matrix-id":"src/components/StatsSection.tsx:93:6","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"93","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20rounded-xl%20shadow-md%20p-12%20text-center%22%7D",children:[T.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600","data-matrix-id":"src/components/StatsSection.tsx:94:8","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"94","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22inline-block%20animate-spin%20rounded-full%20h-12%20w-12%20border-b-2%20border-indigo-600%22%7D"}),T.jsx("p",{className:"mt-4 text-gray-600","data-matrix-id":"src/components/StatsSection.tsx:95:8","data-matrix-name":"p","data-component-path":"src/components/StatsSection.tsx","data-component-line":"95","data-component-file":"StatsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22mt-4%20text-gray-600%22%7D",children:"Carregando estatsticas..."})]}):t?T.jsxs("div",{className:"space-y-6","data-matrix-id":"src/components/StatsSection.tsx:110:4","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"110","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-6%22%7D",children:[T.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-6 border border-gray-200 dark:border-gray-700 transition-colors duration-300","data-matrix-id":"src/components/StatsSection.tsx:111:6","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"111","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20dark%3Abg-gray-900%20rounded-xl%20shadow-md%20p-6%20border%20border-gray-200%20dark%3Aborder-gray-700%20transition-colors%20duration-300%22%7D",children:[T.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 transition-colors duration-300","data-matrix-id":"src/components/StatsSection.tsx:112:8","data-matrix-name":"h2","data-component-path":"src/components/StatsSection.tsx","data-component-line":"112","data-component-file":"StatsSection.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20text-gray-900%20dark%3Atext-white%20mb-6%20transition-colors%20duration-300%22%7D",children:"Estatsticas de Progresso"}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8","data-matrix-id":"src/components/StatsSection.tsx:116:8","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"116","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22grid%20grid-cols-1%20md%3Agrid-cols-3%20gap-4%20mb-8%22%7D",children:[T.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/50 dark:to-indigo-800/50 rounded-xl p-6 border border-indigo-200 dark:border-indigo-700 transition-colors duration-300","data-matrix-id":"src/components/StatsSection.tsx:117:10","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"117","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gradient-to-br%20from-indigo-50%20to-indigo-100%20dark%3Afrom-indigo-900%2F50%20dark%3Ato-indigo-800%2F50%20rounded-xl%20p-6%20border%20border-indigo-200%20dark%3Aborder-indigo-700%20transition-colors%20duration-300%22%7D",children:[T.jsxs("div",{className:"flex items-center justify-between mb-2","data-matrix-id":"src/components/StatsSection.tsx:118:12","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"118","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-2%22%7D",children:[T.jsx(Jd,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400","data-matrix-id":"src/components/StatsSection.tsx:119:14","data-matrix-name":"BookOpen","data-component-path":"src/components/StatsSection.tsx","data-component-line":"119","data-component-file":"StatsSection.tsx","data-component-name":"BookOpen","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20text-indigo-600%20dark%3Atext-indigo-400%22%7D"}),T.jsx("span",{className:"text-3xl font-bold text-indigo-900 dark:text-indigo-200 transition-colors duration-300","data-matrix-id":"src/components/StatsSection.tsx:120:14","data-matrix-name":"span","data-component-path":"src/components/StatsSection.tsx","data-component-line":"120","data-component-file":"StatsSection.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-3xl%20font-bold%20text-indigo-900%20dark%3Atext-indigo-200%20transition-colors%20duration-300%22%7D",children:t.totalCards})]}),T.jsx("p",{className:"text-sm text-indigo-700 dark:text-indigo-300 font-medium transition-colors duration-300","data-matrix-id":"src/components/StatsSection.tsx:124:12","data-matrix-name":"p","data-component-path":"src/components/StatsSection.tsx","data-component-line":"124","data-component-file":"StatsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-indigo-700%20dark%3Atext-indigo-300%20font-medium%20transition-colors%20duration-300%22%7D",children:"Total de Flashcards"})]}),T.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/50 dark:to-purple-800/50 rounded-xl p-6 border border-purple-200 dark:border-purple-700 transition-colors duration-300","data-matrix-id":"src/components/StatsSection.tsx:127:10","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"127","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gradient-to-br%20from-purple-50%20to-purple-100%20dark%3Afrom-purple-900%2F50%20dark%3Ato-purple-800%2F50%20rounded-xl%20p-6%20border%20border-purple-200%20dark%3Aborder-purple-700%20transition-colors%20duration-300%22%7D",children:[T.jsxs("div",{className:"flex items-center justify-between mb-2","data-matrix-id":"src/components/StatsSection.tsx:128:12","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"128","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-2%22%7D",children:[T.jsx($I,{className:"w-8 h-8 text-purple-600 dark:text-purple-400","data-matrix-id":"src/components/StatsSection.tsx:129:14","data-matrix-name":"Target","data-component-path":"src/components/StatsSection.tsx","data-component-line":"129","data-component-file":"StatsSection.tsx","data-component-name":"Target","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20text-purple-600%20dark%3Atext-purple-400%22%7D"}),T.jsx("span",{className:"text-3xl font-bold text-purple-900 dark:text-purple-200 transition-colors duration-300","data-matrix-id":"src/components/StatsSection.tsx:130:14","data-matrix-name":"span","data-component-path":"src/components/StatsSection.tsx","data-component-line":"130","data-component-file":"StatsSection.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-3xl%20font-bold%20text-purple-900%20dark%3Atext-purple-200%20transition-colors%20duration-300%22%7D",children:t.dueCards})]}),T.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300 font-medium transition-colors duration-300","data-matrix-id":"src/components/StatsSection.tsx:134:12","data-matrix-name":"p","data-component-path":"src/components/StatsSection.tsx","data-component-line":"134","data-component-file":"StatsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-purple-700%20dark%3Atext-purple-300%20font-medium%20transition-colors%20duration-300%22%7D",children:"Cards para Revisar"})]}),T.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/50 dark:to-green-800/50 rounded-xl p-6 border border-green-200 dark:border-green-700 transition-colors duration-300","data-matrix-id":"src/components/StatsSection.tsx:137:10","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"137","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gradient-to-br%20from-green-50%20to-green-100%20dark%3Afrom-green-900%2F50%20dark%3Ato-green-800%2F50%20rounded-xl%20p-6%20border%20border-green-200%20dark%3Aborder-green-700%20transition-colors%20duration-300%22%7D",children:[T.jsxs("div",{className:"flex items-center justify-between mb-2","data-matrix-id":"src/components/StatsSection.tsx:138:12","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"138","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-2%22%7D",children:[T.jsx(TI,{className:"w-8 h-8 text-green-600 dark:text-green-400","data-matrix-id":"src/components/StatsSection.tsx:139:14","data-matrix-name":"Award","data-component-path":"src/components/StatsSection.tsx","data-component-line":"139","data-component-file":"StatsSection.tsx","data-component-name":"Award","data-component-content":"%7B%22className%22%3A%22w-8%20h-8%20text-green-600%20dark%3Atext-green-400%22%7D"}),T.jsx("span",{className:"text-3xl font-bold text-green-900 dark:text-green-200 transition-colors duration-300","data-matrix-id":"src/components/StatsSection.tsx:140:14","data-matrix-name":"span","data-component-path":"src/components/StatsSection.tsx","data-component-line":"140","data-component-file":"StatsSection.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-3xl%20font-bold%20text-green-900%20dark%3Atext-green-200%20transition-colors%20duration-300%22%7D",children:t.masteredCards})]}),T.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 font-medium transition-colors duration-300","data-matrix-id":"src/components/StatsSection.tsx:144:12","data-matrix-name":"p","data-component-path":"src/components/StatsSection.tsx","data-component-line":"144","data-component-file":"StatsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-green-700%20dark%3Atext-green-300%20font-medium%20transition-colors%20duration-300%22%7D",children:"Cards Dominados"})]})]}),T.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4","data-matrix-id":"src/components/StatsSection.tsx:148:8","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"148","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22grid%20grid-cols-1%20md%3Agrid-cols-3%20gap-4%22%7D",children:[T.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 transition-colors duration-300","data-matrix-id":"src/components/StatsSection.tsx:149:10","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"149","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gray-50%20dark%3Abg-gray-800%20rounded-xl%20p-6%20border%20border-gray-200%20dark%3Aborder-gray-700%20transition-colors%20duration-300%22%7D",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-2","data-matrix-id":"src/components/StatsSection.tsx:150:12","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"150","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-3%20mb-2%22%7D",children:[T.jsx(zI,{className:"w-6 h-6 text-blue-600 dark:text-blue-400","data-matrix-id":"src/components/StatsSection.tsx:151:14","data-matrix-name":"TrendingUp","data-component-path":"src/components/StatsSection.tsx","data-component-line":"151","data-component-file":"StatsSection.tsx","data-component-name":"TrendingUp","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20text-blue-600%20dark%3Atext-blue-400%22%7D"}),T.jsxs("span",{className:"text-2xl font-bold text-gray-900 dark:text-white transition-colors duration-300","data-matrix-id":"src/components/StatsSection.tsx:152:14","data-matrix-name":"span","data-component-path":"src/components/StatsSection.tsx","data-component-line":"152","data-component-file":"StatsSection.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%22%7D",children:[t.accuracyRate,"%"]})]}),T.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 transition-colors duration-300","data-matrix-id":"src/components/StatsSection.tsx:156:12","data-matrix-name":"p","data-component-path":"src/components/StatsSection.tsx","data-component-line":"156","data-component-file":"StatsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-600%20dark%3Atext-gray-400%20transition-colors%20duration-300%22%7D",children:"Taxa de Acerto"})]}),T.jsxs("div",{className:"bg-gray-50 rounded-xl p-6","data-matrix-id":"src/components/StatsSection.tsx:159:10","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"159","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gray-50%20rounded-xl%20p-6%22%7D",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-2","data-matrix-id":"src/components/StatsSection.tsx:160:12","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"160","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-3%20mb-2%22%7D",children:[T.jsx(MI,{className:"w-6 h-6 text-orange-600","data-matrix-id":"src/components/StatsSection.tsx:161:14","data-matrix-name":"Clock","data-component-path":"src/components/StatsSection.tsx","data-component-line":"161","data-component-file":"StatsSection.tsx","data-component-name":"Clock","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20text-orange-600%22%7D"}),T.jsx("span",{className:"text-2xl font-bold text-gray-900","data-matrix-id":"src/components/StatsSection.tsx:162:14","data-matrix-name":"span","data-component-path":"src/components/StatsSection.tsx","data-component-line":"162","data-component-file":"StatsSection.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20text-gray-900%22%7D",children:t.totalMinutes})]}),T.jsx("p",{className:"text-sm text-gray-600","data-matrix-id":"src/components/StatsSection.tsx:166:12","data-matrix-name":"p","data-component-path":"src/components/StatsSection.tsx","data-component-line":"166","data-component-file":"StatsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-600%22%7D",children:"Minutos de Estudo"})]}),T.jsxs("div",{className:"bg-gray-50 rounded-xl p-6","data-matrix-id":"src/components/StatsSection.tsx:169:10","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"169","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gray-50%20rounded-xl%20p-6%22%7D",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-2","data-matrix-id":"src/components/StatsSection.tsx:170:12","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"170","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-3%20mb-2%22%7D",children:[T.jsx(yf,{className:"w-6 h-6 text-indigo-600","data-matrix-id":"src/components/StatsSection.tsx:171:14","data-matrix-name":"BarChart3","data-component-path":"src/components/StatsSection.tsx","data-component-line":"171","data-component-file":"StatsSection.tsx","data-component-name":"BarChart3","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20text-indigo-600%22%7D"}),T.jsx("span",{className:"text-2xl font-bold text-gray-900","data-matrix-id":"src/components/StatsSection.tsx:172:14","data-matrix-name":"span","data-component-path":"src/components/StatsSection.tsx","data-component-line":"172","data-component-file":"StatsSection.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20text-gray-900%22%7D",children:t.totalSessions})]}),T.jsx("p",{className:"text-sm text-gray-600","data-matrix-id":"src/components/StatsSection.tsx:176:12","data-matrix-name":"p","data-component-path":"src/components/StatsSection.tsx","data-component-line":"176","data-component-file":"StatsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-600%22%7D",children:"Sesses de Estudo"})]})]})]}),t.categoryStats.length>0&&T.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6","data-matrix-id":"src/components/StatsSection.tsx:182:8","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"182","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20rounded-xl%20shadow-md%20p-6%22%7D",children:[T.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4","data-matrix-id":"src/components/StatsSection.tsx:183:10","data-matrix-name":"h3","data-component-path":"src/components/StatsSection.tsx","data-component-line":"183","data-component-file":"StatsSection.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-xl%20font-bold%20text-gray-900%20mb-4%22%7D",children:"Flashcards por Categoria"}),T.jsx("div",{className:"space-y-3","data-matrix-id":"src/components/StatsSection.tsx:187:10","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"187","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-3%22%7D",children:t.categoryStats.map((n,s)=>T.jsx("div",{className:"flex items-center gap-4","data-matrix-id":"src/components/StatsSection.tsx:189:14","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"189","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-4%22%7D",children:T.jsxs("div",{className:"flex-1","data-matrix-id":"src/components/StatsSection.tsx:190:16","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"190","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%22%7D",children:[T.jsxs("div",{className:"flex items-center justify-between mb-1","data-matrix-id":"src/components/StatsSection.tsx:191:18","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"191","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-1%22%7D",children:[T.jsx("span",{className:"text-sm font-medium text-gray-700","data-matrix-id":"src/components/StatsSection.tsx:192:20","data-matrix-name":"span","data-component-path":"src/components/StatsSection.tsx","data-component-line":"192","data-component-file":"StatsSection.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-sm%20font-medium%20text-gray-700%22%7D",children:n.name}),T.jsx("span",{className:"text-sm font-bold text-gray-900","data-matrix-id":"src/components/StatsSection.tsx:195:20","data-matrix-name":"span","data-component-path":"src/components/StatsSection.tsx","data-component-line":"195","data-component-file":"StatsSection.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-sm%20font-bold%20text-gray-900%22%7D",children:n.count})]}),T.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2","data-matrix-id":"src/components/StatsSection.tsx:199:18","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"199","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-full%20bg-gray-200%20rounded-full%20h-2%22%7D",children:T.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all",style:{width:`${n.count/t.totalCards*100}%`},"data-matrix-id":"src/components/StatsSection.tsx:200:20","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"200","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-indigo-600%20h-2%20rounded-full%20transition-all%22%2C%22style%22%3A%7B%22width%22%3A%22%5BTemplateLiteral%5D%22%7D%7D"})})]})},s))})]}),t.recentSessions.length>0&&T.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6","data-matrix-id":"src/components/StatsSection.tsx:215:8","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"215","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20rounded-xl%20shadow-md%20p-6%22%7D",children:[T.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4","data-matrix-id":"src/components/StatsSection.tsx:216:10","data-matrix-name":"h3","data-component-path":"src/components/StatsSection.tsx","data-component-line":"216","data-component-file":"StatsSection.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-xl%20font-bold%20text-gray-900%20mb-4%22%7D",children:"Sesses Recentes"}),T.jsx("div",{className:"space-y-3","data-matrix-id":"src/components/StatsSection.tsx:220:10","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"220","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-3%22%7D",children:t.recentSessions.map(n=>T.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg","data-matrix-id":"src/components/StatsSection.tsx:222:14","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"222","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20p-4%20bg-gray-50%20rounded-lg%22%7D",children:[T.jsxs("div",{"data-matrix-id":"src/components/StatsSection.tsx:226:16","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"226","data-component-file":"StatsSection.tsx","data-component-name":"div",children:[T.jsx("p",{className:"font-medium text-gray-900","data-matrix-id":"src/components/StatsSection.tsx:227:18","data-matrix-name":"p","data-component-path":"src/components/StatsSection.tsx","data-component-line":"227","data-component-file":"StatsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22font-medium%20text-gray-900%22%7D",children:new Date(n.start_time).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}),T.jsxs("p",{className:"text-sm text-gray-600","data-matrix-id":"src/components/StatsSection.tsx:236:18","data-matrix-name":"p","data-component-path":"src/components/StatsSection.tsx","data-component-line":"236","data-component-file":"StatsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-600%22%7D",children:[n.duration_minutes," minutos  ",n.cards_reviewed," cards"]})]}),T.jsxs("div",{className:"flex items-center gap-4","data-matrix-id":"src/components/StatsSection.tsx:241:16","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"241","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-4%22%7D",children:[T.jsxs("div",{className:"text-right","data-matrix-id":"src/components/StatsSection.tsx:242:18","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"242","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-right%22%7D",children:[T.jsxs("p",{className:"text-sm font-medium text-green-600","data-matrix-id":"src/components/StatsSection.tsx:243:20","data-matrix-name":"p","data-component-path":"src/components/StatsSection.tsx","data-component-line":"243","data-component-file":"StatsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20font-medium%20text-green-600%22%7D",children:[n.cards_correct," acertos"]}),T.jsxs("p",{className:"text-sm text-red-600","data-matrix-id":"src/components/StatsSection.tsx:246:20","data-matrix-name":"p","data-component-path":"src/components/StatsSection.tsx","data-component-line":"246","data-component-file":"StatsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-red-600%22%7D",children:[n.cards_incorrect," erros"]})]}),T.jsx("div",{className:"w-16 h-16 rounded-full bg-indigo-100 flex items-center justify-center","data-matrix-id":"src/components/StatsSection.tsx:251:18","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"251","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-16%20h-16%20rounded-full%20bg-indigo-100%20flex%20items-center%20justify-center%22%7D",children:T.jsxs("span",{className:"text-lg font-bold text-indigo-900","data-matrix-id":"src/components/StatsSection.tsx:252:20","data-matrix-name":"span","data-component-path":"src/components/StatsSection.tsx","data-component-line":"252","data-component-file":"StatsSection.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-lg%20font-bold%20text-indigo-900%22%7D",children:[n.cards_reviewed>0?Math.round(n.cards_correct/n.cards_reviewed*100):0,"%"]})})]})]},n.id))})]})]}):T.jsxs("div",{className:"bg-white rounded-xl shadow-md p-12 text-center","data-matrix-id":"src/components/StatsSection.tsx:102:6","data-matrix-name":"div","data-component-path":"src/components/StatsSection.tsx","data-component-line":"102","data-component-file":"StatsSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20rounded-xl%20shadow-md%20p-12%20text-center%22%7D",children:[T.jsx(yf,{className:"w-16 h-16 text-gray-400 mx-auto mb-4","data-matrix-id":"src/components/StatsSection.tsx:103:8","data-matrix-name":"BarChart3","data-component-path":"src/components/StatsSection.tsx","data-component-line":"103","data-component-file":"StatsSection.tsx","data-component-name":"BarChart3","data-component-content":"%7B%22className%22%3A%22w-16%20h-16%20text-gray-400%20mx-auto%20mb-4%22%7D"}),T.jsx("p",{className:"text-gray-600","data-matrix-id":"src/components/StatsSection.tsx:104:8","data-matrix-name":"p","data-component-path":"src/components/StatsSection.tsx","data-component-line":"104","data-component-file":"StatsSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-600%22%7D",children:"Nenhuma estatstica disponvel"})]})}function VL(){const{user:r}=co(),t=$p(),[e,n]=X.useState(null),[s,i]=X.useState("all"),{data:o=[],isLoading:d}=da({queryKey:["blocks",r==null?void 0:r.id],queryFn:async()=>{if(!r)return[];const{data:S,error:_}=await ee.from("flashcards").select("block_name, upload_date, subject, difficulty_level, review_count, success_count, created_at").eq("user_id",r.id).eq("status","active").order("upload_date",{ascending:!1});if(_)throw _;const E=new Map;return S.forEach(N=>{const P=N.block_name;E.has(P)||E.set(P,{block_name:N.block_name,upload_date:N.upload_date,count:0,subjects:{},totalReviews:0,totalSuccess:0,avgDifficulty:0,recentCreated:N.created_at});const R=E.get(P);if(R.count++,N.subject&&(R.subjects[N.subject]=(R.subjects[N.subject]||0)+1),R.totalReviews+=N.review_count||0,R.totalSuccess+=N.success_count||0,N.difficulty_level!==null&&N.difficulty_level!==void 0){const M=R.avgDifficulty*(R.count-1);R.avgDifficulty=(M+N.difficulty_level)/R.count}}),Array.from(E.values())},enabled:!!r}),u=_c({mutationFn:async S=>{if(!r)throw new Error("Usurio no autenticado");const{error:_}=await ee.from("flashcards").update({status:"deleted"}).eq("user_id",r.id).eq("block_name",S);if(_)throw _},onSuccess:()=>{Kt.success("Bloco deletado com sucesso!"),t.invalidateQueries({queryKey:["blocks"]}),t.invalidateQueries({queryKey:["flashcards"]}),n(null)},onError:S=>{Kt.error(`Erro ao deletar bloco: ${S.message}`)}}),p=S=>{n(S)},m=()=>{e&&u.mutate(e.block_name)},g=o.filter(S=>{if(s==="all")return!0;if(s==="recent"){const _=new Date(S.upload_date),E=new Date;return E.setDate(E.getDate()-7),_>=E}return s==="large"?S.count>20:!0}),x=o.reduce((S,_)=>S+_.count,0),v=o.length,k=v>0?Math.round(x/v):0;return d?T.jsx("div",{className:"bg-white rounded-xl shadow-md p-6","data-matrix-id":"src/components/BlocksManagement.tsx:128:6","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"128","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20rounded-xl%20shadow-md%20p-6%22%7D",children:T.jsx("div",{className:"flex items-center justify-center py-12","data-matrix-id":"src/components/BlocksManagement.tsx:129:8","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"129","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20py-12%22%7D",children:T.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600","data-matrix-id":"src/components/BlocksManagement.tsx:130:10","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"130","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22animate-spin%20rounded-full%20h-8%20w-8%20border-b-2%20border-indigo-600%22%7D"})})}):T.jsxs("div",{className:"space-y-6","data-matrix-id":"src/components/BlocksManagement.tsx:137:4","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"137","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-6%22%7D",children:[T.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-6 border border-gray-200 dark:border-gray-700 transition-colors duration-300","data-matrix-id":"src/components/BlocksManagement.tsx:138:6","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"138","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20dark%3Abg-gray-900%20rounded-xl%20shadow-md%20p-6%20border%20border-gray-200%20dark%3Aborder-gray-700%20transition-colors%20duration-300%22%7D",children:[T.jsxs("div",{className:"flex items-center justify-between mb-6","data-matrix-id":"src/components/BlocksManagement.tsx:139:8","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"139","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%20mb-6%22%7D",children:[T.jsxs("div",{"data-matrix-id":"src/components/BlocksManagement.tsx:140:10","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"140","data-component-file":"BlocksManagement.tsx","data-component-name":"div",children:[T.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white transition-colors duration-300","data-matrix-id":"src/components/BlocksManagement.tsx:141:12","data-matrix-name":"h2","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"141","data-component-file":"BlocksManagement.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%22%7D",children:" Gerenciar Blocos"}),T.jsx("p",{className:"text-gray-600 dark:text-gray-400 transition-colors duration-300","data-matrix-id":"src/components/BlocksManagement.tsx:144:12","data-matrix-name":"p","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"144","data-component-file":"BlocksManagement.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-600%20dark%3Atext-gray-400%20transition-colors%20duration-300%22%7D",children:"Organize e gerencie seus blocos de flashcards por PDF"})]}),T.jsxs("div",{className:"flex gap-6 text-center","data-matrix-id":"src/components/BlocksManagement.tsx:150:10","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"150","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-6%20text-center%22%7D",children:[T.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 rounded-lg p-4 border border-indigo-200 dark:border-indigo-800","data-matrix-id":"src/components/BlocksManagement.tsx:151:12","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"151","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-indigo-50%20dark%3Abg-indigo-900%2F20%20rounded-lg%20p-4%20border%20border-indigo-200%20dark%3Aborder-indigo-800%22%7D",children:[T.jsx("div",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400 transition-colors duration-300","data-matrix-id":"src/components/BlocksManagement.tsx:152:14","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"152","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20text-indigo-600%20dark%3Atext-indigo-400%20transition-colors%20duration-300%22%7D",children:v}),T.jsx("div",{className:"text-sm text-indigo-800 dark:text-indigo-300 transition-colors duration-300","data-matrix-id":"src/components/BlocksManagement.tsx:153:14","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"153","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-sm%20text-indigo-800%20dark%3Atext-indigo-300%20transition-colors%20duration-300%22%7D",children:"Blocos"})]}),T.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 border border-green-200 dark:border-green-800","data-matrix-id":"src/components/BlocksManagement.tsx:155:12","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"155","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-green-50%20dark%3Abg-green-900%2F20%20rounded-lg%20p-4%20border%20border-green-200%20dark%3Aborder-green-800%22%7D",children:[T.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400 transition-colors duration-300","data-matrix-id":"src/components/BlocksManagement.tsx:156:14","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"156","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20text-green-600%20dark%3Atext-green-400%20transition-colors%20duration-300%22%7D",children:x}),T.jsx("div",{className:"text-sm text-green-800 dark:text-green-300 transition-colors duration-300","data-matrix-id":"src/components/BlocksManagement.tsx:157:14","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"157","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-sm%20text-green-800%20dark%3Atext-green-300%20transition-colors%20duration-300%22%7D",children:"Flashcards"})]}),T.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 border border-purple-200 dark:border-purple-800","data-matrix-id":"src/components/BlocksManagement.tsx:159:12","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"159","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-purple-50%20dark%3Abg-purple-900%2F20%20rounded-lg%20p-4%20border%20border-purple-200%20dark%3Aborder-purple-800%22%7D",children:[T.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400 transition-colors duration-300","data-matrix-id":"src/components/BlocksManagement.tsx:160:14","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"160","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20text-purple-600%20dark%3Atext-purple-400%20transition-colors%20duration-300%22%7D",children:k}),T.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300 transition-colors duration-300","data-matrix-id":"src/components/BlocksManagement.tsx:161:14","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"161","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-sm%20text-purple-800%20dark%3Atext-purple-300%20transition-colors%20duration-300%22%7D",children:"Mdia/Bloco"})]})]})]}),o.length>0&&T.jsxs("div",{className:"mb-6","data-matrix-id":"src/components/BlocksManagement.tsx:168:10","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"168","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-6%22%7D",children:[T.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 transition-colors duration-300","data-matrix-id":"src/components/BlocksManagement.tsx:169:12","data-matrix-name":"h3","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"169","data-component-file":"BlocksManagement.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-sm%20font-medium%20text-gray-700%20dark%3Atext-gray-300%20mb-3%20transition-colors%20duration-300%22%7D",children:"Filtros Rpidos"}),T.jsxs("div",{className:"flex flex-wrap gap-2","data-matrix-id":"src/components/BlocksManagement.tsx:172:12","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"172","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20flex-wrap%20gap-2%22%7D",children:[T.jsxs("button",{onClick:()=>i("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${s==="all"?"bg-indigo-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,"data-matrix-id":"src/components/BlocksManagement.tsx:173:14","data-matrix-name":"button","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"173","data-component-file":"BlocksManagement.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[T.jsx(yf,{className:"w-4 h-4 inline mr-2","data-matrix-id":"src/components/BlocksManagement.tsx:181:16","data-matrix-name":"BarChart3","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"181","data-component-file":"BlocksManagement.tsx","data-component-name":"BarChart3","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20inline%20mr-2%22%7D"}),"Todos (",v,")"]}),T.jsxs("button",{onClick:()=>i("recent"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${s==="recent"?"bg-indigo-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,"data-matrix-id":"src/components/BlocksManagement.tsx:184:14","data-matrix-name":"button","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"184","data-component-file":"BlocksManagement.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[T.jsx(kE,{className:"w-4 h-4 inline mr-2","data-matrix-id":"src/components/BlocksManagement.tsx:192:16","data-matrix-name":"Calendar","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"192","data-component-file":"BlocksManagement.tsx","data-component-name":"Calendar","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20inline%20mr-2%22%7D"}),"Recentes (7 dias)"]}),T.jsxs("button",{onClick:()=>i("large"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${s==="large"?"bg-indigo-600 text-white shadow-md":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,"data-matrix-id":"src/components/BlocksManagement.tsx:195:14","data-matrix-name":"button","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"195","data-component-file":"BlocksManagement.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[T.jsx(Jd,{className:"w-4 h-4 inline mr-2","data-matrix-id":"src/components/BlocksManagement.tsx:203:16","data-matrix-name":"BookOpen","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"203","data-component-file":"BlocksManagement.tsx","data-component-name":"BookOpen","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%20inline%20mr-2%22%7D"}),"Grandes (>20 cards)"]})]})]}),d?T.jsx("div",{className:"flex items-center justify-center py-12","data-matrix-id":"src/components/BlocksManagement.tsx:211:10","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"211","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20py-12%22%7D",children:T.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 dark:border-indigo-400","data-matrix-id":"src/components/BlocksManagement.tsx:212:12","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"212","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22animate-spin%20rounded-full%20h-8%20w-8%20border-b-2%20border-indigo-600%20dark%3Aborder-indigo-400%22%7D"})}):g.length===0?T.jsxs("div",{className:"text-center py-12","data-matrix-id":"src/components/BlocksManagement.tsx:215:10","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"215","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-12%22%7D",children:[T.jsx(Xx,{className:"w-16 h-16 text-gray-400 dark:text-gray-500 mx-auto mb-4","data-matrix-id":"src/components/BlocksManagement.tsx:216:12","data-matrix-name":"Folder","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"216","data-component-file":"BlocksManagement.tsx","data-component-name":"Folder","data-component-content":"%7B%22className%22%3A%22w-16%20h-16%20text-gray-400%20dark%3Atext-gray-500%20mx-auto%20mb-4%22%7D"}),T.jsx("p",{className:"text-gray-600 dark:text-gray-400 transition-colors duration-300","data-matrix-id":"src/components/BlocksManagement.tsx:217:12","data-matrix-name":"p","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"217","data-component-file":"BlocksManagement.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-600%20dark%3Atext-gray-400%20transition-colors%20duration-300%22%7D",children:"Nenhum bloco encontrado"}),T.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2 transition-colors duration-300","data-matrix-id":"src/components/BlocksManagement.tsx:218:12","data-matrix-name":"p","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"218","data-component-file":"BlocksManagement.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-500%20dark%3Atext-gray-500%20mt-2%20transition-colors%20duration-300%22%7D",children:s!=="all"?"Nenhum bloco corresponde ao filtro selecionado":"Faa upload de PDFs para criar blocos de flashcards"})]}):T.jsx("div",{className:"space-y-4","data-matrix-id":"src/components/BlocksManagement.tsx:223:10","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"223","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-4%22%7D",children:g.map(S=>T.jsx("div",{className:"bg-gradient-to-r from-gray-50 to-indigo-50 dark:from-gray-800 dark:to-gray-700 rounded-xl p-6 border border-gray-200 dark:border-gray-600 hover:shadow-lg transition-all duration-300","data-matrix-id":"src/components/BlocksManagement.tsx:225:14","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"225","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-gradient-to-r%20from-gray-50%20to-indigo-50%20dark%3Afrom-gray-800%20dark%3Ato-gray-700%20rounded-xl%20p-6%20border%20border-gray-200%20dark%3Aborder-gray-600%20hover%3Ashadow-lg%20transition-all%20duration-300%22%7D",children:T.jsxs("div",{className:"flex items-start justify-between","data-matrix-id":"src/components/BlocksManagement.tsx:229:16","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"229","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-start%20justify-between%22%7D",children:[T.jsxs("div",{className:"flex items-start gap-4 flex-1","data-matrix-id":"src/components/BlocksManagement.tsx:230:18","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"230","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-start%20gap-4%20flex-1%22%7D",children:[T.jsx("div",{className:"w-12 h-12 bg-indigo-600 dark:bg-indigo-500 rounded-lg flex items-center justify-center flex-shrink-0","data-matrix-id":"src/components/BlocksManagement.tsx:231:20","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"231","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-12%20h-12%20bg-indigo-600%20dark%3Abg-indigo-500%20rounded-lg%20flex%20items-center%20justify-center%20flex-shrink-0%22%7D",children:T.jsx(Xx,{className:"w-6 h-6 text-white","data-matrix-id":"src/components/BlocksManagement.tsx:232:22","data-matrix-name":"Folder","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"232","data-component-file":"BlocksManagement.tsx","data-component-name":"Folder","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20text-white%22%7D"})}),T.jsxs("div",{className:"flex-1 min-w-0","data-matrix-id":"src/components/BlocksManagement.tsx:235:20","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"235","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%20min-w-0%22%7D",children:[T.jsxs("div",{className:"flex items-center gap-3 mb-2","data-matrix-id":"src/components/BlocksManagement.tsx:236:22","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"236","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-3%20mb-2%22%7D",children:[T.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white truncate transition-colors duration-300","data-matrix-id":"src/components/BlocksManagement.tsx:237:24","data-matrix-name":"h3","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"237","data-component-file":"BlocksManagement.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-lg%20font-semibold%20text-gray-900%20dark%3Atext-white%20truncate%20transition-colors%20duration-300%22%7D",children:S.block_name}),T.jsxs("span",{className:"px-2 py-1 bg-indigo-100 dark:bg-indigo-900/50 text-indigo-800 dark:text-indigo-300 text-xs rounded-full font-medium transition-colors duration-300","data-matrix-id":"src/components/BlocksManagement.tsx:240:24","data-matrix-name":"span","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"240","data-component-file":"BlocksManagement.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22px-2%20py-1%20bg-indigo-100%20dark%3Abg-indigo-900%2F50%20text-indigo-800%20dark%3Atext-indigo-300%20text-xs%20rounded-full%20font-medium%20transition-colors%20duration-300%22%7D",children:[S.count," cards"]})]}),T.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600 dark:text-gray-400 transition-colors duration-300","data-matrix-id":"src/components/BlocksManagement.tsx:245:22","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"245","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20flex-wrap%20items-center%20gap-4%20text-sm%20text-gray-600%20dark%3Atext-gray-400%20transition-colors%20duration-300%22%7D",children:[T.jsxs("div",{className:"flex items-center gap-1","data-matrix-id":"src/components/BlocksManagement.tsx:246:24","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"246","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[T.jsx(kE,{className:"w-4 h-4","data-matrix-id":"src/components/BlocksManagement.tsx:247:26","data-matrix-name":"Calendar","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"247","data-component-file":"BlocksManagement.tsx","data-component-name":"Calendar","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),new Date(S.upload_date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})]}),T.jsxs("div",{className:"flex items-center gap-1","data-matrix-id":"src/components/BlocksManagement.tsx:255:24","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"255","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[T.jsx(OI,{className:"w-4 h-4","data-matrix-id":"src/components/BlocksManagement.tsx:256:26","data-matrix-name":"Eye","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"256","data-component-file":"BlocksManagement.tsx","data-component-name":"Eye","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),S.totalReviews," revises"]}),S.totalReviews>0&&T.jsxs("div",{className:"flex items-center gap-1","data-matrix-id":"src/components/BlocksManagement.tsx:261:26","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"261","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-1%22%7D",children:[T.jsx(yf,{className:"w-4 h-4","data-matrix-id":"src/components/BlocksManagement.tsx:262:28","data-matrix-name":"BarChart3","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"262","data-component-file":"BlocksManagement.tsx","data-component-name":"BarChart3","data-component-content":"%7B%22className%22%3A%22w-4%20h-4%22%7D"}),Math.round(S.totalSuccess/S.totalReviews*100),"% acertos"]})]}),Object.keys(S.subjects).length>0&&T.jsx("div",{className:"mt-3","data-matrix-id":"src/components/BlocksManagement.tsx:270:24","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"270","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mt-3%22%7D",children:T.jsx("div",{className:"flex flex-wrap gap-2","data-matrix-id":"src/components/BlocksManagement.tsx:271:26","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"271","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20flex-wrap%20gap-2%22%7D",children:Object.entries(S.subjects).map(([_,E])=>T.jsxs("span",{className:"text-xs bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 px-3 py-1 rounded-full border border-gray-200 dark:border-gray-600 font-medium transition-colors duration-300","data-matrix-id":"src/components/BlocksManagement.tsx:273:30","data-matrix-name":"span","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"273","data-component-file":"BlocksManagement.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22text-xs%20bg-white%20dark%3Abg-gray-800%20text-gray-700%20dark%3Atext-gray-300%20px-3%20py-1%20rounded-full%20border%20border-gray-200%20dark%3Aborder-gray-600%20font-medium%20transition-colors%20duration-300%22%7D",children:[" ",_," (",E,")"]},_))})})]})]}),T.jsxs("div",{className:"flex items-center gap-2 ml-4","data-matrix-id":"src/components/BlocksManagement.tsx:286:18","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"286","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-2%20ml-4%22%7D",children:[T.jsx("button",{onClick:()=>{window.location.hash="#study",localStorage.setItem("studyBlockFilter",S.block_name),window.location.reload()},className:"p-2 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-100 dark:hover:bg-indigo-900/50 rounded-lg transition-all duration-200",title:"Estudar apenas este bloco","data-matrix-id":"src/components/BlocksManagement.tsx:287:20","data-matrix-name":"button","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"287","data-component-file":"BlocksManagement.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-2%20text-indigo-600%20dark%3Atext-indigo-400%20hover%3Abg-indigo-100%20dark%3Ahover%3Abg-indigo-900%2F50%20rounded-lg%20transition-all%20duration-200%22%2C%22title%22%3A%22Estudar%20apenas%20este%20bloco%22%7D",children:T.jsx(Jd,{className:"w-5 h-5","data-matrix-id":"src/components/BlocksManagement.tsx:298:22","data-matrix-name":"BookOpen","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"298","data-component-file":"BlocksManagement.tsx","data-component-name":"BookOpen","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"})}),T.jsx("button",{onClick:()=>p(S),className:"p-2 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-all duration-200",title:"Deletar bloco","data-matrix-id":"src/components/BlocksManagement.tsx:301:20","data-matrix-name":"button","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"301","data-component-file":"BlocksManagement.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22p-2%20text-red-600%20dark%3Atext-red-400%20hover%3Abg-red-100%20dark%3Ahover%3Abg-red-900%2F50%20rounded-lg%20transition-all%20duration-200%22%2C%22title%22%3A%22Deletar%20bloco%22%7D",children:T.jsx(Nw,{className:"w-5 h-5","data-matrix-id":"src/components/BlocksManagement.tsx:306:22","data-matrix-name":"Trash2","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"306","data-component-file":"BlocksManagement.tsx","data-component-name":"Trash2","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"})})]})]})},S.block_name))})]}),e&&T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50","data-matrix-id":"src/components/BlocksManagement.tsx:318:8","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"318","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22fixed%20inset-0%20bg-black%20bg-opacity-50%20flex%20items-center%20justify-center%20p-4%20z-50%22%7D",children:T.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6","data-matrix-id":"src/components/BlocksManagement.tsx:319:10","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"319","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20rounded-xl%20shadow-xl%20max-w-md%20w-full%20p-6%22%7D",children:[T.jsxs("div",{className:"flex items-start gap-4 mb-4","data-matrix-id":"src/components/BlocksManagement.tsx:320:12","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"320","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-start%20gap-4%20mb-4%22%7D",children:[T.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0","data-matrix-id":"src/components/BlocksManagement.tsx:321:14","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"321","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-12%20h-12%20bg-red-100%20rounded-full%20flex%20items-center%20justify-center%20flex-shrink-0%22%7D",children:T.jsx(TA,{className:"w-6 h-6 text-red-600","data-matrix-id":"src/components/BlocksManagement.tsx:322:16","data-matrix-name":"AlertCircle","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"322","data-component-file":"BlocksManagement.tsx","data-component-name":"AlertCircle","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20text-red-600%22%7D"})}),T.jsxs("div",{className:"flex-1","data-matrix-id":"src/components/BlocksManagement.tsx:324:14","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"324","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex-1%22%7D",children:[T.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2","data-matrix-id":"src/components/BlocksManagement.tsx:325:16","data-matrix-name":"h3","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"325","data-component-file":"BlocksManagement.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-lg%20font-bold%20text-gray-900%20mb-2%22%7D",children:"Confirmar Excluso"}),T.jsx("p",{className:"text-gray-600 text-sm mb-1","data-matrix-id":"src/components/BlocksManagement.tsx:328:16","data-matrix-name":"p","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"328","data-component-file":"BlocksManagement.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-600%20text-sm%20mb-1%22%7D",children:"Tem certeza que deseja deletar o bloco:"}),T.jsx("p",{className:"font-medium text-gray-900 mb-2","data-matrix-id":"src/components/BlocksManagement.tsx:331:16","data-matrix-name":"p","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"331","data-component-file":"BlocksManagement.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22font-medium%20text-gray-900%20mb-2%22%7D",children:e.block_name}),T.jsxs("p",{className:"text-sm text-gray-600","data-matrix-id":"src/components/BlocksManagement.tsx:334:16","data-matrix-name":"p","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"334","data-component-file":"BlocksManagement.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-600%22%7D",children:["Isso remover permanentemente ",e.count," flashcards."]})]})]}),T.jsxs("div",{className:"flex gap-3 justify-end","data-matrix-id":"src/components/BlocksManagement.tsx:340:12","data-matrix-name":"div","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"340","data-component-file":"BlocksManagement.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-3%20justify-end%22%7D",children:[T.jsx("button",{onClick:()=>n(null),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg font-medium transition-colors",disabled:u.isPending,"data-matrix-id":"src/components/BlocksManagement.tsx:341:14","data-matrix-name":"button","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"341","data-component-file":"BlocksManagement.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22px-4%20py-2%20text-gray-700%20hover%3Abg-gray-100%20rounded-lg%20font-medium%20transition-colors%22%2C%22disabled%22%3A%22%5BMemberExpression%5D%22%7D",children:"Cancelar"}),T.jsx("button",{onClick:m,disabled:u.isPending,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50","data-matrix-id":"src/components/BlocksManagement.tsx:348:14","data-matrix-name":"button","data-component-path":"src/components/BlocksManagement.tsx","data-component-line":"348","data-component-file":"BlocksManagement.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22disabled%22%3A%22%5BMemberExpression%5D%22%2C%22className%22%3A%22px-4%20py-2%20bg-red-600%20text-white%20rounded-lg%20font-medium%20hover%3Abg-red-700%20transition-colors%20disabled%3Aopacity-50%22%7D",children:u.isPending?"Deletando...":"Deletar"})]})]})})]})}const WL=["Conhecimentos Bancarios","Informatica","Portugues","Matematica","Raciocinio Logico","Conhecimentos Gerais"];function GL(){const{user:r}=co(),t=$p(),[e,n]=X.useState(null),[s,i]=X.useState(""),{data:o=[],isLoading:d}=da({queryKey:["pending-flashcards",r==null?void 0:r.id],queryFn:async()=>{if(!r)return[];const{data:g,error:x}=await ee.from("flashcards").select("*").eq("user_id",r.id).eq("status","active").eq("subject","Pendente").order("upload_date",{ascending:!1});if(x)throw x;return g},enabled:!!r}),u=_c({mutationFn:async({cardId:g,subject:x})=>{const{error:v}=await ee.from("flashcards").update({subject:x,subject_confidence:1}).eq("id",g);if(v)throw v},onSuccess:()=>{Kt.success("Flashcard classificado com sucesso!"),t.invalidateQueries({queryKey:["pending-flashcards"]}),t.invalidateQueries({queryKey:["flashcards"]}),n(null),i("")},onError:g=>{Kt.error(`Erro ao classificar: ${g.message}`)}}),p=g=>{n(g)},m=()=>{e&&s?u.mutate({cardId:e.id,subject:s}):Kt.error("Selecione uma matria")};return d?T.jsx("div",{className:"bg-white rounded-xl shadow-md p-6","data-matrix-id":"src/components/PendingSection.tsx:85:6","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"85","data-component-file":"PendingSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20rounded-xl%20shadow-md%20p-6%22%7D",children:T.jsx("div",{className:"flex items-center justify-center py-12","data-matrix-id":"src/components/PendingSection.tsx:86:8","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"86","data-component-file":"PendingSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-center%20py-12%22%7D",children:T.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600","data-matrix-id":"src/components/PendingSection.tsx:87:10","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"87","data-component-file":"PendingSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22animate-spin%20rounded-full%20h-8%20w-8%20border-b-2%20border-indigo-600%22%7D"})})}):T.jsxs("div",{className:"space-y-6","data-matrix-id":"src/components/PendingSection.tsx:94:4","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"94","data-component-file":"PendingSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-6%22%7D",children:[T.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-6 border border-gray-200 dark:border-gray-700 transition-colors duration-300","data-matrix-id":"src/components/PendingSection.tsx:95:6","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"95","data-component-file":"PendingSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20dark%3Abg-gray-900%20rounded-xl%20shadow-md%20p-6%20border%20border-gray-200%20dark%3Aborder-gray-700%20transition-colors%20duration-300%22%7D",children:[T.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4 transition-colors duration-300","data-matrix-id":"src/components/PendingSection.tsx:96:8","data-matrix-name":"h2","data-component-path":"src/components/PendingSection.tsx","data-component-line":"96","data-component-file":"PendingSection.tsx","data-component-name":"h2","data-component-content":"%7B%22className%22%3A%22text-2xl%20font-bold%20text-gray-900%20dark%3Atext-white%20mb-4%20transition-colors%20duration-300%22%7D",children:"Flashcards Pendentes"}),T.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 transition-colors duration-300","data-matrix-id":"src/components/PendingSection.tsx:99:8","data-matrix-name":"p","data-component-path":"src/components/PendingSection.tsx","data-component-line":"99","data-component-file":"PendingSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-600%20dark%3Atext-gray-400%20mb-6%20transition-colors%20duration-300%22%7D",children:"Classifique manualmente os flashcards que no foram automaticamente categorizados"}),o.length===0?T.jsxs("div",{className:"text-center py-12","data-matrix-id":"src/components/PendingSection.tsx:104:10","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"104","data-component-file":"PendingSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-center%20py-12%22%7D",children:[T.jsx(DI,{className:"w-16 h-16 text-green-500 dark:text-green-400 mx-auto mb-4","data-matrix-id":"src/components/PendingSection.tsx:105:12","data-matrix-name":"CheckCircle","data-component-path":"src/components/PendingSection.tsx","data-component-line":"105","data-component-file":"PendingSection.tsx","data-component-name":"CheckCircle","data-component-content":"%7B%22className%22%3A%22w-16%20h-16%20text-green-500%20dark%3Atext-green-400%20mx-auto%20mb-4%22%7D"}),T.jsx("p",{className:"text-gray-900 dark:text-white font-medium text-lg transition-colors duration-300","data-matrix-id":"src/components/PendingSection.tsx:106:12","data-matrix-name":"p","data-component-path":"src/components/PendingSection.tsx","data-component-line":"106","data-component-file":"PendingSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-900%20dark%3Atext-white%20font-medium%20text-lg%20transition-colors%20duration-300%22%7D",children:"Tudo classificado!"}),T.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2 transition-colors duration-300","data-matrix-id":"src/components/PendingSection.tsx:107:12","data-matrix-name":"p","data-component-path":"src/components/PendingSection.tsx","data-component-line":"107","data-component-file":"PendingSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-600%20dark%3Atext-gray-400%20mt-2%20transition-colors%20duration-300%22%7D",children:"No h flashcards pendentes de classificao"})]}):T.jsxs("div",{"data-matrix-id":"src/components/PendingSection.tsx:112:10","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"112","data-component-file":"PendingSection.tsx","data-component-name":"div",children:[T.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/50 border border-blue-200 dark:border-blue-700 rounded-lg p-4 mb-6 transition-colors duration-300","data-matrix-id":"src/components/PendingSection.tsx:113:12","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"113","data-component-file":"PendingSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-blue-50%20dark%3Abg-blue-900%2F50%20border%20border-blue-200%20dark%3Aborder-blue-700%20rounded-lg%20p-4%20mb-6%20transition-colors%20duration-300%22%7D",children:T.jsxs("div",{className:"flex items-start gap-3","data-matrix-id":"src/components/PendingSection.tsx:114:14","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"114","data-component-file":"PendingSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-start%20gap-3%22%7D",children:[T.jsx(TA,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5","data-matrix-id":"src/components/PendingSection.tsx:115:16","data-matrix-name":"AlertCircle","data-component-path":"src/components/PendingSection.tsx","data-component-line":"115","data-component-file":"PendingSection.tsx","data-component-name":"AlertCircle","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%20text-blue-600%20dark%3Atext-blue-400%20flex-shrink-0%20mt-0.5%22%7D"}),T.jsxs("div",{"data-matrix-id":"src/components/PendingSection.tsx:116:16","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"116","data-component-file":"PendingSection.tsx","data-component-name":"div",children:[T.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-200 font-medium transition-colors duration-300","data-matrix-id":"src/components/PendingSection.tsx:117:18","data-matrix-name":"p","data-component-path":"src/components/PendingSection.tsx","data-component-line":"117","data-component-file":"PendingSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-blue-900%20dark%3Atext-blue-200%20font-medium%20transition-colors%20duration-300%22%7D",children:[o.length," flashcards aguardando classificao"]}),T.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1 transition-colors duration-300","data-matrix-id":"src/components/PendingSection.tsx:120:18","data-matrix-name":"p","data-component-path":"src/components/PendingSection.tsx","data-component-line":"120","data-component-file":"PendingSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-xs%20text-blue-700%20dark%3Atext-blue-300%20mt-1%20transition-colors%20duration-300%22%7D",children:"A IA no conseguiu classificar automaticamente. Ajude a organizar manualmente."})]})]})}),T.jsx("div",{className:"space-y-3","data-matrix-id":"src/components/PendingSection.tsx:127:12","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"127","data-component-file":"PendingSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22space-y-3%22%7D",children:o.map(g=>T.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200","data-matrix-id":"src/components/PendingSection.tsx:129:16","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"129","data-component-file":"PendingSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22p-4%20bg-gray-50%20rounded-lg%20border%20border-gray-200%22%7D",children:[T.jsxs("div",{className:"mb-3","data-matrix-id":"src/components/PendingSection.tsx:133:18","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"133","data-component-file":"PendingSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-3%22%7D",children:[T.jsx("p",{className:"font-medium text-gray-900 mb-2","data-matrix-id":"src/components/PendingSection.tsx:134:20","data-matrix-name":"p","data-component-path":"src/components/PendingSection.tsx","data-component-line":"134","data-component-file":"PendingSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22font-medium%20text-gray-900%20mb-2%22%7D",children:g.front_text}),T.jsx("p",{className:"text-sm text-gray-600 line-clamp-2","data-matrix-id":"src/components/PendingSection.tsx:137:20","data-matrix-name":"p","data-component-path":"src/components/PendingSection.tsx","data-component-line":"137","data-component-file":"PendingSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-600%20line-clamp-2%22%7D",children:g.back_text})]}),T.jsxs("div",{className:"flex items-center justify-between","data-matrix-id":"src/components/PendingSection.tsx:142:18","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"142","data-component-file":"PendingSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20justify-between%22%7D",children:[T.jsxs("div",{className:"text-xs text-gray-500","data-matrix-id":"src/components/PendingSection.tsx:143:20","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"143","data-component-file":"PendingSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-xs%20text-gray-500%22%7D",children:["Bloco: ",g.block_name]}),T.jsx("button",{onClick:()=>p(g),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors","data-matrix-id":"src/components/PendingSection.tsx:146:20","data-matrix-name":"button","data-component-path":"src/components/PendingSection.tsx","data-component-line":"146","data-component-file":"PendingSection.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22px-4%20py-2%20bg-indigo-600%20text-white%20rounded-lg%20text-sm%20font-medium%20hover%3Abg-indigo-700%20transition-colors%22%7D",children:"Classificar"})]})]},g.id))})]})]}),e&&T.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50","data-matrix-id":"src/components/PendingSection.tsx:162:8","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"162","data-component-file":"PendingSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22fixed%20inset-0%20bg-black%20bg-opacity-50%20flex%20items-center%20justify-center%20p-4%20z-50%22%7D",children:T.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto","data-matrix-id":"src/components/PendingSection.tsx:163:10","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"163","data-component-file":"PendingSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20rounded-xl%20shadow-xl%20max-w-2xl%20w-full%20p-6%20max-h-%5B90vh%5D%20overflow-y-auto%22%7D",children:[T.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4","data-matrix-id":"src/components/PendingSection.tsx:164:12","data-matrix-name":"h3","data-component-path":"src/components/PendingSection.tsx","data-component-line":"164","data-component-file":"PendingSection.tsx","data-component-name":"h3","data-component-content":"%7B%22className%22%3A%22text-lg%20font-bold%20text-gray-900%20mb-4%22%7D",children:"Classificar Flashcard"}),T.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg","data-matrix-id":"src/components/PendingSection.tsx:168:12","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"168","data-component-file":"PendingSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-6%20p-4%20bg-gray-50%20rounded-lg%22%7D",children:[T.jsx("p",{className:"font-medium text-gray-900 mb-2","data-matrix-id":"src/components/PendingSection.tsx:169:14","data-matrix-name":"p","data-component-path":"src/components/PendingSection.tsx","data-component-line":"169","data-component-file":"PendingSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22font-medium%20text-gray-900%20mb-2%22%7D",children:e.front_text}),T.jsx("p",{className:"text-sm text-gray-600","data-matrix-id":"src/components/PendingSection.tsx:172:14","data-matrix-name":"p","data-component-path":"src/components/PendingSection.tsx","data-component-line":"172","data-component-file":"PendingSection.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20text-gray-600%22%7D",children:e.back_text})]}),T.jsxs("div",{className:"mb-6","data-matrix-id":"src/components/PendingSection.tsx:177:12","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"177","data-component-file":"PendingSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22mb-6%22%7D",children:[T.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2","data-matrix-id":"src/components/PendingSection.tsx:178:14","data-matrix-name":"label","data-component-path":"src/components/PendingSection.tsx","data-component-line":"178","data-component-file":"PendingSection.tsx","data-component-name":"label","data-component-content":"%7B%22className%22%3A%22block%20text-sm%20font-medium%20text-gray-700%20mb-2%22%7D",children:"Selecione a Matria"}),T.jsxs("select",{value:s,onChange:g=>i(g.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none","data-matrix-id":"src/components/PendingSection.tsx:181:14","data-matrix-name":"select","data-component-path":"src/components/PendingSection.tsx","data-component-line":"181","data-component-file":"PendingSection.tsx","data-component-name":"select","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%2C%22onChange%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22w-full%20px-4%20py-2%20border%20border-gray-300%20rounded-lg%20focus%3Aring-2%20focus%3Aring-indigo-500%20focus%3Aborder-transparent%20outline-none%22%7D",children:[T.jsx("option",{value:"","data-matrix-id":"src/components/PendingSection.tsx:186:16","data-matrix-name":"option","data-component-path":"src/components/PendingSection.tsx","data-component-line":"186","data-component-file":"PendingSection.tsx","data-component-name":"option","data-component-content":"%7B%22value%22%3A%22%22%7D",children:"Escolha uma matria..."}),WL.map(g=>T.jsx("option",{value:g,"data-matrix-id":"src/components/PendingSection.tsx:188:18","data-matrix-name":"option","data-component-path":"src/components/PendingSection.tsx","data-component-line":"188","data-component-file":"PendingSection.tsx","data-component-name":"option","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%7D",children:g},g))]})]}),T.jsxs("div",{className:"flex gap-3 justify-end","data-matrix-id":"src/components/PendingSection.tsx:195:12","data-matrix-name":"div","data-component-path":"src/components/PendingSection.tsx","data-component-line":"195","data-component-file":"PendingSection.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-3%20justify-end%22%7D",children:[T.jsx("button",{onClick:()=>{n(null),i("")},className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg font-medium transition-colors",disabled:u.isPending,"data-matrix-id":"src/components/PendingSection.tsx:196:14","data-matrix-name":"button","data-component-path":"src/components/PendingSection.tsx","data-component-line":"196","data-component-file":"PendingSection.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22px-4%20py-2%20text-gray-700%20hover%3Abg-gray-100%20rounded-lg%20font-medium%20transition-colors%22%2C%22disabled%22%3A%22%5BMemberExpression%5D%22%7D",children:"Cancelar"}),T.jsx("button",{onClick:m,disabled:u.isPending||!s,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg font-medium hover:bg-indigo-700 transition-colors disabled:opacity-50","data-matrix-id":"src/components/PendingSection.tsx:206:14","data-matrix-name":"button","data-component-path":"src/components/PendingSection.tsx","data-component-line":"206","data-component-file":"PendingSection.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22disabled%22%3A%22%5BLogicalExpression%5D%22%2C%22className%22%3A%22px-4%20py-2%20bg-indigo-600%20text-white%20rounded-lg%20font-medium%20hover%3Abg-indigo-700%20transition-colors%20disabled%3Aopacity-50%22%7D",children:u.isPending?"Salvando...":"Salvar Classificao"})]})]})})]})}const xD=X.createContext(void 0);function KL(){const r=X.useContext(xD);if(r===void 0)throw new Error("useTheme must be used within a ThemeProvider");return r}function XL({children:r,defaultTheme:t="light",storageKey:e="flashcards-theme"}){const[n,s]=X.useState(()=>typeof window<"u"&&localStorage.getItem(e)||t),[i,o]=X.useState("light");X.useEffect(()=>{const u=window.document.documentElement,p=()=>{let m="light";n==="system"&&(m=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");const g=n==="system"?m:n;o(g),u.classList.remove("light","dark"),u.classList.add(g)};if(p(),n==="system"){const m=window.matchMedia("(prefers-color-scheme: dark)");return m.addEventListener("change",p),()=>m.removeEventListener("change",p)}},[n]);const d={theme:n,setTheme:u=>{localStorage.setItem(e,u),s(u)},resolvedTheme:i};return T.jsx(xD.Provider,{value:d,"data-matrix-id":"src/components/ThemeProvider.tsx:78:4","data-matrix-name":"ThemeContext.Provider","data-component-path":"src/components/ThemeProvider.tsx","data-component-line":"78","data-component-file":"ThemeProvider.tsx","data-component-name":"ThemeContext.Provider","data-component-content":"%7B%22value%22%3A%22%5BIdentifier%5D%22%7D",children:r})}function yD(r){var t,e,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(t=0;t<s;t++)r[t]&&(e=yD(r[t]))&&(n&&(n+=" "),n+=e)}else for(e in r)r[e]&&(n&&(n+=" "),n+=e);return n}function vD(){for(var r,t,e=0,n="",s=arguments.length;e<s;e++)(r=arguments[e])&&(t=yD(r))&&(n&&(n+=" "),n+=t);return n}const LA="-",YL=r=>{const t=JL(r),{conflictingClassGroups:e,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:o=>{const d=o.split(LA);return d[0]===""&&d.length!==1&&d.shift(),bD(d,t)||QL(o)},getConflictingClassGroupIds:(o,d)=>{const u=e[o]||[];return d&&n[o]?[...u,...n[o]]:u}}},bD=(r,t)=>{var o;if(r.length===0)return t.classGroupId;const e=r[0],n=t.nextPart.get(e),s=n?bD(r.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const i=r.join(LA);return(o=t.validators.find(({validator:d})=>d(i)))==null?void 0:o.classGroupId},yC=/^\[(.+)\]$/,QL=r=>{if(yC.test(r)){const t=yC.exec(r)[1],e=t==null?void 0:t.substring(0,t.indexOf(":"));if(e)return"arbitrary.."+e}},JL=r=>{const{theme:t,prefix:e}=r,n={nextPart:new Map,validators:[]};return t4(Object.entries(r.classGroups),e).forEach(([i,o])=>{uA(o,n,i,t)}),n},uA=(r,t,e,n)=>{r.forEach(s=>{if(typeof s=="string"){const i=s===""?t:vC(t,s);i.classGroupId=e;return}if(typeof s=="function"){if(ZL(s)){uA(s(n),t,e,n);return}t.validators.push({validator:s,classGroupId:e});return}Object.entries(s).forEach(([i,o])=>{uA(o,vC(t,i),e,n)})})},vC=(r,t)=>{let e=r;return t.split(LA).forEach(n=>{e.nextPart.has(n)||e.nextPart.set(n,{nextPart:new Map,validators:[]}),e=e.nextPart.get(n)}),e},ZL=r=>r.isThemeGetter,t4=(r,t)=>t?r.map(([e,n])=>{const s=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,d])=>[t+o,d])):i);return[e,s]}):r,e4=r=>{if(r<1)return{get:()=>{},set:()=>{}};let t=0,e=new Map,n=new Map;const s=(i,o)=>{e.set(i,o),t++,t>r&&(t=0,n=e,e=new Map)};return{get(i){let o=e.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){e.has(i)?e.set(i,o):s(i,o)}}},wD="!",n4=r=>{const{separator:t,experimentalParseClassName:e}=r,n=t.length===1,s=t[0],i=t.length,o=d=>{const u=[];let p=0,m=0,g;for(let _=0;_<d.length;_++){let E=d[_];if(p===0){if(E===s&&(n||d.slice(_,_+i)===t)){u.push(d.slice(m,_)),m=_+i;continue}if(E==="/"){g=_;continue}}E==="["?p++:E==="]"&&p--}const x=u.length===0?d:d.substring(m),v=x.startsWith(wD),k=v?x.substring(1):x,S=g&&g>m?g-m:void 0;return{modifiers:u,hasImportantModifier:v,baseClassName:k,maybePostfixModifierPosition:S}};return e?d=>e({className:d,parseClassName:o}):o},s4=r=>{if(r.length<=1)return r;const t=[];let e=[];return r.forEach(n=>{n[0]==="["?(t.push(...e.sort(),n),e=[]):e.push(n)}),t.push(...e.sort()),t},i4=r=>({cache:e4(r.cacheSize),parseClassName:n4(r),...YL(r)}),a4=/\s+/,r4=(r,t)=>{const{parseClassName:e,getClassGroupId:n,getConflictingClassGroupIds:s}=t,i=[],o=r.trim().split(a4);let d="";for(let u=o.length-1;u>=0;u-=1){const p=o[u],{modifiers:m,hasImportantModifier:g,baseClassName:x,maybePostfixModifierPosition:v}=e(p);let k=!!v,S=n(k?x.substring(0,v):x);if(!S){if(!k){d=p+(d.length>0?" "+d:d);continue}if(S=n(x),!S){d=p+(d.length>0?" "+d:d);continue}k=!1}const _=s4(m).join(":"),E=g?_+wD:_,N=E+S;if(i.includes(N))continue;i.push(N);const P=s(S,k);for(let R=0;R<P.length;++R){const M=P[R];i.push(E+M)}d=p+(d.length>0?" "+d:d)}return d};function o4(){let r=0,t,e,n="";for(;r<arguments.length;)(t=arguments[r++])&&(e=SD(t))&&(n&&(n+=" "),n+=e);return n}const SD=r=>{if(typeof r=="string")return r;let t,e="";for(let n=0;n<r.length;n++)r[n]&&(t=SD(r[n]))&&(e&&(e+=" "),e+=t);return e};function l4(r,...t){let e,n,s,i=o;function o(u){const p=t.reduce((m,g)=>g(m),r());return e=i4(p),n=e.cache.get,s=e.cache.set,i=d,d(u)}function d(u){const p=n(u);if(p)return p;const m=r4(u,e);return s(u,m),m}return function(){return i(o4.apply(null,arguments))}}const Ee=r=>{const t=e=>e[r]||[];return t.isThemeGetter=!0,t},AD=/^\[(?:([a-z-]+):)?(.+)\]$/i,c4=/^\d+\/\d+$/,d4=new Set(["px","full","screen"]),u4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,h4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,p4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,m4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,f4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,cr=r=>th(r)||d4.has(r)||c4.test(r),Bo=r=>qp(r,"length",A4),th=r=>!!r&&!Number.isNaN(Number(r)),ew=r=>qp(r,"number",th),Lm=r=>!!r&&Number.isInteger(Number(r)),g4=r=>r.endsWith("%")&&th(r.slice(0,-1)),jt=r=>AD.test(r),Io=r=>u4.test(r),x4=new Set(["length","size","percentage"]),y4=r=>qp(r,x4,_D),v4=r=>qp(r,"position",_D),b4=new Set(["image","url"]),w4=r=>qp(r,b4,k4),S4=r=>qp(r,"",_4),Um=()=>!0,qp=(r,t,e)=>{const n=AD.exec(r);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):e(n[2]):!1},A4=r=>h4.test(r)&&!p4.test(r),_D=()=>!1,_4=r=>m4.test(r),k4=r=>f4.test(r),E4=()=>{const r=Ee("colors"),t=Ee("spacing"),e=Ee("blur"),n=Ee("brightness"),s=Ee("borderColor"),i=Ee("borderRadius"),o=Ee("borderSpacing"),d=Ee("borderWidth"),u=Ee("contrast"),p=Ee("grayscale"),m=Ee("hueRotate"),g=Ee("invert"),x=Ee("gap"),v=Ee("gradientColorStops"),k=Ee("gradientColorStopPositions"),S=Ee("inset"),_=Ee("margin"),E=Ee("opacity"),N=Ee("padding"),P=Ee("saturate"),R=Ee("scale"),M=Ee("sepia"),O=Ee("skew"),I=Ee("space"),H=Ee("translate"),K=()=>["auto","contain","none"],W=()=>["auto","hidden","clip","visible","scroll"],Y=()=>["auto",jt,t],q=()=>[jt,t],tt=()=>["",cr,Bo],et=()=>["auto",th,jt],lt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ot=()=>["solid","dashed","dotted","double","none"],it=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],Q=()=>["","0",jt],at=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>[th,jt];return{cacheSize:500,separator:":",theme:{colors:[Um],spacing:[cr,Bo],blur:["none","",Io,jt],brightness:j(),borderColor:[r],borderRadius:["none","","full",Io,jt],borderSpacing:q(),borderWidth:tt(),contrast:j(),grayscale:Q(),hueRotate:j(),invert:Q(),gap:q(),gradientColorStops:[r],gradientColorStopPositions:[g4,Bo],inset:Y(),margin:Y(),opacity:j(),padding:q(),saturate:j(),scale:j(),sepia:Q(),skew:j(),space:q(),translate:q()},classGroups:{aspect:[{aspect:["auto","square","video",jt]}],container:["container"],columns:[{columns:[Io]}],"break-after":[{"break-after":at()}],"break-before":[{"break-before":at()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...lt(),jt]}],overflow:[{overflow:W()}],"overflow-x":[{"overflow-x":W()}],"overflow-y":[{"overflow-y":W()}],overscroll:[{overscroll:K()}],"overscroll-x":[{"overscroll-x":K()}],"overscroll-y":[{"overscroll-y":K()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[S]}],"inset-x":[{"inset-x":[S]}],"inset-y":[{"inset-y":[S]}],start:[{start:[S]}],end:[{end:[S]}],top:[{top:[S]}],right:[{right:[S]}],bottom:[{bottom:[S]}],left:[{left:[S]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Lm,jt]}],basis:[{basis:Y()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",jt]}],grow:[{grow:Q()}],shrink:[{shrink:Q()}],order:[{order:["first","last","none",Lm,jt]}],"grid-cols":[{"grid-cols":[Um]}],"col-start-end":[{col:["auto",{span:["full",Lm,jt]},jt]}],"col-start":[{"col-start":et()}],"col-end":[{"col-end":et()}],"grid-rows":[{"grid-rows":[Um]}],"row-start-end":[{row:["auto",{span:[Lm,jt]},jt]}],"row-start":[{"row-start":et()}],"row-end":[{"row-end":et()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",jt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",jt]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[N]}],px:[{px:[N]}],py:[{py:[N]}],ps:[{ps:[N]}],pe:[{pe:[N]}],pt:[{pt:[N]}],pr:[{pr:[N]}],pb:[{pb:[N]}],pl:[{pl:[N]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",jt,t]}],"min-w":[{"min-w":[jt,t,"min","max","fit"]}],"max-w":[{"max-w":[jt,t,"none","full","min","max","fit","prose",{screen:[Io]},Io]}],h:[{h:[jt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[jt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[jt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[jt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Io,Bo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ew]}],"font-family":[{font:[Um]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",jt]}],"line-clamp":[{"line-clamp":["none",th,ew]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",cr,jt]}],"list-image":[{"list-image":["none",jt]}],"list-style-type":[{list:["none","disc","decimal",jt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ot(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",cr,Bo]}],"underline-offset":[{"underline-offset":["auto",cr,jt]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",jt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",jt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...lt(),v4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",y4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},w4]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[k]}],"gradient-via-pos":[{via:[k]}],"gradient-to-pos":[{to:[k]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[d]}],"border-w-x":[{"border-x":[d]}],"border-w-y":[{"border-y":[d]}],"border-w-s":[{"border-s":[d]}],"border-w-e":[{"border-e":[d]}],"border-w-t":[{"border-t":[d]}],"border-w-r":[{"border-r":[d]}],"border-w-b":[{"border-b":[d]}],"border-w-l":[{"border-l":[d]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...ot(),"hidden"]}],"divide-x":[{"divide-x":[d]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[d]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:ot()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...ot()]}],"outline-offset":[{"outline-offset":[cr,jt]}],"outline-w":[{outline:[cr,Bo]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:tt()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[cr,Bo]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",Io,S4]}],"shadow-color":[{shadow:[Um]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...it(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":it()}],filter:[{filter:["","none"]}],blur:[{blur:[e]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",Io,jt]}],grayscale:[{grayscale:[p]}],"hue-rotate":[{"hue-rotate":[m]}],invert:[{invert:[g]}],saturate:[{saturate:[P]}],sepia:[{sepia:[M]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[e]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[p]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[m]}],"backdrop-invert":[{"backdrop-invert":[g]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[P]}],"backdrop-sepia":[{"backdrop-sepia":[M]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",jt]}],duration:[{duration:j()}],ease:[{ease:["linear","in","out","in-out",jt]}],delay:[{delay:j()}],animate:[{animate:["none","spin","ping","pulse","bounce",jt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[Lm,jt]}],"translate-x":[{"translate-x":[H]}],"translate-y":[{"translate-y":[H]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",jt]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",jt]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":q()}],"scroll-mx":[{"scroll-mx":q()}],"scroll-my":[{"scroll-my":q()}],"scroll-ms":[{"scroll-ms":q()}],"scroll-me":[{"scroll-me":q()}],"scroll-mt":[{"scroll-mt":q()}],"scroll-mr":[{"scroll-mr":q()}],"scroll-mb":[{"scroll-mb":q()}],"scroll-ml":[{"scroll-ml":q()}],"scroll-p":[{"scroll-p":q()}],"scroll-px":[{"scroll-px":q()}],"scroll-py":[{"scroll-py":q()}],"scroll-ps":[{"scroll-ps":q()}],"scroll-pe":[{"scroll-pe":q()}],"scroll-pt":[{"scroll-pt":q()}],"scroll-pr":[{"scroll-pr":q()}],"scroll-pb":[{"scroll-pb":q()}],"scroll-pl":[{"scroll-pl":q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",jt]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[cr,Bo,ew]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},C4=l4(E4);function T4(...r){return C4(vD(r))}const bC=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,wC=vD,P4=(r,t)=>e=>{var n;if((t==null?void 0:t.variants)==null)return wC(r,e==null?void 0:e.class,e==null?void 0:e.className);const{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(p=>{const m=e==null?void 0:e[p],g=i==null?void 0:i[p];if(m===null)return null;const x=bC(m)||bC(g);return s[p][x]}),d=e&&Object.entries(e).reduce((p,m)=>{let[g,x]=m;return x===void 0||(p[g]=x),p},{}),u=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((p,m)=>{let{class:g,className:x,...v}=m;return Object.entries(v).every(k=>{let[S,_]=k;return Array.isArray(_)?_.includes({...i,...d}[S]):{...i,...d}[S]===_})?[...p,g,x]:p},[]);return wC(r,o,u,e==null?void 0:e.class,e==null?void 0:e.className)},D4=P4("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),kD=X.forwardRef(({className:r,variant:t,size:e,asChild:n=!1,...s},i)=>T.jsx("button",{className:T4(D4({variant:t,size:e,className:r})),ref:i,...s,"data-matrix-id":"src/components/ui/button.tsx:43:6","data-matrix-name":"button","data-component-path":"src/components/ui/button.tsx","data-component-line":"43","data-component-file":"button.tsx","data-component-name":"button","data-component-content":"%7B%22className%22%3A%22%5BCallExpression%5D%22%2C%22...spread%22%3Atrue%7D"}));kD.displayName="Button";function N4(){const{theme:r,setTheme:t}=KL(),[e,n]=X.useState(!1);if(X.useEffect(()=>{n(!0)},[]),!e)return null;const s=()=>{const d=["light","dark","system"],p=(d.indexOf(r)+1)%d.length;t(d[p])},i=()=>{switch(r){case"light":return T.jsx(PE,{className:"h-4 w-4","data-matrix-id":"src/components/ThemeToggle.tsx:28:15","data-matrix-name":"Sun","data-component-path":"src/components/ThemeToggle.tsx","data-component-line":"28","data-component-file":"ThemeToggle.tsx","data-component-name":"Sun","data-component-content":"%7B%22className%22%3A%22h-4%20w-4%22%7D"});case"dark":return T.jsx(LI,{className:"h-4 w-4","data-matrix-id":"src/components/ThemeToggle.tsx:30:15","data-matrix-name":"Moon","data-component-path":"src/components/ThemeToggle.tsx","data-component-line":"30","data-component-file":"ThemeToggle.tsx","data-component-name":"Moon","data-component-content":"%7B%22className%22%3A%22h-4%20w-4%22%7D"});case"system":return T.jsx(jI,{className:"h-4 w-4","data-matrix-id":"src/components/ThemeToggle.tsx:32:15","data-matrix-name":"Monitor","data-component-path":"src/components/ThemeToggle.tsx","data-component-line":"32","data-component-file":"ThemeToggle.tsx","data-component-name":"Monitor","data-component-content":"%7B%22className%22%3A%22h-4%20w-4%22%7D"});default:return T.jsx(PE,{className:"h-4 w-4","data-matrix-id":"src/components/ThemeToggle.tsx:34:15","data-matrix-name":"Sun","data-component-path":"src/components/ThemeToggle.tsx","data-component-line":"34","data-component-file":"ThemeToggle.tsx","data-component-name":"Sun","data-component-content":"%7B%22className%22%3A%22h-4%20w-4%22%7D"})}},o=()=>{switch(r){case"light":return"Modo claro";case"dark":return"Modo escuro";case"system":return"Sistema";default:return"Alternar tema"}};return T.jsxs(kD,{variant:"ghost",size:"icon",onClick:s,className:"relative h-9 w-9 rounded-lg border border-border/40 bg-background shadow-sm hover:bg-accent hover:text-accent-foreground transition-all duration-200",title:o(),"data-matrix-id":"src/components/ThemeToggle.tsx:52:4","data-matrix-name":"Button","data-component-path":"src/components/ThemeToggle.tsx","data-component-line":"52","data-component-file":"ThemeToggle.tsx","data-component-name":"Button","data-component-content":"%7B%22variant%22%3A%22ghost%22%2C%22size%22%3A%22icon%22%2C%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22relative%20h-9%20w-9%20rounded-lg%20border%20border-border%2F40%20bg-background%20shadow-sm%20hover%3Abg-accent%20hover%3Atext-accent-foreground%20transition-all%20duration-200%22%2C%22title%22%3A%22%5BCallExpression%5D%22%7D",children:[i(),T.jsx("span",{className:"sr-only","data-matrix-id":"src/components/ThemeToggle.tsx:60:6","data-matrix-name":"span","data-component-path":"src/components/ThemeToggle.tsx","data-component-line":"60","data-component-file":"ThemeToggle.tsx","data-component-name":"span","data-component-content":"%7B%22className%22%3A%22sr-only%22%7D",children:o()})]})}function R4(){const[r,t]=X.useState("upload"),{user:e,signOut:n}=co(),s=async()=>{try{await n(),Kt.success("Logout realizado com sucesso!")}catch{Kt.error("Erro ao fazer logout")}},i=[{id:"upload",label:"Upload PDF",icon:KT},{id:"flashcards",label:"Flashcards",icon:Jd},{id:"study",label:"Estudar",icon:GT},{id:"blocks",label:"Gerenciar Blocos",icon:Xx},{id:"pending",label:"Pendncias",icon:TA},{id:"stats",label:"Estatsticas",icon:yf}];return T.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-indigo-900 transition-colors duration-300","data-matrix-id":"src/pages/Dashboard.tsx:47:4","data-matrix-name":"div","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"47","data-component-file":"Dashboard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-gradient-to-br%20from-indigo-50%20via-white%20to-purple-50%20dark%3Afrom-gray-900%20dark%3Avia-gray-800%20dark%3Ato-indigo-900%20transition-colors%20duration-300%22%7D",children:[T.jsx("nav",{className:"bg-white dark:bg-gray-900 shadow-md border-b border-gray-200 dark:border-gray-700 transition-colors duration-300","data-matrix-id":"src/pages/Dashboard.tsx:48:6","data-matrix-name":"nav","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"48","data-component-file":"Dashboard.tsx","data-component-name":"nav","data-component-content":"%7B%22className%22%3A%22bg-white%20dark%3Abg-gray-900%20shadow-md%20border-b%20border-gray-200%20dark%3Aborder-gray-700%20transition-colors%20duration-300%22%7D",children:T.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8","data-matrix-id":"src/pages/Dashboard.tsx:49:8","data-matrix-name":"div","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"49","data-component-file":"Dashboard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22max-w-7xl%20mx-auto%20px-4%20sm%3Apx-6%20lg%3Apx-8%22%7D",children:T.jsxs("div",{className:"flex justify-between items-center h-16","data-matrix-id":"src/pages/Dashboard.tsx:50:10","data-matrix-name":"div","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"50","data-component-file":"Dashboard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20justify-between%20items-center%20h-16%22%7D",children:[T.jsxs("div",{className:"flex items-center gap-3","data-matrix-id":"src/pages/Dashboard.tsx:51:12","data-matrix-name":"div","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"51","data-component-file":"Dashboard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-3%22%7D",children:[T.jsx("div",{className:"w-10 h-10 bg-indigo-600 dark:bg-indigo-500 rounded-lg flex items-center justify-center transition-colors duration-300","data-matrix-id":"src/pages/Dashboard.tsx:52:14","data-matrix-name":"div","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"52","data-component-file":"Dashboard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22w-10%20h-10%20bg-indigo-600%20dark%3Abg-indigo-500%20rounded-lg%20flex%20items-center%20justify-center%20transition-colors%20duration-300%22%7D",children:T.jsx(Jd,{className:"w-6 h-6 text-white","data-matrix-id":"src/pages/Dashboard.tsx:53:16","data-matrix-name":"BookOpen","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"53","data-component-file":"Dashboard.tsx","data-component-name":"BookOpen","data-component-content":"%7B%22className%22%3A%22w-6%20h-6%20text-white%22%7D"})}),T.jsxs("div",{"data-matrix-id":"src/pages/Dashboard.tsx:55:14","data-matrix-name":"div","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"55","data-component-file":"Dashboard.tsx","data-component-name":"div",children:[T.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white transition-colors duration-300","data-matrix-id":"src/pages/Dashboard.tsx:56:16","data-matrix-name":"h1","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"56","data-component-file":"Dashboard.tsx","data-component-name":"h1","data-component-content":"%7B%22className%22%3A%22text-xl%20font-bold%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%22%7D",children:"FlashCards Pro v6.0"}),T.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 transition-colors duration-300","data-matrix-id":"src/pages/Dashboard.tsx:57:16","data-matrix-name":"p","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"57","data-component-file":"Dashboard.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-xs%20text-gray-600%20dark%3Atext-gray-400%20transition-colors%20duration-300%22%7D",children:"Concursos Bancrios"})]})]}),T.jsxs("div",{className:"flex items-center gap-4","data-matrix-id":"src/pages/Dashboard.tsx:61:12","data-matrix-name":"div","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"61","data-component-file":"Dashboard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20items-center%20gap-4%22%7D",children:[T.jsx("div",{className:"text-right","data-matrix-id":"src/pages/Dashboard.tsx:62:14","data-matrix-name":"div","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"62","data-component-file":"Dashboard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22text-right%22%7D",children:T.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white transition-colors duration-300","data-matrix-id":"src/pages/Dashboard.tsx:63:16","data-matrix-name":"p","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"63","data-component-file":"Dashboard.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-sm%20font-medium%20text-gray-900%20dark%3Atext-white%20transition-colors%20duration-300%22%7D",children:e==null?void 0:e.email})}),T.jsx(N4,{"data-matrix-id":"src/pages/Dashboard.tsx:65:14","data-matrix-name":"ThemeToggle","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"65","data-component-file":"Dashboard.tsx","data-component-name":"ThemeToggle"}),T.jsx("button",{onClick:s,className:"p-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-all duration-200",title:"Sair","data-matrix-id":"src/pages/Dashboard.tsx:66:14","data-matrix-name":"button","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"66","data-component-file":"Dashboard.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BIdentifier%5D%22%2C%22className%22%3A%22p-2%20text-gray-600%20dark%3Atext-gray-400%20hover%3Atext-gray-900%20dark%3Ahover%3Atext-white%20hover%3Abg-gray-100%20dark%3Ahover%3Abg-gray-800%20rounded-lg%20transition-all%20duration-200%22%2C%22title%22%3A%22Sair%22%7D",children:T.jsx(FI,{className:"w-5 h-5","data-matrix-id":"src/pages/Dashboard.tsx:71:16","data-matrix-name":"LogOut","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"71","data-component-file":"Dashboard.tsx","data-component-name":"LogOut","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"})})]})]})})}),T.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8","data-matrix-id":"src/pages/Dashboard.tsx:78:6","data-matrix-name":"div","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"78","data-component-file":"Dashboard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22max-w-7xl%20mx-auto%20px-4%20sm%3Apx-6%20lg%3Apx-8%20py-8%22%7D",children:T.jsxs("div",{className:"flex gap-6","data-matrix-id":"src/pages/Dashboard.tsx:79:8","data-matrix-name":"div","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"79","data-component-file":"Dashboard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20gap-6%22%7D",children:[T.jsx("aside",{className:"w-64 flex-shrink-0","data-matrix-id":"src/pages/Dashboard.tsx:80:10","data-matrix-name":"aside","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"80","data-component-file":"Dashboard.tsx","data-component-name":"aside","data-component-content":"%7B%22className%22%3A%22w-64%20flex-shrink-0%22%7D",children:T.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-md p-4 sticky top-8 border border-gray-200 dark:border-gray-700 transition-colors duration-300","data-matrix-id":"src/pages/Dashboard.tsx:81:12","data-matrix-name":"div","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"81","data-component-file":"Dashboard.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22bg-white%20dark%3Abg-gray-900%20rounded-xl%20shadow-md%20p-4%20sticky%20top-8%20border%20border-gray-200%20dark%3Aborder-gray-700%20transition-colors%20duration-300%22%7D",children:T.jsx("nav",{className:"space-y-2","data-matrix-id":"src/pages/Dashboard.tsx:82:14","data-matrix-name":"nav","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"82","data-component-file":"Dashboard.tsx","data-component-name":"nav","data-component-content":"%7B%22className%22%3A%22space-y-2%22%7D",children:i.map(o=>{const d=o.icon;return T.jsxs("button",{onClick:()=>t(o.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-all duration-200 ${r===o.id?"bg-indigo-600 dark:bg-indigo-500 text-white shadow-lg shadow-indigo-200 dark:shadow-indigo-900/50":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,"data-matrix-id":"src/pages/Dashboard.tsx:86:20","data-matrix-name":"button","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"86","data-component-file":"Dashboard.tsx","data-component-name":"button","data-component-content":"%7B%22onClick%22%3A%22%5BArrowFunctionExpression%5D%22%2C%22className%22%3A%22%5BTemplateLiteral%5D%22%7D",children:[T.jsx(d,{className:"w-5 h-5","data-matrix-id":"src/pages/Dashboard.tsx:95:22","data-matrix-name":"Icon","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"95","data-component-file":"Dashboard.tsx","data-component-name":"Icon","data-component-content":"%7B%22className%22%3A%22w-5%20h-5%22%7D"}),o.label]},o.id)})})})}),T.jsxs("main",{className:"flex-1","data-matrix-id":"src/pages/Dashboard.tsx:104:10","data-matrix-name":"main","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"104","data-component-file":"Dashboard.tsx","data-component-name":"main","data-component-content":"%7B%22className%22%3A%22flex-1%22%7D",children:[r==="upload"&&T.jsx($L,{"data-matrix-id":"src/pages/Dashboard.tsx:105:43","data-matrix-name":"UploadSection","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"105","data-component-file":"Dashboard.tsx","data-component-name":"UploadSection"}),r==="flashcards"&&T.jsx(zL,{"data-matrix-id":"src/pages/Dashboard.tsx:106:47","data-matrix-name":"FlashcardsSection","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"106","data-component-file":"Dashboard.tsx","data-component-name":"FlashcardsSection"}),r==="study"&&T.jsx(HL,{"data-matrix-id":"src/pages/Dashboard.tsx:107:42","data-matrix-name":"StudySection","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"107","data-component-file":"Dashboard.tsx","data-component-name":"StudySection"}),r==="blocks"&&T.jsx(VL,{"data-matrix-id":"src/pages/Dashboard.tsx:108:43","data-matrix-name":"BlocksManagement","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"108","data-component-file":"Dashboard.tsx","data-component-name":"BlocksManagement"}),r==="pending"&&T.jsx(GL,{"data-matrix-id":"src/pages/Dashboard.tsx:109:44","data-matrix-name":"PendingSection","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"109","data-component-file":"Dashboard.tsx","data-component-name":"PendingSection"}),r==="stats"&&T.jsx(qL,{"data-matrix-id":"src/pages/Dashboard.tsx:110:42","data-matrix-name":"StatsSection","data-component-path":"src/pages/Dashboard.tsx","data-component-line":"110","data-component-file":"Dashboard.tsx","data-component-name":"StatsSection"})]})]})})]})}function M4(){const{user:r,loading:t}=co();return t?T.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 flex items-center justify-center","data-matrix-id":"src/components/MainApp.tsx:10:6","data-matrix-name":"div","data-component-path":"src/components/MainApp.tsx","data-component-line":"10","data-component-file":"MainApp.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22min-h-screen%20bg-gradient-to-br%20from-indigo-50%20via-white%20to-purple-50%20flex%20items-center%20justify-center%22%7D",children:T.jsxs("div",{className:"flex flex-col items-center gap-4","data-matrix-id":"src/components/MainApp.tsx:11:8","data-matrix-name":"div","data-component-path":"src/components/MainApp.tsx","data-component-line":"11","data-component-file":"MainApp.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22flex%20flex-col%20items-center%20gap-4%22%7D",children:[T.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600","data-matrix-id":"src/components/MainApp.tsx:12:10","data-matrix-name":"div","data-component-path":"src/components/MainApp.tsx","data-component-line":"12","data-component-file":"MainApp.tsx","data-component-name":"div","data-component-content":"%7B%22className%22%3A%22animate-spin%20rounded-full%20h-12%20w-12%20border-b-2%20border-indigo-600%22%7D"}),T.jsx("p",{className:"text-gray-600","data-matrix-id":"src/components/MainApp.tsx:13:10","data-matrix-name":"p","data-component-path":"src/components/MainApp.tsx","data-component-line":"13","data-component-file":"MainApp.tsx","data-component-name":"p","data-component-content":"%7B%22className%22%3A%22text-gray-600%22%7D",children:"Carregando..."})]})}):r?T.jsx(R4,{"data-matrix-id":"src/components/MainApp.tsx:23:9","data-matrix-name":"Dashboard","data-component-path":"src/components/MainApp.tsx","data-component-line":"23","data-component-file":"MainApp.tsx","data-component-name":"Dashboard"}):T.jsx(qI,{"data-matrix-id":"src/components/MainApp.tsx:20:11","data-matrix-name":"AuthPage","data-component-path":"src/components/MainApp.tsx","data-component-line":"20","data-component-file":"MainApp.tsx","data-component-name":"AuthPage"})}const O4=new sM;function B4(){return T.jsx(iM,{client:O4,"data-matrix-id":"src/App.tsx:11:4","data-matrix-name":"QueryClientProvider","data-component-path":"src/App.tsx","data-component-line":"11","data-component-file":"App.tsx","data-component-name":"QueryClientProvider","data-component-content":"%7B%22client%22%3A%22%5BIdentifier%5D%22%7D",children:T.jsx(FB,{"data-matrix-id":"src/App.tsx:12:6","data-matrix-name":"AuthProvider","data-component-path":"src/App.tsx","data-component-line":"12","data-component-file":"App.tsx","data-component-name":"AuthProvider",children:T.jsxs(XL,{"data-matrix-id":"src/App.tsx:13:8","data-matrix-name":"ThemeProvider","data-component-path":"src/App.tsx","data-component-line":"13","data-component-file":"App.tsx","data-component-name":"ThemeProvider",children:[T.jsx(M4,{"data-matrix-id":"src/App.tsx:14:10","data-matrix-name":"MainApp","data-component-path":"src/App.tsx","data-component-line":"14","data-component-file":"App.tsx","data-component-name":"MainApp"}),T.jsx(kI,{position:"top-right","data-matrix-id":"src/App.tsx:15:10","data-matrix-name":"Toaster","data-component-path":"src/App.tsx","data-component-line":"15","data-component-file":"App.tsx","data-component-name":"Toaster","data-component-content":"%7B%22position%22%3A%22top-right%22%7D"})]})})})}RR.createRoot(document.getElementById("root")).render(T.jsx(X.StrictMode,{"data-matrix-id":"src/main.tsx:8:2","data-matrix-name":"StrictMode","data-component-path":"src/main.tsx","data-component-line":"8","data-component-file":"main.tsx","data-component-name":"StrictMode",children:T.jsx(OR,{children:T.jsx(B4,{"data-matrix-id":"src/main.tsx:10:6","data-matrix-name":"App","data-component-path":"src/main.tsx","data-component-line":"10","data-component-file":"main.tsx","data-component-name":"App"})})}));
